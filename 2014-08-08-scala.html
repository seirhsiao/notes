<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="Generator" content="Microsoft Word 12 (filtered)">
<title>Scala Handbook by jamesqiu</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:Latha;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Raavi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Shruti;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tunga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:3 8 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:Fixedsys;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Batang";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:BatangChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@BatangChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Gungsuh;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Gungsuh";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GungsuhChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GungsuhChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:DaunPenh;
	panose-1:1 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:DokChampa;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Euphemia;
	panose-1:2 11 5 3 4 1 2 2 1 4;}
@font-face
	{font-family:Vani;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Gulim";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GulimChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GulimChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Dotum";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:DotumChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@DotumChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Iskoola Pota";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kalinga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kartika;
	panose-1:2 2 5 3 3 4 4 6 2 3;}
@font-face
	{font-family:"Khmer UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lao UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:Meiryo;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@微软雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@MingLiU";
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"\@MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Nyala;
	panose-1:2 0 5 4 7 3 0 2 0 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Plantagenet Cherokee";
	panose-1:2 2 6 2 7 1 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:2 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:新宋体;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@新宋体";
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Shonar Bangla";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Aparajita;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gisha;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kokila;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Leelawadee;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Uighur";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:MoolBoran;
	panose-1:2 11 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:Utsaah;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Vijaya;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Andalus;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Arabic Typesetting";
	panose-1:3 2 4 2 4 4 6 3 2 3;}
@font-face
	{font-family:"Simplified Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Simplified Arabic Fixed";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Sakkal Majalla";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Traditional Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Aharoni;
	panose-1:2 1 8 3 2 1 4 3 2 3;}
@font-face
	{font-family:David;
	panose-1:2 14 5 2 6 4 1 1 1 1;}
@font-face
	{font-family:FrankRuehl;
	panose-1:2 14 5 3 6 1 1 1 1 1;}
@font-face
	{font-family:"Levenim MT";
	panose-1:2 1 5 2 6 1 1 1 1 1;}
@font-face
	{font-family:Miriam;
	panose-1:2 11 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:"Miriam Fixed";
	panose-1:2 11 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:Narkisim;
	panose-1:2 14 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:Rod;
	panose-1:2 3 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:仿宋;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@仿宋";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:楷体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@楷体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:AngsanaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Browallia New";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:BrowalliaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:CordiaUPC;
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:DilleniaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:EucrosiaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:FreesiaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:IrisUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:JasmineUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:KodchiangUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:LilyUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:DFKai-SB;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@DFKai-SB";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:方正舒体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正舒体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:方正姚体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正姚体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:隶书;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@隶书";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:华文彩云;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文彩云";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文仿宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文仿宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文琥珀;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文琥珀";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文楷体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文楷体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文隶书;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文隶书";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文宋体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文宋体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文细黑;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文细黑";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文行楷;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文行楷";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文新魏;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文新魏";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文中宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文中宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:幼圆;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@幼圆";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"ESRI MilSym 02";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US Forestry 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Default Marker";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font24";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Fire Incident NFPA";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA DNC LN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Pipeline US 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 2";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Dimensioning";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 05";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 2\.00 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 2\.00 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Weather";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Incident";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI ERS Infrastructures S1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font23";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA VMAP1&2 PT";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI North";
	panose-1:2 0 5 8 0 0 0 2 0 3;}
@font-face
	{font-family:"ESRI IGL Font25";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Crime Analysis";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 1\.95 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Business";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Arrowhead";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI ERS Operations S1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilMod 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Surveyor";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Telecom";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology USGS 95-525";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Cartography";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Analysis";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Oil\, Gas\, & Water";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA City Graphic PT";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI Transportation & Civic";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Water";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilMod 02";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI ArcPad";
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Ordnance Survey";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA DNC PT";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 03";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Environmental & Icons";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font20";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI Hazardous Materials";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA City Graphic LN";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI NIMA VMAP1&2 LN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Shields";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 1\.95 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Hydrants";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Public1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font22";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Conservation";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 04";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Electric";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Elements";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 3";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Climate & Precipitation";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 3";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Commodities";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology AGSO 1";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI IGL Font16";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US Forestry 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font21";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilRed 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Gas";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Sites";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geometric Symbols";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Sewer";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:汉仪菱心体简;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@汉仪菱心体简";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"Vera Sans YuanTi Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"\@Vera Sans YuanTi Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:汉鼎繁印篆;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@汉鼎繁印篆";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:金梅毛草書;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@金梅毛草書";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:文泉驿微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:文泉驿等宽微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿等宽微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"Fixedsys Excelsior 3\.01";
	panose-1:2 11 6 0 7 7 2 4 2 4;}
@font-face
	{font-family:"\@Fixedsys Excelsior 3\.01";
	panose-1:2 11 6 0 7 7 2 4 2 4;}
@font-face
	{font-family:"ChickenScratch AOE";
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:迷你简启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你简启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:迷你繁启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你繁启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:-;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"标题 1 Char";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h2
	{mso-style-link:"标题 2 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-14.6pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-7.65pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h4
	{mso-style-link:"标题 4 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-.65pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h5
	{mso-style-link:"标题 5 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:6.3pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h6
	{mso-style-link:"标题 6 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"标题 7 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"标题 8 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"标题 9 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";}
p.MsoIndex1, li.MsoIndex1, div.MsoIndex1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex2, li.MsoIndex2, div.MsoIndex2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex3, li.MsoIndex3, div.MsoIndex3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:20.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex4, li.MsoIndex4, div.MsoIndex4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex5, li.MsoIndex5, div.MsoIndex5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex6, li.MsoIndex6, div.MsoIndex6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:50.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex7, li.MsoIndex7, div.MsoIndex7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex8, li.MsoIndex8, div.MsoIndex8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex9, li.MsoIndex9, div.MsoIndex9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:80.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:105.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:126.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:147.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:168.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoIndexHeading, li.MsoIndexHeading, div.MsoIndexHeading
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTof, li.MsoTof, div.MsoTof
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-10.0pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToa, li.MsoToa, div.MsoToa
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoMacroText, li.MsoMacroText, div.MsoMacroText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Courier New";}
p.MsoToaHeading, li.MsoToaHeading, div.MsoToaHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"标题 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	background:navy;
	font-size:9.0pt;
	font-family:"Tahoma","sans-serif";}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:宋体;}
code
	{font-family:宋体;}
pre
	{mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:宋体;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.kw1
	{mso-style-name:kw1;}
span.br0
	{mso-style-name:br0;}
span.kw3
	{mso-style-name:kw3;}
span.nu0
	{mso-style-name:nu0;}
span.me1
	{mso-style-name:me1;}
span.kw2
	{mso-style-name:kw2;}
span.keyword
	{mso-style-name:keyword;}
span.string
	{mso-style-name:string;}
span.number
	{mso-style-name:number;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.dct-tt
	{mso-style-name:dct-tt;}
span.dct-elb
	{mso-style-name:dct-elb;}
span.comment
	{mso-style-name:comment;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-link:"HTML 预设格式";
	font-family:宋体;}
span.sy0
	{mso-style-name:sy0;}
span.st0
	{mso-style-name:st0;}
span.es0
	{mso-style-name:es0;}
span.co1
	{mso-style-name:co1;}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.Char1
	{mso-style-name:"标题 Char";
	mso-style-link:标题;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.k
	{mso-style-name:k;}
span.nn
	{mso-style-name:nn;}
span.n
	{mso-style-name:n;}
span.nc
	{mso-style-name:nc;}
span.o
	{mso-style-name:o;}
span.mi
	{mso-style-name:mi;}
span.c1
	{mso-style-name:c1;}
span.kt
	{mso-style-name:kt;}
span.s
	{mso-style-name:s;}
span.sc
	{mso-style-name:sc;}
span.1Char
	{mso-style-name:"标题 1 Char";
	mso-style-link:"标题 1";
	font-weight:bold;}
span.2Char
	{mso-style-name:"标题 2 Char";
	mso-style-link:"标题 2";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.4Char
	{mso-style-name:"标题 4 Char";
	mso-style-link:"标题 4";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.5Char
	{mso-style-name:"标题 5 Char";
	mso-style-link:"标题 5";
	font-weight:bold;}
span.6Char
	{mso-style-name:"标题 6 Char";
	mso-style-link:"标题 6";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.7Char
	{mso-style-name:"标题 7 Char";
	mso-style-link:"标题 7";
	font-weight:bold;}
span.8Char
	{mso-style-name:"标题 8 Char";
	mso-style-link:"标题 8";
	font-family:"Arial","sans-serif";}
span.9Char
	{mso-style-name:"标题 9 Char";
	mso-style-link:"标题 9";
	font-family:"Arial","sans-serif";}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 28.3pt 72.0pt 36.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body style="text-justify-trim:punctuation; padding: 20px" lang="ZH-CN" link="blue" vlink="purple">

<div class="WordSection1" style="layout-grid:15.6pt">

<p class="MsoDocumentMap" style="text-align:center" align="center"><a name="_Toc306132177"></a><a name="_Toc282027443"><b><span style="font-size:26.0pt;color:yellow" lang="EN-US">Scala 2.8<sup>+</sup> Handbook</span></b></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的向后兼容性没有</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">那么谨慎，</span><span style="font-family:Consolas" lang="EN-US">2.8+</span><span style="font-family:宋体">相对于</span><span style="font-family:Consolas" lang="EN-US">2.7</span><span style="font-family:宋体">有很大变化，本文档针对</span><span style="font-family:
Consolas" lang="EN-US">2.8+</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b><b><span style="font-family:宋体">“<i>和别人分享你的知识，那才是永恒之道</i>”——</span></b><b><span style="font-family:Consolas" lang="EN-US">somebody</span></b></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>

<p class="MsoNormal"><b><span style="font-family:宋体">前言：</span></b></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">这只是份简单的笔记，本不应敝履自珍，但手痒难耐还是写点废话在前面。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">书
籍浩如烟海，技术方面的书也汗牛充栋，可惜我们的阅读速度和理解力、记忆力太有限，往往费力学懂的知识转眼就变得非常陌生，“博闻强志、过目不忘”者毕竟
罕见。对于大部分人来说，即便昔日信手拈来的东西，时间久了也会毫无头绪。所以知识不在于曾经学过多少，而在于你记住并还能运用多少。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">“好
记性不如烂笔头”——近年来我慢慢习惯把费力学习的东西都做一个笔记，一是在学习的过程中加深印象，毕竟技术学习不同于欣赏娱乐大片和浏览娱乐新闻看个过
眼烟云；二是便于学而“时习之”，书上的东西一般是针对不同技术背景的读者，有很多作者费力用墨之处对你来说纯属废话，而他一笔带过的地方恰恰让你困惑不
已。一本读书笔记相当于你对书的“注解”。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">很好玩很有趣，但绝对不是一门简单易懂的编程语言（</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">从</span><span style="font-family:Consolas" lang="EN-US">1.0</span><span style="font-family:宋体">到</span><span style="font-family:Consolas" lang="EN-US">7.0</span><span style="font-family:宋体">，一直做</span><span style="font-family:Consolas" lang="EN-US">++</span><span style="font-family:宋体">；而</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">不光做</span><span style="font-family:Consolas" lang="EN-US">++</span><span style="font-family:宋体">，也做</span><span style="font-family:Consolas" lang="EN-US">--</span><span style="font-family:宋体">）。对于从</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">或者其他</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">走过来的人，</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">有很多“别扭”的用法，很难记清楚用正确。学</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">，
最佳的做法是把它用到日常的应用开发中，不断加深记忆。但即便你准备这么做了，手头没有一份方便的备查材料，刚开始也会步履艰难。我在使用的过程中也有这
个体会，所以才不怨其烦地把一些学来并尝试过的东西记在本文档中备查，以便之后能行云流水地“玩转”它。整个写笔记的过程，没有孤寂，而是沉浸在学习新知
的兴奋和快意中，希望这种快乐也能放大传递给更多的人。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">个人认为，对于一门编程语言使用中的查阅，大致有几个阶段：查教程（</span><span style="font-family:Consolas" lang="EN-US">tutorial</span><span style="font-family:
宋体">）——》查手册（</span><span style="font-family:Consolas" lang="EN-US">handbook</span><span style="font-family:宋体">）——》查自己写的库。这个材料，不是严格的教程，或手册，而是介于这两者间。</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">目前已经出版了几本书，这些书从各自的角度解读</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">，比如</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">作者的“</span><i><span style="font-family:Consolas" lang="EN-US">Programming
Scala</span></i><span style="font-family:宋体">”，应该是最权威的</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">书。但好书不一定好读，一是太厚，二是无趣，不如自制的来得贴心。正如数学问题要用公式表达最清楚，编程问题得用<b><u>图表和代码</u></b>表示才最清楚，这二者也是本文中使用最多的表达方式，我尽量采用简短的代码来说明问题（简短代码也能说明很多事情，广受赞誉的</span><span style="font-family:Consolas" lang="EN-US">Effective Java</span><span style="font-family:宋体">基本没有超过一页的程序代码）。能够熟练使用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的程序员，参考本笔记，应该可以自如地开始着手写</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">程序。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">若能给同样对</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">感兴趣的</span><span style="font-family:Consolas" lang="EN-US">IT</span><span style="font-family:宋体">人一些帮助，本人必感欣慰。</span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:宋体">——</span><span style="font-family:Consolas" lang="EN-US">JamesQiu</span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US"><a href="mailto:jamesqiu@sina.com" target="_blank" rel="external">jamesqiu@sina.com</a></span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US"><a href="http://qiujj.com/" target="_blank" rel="external">http://qiujj.com</a></span></p>

<p class="MsoTocHeading" style="margin-top:0cm;line-height:150%"><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">目录</span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><span class="MsoHyperlink"><a href="#_Toc306132177"><b>Scala 2.8<sup>+</sup> Handbook</b><span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">1</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132178">1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">有多</span></span>cool<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">4</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132179">1.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">速度！</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">4</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132180">1.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">易用的数据结构</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">5</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132181">1.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>OOP+FP<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">5</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132182">1.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">动态</span></span>+<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">静态</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">5</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132183">1.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DSL<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">6</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132184">1.6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">够复杂</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">6</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132185">1.7.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">够有趣</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">7</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132186">1.8.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">开发社区</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">7</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132187">2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>lang<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">7</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132188">2.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">和</span></span>Java<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">的异同</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">7</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132189">2.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">变量</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">8</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132190">2.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">基本类型</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">10</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132191">2.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BigInt<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">12</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132192">2.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">字符串</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">12</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132193">2.6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Null,
None, Nil, Nothing<span style="color:windowtext;display:none;text-decoration:
none">. </span><span style="color:windowtext;display:none;text-decoration:none">13</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132194">2.7.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>==<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">和</span></span>eq<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">14</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132195">2.8.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Option[T]<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">14</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132196">2.9.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">区分</span></span>&lt;-,=&gt;,-&gt;<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">16</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132197"><span lang="DE">2.10.</span><span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="DE">match..case(switch)</span><span style="color:windowtext;display:none;
text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">16</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132198">2.11.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>try..catch..finally<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">19</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132199">2.12.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>require<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">19</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132200">2.13.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>main<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">方法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">19</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132201">2.14.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>package,
import<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">20</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132202">2.15.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if..else<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">21</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132203">2.16.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">循环操作</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">21</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132204">2.17.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">操作符重载</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">27</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132205">2.18.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">系统定义</span></span>scala._<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">27</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132206">2.19.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>implicit<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">隐式转换</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">27</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132207">2.20.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>type<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">做</span></span>alias<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">29</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132208">2.21.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">泛型</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">30</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132209">2.22.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">枚举</span></span>Enum<span style="color:windowtext;display:none;text-decoration:none">.. </span><span style="color:windowtext;display:none;text-decoration:none">32</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132210">3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>FP<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">32</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132211">3.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">32</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132212">3.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数式编程</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">40</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132213">4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>OOP<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">44</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132214">4.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">类</span></span>class<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">44</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132215">4.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>trait<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">超级接口</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">49</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132216">4.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">协变和逆变</span></span>(co-|contra-)variance<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">50</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132217">5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>util<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">包</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">52</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132218">5.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">架构</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">52</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132219">5.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">集合</span></span>Array,List,Tuple<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">54</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132220">5.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Map<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">65</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132221">5.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Set<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">68</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132222">5.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Iterator<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">69</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132223">5.6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Paralllel
collection<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">69</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132224">6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>io<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">70</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132225">6.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">文件</span></span>I/O<span style="color:windowtext;display:none;text-decoration:none">.. </span><span style="color:windowtext;display:none;text-decoration:none">70</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132226">6.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">网络</span></span>I/O<span style="color:windowtext;display:none;text-decoration:none">.. </span><span style="color:windowtext;display:none;text-decoration:none">71</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132227">7.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">71</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132228">7.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">模型</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">72</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132229">7.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">多核计算</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">72</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132230">7.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Actor<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">用法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">73</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132231">7.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">方式</span></span>1<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">：接受</span></span>receive<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">73</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132232">7.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">方式</span></span>2<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">：接受</span></span>react,
loop<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">74</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132233">7.6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>REPL<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">接受消息</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">75</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132234">7.7.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">最佳实践</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">75</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132235">7.8.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">不同</span></span>jvm<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">间的消息访问</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">77</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132236">7.9.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>STM<span style="color:windowtext;display:none;text-decoration:none">.. </span><span style="color:windowtext;display:none;text-decoration:none">78</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132237">8.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>misc<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">79</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132238">8.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>xml<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">79</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132239">8.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>json<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">80</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132240">8.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Configgy<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">81</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132241">8.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">正则表达式</span></span>regex<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">81</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132242">8.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GUI<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">83</span></a></span></span></p>

<p class="MsoToc1" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132243">9.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">附录</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">83</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132244">9.1.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>stackoverflow<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">的</span></span>scala<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">教程</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">83</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132245">9.2.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ProjectEuler<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">84</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132246">9.3.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">问答</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">84</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132247">9.4.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>rosettacode<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">84</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132248">9.5.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">编译、</span></span>mvn<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span>SBT<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">84</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132249">9.6.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">水平划分</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">85</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132250">9.7.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">适合的领域</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">86</span></a></span></span></p>

<p class="MsoToc2" style="line-height:11.0pt"><span class="MsoHyperlink"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US"><a href="#_Toc306132251">9.8.<span style="color:windowtext;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Twitter<span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">的</span></span>Scala
School<span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none">86</span></a></span></span></p>

<p class="MsoNormal" style="line-height:10.0pt"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-right:5.25pt;text-align:right;
text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc306132178"></a><a name="_Ref306131900"></a><a name="_Ref306131894"></a><a name="_Toc282027446"></a><a name="_Toc281659929"><span style="font-size:10.5pt;line-height:240%;font-family:Consolas;
font-weight:normal" lang="EN-US">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Scala</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">有多</span></u><u><span style="font-family:Consolas" lang="EN-US">cool</span></u><a name="_Toc282027447"></a></h1>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">“Put productivity &amp; creativity back in the
hands of developers”</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span class="apple-style-span"><span style="font-size:11.5pt;font-family:
Consolas;color:black" lang="EN-US">Scala is a tour de force of language design.</span></span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132179"></a><a name="_Toc282027448"></a><a name="_Toc281659930"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">速度！</span></u></a></h2>

<p class="MsoNormal"><a name="_Toc282027449"><b><span style="font-family:Consolas" lang="EN-US">Java</span></b></a><b><span style="font-family:
宋体">的运行速度</span></b></p>

<p class="MsoNormal"><span style="font-family:宋体">——基于</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:宋体">，和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">运行速度相当。看看</span><span style="font-family:Consolas" lang="EN-US">Ruby</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Perl</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">对大项目运行效率的无奈，就知道有个好的编译器（</span><span style="font-family:Consolas" lang="EN-US">Scalac</span><span style="font-family:宋体">）和运行时（</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:
宋体">）是多么美好。</span></p>

<p class="MsoNormal"><a name="_Toc282027450"><b><span style="font-family:Consolas" lang="EN-US">Python/Ruby</span></b></a><b><span style="font-family:宋体">的编程速度</span></b></p>

<p class="MsoNormal"><span style="font-family:宋体">——有更多的内建库和数据结构，编程就更快，</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">在完全继承</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">.NET</span><span style="font-family:宋体">的标准库的基础上，还扩展了更丰富有用的函数库。</span><span style="font-family:
宋体">看看</span><span style="font-family:Consolas" lang="EN-US">C++</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">D</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Go</span><span style="font-family:宋体">等语言</span><span style="font-family:宋体">库的发展情况（不是匮乏就是混乱），就知道从头创建如</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">.NET</span><span style="font-family:宋体">这般庞大全面的类库并非易事；</span></p>

<p class="MsoNormal"><span style="font-family:宋体">类库和运行速度有关系吗？——很大程度上有，众多专家已经在类库中准备了充分优化的稳定算法，</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">对</span><span style="font-family:Consolas" lang="EN-US">Java Collection</span><span style="font-family:宋体">算法进行直接包装或者直接调用，如果没有丰富的类库，你在项目周期内免不了摘抄一些不一定靠谱的算法和功能代码，这些代码极有可能在运行时给你带来麻烦。使用类库算法，不用担忧自造轮子的运行效率。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">是静态语言，</span><span style="font-family:Consolas" lang="EN-US">Scalac</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Javac</span><span style="font-family:宋体">是同一作者，编译成</span><span style="font-family:
Consolas" lang="EN-US">.class</span><span style="font-family:宋体">后运行于</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:
宋体">平台，近</span><span style="font-family:Consolas" lang="EN-US">20</span><span style="font-family:宋体">年那么多大公司投入进行的优化也不是白搭。对于大部分的应用来说，使用</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">不用再顾虑运行速度，它可能不是最快，但至少逼近</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">，而不像</span><span style="font-family:Consolas" lang="EN-US">Groovy</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">JRuby</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Jython</span><span style="font-family:宋体">那般与</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">有高达数十倍的效率差距。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132180"></a><a name="_Toc282027451"></a><a name="_Toc281659931"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">易用的数据结构</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List-Map-Tuple</span><span style="font-family:宋体">及其丰富特性支持让你解决数据结构问题时游刃有余。</span></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">List(1,31,4,3,53,4,234) <span style="background:yellow">filter</span> (10&lt;) <span style="background:yellow">filter</span> (100&gt;)&nbsp; <span style="color:#5B6E6E">// List(31, 53)</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">val (a,b) = List(1, 31,4,3,53,4,234) <span style="background:yellow">partition</span> (10&gt;) <span style="color:#5B6E6E">// a=List(1,4,3,4), b=List(31,53,234)</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">def info(p:Person) = (name, age, email) <span style="color:#5B6E6E">// info._1, info._2, info._3</span></span></pre>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132181"></a><a name="_Toc282027452"></a><a name="_Toc281659932"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">OOP+FP</span></u></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">适当地选用</span><span style="font-family:Consolas" lang="EN-US">OOP</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">，能够使表达相对另一种更加清晰准确。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">实际可见的生产力在于：一个应用中的部分代码尤其是高知识凝聚的代码如数学函数和设计模式，一般来说不会自己编写，而是会来自于现成的</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">库，或者其他语言，或者伪代码。我们可以很容易地把过程语言、面向对象语言、函数式语言中的代码“翻译”成</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">代码。试想如果我们要把</span><span style="font-family:Consolas" lang="EN-US">Haskell</span><span style="font-family:
宋体">或者</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">的某个尾递归算法翻译成</span><span style="font-family:
Consolas" lang="EN-US">Java</span><span style="font-family:宋体">代码，还得多花点时间；而要把</span><span style="font-family:Consolas" lang="EN-US">C++</span><span style="font-family:
宋体">的代码翻译成</span><span style="font-family:Consolas" lang="EN-US">Hashkell</span><span style="font-family:宋体">，同样也不简单。</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的混血性给我们的实际使用提供了便利。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">语言特色能够塑造编程者的思维：</span><span style="font-family:Consolas" lang="EN-US"> C++</span><span style="font-family:
宋体">也能使用抽象基类设计多重继承，但</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的接口引导你走得更远；</span><span style="font-family:
Consolas" lang="EN-US">Java</span><span style="font-family:宋体">也能设计类型安全的静态方法</span><span style="font-family:Consolas" lang="EN-US">(final static)</span><span style="font-family:宋体">，但</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">鼓励你这样做并逐步从</span><span style="font-family:
Consolas" lang="EN-US">OOP</span><span style="font-family:宋体">到达</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">的彼岸，而且来去自如。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132182"></a><a name="_Toc282027453"></a><a name="_Toc281659933"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">动态</span></u></a><u><span style="font-family:Consolas" lang="EN-US">+</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">静态</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">虽然是一门彻头彻底的静态语言，但又具备了现代动态语言的很多方便和灵活：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">不需要冗余的类型声明</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">可以在已有类上增加新方法（</span><span style="font-family:Consolas" lang="EN-US">implicit</span><span style="font-family:
宋体">转换和</span><span style="font-family:Consolas" lang="EN-US">Dynamic trait</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">可以把不继承共同父类的不同类型对象传到方法中</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">可以做静态语言的</span><span style="font-family:Consolas" lang="EN-US">Refactoring</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">不用象动态语言那样测试代码比业务代码还多</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">代码自动完成（</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">IDE</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">编译静态语言的性能</span><span style="font-family:Consolas"> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Read-Eval-Print
Loop</span><span style="font-family:宋体">交互解释器（注：</span><span style="font-family:Consolas" lang="EN-US">Linux</span><span style="font-family:宋体">下的用户体验远好于</span><span style="font-family:Consolas" lang="EN-US">Windows</span><span style="font-family:
宋体">下）</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132183"></a><a name="_Toc282027454"></a><a name="_Toc281659934"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">DSL</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">可以把</span><span style="font-family:Consolas" lang="EN-US">xml/html</span><span style="font-family:宋体">处理、数学公式表达、</span><span style="font-family:
Consolas" lang="EN-US">SQL</span><span style="font-family:宋体">查询等包装的更优雅、更合理，为使用者提供更好的</span><span style="font-family:Consolas" lang="EN-US">API</span><span style="font-family:
宋体">。这也使</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的程序也更可读，从而更易于维护。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132184"></a><a name="_Toc282027455"></a><a name="_Toc281659935"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">够复杂</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">不同的思考模式：</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">是先写后想，</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">是先想后写（其实</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">大都如此）。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">相比于</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">，可能达不到</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">倍的代码精简；但读</span><span style="font-family:
Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">代码的效率一般只有</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">1/10</span><span style="font-family:宋体">——可见</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">是一门没有多少特例的简单语言，而</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">则不然。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">你不要指望把</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">作为初学者的第一门编程语言，这门语言甚至不是初级程序员能够掌控的——换句话说，能够读懂和写</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">代码，说明你是一个不折不扣的资深程序员，或者更准确一点，是资深</span><span style="font-family:
Consolas" lang="EN-US">Java</span><span style="font-family:宋体">程序员。</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image001.jpg" height="216" width="311"></span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image002.jpg" height="219" width="285"></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image003.jpg" height="206" width="300"></span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image004.jpg" height="206" width="274"></span></p>
  <p class="MsoNormal" style="margin-left:18.0pt;text-indent:-18.0pt"><span style="font-family:Wingdings" lang="EN-US">&#240;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span lang="EN-US"><img src="/static/images/scala/image005.jpg" height="75" width="139">&nbsp;<img src="/static/images/scala/image006.jpg" height="97" width="122"></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">简单的</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">（</span><span class="apple-style-span"><span style="font-size:10.0pt;font-family:
  &quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Morse</span></span><span class="apple-converted-space"><span style="font-size:10.0pt;font-family:宋体;
  color:black">码，定型的玩具车）</span></span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">复杂的</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">（智能机，乐高积木）</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132185"></a><a name="_Toc282027456"></a><a name="_Toc281659936"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">够有趣</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">还看这句话：</span><span style="font-family:Consolas" lang="EN-US">“Put <b><u>productivity &amp; creativity</u></b>
back in the hands of developers”</span><span style="font-family:宋体">。其实不仅限于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">，对于所有的编程语言来说，一门语言是否“好玩”有趣，能否激起创作欲，才是最关键的，这比语言风格、运行速度、工具支持、社区文化都来得重要。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">回想我使用过的语言，</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">C++</span><span style="font-family:
宋体">，只有在学习“图形学”课程做作业的时候给我“好玩”和编程过瘾的感觉；</span><span style="font-family:
Consolas" lang="EN-US">VB</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Delphi</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Lotus Script/Formular</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">，重来没有给过我“好玩”的感觉，而</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">是在之前很长一段时间内让我觉得最“好玩”的语言，用它编游戏、做模式识别的作业、做产品……，乐在其中。但是</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">也许久没有再给我这种编程过瘾的感觉了。之前发现</span><span style="font-family:Consolas" lang="EN-US">Groovy</span><span style="font-family:宋体">的时候，我以为又找到一门好玩的语言了，但我一段时间使用之后，发现不是我的菜（</span><span style="font-family:Consolas" lang="EN-US">Perl</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Ruby</span><span style="font-family:宋体">也如此）；我不是说那些我不觉得好玩的语言不好，有其他很多人觉得他们非常“好玩”，并且用它们创建了无数杀手级的、伟大的、有用的程序。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">有些人对一门语言会玩一辈子，就像</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Haskell</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Smalltalk</span><span style="font-family:宋体">的拥趸；而有些人会不断寻找下一个玩意儿，就像原来玩</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的一些人发现更好玩的</span><span style="font-family:Consolas" lang="EN-US">Ruby</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">之后，倒戈狂喷</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">，力挺后者；</span><span style="font-family:Consolas" lang="EN-US">Groovy/Grails</span><span style="font-family:宋体">的玩家在很短的时间里面，写了无数的扩展和</span><span style="font-family:Consolas" lang="EN-US">Plugin</span><span style="font-family:宋体">应用；学习</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">，能很多好玩的地方，能用它有激情地去写一些振奋人心的应用出来！</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132186"></a><a name="_Toc282027457"></a><a name="_Toc281659937"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">1.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">开发社区</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">开发</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">用户社区气氛良好，基本都是资深开发者以及有一定经验的用户，不会碰到太弱智的事（提问、争吵），除了语言和工具开源免费，最权威和最好的书也都是免费的（包括</span><span style="font-family:Consolas" lang="EN-US">Lift</span><span style="font-family:
宋体">社区）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc306132187"></a><a name="_Toc282027458"></a><a name="_Toc281659938"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">lang</span></u></a><u><span style="font-family:Consolas" lang="EN-US">  </span></u></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132188"></a><a name="_Toc282027459"></a><a name="_Toc281659939"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Java</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的异同</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027460"></a><a name="_Toc281659940"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">语法</span></u></a></h3>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Java++</span></b><b><span style="font-family:宋体">：增加的语法</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Java--</span></b><b><span style="font-family:宋体">：删减的语法</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">纯</span><span style="font-family:Consolas" lang="EN-US">OO</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">静态成员</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">操作符重载</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">原生数据类型</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">closure</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">break</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">continue</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">trait</span><span style="font-family:宋体">进行</span><span style="font-family:Consolas" lang="EN-US">mixin</span><span style="font-family:
  宋体">组合</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">接口</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">existential
  type</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">_</span><span style="font-family:宋体">）</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">通配符</span><span style="font-family:Consolas" lang="EN-US">List&lt;<span style="background:yellow">?</span>&gt;,
  import pkg.<span style="background:yellow">*</span>;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">抽象类型</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">type T</span><span style="font-family:
  宋体">）</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">原始类型</span><span style="font-family:Consolas" lang="EN-US"> class C1&lt;<span style="background:yellow">T</span>&gt;
  {...}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">模式匹配</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">enum</span><span style="font-family:宋体">枚举</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">existential
type</span><span style="font-family:宋体">——和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">互操作时进行对应</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Iterator&lt;?
extends Component&gt;&nbsp; --&gt;&nbsp; Iterator[T] { type T &lt;: Component }</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">Iterator[_]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027461"></a><a name="_Toc281659941"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">库</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">以下功能通过库的形式提供：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">assert</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">enum</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">property</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">event</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">actor</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">resource control</span><span style="font-family:宋体">（自动释放）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">using</span>[T
&lt;: { def close() }] (res:T)(block:T=&gt;Unit) = {</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; try { block(res) } finally {
if(res!=null) res.close }}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">using</span><span style="font-family:Consolas" lang="EN-US"> (new BufferedReader(new
FileReader(path))) { f=&gt; println(f.readLine) }</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">不用每次使用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">中的</span><span style="font-family:Consolas" lang="EN-US">finally</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val f = new BufferedReader(new
FileReader(path)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">try { println(f.readLine) } finally {
if (f!=null) f.close }</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">query</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132189"></a><a name="_Toc282027462"></a><a name="_Toc281659942"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变量</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027463"></a><a name="_Toc281659943"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.2.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">保留字</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">abstract &nbsp; case
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch &nbsp;&nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp;&nbsp; def</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">do&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; extends &nbsp;&nbsp; false &nbsp;&nbsp;&nbsp;&nbsp; final</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">finally &nbsp;&nbsp; for
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:yellow">implicit</span> &nbsp; import</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">match &nbsp;&nbsp;&nbsp;&nbsp; new
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; null &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; override</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">package &nbsp;&nbsp; private
&nbsp;&nbsp; protected  <span style="background:yellow">requires</span> &nbsp; return</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">sealed</span><span style="font-family:Consolas" lang="EN-US"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super
&nbsp;&nbsp;&nbsp;&nbsp; this &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw &nbsp;&nbsp;&nbsp;&nbsp; trait</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">try &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">while &nbsp;&nbsp;&nbsp;&nbsp; with
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:lime">yield</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">_ &nbsp;&nbsp;&nbsp;&nbsp; :
&nbsp;&nbsp;&nbsp;&nbsp; = &nbsp;&nbsp;&nbsp;&nbsp; =&gt; &nbsp;&nbsp;&nbsp; &lt;-
&nbsp;&nbsp;&nbsp; <span style="background:yellow">&lt;:</span> &nbsp;&nbsp;&nbsp; &lt;%
&nbsp;&nbsp;&nbsp; <span style="background:yellow">&gt;:</span> &nbsp;&nbsp;&nbsp; <span style="background:yellow">#</span> &nbsp;&nbsp;&nbsp;&nbsp; <span style="background:yellow">@</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">调用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的方法时，会碰到有</span><span style="font-family:
Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的保留字，如</span><span style="font-family:Consolas" lang="EN-US">Thread.<span style="background:lime">yield</span>()</span></p>

<p class="MsoNormal"><span style="font-family:宋体">这在</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中是非法的，专门有个解决办法，写成：</span><span style="font-family:Consolas" lang="EN-US"> Thread.<span style="background:lime">`yield`</span>()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：<b><u>没有</u></b></span><span style="font-family:Consolas" lang="EN-US">break</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">continue</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027464"></a><a name="_Toc281659944"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.2.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变量标识</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">这些标识在</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">中是非法的，在</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">中是合法的，可以当作函数名使用，使接口更加</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val empty_? =
true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val + =
"hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val `yield` =
10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val ** =
"power"</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027465"></a><a name="_Toc281659945"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.2.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变量定义</span></u></a></h3>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">2.2.3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">val, var</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var </span><span style="font-family:宋体">可变，可重新赋值，赋值为</span><span style="font-family:
Consolas" lang="EN-US">"_"</span><span style="font-family:宋体">表示缺省值</span><span style="font-family:Consolas" lang="EN-US">(0, false, null)</span><span style="font-family:宋体">，例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">var d:Double = _ // d = 0.0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">var i:Int = _ // i = 0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">var s:String = _ // s = null</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">var t:T = _&nbsp; // </span><span style="font-family:宋体">泛型</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">对应的默认值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val </span><span style="font-family:宋体">不可变，相当于</span><span style="font-family:Consolas" lang="EN-US">const/final</span><span style="font-family:宋体">，但如果</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">为数组或者</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">的元素可以赋值；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val pi = 3. //
</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">3.0d</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val pi = 3.f
// </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">3.0f</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">提示：向函数式风格推进的一个方式，就是尝试<b><u>不用</u></b>任何</span><span style="font-family:Consolas" lang="EN-US">var</span><span style="font-family:
宋体">来定义变量。</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">2.2.3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">花样定义</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">一样方便的赋值方式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x,y = 0 //
</span><span style="font-family:宋体">赋同一初始值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val (x,y) =
(10, "hello") // </span><span style="font-family:宋体">同时定义多个变量，注意：</span><span style="font-family:Consolas" lang="EN-US">val x,y=10,"hello" </span><span style="font-family:宋体">是<b><u>错误</u></b>的</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更花：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x::y =
List(1,2,3,4)&nbsp; // x = 1, y = List(2,3,4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
List(a,b,c) = List(1,2,3) // a = 1, b = 2, c = 3</span></p>

<p class="MsoNormal"><span style="font-family:宋体">进一步花样：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val Array(<span style="background:lime">a</span>, <span style="background:aqua">b</span>, <span style="background:silver">_, _,</span> <span style="background:yellow">c</span>
<span style="background:yellow">@</span> <span style="background:yellow">_*</span>)
= Array(<span class="number"><span style="background:lime">1</span></span>, <span class="number"><span style="background:aqua">2</span></span>, <span class="number"><span style="background:silver">3</span></span><span style="background:silver">, <span class="number">4</span>,</span> <span class="number"><span style="background:yellow">5</span></span><span style="background:yellow">, <span class="number">6</span>, <span class="number">7</span></span>)&nbsp;
// </span><span style="font-family:宋体">也可以用</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Seq</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a // 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">b // 2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c // Array(5,
6, 7), _*</span><span style="font-family:宋体">匹配</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">个到多个</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用正则表达式定义：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val regex =
"(\\d+)/(\\d+)/(\\d+)".r</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
regex(year, month, day) = "2010/1/13"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
year: String = 2010</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
month: String = 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
day: String = 13</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">2.2.3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">lazy, val, def</span></u><u><span style="font-size:10.5pt;
line-height:156%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的区别</span></u></h4>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">定义时就一次求值完成，保持不变</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val f =
  10+20 // 30&nbsp; </span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">lazy</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">定义时不求值，第一次使用时完成求值，保持不变</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">lazy f =
  10+20 // &lt;lazy&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f // 30</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">定义时不求值，每次使用时都重新求值</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f =
  10+20 // 30</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def t =
  System.</span><span lang="EN-US"> </span><span style="font-family:
  Consolas" lang="EN-US">currentTimeMillis // </span><span style="font-family:宋体">每次不一样</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
val f1 = System.currentTimeMillis</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f1: Long =
1279682740376&nbsp; &nbsp;&nbsp;// </span><span style="font-family:宋体">马上求值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
f1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res94: Long =
1279682740376 // </span><span style="font-family:宋体">之后保持不变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
lazy val f2 = System.currentTimeMillis</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f2: Long =
&lt;lazy&gt;&nbsp; // </span><span style="font-family:宋体">定义时不求值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
System.currentTimeMillis</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res95: Long =
127968276<span style="background:yellow">4297</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
f2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res96: Long =
127968276<span style="background:yellow">6545</span> // </span><span style="font-family:宋体">第一次使用时求值，注意：</span><span style="font-family:
Consolas" lang="EN-US">6545 &gt; 4297</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
f2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res97: Long =
127968276<span style="background:yellow">6545</span> // </span><span style="font-family:宋体">之后保持不变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
def f3 = System.currentTimeMillis</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f3: Long</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
f3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res98: Long =
127968278<span style="background:yellow">4478</span> // </span><span style="font-family:宋体">每次求值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
f3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res99: Long =
127968278<span style="background:yellow">5352</span> // </span><span style="font-family:宋体">每次求值</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132190"></a><a name="_Toc282027466"></a><a name="_Toc281659946"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本类型</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">尽量使用大写形式：</span><span style="font-family:Consolas" lang="EN-US"> Int, Long, Double, Byte, Short, Char,
Float, Double, Boolean</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译时</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">自动对应到</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">原始类型，提高运行效率。</span><span style="font-family:Consolas" lang="EN-US">Unit</span><span style="font-family:宋体">对应</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">void</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US"> asInstanseOf[T]</span><span style="font-family:
宋体">方法来强制转换类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def i =
10.asInstanceOf[Double] // i: Double = 10.0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List('A','B','C').map(c=&gt;(c+32).asInstanceOf[Char])
// List('a','b','c')</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">isInstanceOf[T]</span><span style="font-family:
宋体">方法来判断类型：</span><span style="font-family:Consolas"> </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val b =
10.isInstanceOf[Int] // true</span></p>

<p class="MsoNormal"><span style="font-family:宋体">而在</span><span style="font-family:Consolas" lang="EN-US">match ... case </span><span style="font-family:
宋体">中可以直接判断而不用此方法。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">Any</span><span style="font-family:宋体">统一了原生类型和引用类型。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/scala/image007.jpg" height="323" width="707"></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027467"></a><a name="_Toc281659947"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.3.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Int</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-3 <span style="background:yellow">abs</span> // 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-3 <span style="background:yellow">max</span> -2 // -2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-3 <span style="background:yellow">min</span> -2 // -3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.4 <span style="background:yellow">round</span> // 1 </span><span style="font-family:
宋体">四舍五入</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.6 <span style="background:yellow">round</span> // 2 </span><span style="font-family:
宋体">四舍五入</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.1 <span style="background:yellow">ceil</span> // 2.0 </span><span style="font-family:
宋体">天花板</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.1 <span style="background:yellow">floor</span> // 1.0 </span><span style="font-family:
宋体">地板</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">无</span><span style="font-family:Consolas" lang="EN-US">++</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">--</span><span style="font-family:宋体">操作，但可以</span><span style="font-family:Consolas" lang="EN-US">+=, -=, </span><span style="font-family:
宋体">如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var i = 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">i++ &nbsp;// </span><span style="font-family:宋体;color:red">报错</span><span style="font-family:宋体">，无此操作</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">i+=1 // 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">i--&nbsp; // </span><span style="font-family:宋体;color:red">报错</span><span style="font-family:宋体">，无此操作</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">i-=1 // 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
even(n:Int) = 0==(n &amp; 1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def odd(n:Int)
= !even(n)</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027468"></a><a name="_Toc281659948"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.3.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Char</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">可以转化为</span><span style="font-family:Consolas" lang="EN-US">List[Char]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">上做循环，其实就是对</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:
宋体">中的每一个</span><span style="font-family:Consolas" lang="EN-US">Char</span><span style="font-family:宋体">做操作，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"12345"
map (toInt) // (49,50,51,52,53)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"jamesqiu"
max // 'u'</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"jamesqiu"
min // 'a'</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">('a' to 'f')
map (_.toString*3) // (aaa, bbb, ccc, ddd, eee, fff)</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132191"></a><a name="_Toc282027469"></a><a name="_Toc281659949"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">BigInt</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">可以表示很大的整数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">BigInt(10000000000000000000000000)
// </span><span style="font-family:宋体">报错</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">BigInt("10000000000000000000000000")
// scala.math.BigInt = 10000000000000000000000000</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">def&nbsp; fac(n:Int):BigInt = if (n==0) 1 else
fac(n-1)*n</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">fac(1000)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者写成：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">def fac2(n:Int) = ((1:BigInt) to n).product</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.2pt" align="left"><span style="font-family:Consolas;background:#D9D9D9" lang="EN-US">// res1: BigInt =
9332621544394415268169923885626670049071596826438......000000000000000000</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132192"></a><a name="_Toc282027471"></a><a name="_Toc281659950"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">字符串</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"..."
</span><span style="font-family:宋体">或者</span><span style="font-family:
Consolas" lang="EN-US"> """...""""</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println("""<span style="background:yellow">|</span>Welcome&nbsp;to&nbsp;Ultamix&nbsp;3000.
&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background:yellow">|</span>Type&nbsp;"HELP"&nbsp;for&nbsp;help.""".<span style="background:yellow">stripMargin</span>) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Welcome&nbsp;to&nbsp;Ultamix&nbsp;3000.
&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Type&nbsp;"HELP"&nbsp;for&nbsp;help.</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">中，字符串除了可以</span><span style="font-family:
Consolas" lang="EN-US">+</span><span style="font-family:宋体">，也可以</span><span style="font-family:Consolas" lang="EN-US">*</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"abc"
* 3 <span style="color:#5B6E6E">// "abcabcabc"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"abc"
* 0 <span style="color:#5B6E6E">// ""</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"google".reverse
// "elgoog"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"abc".reverse.reverse=="abc"
// true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"Hello"
map (_.toUpper) // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US"> "Hello".toUpperCase</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027472"></a><a name="_Toc281659951"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.5.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类型转换</span></u></a></h3>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">"101".toInt // 101</span><span style="font-family:宋体">，无需</span><span style="font-family:Consolas" lang="EN-US">
Integer.parseInt("101");</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">"3.14".toFloat // 3.14f</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">101.toString</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">3.14.toString</span></p>

<p class="MsoNormal"><span style="font-family:宋体">转换整个列表：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">List("1","2","3")
map (_.toInt) // List(1,2,3)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">List("1","2","3")
map Integer.parseInt // List(1,2,3)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027473"></a><a name="_Toc281659952"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.5.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">StringBuilder</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val sb = new
StringBuilder</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sb += 'H'</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sb ++=
"ello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sb.toString //
"Hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sb clear //
StringBuilder()</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027474"></a><a name="_Toc281659953"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.5.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文本格式化</span></u></a></h3>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:宋体">使用</span><u><span style="font-family:Consolas" lang="EN-US">java.text.MessageFormat.format</span></u><span style="font-family:Consolas" lang="EN-US">:</span></p>

<pre><b><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">val</span></b><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> msg = java.text.MessageFormat.format(</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="color:red">"At <span style="background:yellow">{1,time}</span> on <span style="background:lime">{1,date}</span>, there was <span style="background:
aqua">{2}</span> on planet <b><span style="background:silver">{0}</span></b>."</span>,</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="color:red">"<b><span style="background:silver">Hoth</span></b>"</span>, <b>new</b> java.util.Date(), <span style="color:red">"<u>a disturbance in the Force</u>"</span>)</span></pre>

<p class="MsoNormal"><span style="font-size:9.0pt;font-family:宋体">输出</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">At <span style="background:yellow">17:50:34</span>
on <span style="background:lime">2010-7-20</span>, there was <u><span style="background:aqua">a disturbance in the Force</span></u> on planet <b><span style="color:#5B6E6E;background:silver">Hoth</span></b>.</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">"<u><span style="color:#C00000">my name is
%s, age is %d.</span></u>" <span style="background:yellow">format</span>
("<span style="color:#C00000">james</span>", 30) <span style="color:#5B6E6E">// <u>my name is james, age is 30.</u></span></span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><u><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US"><span style="text-decoration:none">&nbsp;</span></span></u></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">format</span><span style="font-family:宋体">还可以这么用</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US"> </span><span style="font-family:Consolas" lang="EN-US">"<u><span style="color:#C00000">%s-%d</span></u></span><u><span style="font-family:宋体;
color:#C00000">：</span></u><u><span style="font-family:Consolas;
color:#C00000" lang="EN-US">%<span style="background:yellow">1$</span>s is %<span style="background:yellow">2$</span>d.</span></u><span style="font-family:Consolas" lang="EN-US">" <span style="background:yellow">format</span>
("<span style="color:#C00000">james</span>", 30) <span style="color:#5B6E6E">// <u>james-30</u></span></span><u><span style="font-family:宋体;color:#5B6E6E">：</span></u><u><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">james is 30.</span></u></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="EN-US">"<u><span style="color:#C00000">%<span style="background:yellow">2$</span>d age's man %<span style="background:yellow">1$</span>s:
%<span style="background:yellow">2$</span>d</span></u>" <span style="background:yellow">format</span> ("<span style="color:#C00000">james</span>",
30) // <span style="color:#5B6E6E">30 age's man james: 30</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132193"></a><a name="_Toc282027475"></a><a name="_Toc281659954"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Null, None, Nil, Nothing</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Null</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Trait</span><span style="font-family:宋体">，其唯一实例为</span><span style="font-family:
  Consolas" lang="EN-US">null</span><span style="font-family:宋体">，是</span><span style="font-family:Consolas" lang="EN-US">AnyRef</span><span style="font-family:宋体">的子类，</span><u><span style="font-family:Consolas" lang="EN-US">*</span></u><b><u><span style="font-family:宋体">不是</span></u></b><u><span style="font-family:
  Consolas" lang="EN-US">*</span></u><span style="font-family:Consolas" lang="EN-US"> AnyVal</span><span style="font-family:宋体">的子类</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Nothing</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Trait</span><span style="font-family:宋体">，所有类型（包括</span><span style="font-family:
  Consolas" lang="EN-US">AnyRef</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">AnyVal</span><span style="font-family:宋体">）的子类，没有实例</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">None</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Option</span><span style="font-family:宋体">的两个子类之一，另一个是</span><span style="font-family:
  Consolas" lang="EN-US">Some</span><span style="font-family:宋体">，用于安全的函数返回值</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Unit</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">无返回值的函数的类型，和</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">void</span><span style="font-family:宋体">对应</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Nil</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">长度为</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132194"></a><a name="_Toc282027476"></a><a name="_Toc281659955"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">==</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u><u><span style="font-family:Consolas" lang="EN-US">eq</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">==</span><span style="font-family:宋体">很智能，他知道对于数值类型要调用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">==</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">ref</span><span style="font-family:
宋体">类型要调用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">equals()</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">"hello"=="Hello".toLowerCase()</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">中为</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:
宋体">，在</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">中为</span><span style="font-family:Consolas" lang="EN-US">true<a name="_Toc282027477"></a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">==</span><span style="font-family:宋体">总是内容对比</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">基本类型</span><span style="font-family:Consolas" lang="EN-US">Int</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Double</span><span style="font-family:
  宋体">，</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">比值</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">其他类型</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">A.equals(B)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">eq</span><span style="font-family:宋体">才是引用对比</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val s1,s2 =
"hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val s3 = new
String("hello")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s1==s2 // true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s1 eq s2 //
true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s1==s3 // true
</span><span style="font-family:宋体">值相同</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s1 eq s3 //
false </span><span style="font-family:宋体">不是同一个引用</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132195"></a><a name="_Toc282027478"></a><a name="_Toc281659956"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Option[T]</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027479"></a><a name="_Toc281659957"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.8.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">概念</span></u></a></h3>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Option[T]</span><span style="font-family:宋体">可以是任意类型或者空，但一旦声明类型就不能改变；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Option[T]</span><span style="font-family:宋体">可完美替代</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">null</span><span style="font-family:宋体">，可以是</span><span style="font-family:Consolas" lang="EN-US">Some[T]</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">None</span><span style="font-family:宋体">；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Option</span><span style="font-family:宋体">实现了</span><span style="font-family:Consolas" lang="EN-US">map,
flatMap, and filter </span><span style="font-family:宋体">接口，允许在</span><span style="font-family:Consolas" lang="EN-US"> 'for'</span><span style="font-family:
宋体">循环里使用它；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:宋体">函数返回值</span></u></b><span style="font-family:宋体">能被统一处理了：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">没有</span></b><b><span style="font-family:
  Consolas" lang="EN-US">Option</span></b><b><span style="font-family:宋体">的日子</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">现在</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
  find(id:Long):Person = ...</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def find(id:Long):<span style="background:yellow">Option</span>[Person] = ...</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">Person</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">null</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">Some[Person]</span><span style="font-family:
  宋体">或者</span><span style="font-family:Consolas" lang="EN-US">None</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">返回</span><span style="font-family:Consolas" lang="EN-US">null</span><span style="font-family:宋体">不特殊处理会抛：</span><span style="font-family:
  Consolas" lang="EN-US">NullPointerExceptions</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">返回值直接</span><span style="font-family:Consolas" lang="EN-US">getOrElse</span><span style="font-family:宋体">或者列表操作</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">类比：</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Stringx.split</span><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">null</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">类比：</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Stringx.split</span><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">new
  String[0]</span></p>
  </td>
 </tr>
 <tr>
  <td colspan="2" style="width:541.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="722">
  <p class="MsoNormal"><b><span style="font-family:宋体;color:#0070C0">结论：函数永远不要返回</span></b><b><span style="font-family:Consolas;color:#0070C0" lang="EN-US">null</span></b><b><span style="font-family:宋体;color:#0070C0">值，如果输入有问题或者抛异常，返回</span></b><b><span style="font-family:Consolas;color:#0070C0" lang="EN-US">Option[T]</span></b></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:宋体">参数有效性检查</span></u></b><span style="font-family:宋体">没有那么烦人了：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">没有</span></b><b><span style="font-family:
  Consolas" lang="EN-US">Option</span></b><b><span style="font-family:宋体">的日子</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">现在</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
  blank(s:String) = <span style="background:yellow">if (s==null) false else</span>
  {</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  s.toList.forall(_.isWhitespace) }</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">def blank(s:String) = <span style="background:
  yellow">Option</span>(s).toList.forall(</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">_.forall(_.isWhitespace))</span></p>
  </td>
 </tr>
 <tr>
  <td colspan="2" style="width:541.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="722">
  <p class="MsoNormal"><b><span style="font-family:宋体;color:#0070C0">结论：尽可能地不要浪费代码去检测输入，包装成</span></b><b><span style="font-family:Consolas;color:#0070C0" lang="EN-US">Option[T]</span></b><b><span style="font-family:宋体;color:#0070C0">来统一处理</span></b></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027480"></a><a name="_Toc281659958"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.8.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></u></a></h3>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">Some(3).<span style="background:yellow">getOrElse</span>(4)
// 3</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">None.<span style="background:yellow">getOrElse</span>(4)
// 4</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如打印</span><span style="font-family:Consolas" lang="EN-US">key=3</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def p(map:Map[Int,Int]) = println(map(3))</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">p(Map(1-&gt;100,2-&gt;200)) // </span><span style="font-family:宋体">抛异常</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def p(map:Map[Int,Int]) = println(map <span style="background:yellow">get</span> 3 <span style="background:yellow">getOrElse</span>
"...")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">p(Map(1-&gt;100,2-&gt;200)) // ...</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">p(Map(1-&gt;100,3-&gt;300)) // 300</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027481"></a><a name="_Toc281659959"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.8.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">k</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">) = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#2300FB" lang="EN-US">Map</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US">((1,100),(2,200),(3,300)) </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">get</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">k</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">) </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">match</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#8E3E00" lang="EN-US">Some</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">v</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">) =&gt;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#2300FB" lang="EN-US">k</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">+</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">": "</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">+</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">v</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#8E3E00" lang="EN-US">None</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> =&gt;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a name="_Toc282027482"><span style="font-size:10.0pt;
font-family:Consolas;color:green" lang="EN-US">"not found"</span></a></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">main</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">args</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> : </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Array</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">String</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">]) : </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Unit</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(1)) // 100</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(2)) // 200</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(3)) // 300</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(4)) // "not
found"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">m</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(-1)) // "not
found"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val l = List(Some(100), <span style="background:
silver">None</span>, Some(200), Some(120), <span style="background:silver">None</span>)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">for (<span style="background:yellow">Some</span>(<span style="color:#C00000">s</span>) &lt;- l) yield <span style="color:#C00000">s</span>
<span style="color:#5B6E6E">// List(100, 200, 120)</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:宋体">或</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">l flatMap (x=&gt;x)<span style="color:#5B6E6E"> //
List(100, 200, 120)</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US"> Option</span><span style="font-family:
宋体">结合</span><span style="font-family:Consolas" lang="EN-US">flatMap</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
toint(s:String) = </span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">try { Some(Integer.parseInt(s)) } catch { case
e:Exception =&gt; None }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("123",
"12a", "45") flatMap toint // List(123, 45)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("123",
"12a", "45") map toint // List(Some(123), None, Some(45))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132196"></a><a name="_Toc282027483"></a><a name="_Toc281659960"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">区分</span></u></a><u><span style="font-family:Consolas" lang="EN-US">&lt;-,=&gt;,-&gt;</span></u></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:31.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="42">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;-</span></p>
  </td>
  <td style="width:158.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i &lt;-
  0 until 100)</span></p>
  </td>
  <td style="width:337.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="451"><pre><span style="font-size:
  10.5pt">用于</span><span style="font-size:10.5pt;font-family:Consolas;
  background:yellow" lang="EN-US">f</span><span style="font-size:10.5pt;
  font-family:Consolas" lang="EN-US">or</span><span style="font-size:10.5pt">循环</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">, </span><span style="font-size:10.5pt">符号<span style="background:yellow" lang="EN-US">∈</span>的象形</span></pre></td>
 </tr>
 <tr>
  <td style="width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="42">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">=&gt;</span></p>
  </td>
  <td style="width:158.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">List(1,2,3).map(x=&gt;
  x*x)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">((i:Int)=&gt;i*i)(5)
  // 25</span></p>
  </td>
  <td style="width:337.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="451">
  <p class="MsoNormal"><span style="font-family:宋体">用于<span style="background:
  yellow">匿</span>名函数，相当于</span><span style="font-family:Consolas" lang="DA">Ruby</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="DA">
  |x|,Groovy</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="DA">{x-&gt; x*x}</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">也可用在</span><span style="font-family:Consolas" lang="DA">import</span><span style="font-family:宋体">中定义别名：</span><span style="font-family:Consolas" lang="DA">import javax.swing.{JFrame=&gt;<span style="background:yellow">jf</span>}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="42">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt;</span></p>
  </td>
  <td style="width:158.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Map(1-&gt;"a",2-&gt;"b")</span></p>
  </td>
  <td style="width:337.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="451">
  <p class="MsoNormal"><span style="font-family:宋体">用于</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">初始化</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:
  宋体">也可以不用</span><span style="font-family:Consolas" lang="EN-US">-&gt;</span><span style="font-family:宋体">而写成</span><span style="font-family:Consolas"> <span lang="EN-US">Map((1,"a"),(2,"b"))</span></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132197"></a><a name="_Toc282027484"></a><a name="_Toc281659961"></a><a name="_match..case(switch)"></a><span style="font-size:10.5pt;
line-height:173%;font-family:Consolas" lang="DE">2.10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="DE">match..case(switch)</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027485"></a><a name="_Toc281659962"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u></a><u><span style="font-size:14.0pt;
line-height:173%;font-family:Consolas" lang="EN-US">switch..case</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的区别</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">Java</span><span style="font-family:宋体">里面的写法</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">switch(n) {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; case(1):
...; break;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; case(2):
...; break;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; default:
...;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">变成</span><span style="font-family:Consolas" lang="DE">Scala</span><span style="font-family:宋体">写法</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">def m(n:String) =
</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">n <span style="background:yellow">match</span> {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; case
"a" <span style="background:yellow">|</span> "b" <span style="background:yellow">=&gt;</span> ... // </span><span style="font-family:
宋体">这个比较好</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; case
"c" <span style="background:yellow">=&gt;</span> ...</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; case
<span style="background:yellow">_</span> <span style="background:yellow">=&gt;</span>
...</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">每个</span><span style="font-family:Consolas" lang="DE">case..=&gt;</span><span style="font-family:宋体">结束不用写</span><span style="font-family:Consolas" lang="DE">break</span><span style="font-family:宋体">了</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="DE">_</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="DE">default</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027486"></a><a name="_Toc281659963"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">匹配数据类型</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">match </span><span style="font-family:宋体">可以很简单地匹配数据类型（不需要</span><span style="font-family:Consolas" lang="EN-US">isInstanceOf[T]</span><span style="font-family:
宋体">）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(v:Any) =
v match {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
null =&gt; "null"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
i:Int =&gt; i*100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
s:String =&gt; s</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
_ =&gt; "others"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：上面</span><span style="font-family:Consolas" lang="EN-US">case</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">i</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">s</span><span style="font-family:宋体">都叫模式变量</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(null) //
"null"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(5) // 500</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f("hello")
// "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(3.14) //
"others"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：自定义类型如果也要匹配，需要用</span><span style="font-family:Consolas" lang="EN-US"><a href="#_case_class">case class</a></span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027487"></a><a name="_Toc281659964"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">命令行参数解析例子</span></u></a></h3>

<pre><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">/** Basic command line parsing. */</span></pre><pre><b><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">object</span></b><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> Main {</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; <b>var</b> verbose = <b>false&nbsp; </b><span style="color:#5B6E6E">// </span></span><span style="font-size:10.5pt;
color:#5B6E6E">记录标识，以便能同时对</span><span style="font-size:10.5pt;
font-family:Consolas;color:#5B6E6E" lang="EN-US">-h</span><span style="font-size:10.5pt;
color:#5B6E6E">和</span><span style="font-size:10.5pt;font-family:
Consolas;color:#5B6E6E" lang="EN-US">-v</span><span style="font-size:10.5pt;color:#5B6E6E">做出响应</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; <b>def</b> main(args: Array[String]) {</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <b>for</b> (a &lt;- args) a <b>match</b> {</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> <span style="color:red">"-h"</span> | <span style="color:red">"-help"</span>&nbsp;&nbsp;&nbsp; <b>=&gt;</b></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println(<span style="color:red">"Usage: scala Main [-help|-verbose]"</span>)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> <span style="color:red">"-v"</span> | <span style="color:red">"-verbose"</span> <b>=&gt;</b></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; verbose = <b>true</b></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> x <b>=&gt; </b>// </span><span style="font-size:10.5pt">这里</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">x</span><span style="font-size:10.5pt">是临时变量</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println(<span style="color:red">"Unknown option: '"</span> + x + <span style="color:red">"'"</span>)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <b>if</b> (verbose) println(<span style="color:red">"How are you today?"</span>)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; }</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">}</span></pre>

<h3 style="margin-left:9.0pt"><a name="_Toc282027488"></a><a name="_Toc281659965"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">case</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的递归函数</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def fac(n:Int):Int = n match {</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; case 0=&gt;1</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; case _=&gt;n*fac(n-1)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">（使用</span><span style="font-family:Consolas" lang="EN-US"><a href="#_%D3%B3%C9%E4%CA%BD%B6%A8%D2%E5"><span style="font-family:宋体" lang="EN-US"><span lang="EN-US">映<span lang="EN-US">射</span></span></span><span style="font-family:宋体" lang="EN-US"><span lang="EN-US">式</span></span><span style="font-family:宋体" lang="EN-US"><span lang="EN-US">函数</span></span></a></span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def fac: Int=&gt;Int = {</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">case 0=&gt; 1</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">case n=&gt; n*fac(n-1)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<pre><span style="font-size:10.5pt">写法</span><span style="font-size:
10.5pt;font-family:Consolas" lang="EN-US">3</span><span style="font-size:10.5pt">（使用尾递归）：</span></pre>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">fac</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">: (</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">,</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)=&gt;</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> (0,y) =&gt; </span><span style="font-size:
10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">y</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> (x,y) =&gt; </span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">fac</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">-</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">1, </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">*</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">y</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<pre><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:
Consolas" lang="EN-US">fac(5,1) // 120</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;</span></pre><pre><span style="font-size:10.5pt">写法</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">4</span><span style="font-size:10.5pt">（</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">reduceLeft+!</span><span style="font-size:10.5pt">）：</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">def fac(n:Int) = 1 to n <span style="background:yellow">reduceLeft</span>(_*_)</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:
Consolas" lang="EN-US">implicit def foo(n:Int) = new { def ! = fac(n) }</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:
Consolas" lang="EN-US">5! // 120</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;</span></pre><pre><span style="font-size:10.5pt">写法</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">5</span><span style="font-size:10.5pt">：</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(</span><span style="font-size:10.5pt">最简洁高效</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">)</span></pre><pre><span style="font-size:
10.5pt;font-family:Consolas" lang="EN-US">&nbsp; def fac(n:Int) = (1:BigInt) to n <span style="background:yellow">product</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; fac(5) // 120</span></pre>

<h3 style="margin-left:9.0pt"><a name="_Toc282027489"></a><a name="_Toc281659966"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变量匹配</span></u></a></h3>

<pre><span style="font-size:10.5pt">常量匹配很简单，即</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">case</span><span style="font-size:10.5pt">后跟的都是常量；</span></pre><pre><span style="font-size:10.5pt">变量匹配需要注意，</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">case</span><span style="font-size:10.5pt">后跟的是</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">match</span><span style="font-size:10.5pt">里面的临时变量，而不是其他变量名：</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">3 match {</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;font-family:
Consolas" lang="EN-US">case i =&gt; println("i=" + i) // </span><span style="font-size:10.5pt">这里</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">i</span><span style="font-size:10.5pt">是<span style="background:lime">模式变量</span>（临时变量），就是</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">3</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">}</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">val a = 10</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">20 match { case <span style="background:lime">a</span> =&gt; 1 } // 1</span><span style="font-size:
10.5pt">，</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> a</span><span style="font-size:10.5pt">是<span style="background:lime">模式变量</span>，不是</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">10</span></pre><pre><span style="font-size:10.5pt">为了使用变量</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">a</span><span style="font-size:10.5pt">，必须用</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">`a`:</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20 match { case <span style="background:yellow">`a`</span> =&gt; 1; case b =&gt; -1 } // -1</span><span style="font-size:10.5pt">，</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">`a`</span><span style="font-size:10.5pt">是变量</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">10</span></pre><pre><span style="font-size:10.5pt">或者用大写的变量：</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val A = 10</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20 match { case <span style="background:yellow">A</span> =&gt; 1; case b =&gt; -1 } // -1</span><span style="font-size:10.5pt">，大写</span><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US">A</span><span style="font-size:10.5pt">是变量</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">10</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;</span></pre>

<h3 style="margin-left:9.0pt"><a name="_Toc282027490"></a><a name="_Toc281659967"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.10.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">case..if</span></u></a><u><span style="font-size:14.0pt;
line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">条件匹配</span></u></h3>

<pre><span class="br0"><span style="font-size:10.5pt">写法</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">1</span></span><span class="br0"><span style="font-size:10.5pt">：</span></span></pre><pre><span class="br0"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(</span></span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">1</span></span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> to <span class="nu0">20</span><span class="br0">)</span> foreach <span class="br0">{</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> x <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">if</span></a> <span class="br0">(</span>x <span class="sy0">%</span> <span class="nu0">15</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">=&gt;</span> printf<span class="br0">(</span><span class="st0">"%2d:15n\n",x</span><span class="br0">)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> x <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">if</span></a> <span class="br0">(</span>x <span class="sy0">%</span> <span class="nu0">3</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> &nbsp;<span class="sy0">=&gt;</span> printf<span class="br0">(</span><span class="st0">"%2d:3n\n",x</span><span class="br0">)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> x <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">if</span></a> <span class="br0">(</span>x <span class="sy0">%</span> <span class="nu0">5</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> &nbsp;<span class="sy0">=&gt;</span> printf<span class="br0">(</span><span class="st0">"%2d:5n\n",x</span><span class="br0">)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> x <span class="sy0">=&gt;</span> printf<span class="br0">("%2d\n",</span>x<span class="br0">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 <br>
<span class="br0">}</span></span></pre><pre><span style="font-size:10.5pt">写法</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">2</span><span style="font-size:10.5pt">：</span><a name="_Toc282027491"></a></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(1 to 20) map (x=&gt; <span style="background:yellow">(x%3,x%5)</span> match {</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; case <span style="background:yellow">(0,0)</span> =&gt; printf("%2d:15n\n",x)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; case <span style="background:yellow">(0,_)</span> =&gt; printf("%2d:3n\n",x)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; case <span style="background:yellow">(_,0)</span> =&gt; printf("%2d:5n\n",x)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; case <span style="background:yellow">(_,_)</span> =&gt; printf("%2d\n",x)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">})</span></pre>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132198"></a><a name="_Toc282027492"></a><a name="_Toc281659968"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.11.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">try..catch..finally</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var f =
openFile()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">try </span><span style="font-family:Consolas" lang="EN-US">{ </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; f = new
FileReader("input.txt") </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">} <span style="background:yellow">catch </span>{ </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">case </span>ex: FileNotFoundException =&gt; // Handle
missing file </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">case </span>ex: IOException =&gt; // Handle other I/O
error </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">} <span style="background:yellow">finally </span>{</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
f.close()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132199"></a><a name="_Toc282027493"></a><a name="_Toc281659969"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.12.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">require</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(n:Int) =
{ require(n!=0); 1.0/n }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(n:Int) =
{ require(n!=0, "<i><u>n can't be zero</u></i>"); 1.0/n }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// java.lang.IllegalArgumentException:
requirement failed: <i><u>n can't be zero</u></i></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132200"></a><a name="_Toc282027494"></a><a name="_Toc281659970"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.13.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">main</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方法</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">main</span><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">包括所有类似</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">static</span><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:宋体">必须定义在一个</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:宋体">内：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">object</span><span style="font-family:Consolas" lang="EN-US"> Test1 {</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def <span style="background:
yellow">main(args: Array[String])</span> {</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println("hello
world")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">fsc
Test1.scala // </span><span style="font-family:宋体">常驻内存编译服务器，第一次转载之后比</span><span style="font-family:Consolas" lang="EN-US">scalac</span><span style="font-family:
宋体">快</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala
Test1.scala // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">，没有输出</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala -cp
e:\scala\lib\scala-library.jar Test1 // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">，慢</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java -cp
e:\scala\lib\scala-library.jar Test1 // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">，快</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果文件不是</span><span style="font-family:Consolas" lang="EN-US">utf8</span><span style="font-family:宋体">编码，执行需要使用</span><span style="font-family:Consolas" lang="EN-US">.scala</span><span style="font-family:
宋体">文件的编码，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala <span style="background:yellow">-encoding gbk</span> test.scala</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027495"></a><a name="_Toc281659971"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.13.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">Application</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">不带命令行参数的简化</span><span style="font-family:Consolas" lang="EN-US">main</span><span style="font-family:
宋体">方法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">object</span><span style="font-family:Consolas" lang="EN-US"> app1 <span style="background:yellow">extends Application</span> {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
println("hello world")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132201"></a><a name="_Toc282027496"></a><a name="_Toc281659972"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.14.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">package, import</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027497"></a><a name="_Toc281659973"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.14.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">import</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">import</span><span style="font-family:宋体">可以只在局部作用域内生效；</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以格式</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">“</span><span style="font-family:Consolas" lang="EN-US">import javax.swing.{JFrame=&gt;<span style="background:yellow">jf</span>}</span><span style="font-family:宋体">”来声明类型的别名。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">jf</span><span style="font-family:Consolas" lang="EN-US">.show()</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">import
javax.swing._</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">import
java.util.{List, Map}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">import java.util._,
java.io._</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala </span><span style="font-family:宋体">缺省导入如下包：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">java.lang.*</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">scala.*</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">scala.Predef</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">由于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">package</span><span style="font-family:
宋体">可以是相对路径下定义，有可能命名冲突，可以用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">import <span style="background:yellow">_root_</span>.java.lang.Long</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027498"></a><a name="_Toc281659974"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.14.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">package</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">package</span><span style="font-family:Consolas" lang="EN-US"> com.wr3 {
// C# </span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Ruby</span><span style="font-family:宋体">的方式，也可以改用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">的方式</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; //
<span style="background:yellow">import</span> java.nio.<span style="background:
yellow">_</span> // "*" </span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:
宋体">的正常函数名，所以用</span><span style="font-family:Consolas" lang="EN-US">_</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; class
c1 {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def
m1() { println("c1.m1()") }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; object
o1 {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def
<span style="background:yellow">main</span>(args: Array[String]) { </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
println("o1.main()") </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background:yellow">new c1().m1()</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">fsc
package.scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java
com.wr3.o1 // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala
com.wr3.o1 // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027499"></a><a name="_Toc281659975"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.14.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">包对象</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala2.8+</span><span style="font-family:宋体">支持包对象（</span><span style="font-family:Consolas" lang="EN-US">package
object</span><span style="font-family:宋体">），除了和</span><span style="font-family:Consolas" lang="EN-US">2.8</span><span style="font-family:宋体">之前一样可以有下级的</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:宋体">，还可以直接有下级变量和函数，例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--------------------------------
foo.scala</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">package p0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">package object</span><span style="font-family:Consolas" lang="EN-US"> <span style="background:yellow">p1</span> {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
val a = 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
def b = "hello " + a</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
def main(args:Array[String]):Unit = printf("%s", <span style="background:yellow">p0.p1.b</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--------------------------------</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">p1</span><span style="font-family:宋体">就是一个包对象，</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:宋体">就是包</span><span style="font-family:Consolas" lang="EN-US">p1</span><span style="font-family:宋体">直属的常量和函数</span><span style="font-family:Consolas" lang="EN-US">,</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$fsc foo.scala
</span><span style="font-family:宋体">命令产生如下</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">./p0/p1/package.class</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala
p0.p1.package</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132202"></a><a name="_Toc282027500"></a><a name="_Toc281659976"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.15.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">if..else</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">b = (x&gt;y) ?
100 : -1</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">if (x&gt;y) 100
else -1</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132203"></a><a name="_Toc282027501"></a><a name="_Toc281659977"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.16.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">循环操作</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;m</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">flatMap</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">indices</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;m</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foreach</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;Unit</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (... if
  ...) yield</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">collect {
  case ... if ... =&gt; ... }</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">filter,
  filterNot</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">take</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">takeWhile</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">forall</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;1
  (true|false)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reduceLeft,
  foldLeft</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;1</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scanLeft</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;m+1</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">exists</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;1
  (true|false)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">find</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;1 (</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">None)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">count</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;1</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">span,
  partition</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m-&gt;2</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027502"></a><a name="_Toc281659978"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">for</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">循环中的变量不用定义，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for(i&lt;-1 to
10; <span style="background:yellow">j</span>=i*i) println(<span style="background:yellow">j</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (s &lt;-
ss) foo(s)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i &lt;- 0
to n) foo(i) // </span><span style="font-family:宋体">包含</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">，即</span><span style="font-family:Consolas" lang="EN-US">Range(0,1,2,...,n,n+1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i &lt;- 0
until n) foo(i)&nbsp; // </span><span style="font-family:宋体">不包含</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">，即</span><span style="font-family:Consolas" lang="EN-US">Range(0,1,2,3,...,n)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">for</span><span style="font-family:Consolas" lang="EN-US"> (n&lt;-List(1,2,3,4)
<span style="background:yellow">if</span> n%2==1) <span style="background:yellow">yield</span>
n*n&nbsp; // List(1, 9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (n&lt;-Array(1,2,3,4)
if n%2==1) <span style="background:yellow">yield</span> n*n&nbsp; // Array(1,
9)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：如果</span><span style="font-family:Consolas" lang="EN-US">if</span><span style="font-family:宋体">后面不止一条语句，要用</span><span style="font-family:Consolas" lang="EN-US">{..}</span><span style="font-family:
宋体">包裹。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var s = 0; for
(i &lt;- 0 <span style="background:yellow">until</span> 100) { s += i } // s =
4950</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">等价于不用</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">的写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4).<span style="background:yellow">filter</span>(_%2==1).map(n =&gt; n*n)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">条件是多行，不能用</span><span style="font-family:Consolas" lang="EN-US">(),</span><span style="font-family:
宋体">要用</span><span style="font-family:Consolas" lang="EN-US">{}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for(i&lt;-0 to
5; j&lt;-0 to 2) yield i+j</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// Vector(<u>0,
1, 2</u>, <u>1, 2, 3</u>, <u>2, 3, 4</u>, <u>3, 4, 5</u>, <u>4, 5</u></span><u><span lang="EN-US"> </span></u><u><span style="font-family:Consolas" lang="EN-US">, 6</span></u><span style="font-family:Consolas" lang="EN-US">, <u>5, 6, 7</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for{i&lt;-0 to
5</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">j&lt;-0 to 2} yield i+j</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">边长</span><span style="font-family:Consolas" lang="EN-US">21</span><span style="font-family:宋体">以内所有符合勾股弦的三角形：</span></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">def</span></a> triangle<span class="br0">(</span>n<span class="sy0">:</span> Int<span class="br0">)</span> <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">for</span></a> <span class="br0">{</span><br>
&nbsp; x <span class="sy0">&lt;</span>- <span class="nu0">1</span> to <span class="nu0">21</span><br>
&nbsp; y <span class="sy0">&lt;</span>- x to <span class="nu0">21</span><br>
&nbsp; z <span class="sy0">&lt;</span>- y to <span class="nu0">21</span><br>
&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">if</span></a> x <span class="sy0">*</span> x + y <span class="sy0">*</span> y <span class="sy0">==</span> z <span class="sy0">*</span> z<br>
<span class="br0">}</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">yield</span></a> <span class="br0">(</span>x, y, z<span class="br0">)</span></span></pre>

<p class="MsoNormal"><span style="font-family:宋体">结果：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// Vector((3,4,5),
(5,12,13), (6,8,10), (8,15,17), (9,12,15), (12,16,20))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3><a name="_Toc282027503"></a><a name="_Toc281659979"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.16.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">for ..
yield</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">把每次循环的结果“<b>移</b>”进一个集合（类型和循环内的一致）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for {</span><span style="font-family:宋体">子句</span><span style="font-family:Consolas" lang="EN-US">}
yield {</span><span style="font-family:宋体">循环体</span><span style="font-family:Consolas" lang="EN-US">} </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">正确：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for
(e&lt;-List(1,2,3)) yield (e*e) // List(1,4,9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for
{e&lt;-List(1,2,3)} yield { e*e } // List(1,4,9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for
{e&lt;-List(1,2,3)} yield e*e // List(1,4,9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体;color:red">错误：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for
(e&lt;-List(1,2,3)) { yield e*e } // </span><span style="font-family:宋体">语法错误</span><span style="font-family:Consolas" lang="EN-US">,yield</span><span style="font-family:
宋体">不能在任何括号内</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027504"></a><a name="_Toc281659980"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">foreach</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3).foreach(println)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">3</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:宋体">也可以写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 <span style="background:yellow">to</span> 3).foreach(println)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 <span style="background:yellow">until</span> 4) foreach println</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Range(1,3)
foreach println</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">to</span><span style="font-family:宋体">包含，</span><span style="font-family:Consolas" lang="EN-US">until</span><span style="font-family:宋体">不包含（最后的数）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">都可以写步长，如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 to (11<span style="background:yellow">,2</span>)
// 1,3,5,7,9,11 </span><span style="font-family:宋体">步长为</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; 1
to 11 <span style="background:yellow">by</span> 2</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 until (11<span style="background:yellow">,2</span>)
// 1,3,5,7,9 </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 until 11 <span style="background:yellow">by</span>
2</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val r = (1 to 10 by 4) <span style="color:#5B6E6E">//
(1,5,9), r.start=r.first=1; r.end=10, r.last=9</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">也可以是</span><span style="font-family:Consolas" lang="EN-US">BigInt</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(1:BigInt) to 3</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027505"></a><a name="_Toc281659981"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">forall</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"</span><u><span style="font-family:宋体">所有都符合</span></u><span style="font-family:
Consolas" lang="EN-US">"</span><span style="font-family:宋体">——相当于</span><span style="font-family:Consolas"> <span lang="EN-US">A1 &amp;&amp; A2 &amp;&amp; A3 &amp;&amp;
... &amp;&amp; Ai &amp;&amp; ... &amp;&amp; An</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 to 3)
forall (0&lt;) // true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-1 to 3)
forall (0&lt;) // false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
isPrime(n:Int) = 2 until n forall (n%_!=0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i&lt;-1
to 100 if isPrime(i)) println(i)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(2 to 20)
partition (isPrime _) <span style="color:#5B6E6E">// (2,3,5,7,11,13,17,19), (4,6,8,9,10,12,14,15,16,18,20)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可直接调用</span><span style="font-family:Consolas" lang="EN-US">BigInt</span><span style="font-family:宋体">的内部方法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(2 to 20)
partition (BigInt(_) isProbablePrime(10)) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
</span><span style="font-family:宋体;color:#5B6E6E">注：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">isProbablePrime(c)</span><span style="font-family:宋体;color:#5B6E6E">中</span><span style="font-family:
Consolas;color:#5B6E6E" lang="EN-US">c</span><span style="font-family:宋体;color:#5B6E6E">越大，是质数的概率越高，</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">10</span><span style="font-family:宋体;color:#5B6E6E">对应概率：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">1 - 1/(2**10) = 0.999</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027506"></a><a name="_Toc281659982"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">reduceLeft</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reduceLeft </span><span style="font-family:宋体">方法首先应用于前两个元素，然后再应用于第一次应用的结果和接下去的一个元素，等等，直至整个列表。例如</span></p>

<p class="MsoNormal"><span style="font-family:宋体">计算阶乘：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">fac</span>(n:
Int) = 1 to n reduceLeft(_*_)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">fac(5) // 5*4*3*2 = 120</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((((1*2)*3)*4)*5)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">计算</span><span style="font-family:Consolas" lang="EN-US">sum</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <a name="_Toc282027507">List(2,4,6).reduceLeft(_+_) // 12</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((2+4)+6)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">取</span><span style="font-family:Consolas" lang="EN-US">max</span><span style="font-family:宋体">：</span><a name="_Toc282027508"></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">List(1,4,9,6,7).reduceLeft( (x,y)=&gt; if (x&gt;y)
x else y ) // 9</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体">或者简化为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><a name="_Toc282027509"><span style="font-family:Consolas" lang="EN-US">List(1,4,9,6,7).reduceLeft(_ <span style="background:yellow">max</span> _) // 9</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((((1
max 4) max 9) max 6) max 7)</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027510"></a><a name="_Toc281659983"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">foldLeft</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US"> scanLeft</span></u></h3>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">累加或累乘</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(L:
List[Int]): Int = {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
var result = 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for (item &lt;- L)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result += item</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更</span><span style="font-family:Consolas" lang="EN-US">scalable</span><span style="font-family:宋体">的写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(L:
Seq[Int]) = L.<span style="background:yellow">foldLeft</span>(0)((a, b) =&gt; a
+ b)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(L: Seq[Int])
= L.<span style="background:yellow">foldLeft</span>(0)(_ + _)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(L:
List[Int]) = (0/:L){_ + _}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sum(List(1,3,5,7))
// 16</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">乘法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def multiply(L:
Seq[Int]) = L.<span style="background:yellow">foldLeft</span>(<span style="background:yellow">1</span>)(_ * _)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">multiply(Seq(1,2,3,4,5))
// 120</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">multiply(1
until 5+1) // 120</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><span style="font-size:10.5pt;
line-height:173%;font-family:Consolas" lang="EN-US">2.16.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">scanLeft</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4,5).scanLeft(0)(_+_)
// (0,1,3,6,10,15)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(0,(0+1),(0+1+2),(0+1+2+3),(0+1+2+3+4),(0+1+2+3+4+5))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4,5).scanLeft(1)(_*_)
// (1,2,6,24,120)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1, 1*1,
1*1*2, 1*1*2*3, 1*1*2*3*4, 1*1*2*3*4*5)</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">z</span> <span style="background:yellow">/:</span>
List(a, b, c))(<span style="background:yellow">op</span>) </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
op(op(op(<span style="background:yellow">z</span>, a), b), c)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">简单来说：加法用</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">，乘法用</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">(List(a, b, c) <span style="background:yellow">:\</span> <span style="background:yellow">z</span>)
(op) equals op(a, op(b, op(c, <span style="background:yellow">z</span>)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027511"></a><a name="_Toc281659984"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">take drop splitAt</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10 by 2
take 3 // Range(1, 3, 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10 by 2
drop 3 // Range(7, 9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10 by 2
splitAt 2 // (Range(1, 3),Range(5, 7, 9))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：前</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">个质数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
prime(n:Int) = (! ((2 to math.sqrt(n).toInt) exists (i=&gt; n%i==0)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2 to 100
filter prime take 10</span></p>

<h3 style="margin-left:9.0pt"><span style="font-size:10.5pt;
line-height:173%;font-family:Consolas" lang="EN-US">2.16.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">takeWhile, dropWhile, span</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">while</span><span style="font-family:宋体">语句的缩写，</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  lime" lang="EN-US">take</span><span style="font-family:Consolas;background:
  yellow" lang="EN-US">While</span><span style="font-family:Consolas" lang="EN-US"> (...)</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">等价于：</span><span style="font-family:Consolas;background:yellow" lang="EN-US">while</span><span style="font-family:Consolas" lang="EN-US"> (...) { <span style="background:lime">take</span>
  }</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  lime" lang="EN-US">drop</span><span style="font-family:Consolas;background:
  yellow" lang="EN-US">While</span><span style="font-family:Consolas" lang="EN-US"> (...)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">等价于：</span><span style="font-family:Consolas;background:yellow" lang="EN-US">while</span><span style="font-family:Consolas" lang="EN-US"> (...) { <span style="background:lime">drop</span>
  }</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">span (...)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">等价于：</span><span style="font-family:Consolas" lang="EN-US">while (...) { take; drop }</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10
takeWhile (_&lt;5) // (1,2,3,4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10
takeWhile (_&gt;5) // ()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">10 to (1,-1)
takeWhile(_&gt;6) // (10,9,8,7)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10
takeWhile (n=&gt;n*n&lt;25) // (1, 2, 3, 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果不想直接用集合元素做条件，可以定义</span><span style="font-family:Consolas" lang="EN-US">var</span><span style="font-family:
宋体">变量来判断：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如，从</span><span style="font-family:Consolas" lang="EN-US">1 to 10</span><span style="font-family:宋体">取前几个数字，要求累加不超过</span><span style="font-family:Consolas" lang="EN-US">30</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var sum=0; </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val rt = (1 to
10).takeWhile(<u>e=&gt; {sum=sum+e;sum&lt;30}</u>) <span style="color:#5B6E6E">//
Range(1, 2, 3, 4, 5, 6, 7)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">takeWhile</span><span style="font-family:宋体">中的函数要返回</span><span style="font-family:Consolas" lang="EN-US">Boolean</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">sum&lt;30</span><span style="font-family:宋体">要放在最后；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10
dropWhile (_&lt;5) // (5,6,7,8,9,10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10
dropWhile (n=&gt;n*n&lt;25) // (5,6,7,8,9,10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 10 span
(_&lt;5) // ((1,2,3,4),(5,6,7,8)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,0,1,0)
span (_&gt;0) // ((1), (0,1,0))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意，</span><span style="font-family:Consolas" lang="EN-US">partition</span><span style="font-family:宋体">是和</span><span style="font-family:Consolas" lang="EN-US">span</span><span style="font-family:
宋体">完全不同的操作</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,0,1,0)
partition (_&gt;0) // ((1,1),(0,0))</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027512"></a><a name="_Toc281659985"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.16.9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">break</span></u></a><u><span style="font-size:14.0pt;
line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">continue</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中<b><u>没有</u></b></span><span style="font-family:Consolas" lang="EN-US">break</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">continue</span><span style="font-family:
宋体">语法！需要</span><span style="font-family:Consolas" lang="EN-US">break</span><span style="font-family:宋体">得加辅助</span><span style="font-family:Consolas" lang="EN-US">boolean</span><span style="font-family:宋体">变量，或者用库（</span><span style="font-family:Consolas" lang="EN-US">continue</span><span style="font-family:宋体">没有）</span><span style="font-family:Consolas" lang="EN-US">.</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：打印</span><span style="font-family:Consolas" lang="EN-US">'a' to 'z'</span><span style="font-family:宋体">的前</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">个</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var <span style="background:yellow">i</span>=0; val rt = for(e&lt;-('a' to 'z') if {<span style="background:yellow">i</span>=<span style="background:yellow">i</span>+1;<span style="background:yellow">i&lt;=10</span>}) printf("%d:%s\n",i,e)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">('a' to 'z').<span style="background:yellow">slice</span>(0,10).foreach(println)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">1 to 100 </span><span style="font-family:
宋体">和小于</span><span style="font-family:Consolas" lang="EN-US">1000</span><span style="font-family:宋体">的数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var
(n,sum)=(0,0); for(i&lt;-0 to 100 if (sum+i&lt;1000)) { n=i; sum+=i }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
n = 44, sum = 990</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：使用库来实现</span><span style="font-family:Consolas" lang="EN-US">break</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">import&nbsp;<span style="background:yellow"><a href="http://lampsvn.epfl.ch/svn-repos/scala/scala/trunk/src/library/scala/util/control/Breaks.scala" target="_blank" rel="external"><span style="color:windowtext;text-decoration:none">scala.util.control.Breaks._</span></a></span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for(e&lt;-1 to
10) { val e2 = e*e; if (e2&gt;10) <span style="background:yellow">break</span>;
println(e) }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132204"></a><a name="_Toc282027513"></a><a name="_Toc281659986"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.17.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">操作符重载</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">注意：其实</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">没有操作符，更谈不上操作符重载；</span><span style="font-family:Consolas" lang="EN-US">+-/*</span><span style="font-family:
宋体">都是方法名，如</span><span style="font-family:Consolas" lang="EN-US">1+2</span><span style="font-family:宋体">其实是</span><span style="font-family:Consolas" lang="EN-US">(1).+(2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object
operator {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
class complex(<span style="background:yellow">val </span>i:Int, <span style="background:yellow">val </span>j:Int) { // val </span><span style="font-family:宋体">是必须的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def <span style="background:yellow">+</span> (c2: complex) = {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
new complex (i+c2.i, j+c2.j)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas" lang="DA">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
override def toString() = { "(" + i + "," + j +
")" }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
main(args:Array[String]) = { </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val c1 = new complex(3, 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val c2 = new complex(5, 70)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
printf("%s + %s = %s", c1, c2, c1<span style="background:yellow">+</span>c2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
} </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译：</span><span style="font-family:Consolas" lang="EN-US">fsc operator.scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行：</span><span style="font-family:Consolas" lang="EN-US">java operator // (3,10) + (5,70) = (8,80)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132205"></a><a name="_Toc282027514"></a><a name="_Toc281659987"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.18.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">系统定义</span></u></a><u><span style="font-family:Consolas" lang="EN-US">scala._</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala._</span><span style="font-family:宋体">自动加载，只有发生类名冲突时才需要带上</span><span style="font-family:Consolas" lang="EN-US">scala.</span><span style="font-family:宋体">包名。</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.AnyValue</span></p>
  </td>
  <td style="width:157.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:宋体">所有基本类型的根</span></p>
  </td>
  <td style="width:185.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Int,Char,Boolean,Double,Unit</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.AnyRef</span></p>
  </td>
  <td style="width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:宋体">所有引用类型的根</span></p>
  </td>
  <td style="width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">java.lang.Object</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.Null</span></p>
  </td>
  <td style="width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:宋体">所有引用类型的子类</span></p>
  </td>
  <td style="width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.Nothing</span></p>
  </td>
  <td style="width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:宋体">所有全部类型的子类</span></p>
  </td>
  <td style="width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.List</span></p>
  </td>
  <td style="width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:宋体">不可变的</span><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
  <td style="width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">特色的不可变</span><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="119">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala.Int</span></p>
  </td>
  <td style="width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="211">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">中可以用</span><span style="font-family:Consolas" lang="EN-US">int</span><span style="font-family:宋体">作为别名</span></p>
  </td>
  <td style="width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="247">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Double</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Float</span><span style="font-family:宋体">等类似</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132206"></a><a name="_Toc282027515"></a><a name="_Toc281659988"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.19.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">implicit</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">隐式转换</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">用途：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">把一种</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:宋体">类型安全地自动转换成另一种</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:
宋体">类型</span><span style="font-family:Consolas" lang="EN-US">;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">不改动已有</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:宋体">设计即可添加新的方法</span><span style="font-family:Consolas" lang="EN-US">;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027516"></a><a name="_Toc281659989"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.19.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类型转换</span></u></a></h3>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">implicit def foo(s:String):Int =
Integer.parseInt(s) // </span><span style="font-family:宋体">需要时把</span><span style="font-family:Consolas" lang="EN-US">String-&gt;Int</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">def add(a:Int, b:Int) = a+b</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">add("100",8) // 108, </span><span style="font-family:宋体">先把</span><span style="font-family:Consolas" lang="EN-US">"100"</span><span style="font-family:宋体">隐式转换为</span><span style="font-family:Consolas" lang="EN-US">100</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027517"></a><a name="_Toc281659990"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.19.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子：阶乘</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">n!</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">第一步：写函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">factorial</span>(x: Int) = 1 to n reduceLeft(_*_)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">第二步：定义</span><span style="font-family:Consolas" lang="EN-US"> "!" </span><span style="font-family:
宋体">函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
class <span style="background:yellow">m1</span>(n: Int) {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def <span style="background:yellow">!</span> = <span style="background:yellow">factorial</span>(n)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-indent:20.25pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">implicit</span><span style="font-family:Consolas" lang="EN-US"> def m2(n:<span style="background:yellow">Int</span>)
= new <span style="background:yellow">m1</span>(n) // </span><b><u><span style="font-family:宋体">隐式转换</span></u></b><span style="font-family:宋体">，即<b><u>在需要时</u></b>把</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">转换为</span><span style="font-family:Consolas" lang="EN-US">new m1(n)</span></p>

<p class="MsoNormal" style="text-indent:20.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:20.25pt"><span style="font-family:宋体">注意：上面可以用匿名类简化为：</span></p>

<p class="MsoNormal" style="text-indent:20.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">implicit</span>
def m2(n:Int) = <span style="background:yellow">new</span> { def ! =
factorial(n) }</span></p>

<p class="MsoNormal" style="text-indent:20.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">第三步：使用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
val n = 100</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">printf("%d! = %s\n", n, (<span style="background:yellow">n!</span>))&nbsp; // n! </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
new m1(n).!()</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">println(10!)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027518"></a><a name="_Toc281659991"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.19.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子：</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">cout</span></u></h3>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">import java.io._</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">class C1(p:PrintStream) {</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">def &lt;&lt; (a:Any) = {</span></p>

<p class="MsoNormal" style="text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">p.print(a)</span></p>

<p class="MsoNormal" style="text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">p.flush</span></p>

<p class="MsoNormal" style="text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">p</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">implicit def foo(p:PrintStream) = new C1(p)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val endl = '\n'</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">System.out&lt;&lt;"hello"&lt;&lt;"
world"&lt;&lt;endl</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027519"></a><a name="_Toc281659992"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.19.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子：定义</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">?:</span></u></h3>

<pre><span style="font-size:10.5pt;font-family:Consolas;color:#140DCC" lang="EN-US">implicit</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> <span style="color:#140DCC">def</span> elvisOperator<span class="br0"><span style="color:#7F0055">[</span></span><span style="color:#7F0055">T<span class="br0">]</span></span><span class="br0">(</span>alt: T<span class="br0">)</span> = <span style="color:#140DCC">new</span> <span class="br0">{</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; <span style="color:#140DCC">def</span> ?:<span class="br0"><span style="color:#7F0055">[</span></span><span style="color:#7F0055">A &gt;: T<span class="br0">]</span></span><span class="br0">(</span>pred: A<span class="br0">)</span> = <span style="color:#140DCC">if</span> <span class="br0">(</span>pred == <span style="color:#A40D14">null</span><span class="br0">)</span> alt <span style="color:#140DCC">else</span> pred</span></pre><pre><span class="br0"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">null ?:
"" // ""</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"abc"
?: "" // "abc"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">10 ?: 0 // 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(null ?:
0).asInstanceOf[Int] // 0</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027520"></a><a name="_Toc281659993"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.19.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">已有</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Object</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">加新方法</span></u></h3>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">object</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">NewMethod</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp; //
</span><span style="font-size:10.0pt;font-family:宋体;color:#5B6E6E">定义新方法</span><span style="font-size:10.0pt;font-family:Consolas;color:#5B6E6E" lang="EN-US">join()</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><b><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">implicit</span></b><b><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span></b><b><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span></b><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">foo1</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">T</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">](</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">list</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">: </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">List</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">T</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">]) = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><b><u><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">join</span></u></b><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">s</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">String</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">) = </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">list</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">mkString</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">s</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp; //
</span><span style="font-size:10.0pt;font-family:宋体;color:#5B6E6E">测试</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">main</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">args</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> : </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Array</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">String</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">]) : </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Unit</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">Console</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">List</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(1,2,3,4,5).</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">join</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">" -
"</span><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">) </span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
" 1 - 2 - 3 - 4 – 5"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">解释：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译器发现</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">join(String)</span><span style="font-family:宋体">方法，就发查找代码中有没有定义在</span><span style="font-family:Consolas" lang="EN-US">implicit def xx(List)</span><span style="font-family:宋体">内的</span><span style="font-family:Consolas" lang="EN-US">
join(String)</span><span style="font-family:宋体">方法，如果有就调用这个。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">为</span><span style="font-family:Consolas" lang="EN-US">Int</span><span style="font-family:宋体">增加乘方操作：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def pow(n:Int,
m:Int):Int = if (m==0) 1 else n*pow(n,m-1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">implicit</span><span style="font-family:Consolas" lang="EN-US"> def
foo(n:<span style="background:yellow">Int</span>) = new {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def <span style="background:yellow">**</span>(m:<span style="background:yellow">Int</span>)
= pow(n,m)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2**10 // 1024</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：定义如</span><span style="font-family:Consolas" lang="EN-US">ruby</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">10.next</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">implicit def
foo(n:Int) = new { def next = n+1 }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">10.next // 11</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132207"></a><a name="_Toc282027521"></a><a name="_Toc281659994"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.20.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">type</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">做</span></u><u><span style="font-family:Consolas" lang="EN-US">alias</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">语言的类型定义</span><span style="font-family:Consolas" lang="EN-US">typedef</span><span style="font-family:
宋体">，建立新的数据类型名（别名）；在一个函数中用到同名类时可以起不同的别名</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">type</span><span style="font-family:Consolas" lang="EN-US"> JDate = java.util.Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">type</span><span style="font-family:Consolas" lang="EN-US"> SDate = java.sql.Date</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val d1 = new JDate()&nbsp; // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
val d = new java.util.Date()</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val d2 = new SDate()&nbsp; // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
val d = new java.sql.Date()</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">type</span><span style="font-family:宋体">也可以做泛型</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132208"></a><a name="_Toc282027522"></a><a name="_Toc281659995"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.21.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">泛型</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027523"></a><a name="_Toc281659996"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数中的泛型：</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
foo[T](a:T) = println("value is " + a)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo(10) //
"value is 10"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo(3.14) //
"value is 3.14"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo("hello")
// "value is hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027524"></a><a name="_Toc281659997"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类中的泛型：</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class C1[<span style="background:yellow">T</span>] {</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">private var v:T = _&nbsp;&nbsp; // </span><span style="font-family:宋体">初始值为</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">类型的缺省值</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def set(v1:T) = { v = v1 }</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def get = v</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">new C1[<span style="background:yellow">Int</span>].set(10).get // 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">new C1[<span style="background:yellow">String</span>].set("hello").get //
"hello"</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027525"></a><a name="_Toc281659998"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">泛型</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">qsort</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def qsort<span style="background:yellow">[T &lt;% Ordered[T]]</span>(a:List[<span style="background:yellow">T</span>]): List[<span style="background:yellow">T</span>]
= if (a.size&lt;=1) a else {</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val m = a(a.size/2)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">qsort(a.filter(m&gt;)) ++ a.filter(m==) ++ qsort(a.filter(m&lt;))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val a = List(1, 3, 6, 2, 0, 9, 8, 7, 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
qsort[<span style="background:yellow">Int</span>](a) // </span><span style="font-family:宋体">注意</span><span style="font-family:Consolas" lang="EN-US">2
a</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val b = List(1.0, 3.3, 6.2, 6.3, 0, 9.5, 8.7, 7.3, 2.2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
qsort[<span style="background:yellow">Double</span>](b) // </span><span style="font-family:宋体">注意</span><span style="font-family:Consolas" lang="EN-US">2
b</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者使用自带库：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1, 3, 6, 2,
0, 9, 8, 7, 2) <span style="background:yellow">sortWith</span>(_&lt;_)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1.0, 3.3,
6.2, 6.3, 0, 9.5, 8.7, 7.3, 2.2).<span style="background:yellow">sortWith</span>(_&lt;_)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027526"></a><a name="_Toc281659999"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">泛型</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">add</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">例子</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">采用</span><span style="font-family:Consolas" lang="EN-US">implicit
parameters</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
add[T](x:T, y:T)(<span style="background:yellow">implicit n:Numeric[T]</span>)
= {</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">n.plus(x,y) // </span><span style="font-family:
宋体">或者用</span><span style="font-family:Consolas" lang="EN-US"> import n._; x + y</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">add(1,2) // 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">add(1,2.14) //
3.14</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">再如，求</span><span style="font-family:Consolas" lang="EN-US">max</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
max2[T](x:T, y:T)(implicit n:Numeric[T]) = {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; import
n._</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; if (x
&gt; y) x else y</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">max2(2, 3.14)
// 3.14 </span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027527"></a><a name="_Toc281660000"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">泛型定义</span></u></a><u><span style="font-size:
14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">type</span></u></h3>

<p class="MsoNormal"><b><span style="font-family:Consolas;background:
yellow" lang="EN-US">abstract</span></b><span style="font-family:Consolas" lang="EN-US"> class
<span style="background:yellow">C1</span> {</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">type T</span></span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; val
e:T</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas;background:
yellow" lang="EN-US">abstract</span></b><span style="font-family:Consolas" lang="EN-US"> class
<span style="background:yellow">C2</span> {</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">type T</span></span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; val
list:List[T]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
len = list.length</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def m1(e1:Int)
= new <span style="background:yellow">C1</span> {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <b><span style="background:yellow">type T = Int</span></b></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; val
e = e1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
m2(e1:List[Int]) = new <span style="background:yellow">C2</span> {</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">type T = Int</span></span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; val
list = e1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}<a name="_Toc282027528"></a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Console
println m1(10) // 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Console
println m2(List(1,2,3,4,5)).len // 5</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">type</span><span style="font-family:宋体">也可以做数据类型的</span><span style="font-family:Consolas" lang="EN-US">alias</span><span style="font-family:
宋体">，类似</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">语言中的</span><span style="font-family:Consolas" lang="EN-US">typedef</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027529"></a><a name="_Toc281660001"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">2.21.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">@specialized</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def test[<span style="background:yellow">@specialized</span>(Int,Double) T](x:T)&nbsp; = x
match { case i:Int =&gt; "int"; case _ =&gt; "other" }</span></p>

<p class="MsoNormal"><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">@specialized</span><span style="font-family:宋体">之前，是编译成</span><span style="font-family:Consolas" lang="EN-US">Object</span><span style="font-family:
宋体">的代码；用了</span><span style="font-family:Consolas" lang="EN-US">@specialized</span><span style="font-family:宋体">，变成</span><span style="font-family:Consolas" lang="EN-US">IntTest(),DoubleTest(),...</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译后的文件尺寸扩充了，但性能也强了，不用</span><span style="font-family:Consolas" lang="EN-US">box</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">unbox</span><span style="font-family:宋体">了</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132209"></a><a name="_Toc282027530"></a><a name="_Toc281660002"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">2.22.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">枚举</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Enum</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">没有在语言层面定义</span><span style="font-family:
Consolas" lang="EN-US">Enumeration</span><span style="font-family:宋体">，而是在库中实现：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">object Color extends <span style="background:yellow">Enumeration</span>
{</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; type Color = <span style="background:yellow">Value</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val RED, GREEN, BLUE, WHITE, BLACK = <span style="background:yellow">Value</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">}<a name="_Toc282027531"></a></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">Color.RED // Color.Value = RED</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">import Color._</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val colorful = Color.<span style="background:yellow">values</span>
filterNot (e=&gt; e==WHITE || e==BLACK)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">colorful foreach println // RED\nGREEN\nBLUE</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">object Color extends Enumeration {</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val RED = <span style="background:yellow">Value</span>("</span><span style="font-family:宋体">红色</span><span style="font-family:Consolas" lang="EN-US">")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val GREEN = Value("</span><span style="font-family:宋体">绿色</span><span style="font-family:Consolas" lang="EN-US">")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val BLUE = Value("</span><span style="font-family:宋体">蓝色</span><span style="font-family:Consolas" lang="EN-US">")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val WHITE = Value("</span><span style="font-family:宋体">黑</span><span style="font-family:Consolas" lang="EN-US">")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; val BLASK = Value("</span><span style="font-family:宋体">白</span><span style="font-family:Consolas" lang="EN-US">")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">}<a name="_Toc282027532"></a></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">Color.RED // Color.Value = </span><span style="font-family:宋体">红色</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">import Color._</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val colorful = Color.values filterNot (List("</span><span style="font-family:宋体">黑</span><span style="font-family:Consolas" lang="EN-US">","</span><span style="font-family:宋体">白</span><span style="font-family:Consolas" lang="EN-US">")
contains _.toString)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">colorful foreach println //</span><span style="font-family:宋体">红色</span><span style="font-family:Consolas" lang="EN-US">\n</span><span style="font-family:宋体">绿色</span><span style="font-family:Consolas" lang="EN-US">\n</span><span style="font-family:宋体">蓝色</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; </span></p>

<h1><a name="_Toc306132210"></a><a name="_Toc282027533"></a><a name="_Toc281660003"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">FP</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132211"></a><a name="_Toc282027534"></a><a name="_Toc281660004"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">3.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">函数的地位和一般的变量是同等的，可以作为函数的参数，可以作为返回值。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">传入函数的任何输入是只读的，比如一个字符串，不会被改变，只会返回一个新的字符串。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">里面的一个问题就是很多只用到一次的</span><span style="font-family:Consolas" lang="EN-US">private</span><span style="font-family:宋体">方法，没有和使用它的方法紧密结合；</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">可以在函数里面定义函数，很好地解决了这个问题。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027535"></a><a name="_Toc281660005"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数定义</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">函数和方法一般用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">def</span><span style="font-family:宋体">定义；也可以用</span><span style="font-family:Consolas;
background:yellow" lang="EN-US">val</span><span style="font-family:宋体">定义<u>匿名函数</u>，或者定义<u>函数别名</u>。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def m0(x:Int)
= x*x</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m1 =
(x:Int)=&gt; x*x // ()</span><span style="font-family:宋体">是必须的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m2 =
{x:Int=&gt; x*x} // </span><span style="font-family:宋体">不用</span><span style="font-family:Consolas" lang="EN-US">(), </span><span style="font-family:
宋体">用</span><span style="font-family:Consolas" lang="EN-US">{}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m0(10) // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m1(10) // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m2(10) // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不需要返回值的函数，可以使用</span><span style="font-family:Consolas" lang="EN-US">def f() {...}</span><span style="font-family:宋体">，永远返回</span><span style="font-family:Consolas" lang="EN-US">Unit</span><span style="font-family:宋体">（即使使用了</span><span style="font-family:Consolas" lang="EN-US">return</span><span style="font-family:宋体">）</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">即：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
f() {...}&nbsp; </span><span style="font-family:宋体">等价于</span><span style="font-family:Consolas" lang="EN-US"> def f():Unit = {...}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f() { return
"hello world" }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f() // Unit</span><span style="font-family:宋体">，而不是</span><span style="font-family:Consolas" lang="EN-US">
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">需要返回值的函数，用</span><span style="font-family:Consolas" lang="EN-US"> def f() = {...} </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">
def f = {...}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f() = {
"hello world" } </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f() //
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f = {
"hello world" } // f</span><span style="font-family:宋体">是匿名函数</span><span style="font-family:Consolas" lang="EN-US"> {"hello world"}</span><span style="font-family:宋体">的别名</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f //
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">三种定义方式的区别：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:199.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="266">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f() {
  return .. }</span></p>
  </td>
  <td style="width:171.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">调用：</span><span style="font-family:Consolas" lang="EN-US">f, f()</span><span style="font-family:宋体">皆可</span></p>
  </td>
  <td style="width:171.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">始终返回：</span><span style="font-family:Consolas" lang="EN-US">Unit</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:199.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="266">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f() =
  ...</span></p>
  </td>
  <td style="width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">调用：</span><span style="font-family:Consolas" lang="EN-US">f, f()</span><span style="font-family:宋体">皆可</span></p>
  </td>
  <td style="width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">Unit</span><span style="font-family:宋体">或者值</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:199.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="266">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f = ...</span></p>
  </td>
  <td style="width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">调用：</span><span style="font-family:Consolas" lang="EN-US">f</span></p>
  </td>
  <td style="width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">Unit</span><span style="font-family:宋体">或者值</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">提示：函数式风格——尽量编写有返回值的函数</span><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">尽量简短（函数体不使用</span><span style="font-family:Consolas" lang="EN-US">{...}</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027536"></a><a name="_Toc281660006"></a><a name="_映射式定义"></a><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">3.1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">映射式定义</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">一种特殊的定义：映射式定义（直接相当于数学中的映射关系）</span><span style="font-family:Consolas" lang="EN-US">;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其实也可以看成是没有参数的函数，返回一个匿名函数；调用的时候是调用这个返回的匿名函数。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
f:Int=&gt;Double = { // </span><span style="font-family:宋体">请看做</span><span style="font-family:Consolas" lang="EN-US"> def f: (Int=&gt;Double) = {...}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
1 =&gt; 0.1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
2 =&gt; 0.2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
_ =&gt; 0.0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(1) // 0.1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(3) // 0.0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
m:Option[User]=&gt;User = { </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
Some(x) =&gt; x</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
None =&gt; null</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m(o).getOrElse("none...")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">多</span><span style="font-family:Consolas" lang="EN-US">-&gt;1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
m:(Int,Int)=&gt;Int = _+_</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m(2,3) // 5</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def m:Int=&gt;Int
= 30+&nbsp; // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">30+_,</span><span style="font-family:宋体">如果唯一的</span><span style="font-family:Consolas" lang="EN-US">"_"</span><span style="font-family:宋体">在最后</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">可以省略</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m(5) // 35</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027537"></a><a name="_Toc281660007"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">特殊函数名</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US"> + -
* /</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">方法名可以是</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def *(x:Int,
y:Int) = { x*y }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">*(10,20) // =
200</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1+2, </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">1.+(2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义一元操作符（置前）可用</span><span style="font-family:Consolas" lang="EN-US">unary_</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><i><span style="font-family:宋体">注：</span></i><i><span style="font-family:Consolas" lang="EN-US">unary </span></i><i><span style="font-family:宋体">：一元的，单一元素的</span></i><i><span style="font-family:Consolas" lang="EN-US">, </span></i><i><span style="font-family:宋体">单一构成的</span></i><i><span style="font-family:Consolas"> </span></i><i><span style="font-family:宋体">。发音：【</span></i><i><span style="font-family:Consolas" lang="EN-US">`ju: ne ri</span></i><i><span style="font-family:宋体">】</span></i></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-2</span><span style="font-family:宋体">，相当于：</span><span style="font-family:Consolas" lang="EN-US">(2).unary_<span style="background:yellow">-</span> // -2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">+2</span><span style="font-family:宋体">，相当于：</span><span style="font-family:Consolas" lang="EN-US">(2).unary_<span style="background:yellow">+</span> // 2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">!true, </span><span style="font-family:宋体">相当于：</span><span style="font-family:Consolas" lang="EN-US">(true).unary_<span style="background:yellow">!</span> // false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">~0</span><span style="font-family:宋体">，相当于</span><span style="font-family:Consolas" lang="EN-US">
(0).unary_<span style="background:yellow">~</span>&nbsp; // -1</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027538"></a><a name="_Toc281660008"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">缺省参数、命名参数</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">注意：从</span><span style="font-family:Consolas" lang="EN-US">Scala2.8</span><span style="font-family:宋体">开始支持。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">请对比以下两种写法的可读性：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">一般函数调用</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">命名函数调用</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sendEmail(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">"jon.pretty@example.com", </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">List("recipient@example.com"), </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">"Test email", </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">b, </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Nil, Nil, Nil)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">sendEmail(</span></p>
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; body = b,</span></p>
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; subject = "Test
  email",</span></p>
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; to =
  List("recipient@example.com"),</span></p>
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; from =
  "jon.pretty@example.com",</span></p>
  <p class="MsoNormal" style="margin-left:-1.45pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; attachments = List(file1,
  file2) )</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义和使用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def join(a:List[String],
s:String<span style="background:yellow">="-"</span>) = {
a.mkString(s) }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">join(List("a","b","c"))
// a-b-c</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">join(List("a","b","c"),
<span style="background:yellow">":"</span>) // a:b:c</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调整参数调用顺序：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">join(<span style="background:yellow">s=</span>":",<span style="background:yellow">a=</span>List("a","b","c"))
// a:b:c</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027539"></a><a name="_Toc281660009"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数调用</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(s:
String = "default") = { s }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f //
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f() //
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">&#216;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">对象的无参数方法的调用，可以省略</span><span style="font-family:Consolas" lang="EN-US">.</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello
world" toUpperCase // "HELLO WORLD"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">&#216;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">对象的</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个参数方法的调用，可以省略</span><span style="font-family:Consolas" lang="EN-US">.</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello
world" indexOf w // 6</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello
world" substring 5 // "world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Console print
10 // </span><span style="font-family:宋体">但不能写</span><span style="font-family:Consolas" lang="EN-US"> print 10</span><span style="font-family:宋体">，只能</span><span style="font-family:Consolas" lang="EN-US">print(10)</span><span style="font-family:
宋体">，省略</span><u><span style="font-family:Consolas" lang="EN-US">Console.</span></u></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 + 2 // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
(1).+(2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">&#216;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">对象的多个参数方法的调用</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">也可省略</span><span style="font-family:Consolas" lang="EN-US">.</span><span style="font-family:宋体">但不能省略</span><span style="font-family:Consolas" lang="EN-US">()</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello
world" substring (0, 5) // "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><span style="font-family:宋体">注意：</span></b></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">不在</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:
宋体">中的函数不能如此调用：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">def m(i:Int) = i*i</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">m 10 // </span><span style="font-family:
宋体;color:red">错误</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">但在</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:
宋体">中可以使用</span><span style="font-family:Consolas" lang="EN-US">this</span><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">object method {</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:
Consolas" lang="DA">&nbsp;&nbsp;&nbsp; def m(i:Int) = i*i</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:
Consolas" lang="DA">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="EN-US">def
main(args: Array[String]) = {</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val ii
= <span style="background:yellow">this m 15</span> &nbsp;// </span><span style="font-family:宋体">等同于</span><span style="font-family:Consolas" lang="EN-US">
m(15), this </span><span style="font-family:宋体">不能省略</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="DE">println(ii)</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:
Consolas" lang="DE">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:
Consolas" lang="DE">}</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:
Consolas" lang="DE">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">提示：这种调用方法最大的用途在于操作符重载，以及阅读性强的</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; System
exit 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="EN-US">Thread sleep 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; Console
println "hello world" // </span><span style="font-family:宋体">省略</span><span style="font-family:Consolas" lang="EN-US">Console</span><span style="font-family:
宋体">则报错</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; 2
** 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; "-"
* 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027540"></a><a name="_Toc281660010"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">匿名函数</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">形式：</span><span style="font-family:Consolas" lang="DA">((</span><span style="font-family:宋体">命名参数列表</span><span style="font-family:Consolas" lang="DA">)=&gt;</span><span style="font-family:
宋体">函数实现</span><span style="font-family:Consolas" lang="DA">)(</span><span style="font-family:宋体">参数列表</span><span style="font-family:Consolas" lang="DA">)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">特殊地：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="DA">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">无参数：</span><span style="font-family:Consolas" lang="DA"> (()=&gt;</span><span style="font-family:宋体">函数实现</span><span style="font-family:Consolas" lang="DA">)()</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="DA">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">有一个参数且在最后：</span><span style="font-family:Consolas" lang="DA"> (</span><span style="font-family:宋体">函数实现</span><span style="font-family:Consolas" lang="DA">)(</span><span style="font-family:宋体">参数</span><span style="font-family:Consolas" lang="DA">)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="DA">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">无返回值：</span><span style="font-family:Consolas" lang="DA"> ((</span><span style="font-family:宋体">命名参数列表</span><span style="font-family:Consolas" lang="DA">)=&gt;Unit)(</span><span style="font-family:
宋体">参数列表</span><span style="font-family:Consolas" lang="DA">)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">有参数的匿名函数（参数名称不能省）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(<span style="background:yellow">(i:Int)=&gt; i*i</span>)(3) // 9</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(<span style="background:yellow">(i:Int, j:Int) =&gt; i+j</span>)(3, 4) // 7</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">有一个参数且在最后的：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(10*)(2) // 20, </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="DA">
((x:Int)=&gt;10*x)(2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(10+)(2) // 12, </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="DA">
((x:Int)=&gt;10+x)(2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(List("a","b","c")
mkString)("=") // a=b=c</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">无参数的匿名函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(<span style="background:yellow">()=&gt; 10</span>)() // 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">无参数无返回值：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">(<span style="background:yellow">() =&gt; Unit</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">( ()=&gt; {println("hello");
20*10} )()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">{
println("hello"); 20*10 }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="DA">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
Consolas" lang="DA">def m = <span style="background:yellow">(i:Int)=&gt; i*i</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
Consolas" lang="DA">m(3) // 9</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
Consolas" lang="DA">List(1,2,3,4).map(m) // List(1, 4, 9, 16)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="DA">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def times3(m: ()=&gt; Unit) = { m();m();m() }</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">times3 ( ()=&gt; println("hello world")
)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">由于是无参数的匿名函数，可进一步简化：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def times3(m: <span style="background:yellow">=&gt;</span>Unit)
= { m;m;m } // </span><span style="font-family:宋体">参见“</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">参数”</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">times3 ( println("hello world") )</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027541"></a><a name="_Toc281660011"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">偏函数</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">用下划线代替</span><span style="font-family:Consolas" lang="EN-US">1+</span><span style="font-family:宋体">个参数的函数叫偏函数（</span><span style="font-family:Consolas" lang="EN-US">partially applied function</span><span style="font-family:宋体">），如：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><a name="OLE_LINK2"></a><a name="OLE_LINK1"><span style="font-family:Consolas" lang="EN-US">def
sum(a:Int,b:Int,c:Int) = a+b+c</span></a></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val p0 = sum _ // </span><span style="font-family:
宋体">正确</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val p1 = sum(10,_,20) // </span><span style="font-family:宋体">错误</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val p2 = sum(10,_:Int,20) // </span><span style="font-family:宋体">正确</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val p3 = sum(_:Int,100,_:Int)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">p0(1,2,3) // 6</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">p2(100) // 130</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">p3(10,1) // 111</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (sum
_)(1 2 3) // 6</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(sum(1,_:Int,3))(2) // 6</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(sum(_:Int,2,_:Int))(1,3) // 6</span></p>

<p class="MsoNormal"><span style="font-family:宋体">从上面可以看出，</span><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:
宋体">函数是一个正常函数中抽出来的一部分（参数不全），故称为</span><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:宋体">函数。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027542"></a><a name="_Toc281660012"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">“_”</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">匿名参数</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">_</span><span style="font-family:宋体">：匿名函数中的匿名参数，同</span><span style="font-family:
Consolas" lang="DA">Groovy</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="DA">it</span><span style="font-family:宋体">一样，</span><span style="font-family:Consolas" lang="DA">groovy</span><span style="font-family:
宋体">：</span><span style="font-family:Consolas"> <span lang="DA">3.times { print
it }</span></span><span style="font-family:宋体">；但也有差别：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:152.65pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="204">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>
  </td>
  <td style="width:178.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="238">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="DA">Groovy</span></p>
  </td>
  <td style="width:210.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="280">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="DA">Scala</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:152.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="204">
  <p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:宋体">同</span></p>
  </td>
  <td style="width:178.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="238">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">print({it*10}(5))
  // 50</span></p>
  </td>
  <td style="width:210.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="280">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">((_:Int)*10)(5)
  // 50</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">强类型语言，必须标明类型为</span><span style="font-family:Consolas" lang="DA">Int</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:152.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="204">
  <p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:宋体">不同</span></p>
  </td>
  <td style="width:178.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="238">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">def a =
  {it*it}(5) // 25</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">两个</span><span style="font-family:Consolas" lang="DA">it</span><span style="font-family:宋体">完全一样</span></p>
  </td>
  <td style="width:210.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="280">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">((_:Int)*(_:Int))(5,5)
  // 25</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="DA">((it:Int)=&gt;it*it)(5)
  // 25</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">不能用：</span><span style="font-family:Consolas" lang="DA">((_:Int)*(_:Int))(5)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">两个</span><span style="font-family:Consolas" lang="DA">_</span><span style="font-family:宋体">不一样，表示</span><span style="font-family:Consolas" lang="DA">2</span><span style="font-family:宋体">个不同参数</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:宋体">多个下划线指代多个参数，而不是单个参数的重复使用。第一个下划线代表第一个参数，第二个下划线代表第二个，第三个……，如此类推。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">Java</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><i><u><span style="font-family:Consolas" lang="DA">int</span></u></i><span style="font-family:
Consolas" lang="DA"> <i><u>add</u></i>(int i, int j) { <i><u>return</u></i> i+j; }</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">add(3,4)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">返回值、函数名和</span><span style="font-family:Consolas" lang="DA">return</span><span style="font-family:
宋体">关键字可以省略，变为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">scala </span><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="DA">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">((i:Int, j:Int) =&gt; i+j)(3, 4) // 7</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">i,j</span><span style="font-family:宋体">变量名可以省略，变为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">scala</span><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="DA">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;&nbsp;&nbsp; ((_:Int)
+ (_:Int))(3,4) // 7</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体">注意：括号</span><span style="font-family:Consolas" lang="DA">(_:Int)</span><span style="font-family:宋体">括号是必须的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其他例子</span><span style="font-family:宋体">：</span><a name="_Toc282027543"></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">"Hello".exists(_.isUpper) // true</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="DA">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="DA">def sum(x:Int,y:Int,z:Int) = x+y+z</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val sum1 = sum <span style="background:yellow">_</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val sum2 = sum(1000,<span style="background:yellow">_</span>:Int,100)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">sum1(1,2,3) // 6</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">sum2(5) // 1105</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">_</span><span style="font-family:宋体">在最后，还可以省略</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 to 5 foreach println</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 to 5 map (10*) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">1 to 5 map (*10) // </span><span style="font-family:
宋体;color:red">错误！</span><span style="font-family:Consolas" lang="EN-US">_</span><span style="font-family:宋体">不在最后不能省</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027544"></a><a name="_Toc281660013"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变长参数</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas"> <span lang="EN-US">*</span></span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">变长参数只能放在最后一个，否则就歧义了，</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
sum(ns:Int*, s:String) = ... // </span><span style="font-family:宋体;color:red">错误</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(ns:
Int<span style="background:yellow">*</span>) = {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="DA">var s = 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">&nbsp;&nbsp;&nbsp; for
(n&lt;-ns) </span><span style="font-family:Consolas" lang="EN-US">s += n</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; s</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sum(1,2,3,4)
// 10</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更函数化的写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(ns:Int<span style="background:yellow">*</span>) = ns.reduceLeft(_+_) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sum(1,2,3,4)
// 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def m(args:Any<span style="background:yellow">*</span>) = args foreach println</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#F3F5F5;
background:black" lang="EN-US">scala&gt;</span><span style="font-family:Consolas" lang="EN-US">
m(3,3.14,"hello",List(1,2,3))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">3.14</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hello</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1, 2, 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027545"></a><a name="_Toc281660014"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.1.10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;
font-family:Consolas" lang="EN-US">lazy</span></u></a><u><span style="font-size:14.0pt;
line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">参数</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">就是调用时用到函数的该参数，每次都重新计算：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">一般参数</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">lazy</span></b><b><span style="font-family:宋体">参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f1(x:
  Long) = { </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; val
  (a,b) = (x,x)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  println("a="+a+",b="+b)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f2(x: <span style="background:yellow">=&gt;</span>Long) = { </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; val
  (a,b) = (x,x)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  println("a="+a+",b="+b)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f1(System.nanoTime)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// a=140857176658355,b=140857176658355</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f2(System.nanoTime)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// a=14088022678<span style="background:yellow">6534</span>,b=14088022678<span style="background:
  yellow">7666</span></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas"> <span lang="EN-US">lazy</span></span><span style="font-family:宋体">参数是函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">一般参数</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">lazy</span></b><b><span style="font-family:宋体">参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def times3(m:
  Unit) = { m;m;m }</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def times3(m:
  <span style="background:yellow">=&gt;</span>Unit) = { m;m;m }</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">times3 (
  println("hello world") )</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">次</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">times3 (
  println("hello world") )</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">次</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span lang="EN-US">3</span><span style="font-family:宋体">：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">一般参数</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">lazy</span></b><b><span style="font-family:宋体">参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">def f(x:Int m: Unit) = { print(x*x); m }</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">def f(x:Int, m: <span style="background:yellow">=&gt;</span>Unit)
  = { print(x*x); m }</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(3,println("end"))
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">先执行</span><span style="font-family:Consolas" lang="EN-US">m</span><span style="font-family:宋体">，输出：</span><span style="font-family:Consolas" lang="EN-US">"end\n9"</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(3,println("end"))
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// lazy</span><span style="font-family:宋体">执行</span><span style="font-family:Consolas" lang="EN-US">m</span><span style="font-family:宋体">，输出</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">“</span><span style="font-family:Consolas" lang="EN-US">9end</span><span style="font-family:宋体">”</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">：自定义</span><span style="font-family:Consolas" lang="EN-US">loop</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def loop2
(cond: <span style="background:yellow">=&gt;</span>Boolean)(body: <span style="background:yellow">=&gt;</span>Unit): Unit = </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; if
(cond) { body; loop2(cond)(body) }</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var i=0; loop2
(i&lt;3) (i+=1) // i=3</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var i=0; loop2
{i&lt;3} {i+=1} // i=3</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者我们更习惯的方式</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var i=0; loop2
(i&lt;3) {i+=1}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">：自定义</span><span style="font-family:Consolas" lang="EN-US">loop..until</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def loop3
(body: <span style="background:yellow">=&gt;</span>Unit): foo = new foo(body)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class
foo(body: <span style="background:yellow">=&gt;</span>Unit) {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
until(cond: <span style="background:yellow">=&gt;</span>Boolean) { body; if(!cond)
until(cond) }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">//</span><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var i = 0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">loop3 { i+=1;
println(i) } until (i&gt;3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132212"></a><a name="_Toc282027546"></a><a name="_Toc281660015"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">3.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数式编程</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027547"></a><a name="_Toc281660016"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">风格</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">首选使用</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">，用</span><span style="font-family:Consolas" lang="EN-US">var</span><span style="font-family:
宋体">之前要仔细考虑是否真正需要。</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">非函数式</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数式</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var s =
  ""</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">if
  (args.length&gt;0) s = args[0]</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val s = if
  (args.length&gt;0) args[0] else ""</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
  gcd(a0:Int,b0:Int) = {</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; var a
  = a0; var b = b0</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  while(a!=0) {</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val t = a</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">a = a % b</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">b = t</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; }</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  return b</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">求</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:
  宋体">的最大公约数</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">所有的</span><span style="font-family:Consolas" lang="EN-US">while</span><span style="font-family:宋体">循环基本都可以被替代：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
  gcd(a:Int,b:Int) = </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">if (b==0) a else gcd(b, a % b)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">函数要短，可以试着所有的函数体都没有</span><span style="font-family:Consolas" lang="EN-US"> {...} </span><span style="font-family:
宋体">包围，一旦出现，尽量分解</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如打印</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">1&nbsp; 2&nbsp; 3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">2&nbsp; 4&nbsp; 6</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">3&nbsp; 6&nbsp; 9</span></p>

<table class="MsoNormalTable" style="margin-left:21.0pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">非函数式</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数式</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for(i&lt;-1
  to 3; j&lt;-1 to 3) {</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">print(i*j + " ");</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">if (j==3) println</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(n:Int)
  = 1 to 3 map (_*n) mkString " "</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 3 map f
  mkString "\n"</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027548"></a><a name="_Toc281660017"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数作为参数</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">采用映射式函数定义：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">def f(x:Int, y:Int, m:<span style="background:
yellow">(Int, Int)=&gt;Int</span>) = m(x,y) </span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">f(3,4, <span style="background:yellow">(x,y)=&gt;x+y</span>)
// 7</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">f(3,4, <span style="background:yellow">(x,y)=&gt;scala.math.sqrt(x*x+y*y)</span>)
// 5</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def f(x:Int, y:Int, m: <span style="background:
yellow">=&gt;Unit</span>) = { println(x*y); m } // </span><span style="font-family:宋体">参见“</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">参数”</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">f(3,4, <span style="background:yellow">println("end")</span>)
</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">// 12</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">// end</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
f(f2:Int=&gt;Int) = f2(5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; f(100+)
// 105, 100+</span><span style="font-family:宋体">是匿名函数</span><span style="font-family:Consolas" lang="EN-US"> ((x:Int)=&gt;100+x)</span><span style="font-family:
宋体">的简写</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027549"></a><a name="_Toc281660018"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数作为返回值</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
f(s:String):(Int =&gt; String) = { n:Int=&gt; s * n }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f("*")
// res32: (Int) =&gt; String = &lt;function1&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">res32(10) //
"**********"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f("*")(10)
// </span><span style="font-family:宋体">相当于先得到</span><span style="font-family:Consolas" lang="EN-US">f("*")</span><span style="font-family:
宋体">的返回值函数，再用该返回值函数调用一个参数</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027550"></a><a name="_Toc281660019"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Curry</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">化</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(a:Int,
b:Int) = { a + b } // sum(1, 2) = 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Curry</span><span style="font-family:宋体">化后：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
sum(a:Int)(b:Int) = { a + b } // sum(1)(2) = 3</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def sum(a:Int)
= { (b:Int)=&gt; a + b } // sum(1)(2) = 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">调用方式二：</span><span style="font-family:Consolas" lang="EN-US">val
t1 = sum(10);&nbsp; val t2 = t1(20)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027551"></a><a name="_Toc281660020"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">递归</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">使用递归的原因：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其一是很多数学关系、逻辑关系本身就是递归描述（</span><span style="font-family:Consolas" lang="EN-US">Hanoi</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Fib</span><span style="font-family:宋体">）的；</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其二是函数式编程不鼓励用变量循环，而是用递归。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">递归包含递归出口和递归体：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">递归出口</span></p>
  </td>
  <td style="width:268.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="358">
  <p class="MsoNormal"><span style="font-family:宋体">即递归的终止条件</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">比如</span><span style="font-family:Consolas" lang="EN-US">0!=1, fib(1)=fib(2)=1, index==1000</span></p>
  </td>
 </tr>
 <tr style="height:28.65pt">
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt;height:28.65pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">递归体</span></p>
  </td>
  <td style="width:268.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:28.65pt" valign="top" width="358">
  <p class="MsoNormal"><span style="font-family:宋体">即和前面或后面的值之间的关系</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">比如</span><span style="font-family:Consolas" lang="EN-US">n! = n*(n-1)!, fib(n)=fib(n-2)+fib(n-1)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：幂运算</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如计算</span><span style="font-family:Consolas" lang="EN-US">2^100, scala.math.pow(2,2000)</span><span style="font-family:宋体">越界，可用递归</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
pow(n:BigInt, m:BigInt):BigInt = if (m==0) 1 else pow(n,m-1)*n</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">Hanoi</span><span style="font-family:
宋体">汉诺塔</span></p>

<p class="MsoNormal"><span style="font-family:宋体">从</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">挪到</span><span style="font-family:Consolas" lang="EN-US">c</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-align:center;text-indent:21.1pt" align="center"><b><span style="font-family:Consolas;background:yellow" lang="EN-US">a(from)</span></b></p>
  </td>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">b(via)</span></b></p>
  </td>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas;background:yellow" lang="EN-US">c(to)</span></b></p>
  </td>
 </tr>
 <tr style="height:31.85pt">
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:21.1pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class="MsoNormal" style="text-indent:15.8pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">===</span></b></p>
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  color:#C00000" lang="EN-US">&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">=======&nbsp; --- n</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt" valign="bottom" width="154">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt" valign="bottom" width="154">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">=======&nbsp; --- n</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:21.1pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">=&nbsp; &nbsp;&nbsp;&nbsp;--- 1</span></b></p>
  <p class="MsoNormal" style="text-indent:15.8pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">===</span></b></p>
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  color:#C00000" lang="EN-US">&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:21.1pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class="MsoNormal" style="text-indent:15.8pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">===</span></b></p>
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  color:#C00000" lang="EN-US">&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">=======&nbsp; --- n</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:21.1pt"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
  <td style="width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="bottom" width="154">
  <p class="MsoNormal" style="text-indent:21.1pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class="MsoNormal" style="text-indent:15.8pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">===</span></b></p>
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  color:#C00000" lang="EN-US">&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><b><span style="font-family:Consolas" lang="EN-US">=======&nbsp; --- n</span></b></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
move(n:Int, a:Int, b:Int, c:Int) = {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; if
(n==1) println("%s to %s" format (a, c)) else {</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">move(n-1, a,c,b); move(1,a,b,c); move(n-1,b,a,c)
}}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：最大公约数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">12&nbsp; 20</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
20&nbsp; 12 (=12%20)</span></p>

<p class="MsoNormal" style="text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">12&nbsp; 8 (=20%12)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;
4 (=12%8)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#C00000">4</span>&nbsp; 0 (=8%4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def gcd(n:Int,
m:Int):Int = if(m==0) n else gcd(m, n%m)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">：上台阶</span></p>

<p class="MsoNormal"><span style="font-family:宋体">上</span><span style="font-family:Consolas" lang="EN-US">N</span><span style="font-family:宋体">级台阶，即可每次</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">步也可每次</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">步走，共有多少种不同走法</span></p>

<p class="MsoNormal"><span style="font-family:宋体">解法：迈出第一步有两种方法，第一步后就是</span><span style="font-family:Consolas" lang="EN-US">N-1</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">N-2</span><span style="font-family:宋体">的走法了</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">def step(n:Int):Int = if (n&lt;=2) n else
step(n-1)+step(n-2)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">推广：如果每次可走</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">步或</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">步或</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">步，则</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">def step(n:Int):Int = n match { case 1=&gt;1; case
2=&gt;2; case 3=&gt;4; </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">case _ =&gt;step(n-1)+step(n-2)+step(n-3) }</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027552"></a><a name="_Toc281660021"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">3.2.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">尾</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">-</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">递归</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">定义：函数尾（最后一条语句）是递归调用的函数。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">tail-recursive</span><span style="font-family:宋体">会被优化成循环，所以没有堆栈溢出的问题。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">线性递归的阶乘：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">nn1</span>(n:Int):BigInt = if (n==0) 1 else
nn1(n-1)*n</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(nn1(1000))
// 4023...000</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(nn1(10000))
// </span><span style="font-family:宋体">崩溃：（</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">尾递归的阶乘：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">nn2</span>(n:Int, rt:BigInt):BigInt = if (n==0) rt
else nn2(n-1, rt*n)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(nn2(1000,1))
// 40...8896</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(nn2(10000,1))
// 2846...000</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def <span style="background:yellow">nn3</span>(n:Int):BigInt = nn2(n,1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">线性递归</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">尾递归</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">nn1(5)&nbsp;
  <br>
  {5 * nn1(4) }<br>
  {5 * {4 * nn1(3) }}<br>
  {5 * {4 * {3 * nn1(2) }}}<br>
  {5 * {4 * {3 * {2 * nn1(1) }}}}<br>
  {5 * {4 * {3 * {2 * 1}}}}<br>
  {5 * {4 * {3 * 2}}}<br>
  {5 * {4 * 6}}<br>
  {5 * 24}<br>
  120</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">nn2(5, 1)<br>
  nn2(4, 1*5=5)<br>
  nn2(3, 4*5=20)<br>
  nn2(2, 3*20=60)<br>
  nn2(1, 2*60=120)<br>
  120</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">不算，直到递归到一个确定的值后，又从这个具体值向后计算；</span><span style="font-family:宋体">更耗资源</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">每次重复的调用都使得调用链条不断加长</span><span style="font-family:Consolas" lang="EN-US">. </span><span style="font-family:宋体">系统使用栈进行数据保存和恢复</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">每递归一次就算出相应的结果。</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">不能优化成循环</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">可以优化成循环</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：查找第</span><span style="font-family:Consolas" lang="EN-US">10001</span><span style="font-family:宋体">个质数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
prime(n:Int) = 2 to math.sqrt(n).toInt forall (n%_!=0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
next(p:Int) = p+1 to 2*p <span style="background:yellow">find</span> prime get</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def f(p:Int, <span style="background:yellow">i</span>:Int):Int = if (i==10001) p else f(next(p), <span style="background:yellow">i+1</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f(2,1) //
104743</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者使用</span><span style="font-family:Consolas" lang="EN-US">Stream</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">def f2(p:Int):<span style="background:yellow">Stream</span>[Int]
= p <span style="background:yellow">#::</span> f2(next(p))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">f2(2).<span style="background:yellow">take</span>(10001).last
// 104743</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列</span><span style="font-family:Consolas" lang="EN-US">(1 1 2 3 5 8 13 21)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">def fib2(n1:BigInt, n2:BigInt, i:Int, n:Int):BigInt
=</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; if (i==n) n1 else fib2(n2, n1+n2, i+1, n)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">def fib(n:Int) = fib2(1,1,0,n)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">0 to 10 map fib</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">fib(100-1) // </span><span style="font-family:
宋体">第</span><span style="font-family:Consolas" lang="EN-US">100</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数</span><span style="font-family:Consolas" lang="EN-US">=354224848179261915075</span></p>

<h1><a name="_Toc306132213"></a><a name="_Toc282027553"></a><a name="_Toc281660022"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">OOP</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132214"></a><a name="_Toc282027554"></a><a name="_Toc281660023"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">4.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类</span></u></a><u><span style="font-family:Consolas" lang="EN-US">class</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027555"></a><a name="_Toc281660024"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class User {</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">var name = "anonymous"</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">var age:Int = _</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val country = "china"</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def email = name + "@mail"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val u = new
User</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
var</span><span style="font-family:宋体;color:#5B6E6E">定义的属性可读可写</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">u.name =
"qh"; u.age = 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(u.name
+ ", " + u.age) <span style="color:#5B6E6E">// "qh, 30"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
val </span><span style="font-family:宋体;color:#5B6E6E">定义的属性只读不可写</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">u.country =
"usa" <span style="color:#5B6E6E">// </span></span><span style="font-family:宋体;color:red">报错</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">println(u.country)
<span style="color:#5B6E6E">// "china"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
def </span><span style="font-family:宋体;color:#5B6E6E">定义的是方法</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">, </span><span style="font-family:宋体;color:#5B6E6E">每次调用时重新计算</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">u.email <span style="color:#5B6E6E">// "qh@mail"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><a name="_Toc282027556"><span style="font-family:宋体">定义</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class Person(<u>ln
: String, fn : String, s : Person = null</u>) {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
lastName = ln;&nbsp;&nbsp; // </span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:
宋体">定义后才是属性，</span><span style="font-family:Consolas" lang="EN-US">ln</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">fn</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">s</span><span style="font-family:宋体">不可见</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
firstName = fn;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
spouse = s;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
introduction() : String = </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
return ("Hi, " + firstName + " " + lastName) +</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(if (spouse != null) " and spouse, " + spouse.firstName + "
" + spouse.lastName + "." </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;
else ".");</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span lang="EN-US">// </span><span style="font-family:宋体">调用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">new
Person("aa","bb", new
Person("cc","dd")).introduction();</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027557"></a><a name="_Toc281660025"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">构造方法</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class
c1(x:String) // </span><span style="font-family:宋体">等同于：</span><span style="font-family:Consolas" lang="EN-US">class c1(<span style="background:yellow">private</span>
<span style="background:yellow">var</span> x:String)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val o1 = new
c1("aaa")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o1.x // </span><span style="font-family:宋体;color:red">报错</span><span style="font-family:宋体">，因为是</span><span style="font-family:Consolas" lang="EN-US">private</span><span style="font-family:
宋体">的，定义成</span><span style="font-family:Consolas" lang="EN-US"> class c1(<span style="background:yellow">var</span> x:String) </span><span style="font-family:
宋体">才能这样用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object
construct1 {</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">class c1(name:String, age:Int)</span><span style="font-family:Consolas" lang="EN-US"> { // (1)</span><span style="font-family:
宋体">直接在类定义处</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def <span style="background:
yellow">this</span>() { <span style="background:yellow">this</span>("anonymous",
20) } // (2)</span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">this</span><span style="font-family:宋体">定义</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def m1() = {&nbsp; printf("%s=%d\n", name, age) }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
main(args:Array[String]) = { </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">new c1().</span><span style="font-family:Consolas" lang="EN-US">m1()</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">new c1("qh", 30)</span><span style="font-family:Consolas" lang="EN-US">.m1() </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">} </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">编译：</span><span style="font-family:Consolas" lang="EN-US">fsc construct1.scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行：</span><span style="font-family:Consolas" lang="EN-US">java construct1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：继承中的构造方法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class
c2(name:String, age:Int, female:Boolean=false) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">extends</span> <span style="background:yellow">c1(name,age)</span>
{</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; override
def toString = { name + "," +&nbsp; age + "," + female }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027558"></a><a name="_Toc281660026"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">override</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">不同于</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的使用</span><span style="font-family:Consolas" lang="EN-US"> @Override</span><span style="font-family:宋体">，或者直接使用相同名字覆盖父类方法。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">override</span> def toString = { name + ","
+&nbsp; age + "," + female }</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是覆盖抽象方法，可以不用</span><span style="font-family:Consolas" lang="EN-US">overriade</span><span style="font-family:
宋体">关键字。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027559"></a><a name="_Toc281660027"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">object</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">单例对象</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">如：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Java</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scala</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">public class
  User {</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  private String name;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  private User(String name) { this.name=name; }</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  public static User instance(String name) {</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">return new User(name)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; }</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object User
  {&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; var
  name:String = _</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; def apply(name:String){this.name=name;
  this}</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; override def toString = "name:
  " + name</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val u =
  User("qh") // "name: qh"</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027560"></a><a name="_Toc281660028"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">静态方法</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">没有静态方法，类似静态方法的函数定义在</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:宋体">中：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object Stringx
{</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
left(s0:String, s:String) = ...</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">直接调用</span><span style="font-family:Consolas" lang="EN-US">Stringx.left(s0, s)</span><span style="font-family:
宋体">，或者</span><span style="font-family:Consolas" lang="EN-US"> Stringx left (s0,
s)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义在</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">implicit</span><span style="font-family:
宋体">方法也能被直接调用：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--------- <u>ImportSub.scala</u></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">object</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:
silver">ImportSub</span> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> fac(n: </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Int</span><span style="font-family:Consolas;color:black" lang="EN-US">) = 1 to n reduceLeft (_ *
_)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">implicit</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> foo(n: </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Int</span><span style="font-family:Consolas;color:black" lang="EN-US">) = </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> { </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> ! = fac(n) }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><a name="_case_class"></a><span style="font-family:
Consolas" lang="EN-US">--------- <u>ImportMain.scala</u></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055;background:yellow" lang="EN-US">import</span><span style="font-family:Consolas;color:black;background:yellow" lang="EN-US">
ImportSub._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">object</span><span style="font-family:Consolas;color:black" lang="EN-US"> ImportMain {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> main(args : </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Array</span><span style="font-family:Consolas;color:black" lang="EN-US">[String]) : </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Unit</span><span style="font-family:Consolas;color:black" lang="EN-US"> = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp;
println(<span style="background:yellow">5!</span>) </span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:
宋体;color:#3F7F5F">调用</span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">ImportSub</span><span style="font-family:宋体;color:#3F7F5F">中定义的</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">implicit</span><span style="font-family:宋体;color:#3F7F5F">函数</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:black" lang="EN-US">}</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027561"></a><a name="_Toc281660029"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">case
class(</span></u></a><u><span style="font-size:14.0pt;line-height:173%;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">条件类</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">)</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">case class</span><span style="font-family:Consolas" lang="EN-US"> Person(name:String, age:Int)&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:宋体">特殊之处：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">新建类实例不用</span><span style="font-family:Consolas" lang="EN-US">new Person(..)</span><span style="font-family:
宋体">，直接用</span><span style="font-family:Consolas" lang="EN-US">Person("qh",20)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">自动定义好</span><span style="font-family:Consolas" lang="EN-US">getXX</span><span style="font-family:宋体">方法，</span><span style="font-family:Consolas" lang="EN-US">Person("qh",20).name //
"qh"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">提供默认的</span><span style="font-family:Consolas" lang="EN-US">toString(), Person("qh",20) // "Person(qh,20)"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">结合类继承可以通过模式匹配进行分解</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">abstract class Person</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">case class Man(power:Int) extends Person</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">case class Woman(beauty:Int, from:String) extends
Person</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">val w1 = Woman(100,"china") </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">val w2 = w1.<span style="background:yellow">copy</span>(from="usa")
// Woman(100,"usa")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">def f(t:Person) = t match { </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">case Man</span><span style="font-family:Consolas" lang="EN-US">(x) =&gt; "man's power:" + x </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">case Woman</span><span style="font-family:Consolas" lang="EN-US">(x,y) =&gt; y + " beauty:" +
x</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">} </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">f(Man(100)) // man's power:100</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">f(Woman(90, "china")) // china beauty:90</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">注：基本类型直接可以用</span><span style="font-family:Consolas" lang="EN-US"><a href="#_match..case%28switch%29">math case</a></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：可变的类状态</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">case class C1(<span style="background:yellow">var
s</span>: String, <span style="background:yellow">var ops</span>: Int) {&nbsp; </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; def &gt;&gt;= (f: (String=&gt;String)) = {</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; s = f(s)&nbsp; // s</span><span style="font-family:宋体">改变</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ops += 1&nbsp; // ops</span><span style="font-family:宋体">改变</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; this // </span><span style="font-family:宋体">返回自身，可以连续调用</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; }&nbsp; </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">}&nbsp;&nbsp; </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">val C1(res, ops) = C1("ab", 0) &gt;&gt;=
(_ * 3) &gt;&gt;= (_ drop 3) </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">// res="ab"-&gt;"ababab"-&gt;"bab",
ops=0-&gt; 0+1+1-&gt;2</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：用</span><span style="font-family:Consolas" lang="EN-US">case class</span><span style="font-family:宋体">代替</span><span style="font-family:Consolas" lang="EN-US">tuple</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val p =
("qh",20) // p._1 = "qh", p._2 = 20</span><span style="font-family:宋体">；好处是简洁，但无意义</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">case class person</span><span style="font-family:Consolas" lang="EN-US">(name:String,
age:Int)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val p =
person("qh",20) // p.name = "qh", p.age = 20; </span><span style="font-family:宋体">好处是有名字，自说明，可读性强</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">：用</span><span style="font-family:Consolas" lang="EN-US">case class</span><span style="font-family:宋体">来描述元数据</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">xml</span><span style="font-family:宋体">的版本：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&lt;todo name = "housework"&gt;</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">&lt;item priority = "high"&gt;Clean the
hose&lt;/item&gt;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&lt;item priority =
"medium"&gt;Wash the dishes&lt;/item&gt;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&lt;item priority =
"medium"&gt;Buy more soap&lt;/item&gt;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&lt;/todo&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">的版本：</span><a name="_Toc282027562"></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(todo "housework"</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(item (priority high) "Clean the
house")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(item (priority medium)
"Wash the dishes")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(item (priority medium) "Buy
more soap"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
class item(priority:String, s:String)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
class todo(name:String, items:List[item])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; todo
(name="housework", </span></p>

<p class="MsoNormal" style="text-indent:52.5pt"><span style="font-family:Consolas" lang="EN-US">items=item("high","Clean the
house")::</span></p>

<p class="MsoNormal" style="text-indent:89.25pt"><span style="font-family:Consolas" lang="EN-US">item("medium","Wash the
dishes")::</span></p>

<p class="MsoNormal" style="text-indent:89.25pt"><span style="font-family:Consolas" lang="EN-US">item("medium","Buy more
soap")::Nil)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027563"></a><a name="_Toc281660030"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">case
object(</span></u></a><u><span style="font-size:14.0pt;line-height:173%;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">条件单例对象</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">)</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">比如定义一个标识类（而不是字符串）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case object
Start</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case object
Stop</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027564"></a><a name="_Toc281660031"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">枚举</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">中：</span></p>

<pre><span class="kw2"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp; enum</span></span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> fruits <span class="br0">{</span> apple, banana, cherry <span class="br0">}</span></span></pre>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中，则是：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">sealed abstract class Fruits // sealed</span><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">final</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">case object Apple extends Fruits</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">case object Banana extends Fruits</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">case object Cherry extends Fruits</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以是</span><span style="font-family:Consolas" lang="EN-US"> case class</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027565"></a><a name="_Toc281660032"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">属性和</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Bean</span></u></h3>

<p class="MsoNormal"><a name="OLE_LINK12"></a><a name="OLE_LINK11"><span style="font-family:宋体">例子</span></a><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">（直接定义和使用属性）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class c {</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">var name = "anonymous" <span style="color:#5B6E6E">// var</span></span><span style="font-family:宋体;
color:#5B6E6E">定义的是</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US">r/w</span><span style="font-family:宋体;color:#5B6E6E">的属性</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val age = 20&nbsp; <span style="color:#5B6E6E">//
val</span></span><span style="font-family:宋体;color:#5B6E6E">定义的是只</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">r</span><span style="font-family:宋体;color:#5B6E6E">属性</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val o = new c</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o.name =
"qh"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o.name <span style="color:#5B6E6E">// "qh"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o.age = 10 <span style="color:#5B6E6E">// </span></span><span style="font-family:宋体;color:red">错误</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o.age <span style="color:#5B6E6E">// 20</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">o.</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">（定义</span><span style="font-family:Consolas" lang="EN-US">get/set</span><span style="font-family:
宋体">方法）：</span></p>

<p class="MsoNormal"><a name="OLE_LINK14"></a><a name="OLE_LINK13"><span style="font-family:Consolas" lang="EN-US">class c2 {</span></a></p>

<p class="MsoNormal" style="text-indent:10.5pt"><a name="_Toc282027566"><span style="font-family:Consolas" lang="EN-US">@reflect.BeanProperty var name =
"anonymous"</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val o2 = new
c2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o2.name =
"qh" // </span><span style="font-family:宋体">也可以直接存取</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o2.name //
"qh"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o2.<span style="background:yellow">setName</span>("james") // </span><span style="font-family:宋体">增加了</span><span style="font-family:Consolas" lang="EN-US">set/get</span><span style="font-family:宋体">方法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">o2.<span style="background:yellow">getName</span>() // "james"</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027567"></a><a name="_Toc281660033"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.1.10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">反射</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">没有太特别的反射机制，使用</span><span style="font-family:
Consolas" lang="EN-US">java</span><span style="font-family:宋体">的即可，不过</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">在</span><span style="font-family:Consolas" lang="EN-US">match..case</span><span style="font-family:宋体">中可以匹配类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; case
o:FooClass1 =&gt; ...</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相关还有</span><span style="font-family:Consolas" lang="EN-US">isInstanceOf[T], asInstanceOf[T]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">（利用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">reflect</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello".getClass.getMethods.map(_.getName).toList.sortWith(_&lt;_).mkString(",
")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">classOf</span><span style="font-family:Consolas" lang="EN-US">[String] //
</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">String.class</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"aaa".<span style="background:yellow">isInstanceOf</span>[String] // true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"aaa".<span style="background:yellow">asInstanceOf</span>[String] </span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132215"></a><a name="_Toc282027568"></a><a name="_Toc281660034"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">4.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">trait</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">超级接口</span></u></h2>

<p class="MsoNormal"><i><span style="font-family:宋体">注：</span></i><i><span style="font-family:Consolas" lang="EN-US">trait &nbsp;[<span style="color:green">treit</span>]
n.</span></i><i><span style="font-family:宋体">特征，特点，特性</span></i></p>

<p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Interface</span><span style="font-family:
宋体">类似，但可以定义实体方法，而非仅仅方法定义</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait</span><span style="font-family:宋体">可以看作有方法实现和字段的</span><span style="font-family:
Consolas" lang="EN-US">interface</span><span style="font-family:宋体">；代表一类事物的特性；</span></p>

<p class="MsoNormal"><span style="font-family:宋体">比如</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">Tom</span><span style="font-family:宋体">，可能是</span><span style="font-family:Consolas" lang="EN-US">Engine </span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">Son</span><span style="font-family:宋体">两个</span><span style="font-family:Consolas" lang="EN-US">trait</span><span style="font-family:宋体">的混合；</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">Sunny</span><span style="font-family:宋体">可能</span><span style="font-family:Consolas" lang="EN-US">Sales</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Son</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Father</span><span style="font-family:宋体">三个</span><span style="font-family:Consolas" lang="EN-US">trait</span><span style="font-family:宋体">的混合；</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:宋体">当在运行时往</span><span style="font-family:Consolas" lang="EN-US">Son</span><span style="font-family:
宋体">里面增加方法或者字段的时候，</span><span style="font-family:Consolas" lang="EN-US">Tom</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Sunny</span><span style="font-family:宋体">都得到增加的特性。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027569"></a><a name="_Toc281660035"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.2.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">trait</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">trait</span><span style="font-family:Consolas" lang="EN-US"> Runnable {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; def
run(): Unit;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">只是用一个接口，就用</span><span style="font-family:Consolas" lang="EN-US">extends:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class c1 <span style="background:yellow">extends</span> Runnable {...}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个接口（或一个继承一个接口），用</span><span style="font-family:Consolas" lang="EN-US">with</span><span style="font-family:宋体">而不是</span><span style="font-family:Consolas" lang="EN-US">implements</span><span style="font-family:宋体">如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class c1 <span style="background:yellow">extends</span> c0 <span style="background:yellow">with</span>
Runnable {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; def
run(): Unit = {...}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">一个类可以组合多个</span><span style="font-family:Consolas" lang="EN-US">trait</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class c1
extends t1 with t2 with t3 {...}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027570"></a><a name="_Toc281660036"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.2.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">mixin</span></u></a></h3>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:
silver">Human</span></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> Child</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">trait</span><span style="font-family:Consolas;color:black" lang="EN-US"> Dad {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">private</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">var</span><span style="font-family:Consolas;color:black" lang="EN-US"> children:List[Child] = Nil</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> add(child:Child) = child
:: children</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> Man1(name:String) </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">extends</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:
silver">Human</span> </span><span style="font-family:Consolas;
color:#7F0055" lang="EN-US">with</span><span style="font-family:Consolas;
color:black" lang="EN-US"> Dad </span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">静态</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">mixin</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> Man2(name:String) </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">extends</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:
silver">Human</span> // </span><span style="font-family:宋体;color:black">先不具备</span><span style="font-family:Consolas;color:black" lang="EN-US">Dad trait</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:12.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:
silver">m1</span> = </span><span style="font-family:Consolas;
color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;
color:black" lang="EN-US"> Man1(</span><span style="font-family:Consolas;
color:#2A00FF" lang="EN-US">"qh"</span><span style="font-family:Consolas;
color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black;background:silver" lang="EN-US">m1</span><span style="font-family:Consolas;color:black" lang="EN-US">.add(</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> Child)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> m2 = </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> Man2(</span><span style="font-family:Consolas;color:#2A00FF" lang="EN-US">"</span><span style="font-family:宋体;color:#2A00FF">小孩</span><span style="font-family:Consolas;color:#2A00FF" lang="EN-US">"</span><span style="font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">//&nbsp; &nbsp;
m2.add(new Child) // </span><span style="font-family:宋体;color:#3F7F5F">报错</span><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; &nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> m2$ = </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> Man2(</span><span style="font-family:Consolas;color:#2A00FF" lang="EN-US">"james"</span><span style="font-family:Consolas;color:black" lang="EN-US">) </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">with</span><span style="font-family:Consolas;color:black" lang="EN-US"> Dad </span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:
宋体;color:#3F7F5F">动态</span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">mixin</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">m2$.add(</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> Child)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:12.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132216"></a><a name="_Toc282027571"></a><a name="_Toc281660037"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">4.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">协变和逆变</span></u></a><u><span style="font-family:Consolas" lang="EN-US">(co-|contra-)variance</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027572"></a><a name="_Toc281660038"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.3.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">概念</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">使用“</span><span style="font-family:Consolas" lang="EN-US">+</span><span style="font-family:宋体">”“</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">”差异标记</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Function[A, B]</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Function[-A,
+B]</span><span style="font-family:宋体">的区别图示：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/scala/image008.jpg" border="0" height="244" width="341"></span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/scala/image009.jpg" border="0" height="244" width="341"></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Function[A,B]</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Function[-A,+B]</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait
  Queue[T] {}</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">非变</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait
  Queue[+T] {}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">协变</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">S extends A (S</span><span style="font-family:
  宋体">为子类型，</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">为父类型</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:宋体">，</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">则</span><span style="font-family:Consolas" lang="EN-US">Queue[S]</span><span style="font-family:宋体">为子类型，</span><span style="font-family:Consolas" lang="EN-US">Queue[A]</span><span style="font-family:宋体">为父类型</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">S &lt;: A
  =&gt; Queue[S] &lt;: Queue[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait
  Queue[-T] {}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">逆变</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">S extends A (S</span><span style="font-family:
  宋体">为子类型，</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">为父类型</span><span style="font-family:Consolas" lang="EN-US">)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">则</span><span style="font-family:Consolas" lang="EN-US">Queue[S]</span><span style="font-family:宋体">为父类型，</span><span style="font-family:Consolas" lang="EN-US">Queue[A]</span><span style="font-family:宋体">为子类型，和协变互逆</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">S &lt;: A
  =&gt; Queue[S] &gt;: Queue[A]</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-A</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">的子集，叫逆变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">+B</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">B</span><span style="font-family:宋体">的超集，叫协变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027573"></a><a name="_Toc281660039"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.3.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类型上下界</span></u></a></h3>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;%</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo[T &lt;%
  Ordered[T]](...)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">关系较弱：</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">能够隐式转换为</span><span style="font-family:Consolas" lang="EN-US">Ordered[T]</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;:</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo[T &lt;:
  Ordered[T]](...)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">关系较强：</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">必须是</span><span style="font-family:Consolas" lang="EN-US">Ordered[T]</span><span style="font-family:宋体">的子类型，即</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">的类型范围小于</span><span style="font-family:
  Consolas" lang="EN-US">Ordered[T]</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Ordered[T]</span><span style="font-family:宋体">为上界</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&gt;:</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foo[T &gt;: A](...)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">关系较强：</span><span style="font-family:Consolas" lang="EN-US">T</span><span style="font-family:宋体">必须是</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:
  宋体">的父类型，即</span><span style="font-family:Consolas" lang="EN-US">Tde</span><span style="font-family:宋体">类型范围大于</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">为下界</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027574"></a><a name="_Toc281660040"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">4.3.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">协变、逆变结合上下界</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait c1[<span style="background:yellow">+T</span>] { </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def m[K <span style="background:yellow">&gt;:</span>
  T](x:K) = x }</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">trait c1[<span style="background:yellow">-T</span>] { </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def m[K <span style="background:yellow">&lt;:</span>
  T](x:K) = x }</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object c2
  extends c1[<span style="background:yellow">Int</span>]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m(3) // 3</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m(3.0) //
  3.0</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m("abc")
  // "abc"</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object c2
  extends c1[<span style="background:yellow">Int</span>]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m(3) // 3</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m(3.0) //
  </span><span style="font-family:宋体">报错</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">c2.m("abc")
  // </span><span style="font-family:宋体">报错</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体;color:#1F497D;background:yellow">非变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case class
T1[T](e:T)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v1:T1[java.lang.Integer] = new T1(100)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v2:T1[java.lang.Integer] = v1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">v2.e // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v3:T1[java.lang.Number] = v1 // </span><span style="font-family:宋体;color:#C00000">报错</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C00000" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体;background:yellow">协变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case class
T1[+T](e:T)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val v1:T1[java.lang.Integer]
= new T1(100)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v2:T1[java.lang.Integer] = v1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">v2.e // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v3:T1[java.lang.Number] = v1 // </span><span style="font-family:宋体;color:#0070C0">合法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">v3.e // 100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v4:T1[java.lang.Integer] = v3 //</span><span style="font-family:宋体;color:red">非法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体;background:yellow">逆变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class
T1[-T](e:T)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v1:T1[java.lang.Number] = new T1(100)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v2:T1[java.lang.Number] = v1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v3:T1[java.lang.Integer] = v1 // </span><span style="font-family:宋体;color:#0070C0">合法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
v4:T1[java.lang.Number] = v3 // </span><span style="font-family:宋体;color:red">非法</span></p>

<h1><a name="_Toc306132217"></a><a name="_Toc282027575"></a><a name="_Toc281660041"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">util</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">包</span></u></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132218"></a><a name="_Toc282027576"></a><a name="_Toc281660042"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">架构</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.scala-lang.org/docu/files/collections-api/collections.html" target="_blank" rel="external">http://www.scala-lang.org/docu/files/collections-api/collections.html</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span class="apple-style-span"><span style="font-size:13.5pt;font-family:
Consolas;color:black" lang="EN-US">scala.collection.<span style="background:yellow">immutable</span></span></span></p>

<p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image010.jpg" border="0" height="623" width="708"></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span class="apple-style-span"><span style="font-size:13.5pt;font-family:
Consolas;color:black" lang="EN-US">scala.collection.<span style="background:yellow">mutable</span></span></span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span lang="EN-US"><img src="/static/images/scala/image011.jpg" border="0" height="479" width="708"></span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">不可变（</span></b><b><span style="font-family:
  Consolas" lang="EN-US">collection.immutable._</span></b><b><span style="font-family:宋体">）</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">可变（</span></b><b><span style="font-family:
  Consolas" lang="EN-US">collection.mutable._</span></b><b><span style="font-family:宋体">）</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Array</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">ArrayBuffer</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">ListBuffer</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">String</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">StringBuilder</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">/</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">LinkedList, DoubleLinkedList</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">MutableList</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">/</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Queue</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Array</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">ArraySeq</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Stack</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">Stack</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">HashMap HashSet</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">HashMap HashSet</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">ArrayStack</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:center" align="center"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132219"></a><a name="_Toc282027577"></a><a name="_Toc281660043"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">集合</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Array,List,Tuple</span></u></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:48.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="65">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array</span></p>
  </td>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">长度固定</span></p>
  </td>
  <td style="width:72.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:宋体">元素可变</span></p>
  </td>
  <td style="width:353.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="471">
  <p class="MsoNormal"><span style="font-family:宋体">确定长度，后赋值</span><span style="font-family:Consolas" lang="EN-US">;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:48.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="65">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
  <td style="width:61.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">长度固定</span></p>
  </td>
  <td style="width:72.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:宋体">元素不可变</span></p>
  </td>
  <td style="width:353.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="471">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:48.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="65">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Tuple</span></p>
  </td>
  <td style="width:61.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">长度固定</span></p>
  </td>
  <td style="width:72.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:宋体">元素不可变</span></p>
  </td>
  <td style="width:353.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="471">
  <p class="MsoNormal"><span style="font-family:宋体">常用于有多个返回值的函数；或者多个变量的同时定义</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala 2.8</span><span style="font-family:宋体">中，</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">者的元素都可以混合不同的类型（转化为</span><span style="font-family:Consolas" lang="EN-US">Any</span><span style="font-family:宋体">类型）；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala 2.7</span><span style="font-family:宋体">中，</span><span style="font-family:Consolas" lang="EN-US">Array</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">都不能混合类型，只有</span><span style="font-family:
Consolas" lang="EN-US">Tuple</span><span style="font-family:宋体">可以；</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027578"></a><a name="_Toc281660044"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.2.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义和初始化</span></u></a></h3>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Array</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list1 =
new Array<span style="background:yellow">[</span>String<span style="background:
yellow">]</span>(0) // Array()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list2 =
new Array[String](3) // Array(null, null, null)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
list3:Array[String] = new Array(3) // // Array(null, null, null)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list1 =
Array("a","b","c","d") // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Array.apply("a","b","c","d")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义一个类型为</span><span style="font-family:Consolas" lang="EN-US">Any</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Array</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val aa = Array[Any](1,
2)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val aa: Array[Any]
= Array(1, 2)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val aa:
Array[_] = Array(1, 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array
(1,3,5,7,9,11)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array[Int](1
to 11 by 2:_*)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array</span><span style="font-family:宋体">对应的可变</span><span style="font-family:Consolas" lang="EN-US">ArrayBuffer</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val ab =
collection.mutable.<span style="background:yellow">ArrayBuffer</span>[Int]()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ab +=
(1,3,5,7)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ab ++=
List(9,11) // ArrayBuffer(1, 3, 5, 7, 9, 11)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ab toArray // Array
(1, 3, 5, 7, 9, 11)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ab clear //
ArrayBuffer()</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">List</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list:List<span style="background:yellow">[</span>Int<span style="background:yellow">]</span> =
List(1,3,4,5,6) // </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US"> List(1 to 6:_*)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list1 =
List("a","b","c","d") // </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">
List('a' to 'd':_*) map (_.toString)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">元素合并进</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">::</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list2 =
"a"::"b"::"c"::Nil // Nil</span><span style="font-family:宋体">是必须的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list3 =
"begin" :: list2 // list2</span><span style="font-family:宋体">不变，只能加在头，不能加在尾</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多个</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">合并用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">++</span><span style="font-family:宋体">，也可以用</span><span style="font-family:Consolas;
background:yellow" lang="EN-US">:::</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">不如</span><span style="font-family:Consolas" lang="EN-US">++)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list4 =
list2 <span style="background:yellow">++</span> "end" <span style="background:yellow">++</span> Nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list4 =
list2 <span style="background:yellow">:::</span> "end" :: Nil // </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">
list2 ::: List("end")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">当</span><span style="font-family:Consolas" lang="EN-US"> import java.util._ </span><span style="font-family:
宋体">之后会产生冲突，需要指明包</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">scala.List</span><span style="font-family:Consolas" lang="EN-US">(1,2,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ListBuffer</span><span style="font-family:宋体">是可变的：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val lb =
scala.collection.mutable.ListBuffer(1,2,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">lb.append(4)
// ListBuffer(1, 2, 3, 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">建议定义方式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val head::body
= List(4,"a","b","c","d") </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// head: Any =
4</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// body:
List[Any] = List(a, b, c, d)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val a::b::c =
List(1,2,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// a: Int = 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// b: Int = 2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// c:
List[Int] = List(3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义固定长度的</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List.fill(10)(2)
<span style="color:#5B6E6E">// List(2, 2, 2, 2, 2, 2, 2, 2, 2, 2)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array.fill(10)(2)<span style="color:#5B6E6E"> // Array(2, 2, 2, 2, 2, 2, 2, 2, 2, 2)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">List.fill(10)(scala.util.Random.nextPrintableChar)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">// List(?, =, ^, L, p, &lt;, \, 4,
0, !)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">List.fill(10)(scala.util.Random.nextInt(101))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">// List(80, 45, 26, 75, 24, 72, 96,
88, 86, 15)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">对应的可变</span><span style="font-family:Consolas" lang="EN-US">ListBuffer</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val lb = collection.mutable.<span style="background:yellow">ListBuffer</span>[Int]()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">lb += (1,3,5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">lb ++= List(9,11) // ListBuffer(1, 3, 5, 7, 9, 11)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">lb.toList // List(1, 3, 5, 7, 9, 11)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">lb.clear // ListBuffer()</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Vector</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala2.8</span><span style="font-family:宋体">为了提高</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">的随机存取效率而引入的新集合类型（而</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">存取前部的元素快，越往后越慢）。</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val v = Vector.empty</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val v2 = 0 <span style="background:yellow">+:</span>
v <span style="background:yellow">:+</span> 10 <span style="background:yellow">:+</span>
20 // Vector(0, 10, 20), Vector </span><span style="font-family:宋体">那一边始终有</span><span style="font-family:Consolas" lang="EN-US">":"</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">v2(1) // 10</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">v2 <span style="background:yellow">updated</span>
(1,100) // Vector(0, 100, 20)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Seq</span><span style="font-family:宋体">的缺省实现是</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Seq(1,2,3) // List(1, 2, 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">IndexSeq</span><span style="font-family:宋体">的缺省实现是</span><span style="font-family:Consolas" lang="EN-US">Vector:</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">IndexSeq(1,2,3) // Vector(1, 2, 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Tuple</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val t1 =
("a","b","c")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var t2 =
("a", 123, 3.14, new Date())</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val (a,b,c) =
(2,4,6)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">最简单的</span><span style="font-family:Consolas" lang="EN-US">Tuple</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1-&gt;"hello
world"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">和下面的写法是等价的：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1,
"hello world")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Range</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Range(0, 5) //
(0,1,2,3,4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">等同于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">0 until 5</span></p>

<p class="MsoNormal"><span style="font-family:宋体">等同于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">0 to 4</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">两个</span><span style="font-family:Consolas" lang="EN-US">Range</span><span style="font-family:宋体">相加：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">('0' to '9')
++ ('A' to 'Z') // (0,1,..,9,A,B,...,Z)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Range</span><span style="font-family:宋体">和序列转换：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">1 to 5 toList</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当与：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">List(1 to 5:_*)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Vector(1 to 5: _*) // Vector(1,2,3,4,5)</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Stream</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Stream</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">lazy
List</span><span style="font-family:宋体">，避免在中间过程中生成不必要的集合。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义生成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val st = 1 <span style="background:yellow">#::</span> 2 <span style="background:yellow">#::</span>
3 <span style="background:yellow">#::</span> Stream.empty // Stream(1, ?)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列的</span><span style="font-family:Consolas" lang="EN-US">Stream</span><span style="font-family:
宋体">版本简单易懂</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def fib(a:
Int, b: Int): Stream[Int] = a <span style="background:yellow">#::</span> fib(b,&nbsp;
a+b)</span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:#0000E5" lang="EN-US">val</span></span><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">
fibs = fib(1, 1).<span style="background:yellow">take</span>(7).toList // List(1,
1, 2, 3, 5, 8, 13)</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">fib</span></span><span class="apple-style-span"><span style="font-family:宋体;color:black">数列的前后项比值趋于黄金分割：</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">def fn(n:Int) = fib(1,1)(n)</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">1 to 10 map (n=&gt; 1.0*fn(n)/fn(n+1))
// Vector(0.5, 0.666, ..., 0.618)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">Range</span><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(1,50000000).filter (_ % 13==0)(1) // 26, </span><span style="font-family:宋体">但很慢，需要大量内存</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">Stream.range</span><span style="font-family:Consolas" lang="EN-US">(1,50000000).filter(_%13==0)(1)
// 26</span><span style="font-family:宋体">，很快，只计算最终结果需要的内容</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">第一个版本在</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">后生成一个中间</span><span style="font-family:Consolas" lang="EN-US">collection</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">size=50000000/13;</span><span style="font-family:宋体">而后者不生成此中间</span><span style="font-family:
Consolas" lang="EN-US">collection</span><span style="font-family:宋体">，只计算到</span><span style="font-family:Consolas" lang="EN-US">26</span><span style="font-family:宋体">即可。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 to
100).map(i=&gt; i*3+7).filter(i=&gt; (i%10)==0).sum // map</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">生成两个中间</span><span style="font-family:Consolas" lang="EN-US">collection</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 to 100).toStream.map(i=&gt;
i*3+7).filter(i=&gt; (i%10)==0).sum</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.1.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">Stack Queue</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">先进后出的堆栈：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val s = collection.immutable.Stack()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val s2 = s.<span style="background:yellow">push</span>(10,20,30)
// Stack(30, 20, 10)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">s2.<span style="background:yellow">head</span> //
30</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">s2.<span style="background:yellow">pop</span>.pop
// Stack(10)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对应的可变</span><span style="font-family:Consolas" lang="EN-US">Stack</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val ms = collection.mutable.Stack()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">ms.push(1,3,5).push(7) // Stack(7, 5, 3, 1)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">ms.head // 7</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">ms.pop // 7, ms = Stack(5,3,1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">先进先出的队列：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val q = collection.immutable.Queue() // </span><span style="font-family:宋体">也可指定类型</span><span style="font-family:Consolas" lang="EN-US">
Queue[Int]()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val q2 = q.<span style="background:yellow">enqueue</span>(0).enqueue(List(10,20,30))
// Queue(0, 10, 20, 30)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">q2.<span style="background:yellow">dequeue</span>._1
// 0</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">q2.dequeue._2 // Queue(10, 20, 30)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对应的可变</span><span style="font-family:Consolas" lang="EN-US">Queue</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val mq = collection.mutable.Queue[Int]()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mq <span style="background:yellow">+=</span>
(1,3,5)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mq <span style="background:yellow">++=</span>
List(7,9) // Queue(1, 3, 5, 7, 9)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mq dequeue // 1, mq= Queue(3, 5, 7, 9)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mq clear // Queue()</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027579"></a><a name="_Toc281660045"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.2.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">(map,
flatMap, filter, exists</span></u><u><span style="font-size:14.0pt;line-height:
173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">等</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">)</span></u></h3>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">map</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">类型可以混合：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">import
java.util.<span style="background:yellow">_</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list3 =
Array("a", 123, 3.14, new Date())<a name="_Toc282027580"><br>
<br>
</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("a","b","c").map(s<span style="background:yellow">=&gt;</span> s.toUpperCase()) // </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("a","b","c").map(<span style="background:yellow">_</span>.toUpperCase()) &nbsp;&nbsp;&nbsp;&nbsp;// </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">2,
</span><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">Groovy</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">it</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// = List(A,
B, C)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">filter filterNot</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">List(1,2,3,4,5).<span style="background:yellow">filter</span>(_%2==0) // List(2, 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以写成</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for
(x&lt;-List(1,2,3,4,5) if x%2==0) yield x<a name="_Toc282027581"></a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">List(1,2,3,4,5).<span style="background:yellow">filterNot</span>(_%2==0) // List(1, 3, 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">partition span splitAt groupBy</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">val (a,b) = List(1,2,3,4,5).<span style="background:yellow">partition</span>(_%2==0) // (List(2,4), List(1,3,5))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可把</span><span style="font-family:Consolas" lang="EN-US">Collection</span><span style="font-family:宋体">分成：满足条件的一组，其他的另一组。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">partition</span><span style="font-family:宋体">相似的是</span><span style="font-family:Consolas;background:yellow" lang="EN-US">span</span><span style="font-family:宋体">，但有不同：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">List</span><span style="font-family:Consolas;color:black" lang="EN-US">(1,9,2,4,5).</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">span</span><span style="font-family:Consolas;color:black" lang="EN-US">(_</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">&lt;</span><span style="font-family:Consolas;color:black" lang="EN-US">3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
(List(1),List(9, 2, 4, 5))</span><span style="font-family:宋体;color:#5B6E6E">，碰到不符合就结束</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">List</span><span style="font-family:Consolas;color:black" lang="EN-US">(1,9,2,4,5).</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">partition</span><span style="font-family:Consolas;color:black" lang="EN-US">(_</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">&lt;</span><span style="font-family:Consolas;color:black" lang="EN-US">3) </span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">// (List(1, 2),List(9, 4, 5))</span><span style="font-family:宋体;color:#5B6E6E">，扫描所有</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">List(1,3,5,7,9) <span style="background:
yellow">splitAt</span> 2 <span style="color:#5B6E6E">// (List(1, 3),List(5, 7,
9))</span></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">List(1,3,5,7,9) <span style="background:
yellow">groupBy</span> (5&lt;) <span style="color:#5B6E6E">// Map((true,List(7,
9)), (false,List(1, 3, 5)))</span></span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">foreach</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">打印</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array("a","b","c","d").foreach(<span style="background:yellow">printf</span>("[%s].",<span style="background:yellow">_</span>))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// [a].[b].[c].[d].</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">exists</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">集合中是否存在符合条件的元素</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4,5).exists(_%3==0)
// true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">find</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">返回序列中符合条件的第一个。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：查找整数的第一个因子（最小因子、质数）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def fac1(n:Int)
= if (n&gt;= -1 &amp;&amp; n&lt;=1) n else (2 to n.abs) find (n%_==0) get</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">sorted sortWith sortBy</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">例子（排序）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,3,2,0,5,9,7).<span style="background:yellow">sorted</span> // &nbsp;<span style="color:#5B6E6E">List(0,
1, 2, 3, 5, 7, 9)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,3,2,0,5,9,7).<span style="background:yellow">sortWith</span>(_&gt;_) <span style="color:#5B6E6E">//
List(9, 7, 5, 3, 2, 1, 0)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("abc",
"cb", "defe", "z").sortBy(_.size) // <span style="color:#5B6E6E">List(z, cb, abc, defe)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List((1,'c'),
(1,'b'), (2,'a'))</span><span lang="EN-US"> </span><span style="font-family:Consolas" lang="EN-US">.<span style="background:yellow">sortBy</span>(_._2)
<span style="color:#5B6E6E">// List((2,a), (1,b), (1,c))</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">distinct</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">例子：（去除</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">中的重复元素）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def uniq[T](l:List[T])
= l.<span style="background:yellow">distinct</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">uniq(List(1,2,3,2,1))
// List(1,2,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">flatMap</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">flatMap</span><span style="font-family:宋体">的作用：把多层次的数据结构“平面化”，并去除空元素（如</span><span style="font-family:Consolas" lang="EN-US">None</span><span style="font-family:宋体">）。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可用于：得到</span><span style="font-family:Consolas" lang="EN-US">xml</span><span style="font-family:宋体">等树形结构的所有节点名称，去除</span><span style="font-family:Consolas" lang="EN-US">None</span><span style="font-family:
宋体">等</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1a</span><span style="font-family:宋体">：（两个</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:
宋体">做乘法）</span><a name="_Toc282027582"></a></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">List(1,2,3)
* List(10,20,30) = List(<u>10, 20, 30</u>, <u>20, 40, 60</u>, <u>30, 60, 90</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val (a,b) =
(List(1,2,3), List(10,20,30))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a <span style="background:yellow">flatMap</span> (i=&gt; b map (j=&gt; i*j))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">等同于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i&lt;-a; i&lt;-b)
yield i*j // </span><span style="font-family:宋体">这个写法更清晰</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1b</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果不用</span><span style="font-family:Consolas" lang="EN-US">flatMap</span><span style="font-family:宋体">而是用</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">，结果就是：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a <span style="background:yellow">map</span> (i=&gt; b map (j=&gt; i*j)) <span style="color:#5B6E6E">// List(List(<u>10, 20, 30</u>), List(<u>20, 40, 60</u>),
List(<u>30, 60, 90</u>))</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">等同于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for (i&lt;-a)
yield { for (j&lt;-b) yield i*j } // </span><span style="font-family:宋体">不如上面的清晰</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("abc","def")
flatMap (_.toList) // List(a, b, c, d, e, f)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">而</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("abc","def")
map (_.toList) // List(List(a, b, c), List(d, e, f))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">flatMap</span><span style="font-family:
宋体">结合</span><span style="font-family:Consolas" lang="EN-US">Option</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
toint(s:String) = </span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">try { Some(Integer.parseInt(s)) } catch { case
e:Exception =&gt; None }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("123",
"12a", "45") flatMap toint // List(123, 45)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List("123",
"12a", "45") map toint // List(Some(123), None, Some(45))</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">indices</span></u><u><span style="font-size:10.5pt;
line-height:156%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">，</span></u><u><span style="font-size:10.5pt;line-height:156%;font-family:Consolas" lang="EN-US">zipWithIndex</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">indices</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val a =
List(100,200,300)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a <span style="background:yellow">indices</span> // (0,1,2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a <span style="background:yellow">zipWithIndex</span> // ((100,0), (200,1), (300,2))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(a indices)
zip a // ((0,100), (1,200), (2,300))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">截取一部分</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">substring</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(100,200,300,400,500)
<span style="background:yellow">slice</span> (2,4) // (300,400), </span><span style="font-family:宋体">取</span><span style="font-family:Consolas" lang="EN-US">l(2),
l(3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">take drop splitAt</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,3,5,7)
take 2 // List(1,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,3,5,7)
drop 2 // List(5,7)</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">count</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">满足条件的元素数目：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如</span><span style="font-family:Consolas" lang="EN-US">1000</span><span style="font-family:宋体">内质数的个数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def
prime(n:Int) = if (n&lt;2) false else 2 to math.sqrt(n).toInt forall (n%_!=0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 to 1000 <span style="background:yellow">count</span> prime&nbsp; // 168</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.13<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">updated patch</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">对于</span><span style="font-family:Consolas" lang="EN-US">immutable</span><span style="font-family:宋体">的数据结构，使用</span><span style="font-family:Consolas" lang="EN-US">updated</span><span style="font-family:
宋体">返回一个新的</span><span style="font-family:Consolas" lang="EN-US">copy</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val v1 = List(1,2,3,<span style="background:yellow">4</span>)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">v1.updated(3,10) // List(1, 2, 3, <span style="background:yellow">10</span>), v1</span><span style="font-family:宋体">还是</span><span style="font-family:Consolas" lang="EN-US">List(1, 2, 3, <span style="background:
yellow">4</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对于可变的数据结构，直接更改：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val mseq = scala.collection.<span style="background:yellow">mutable</span>.ArraySeq(1, 2, 4, <span style="background:yellow">6</span>)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">mseq(3) = 10 // mseq = ArraySeq(1, 2, 4, <span style="background:yellow">10</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">批量替换，返回新的</span><span style="font-family:Consolas" lang="EN-US">copy</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val v1 = List(<span style="background:lime">1,2,3</span>,4,5)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val v2 = List(<span style="background:yellow">10,20,30</span>)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">v1 patch (0, v2, 3) // List(<span style="background:yellow">10,20,30</span>,4,5), </span><span style="font-family:
宋体">但</span><span style="font-family:Consolas" lang="EN-US">v1,v2</span><span style="font-family:宋体">不变</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.14<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">reverse reverseMap</span></u></h4>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">1 to 5 <span style="background:yellow">reverse</span>
// Range(5, 4, 3, 2, 1)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">"james".reverse.reverse //
"james"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reverseMap</span><span style="font-family:宋体">就是</span><span style="font-family:Consolas" lang="EN-US">revese
+ map</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; 1 to 5 <span style="background:yellow">reverseMap</span> (10*) // Vector(50, 40, 30, 20, 10)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (1 to 5
reverse) map (10*)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.15<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;
font-family:Consolas" lang="EN-US">contains startsWith endWith</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; 1 to 5 <span style="background:yellow">contains</span> 3 // true, </span><span style="font-family:宋体">后一个参数是</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个元素</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; 1 to 5 <span style="background:yellow">containsSlice</span> (2 to 4) // true, </span><span style="font-family:宋体">后一个参数是</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个集合</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(1 to 5) <span style="background:yellow">startsWith</span>
(1 to 3) // true </span><span style="font-family:宋体">后一个参数是</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个集合</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(1 to 5) <span style="background:yellow">endsWith</span>
(4 to 5)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(List(1,2,3) <span style="background:yellow">corresponds</span>
List(4,5,6)) (<span style="background:yellow">_&lt;_</span>) <span style="color:#5B6E6E">// true</span></span><span style="font-family:宋体;
color:#5B6E6E">，长度相同且每个对应项符合判断条件</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.16<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">集合运算</span></u></h4>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4) <span style="background:yellow">intersect</span> List(4,3,6) // </span><span style="font-family:宋体">交集</span><span style="font-family:Consolas" lang="EN-US">
= List(3, 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4) <span style="background:yellow">diff</span> List(4,3,6) // A-B = List(1, 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4) <span style="background:yellow">union</span> List(4,3,6) // A+B = List(1, 2, 3, 4, 4,
3, 6)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">相当于</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List(1,2,3,4) <span style="background:yellow">++</span> List(4,3,6) // A+B = List(1, 2, 3, 4, 4, 3,
6)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.17<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">殊途同归</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">例子：得到</span><span style="font-family:Consolas"> <span lang="EN-US">(4, 16, 36, 64, 100)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 to 10) <span style="background:yellow">filter</span> (_%2==0) <span style="background:yellow">map</span>
(x=&gt;x*x) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">for</span><span style="font-family:Consolas" lang="EN-US">(x&lt;-1 to 10 <span style="background:yellow">if</span> x%2==0) <span style="background:yellow">yield</span>
x*x</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 to 10) <span style="background:yellow">collect</span> { <span style="background:yellow">case</span>
x <span style="background:yellow">if</span> x%2==0 =&gt; x*x }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h4 style="margin-left:.65pt"><span style="font-size:12.0pt;
line-height:156%;font-family:Consolas" lang="EN-US">5.2.2.18<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-size:10.5pt;line-height:156%;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">其他</span></u></h4>

<p class="MsoNormal"><span style="font-family:宋体">对其他语言去重感兴趣，可看看：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://rosettacode.org/wiki/Remove_duplicate_elements" target="_blank" rel="external">http://rosettacode.org/wiki/Remove_duplicate_elements</a>&nbsp;
</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027583"></a><a name="_Toc281660046"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.2.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数组元素定位</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">统一使用</span><span style="font-family:Consolas" lang="EN-US">()</span><span style="font-family:宋体">，而不是</span><span style="font-family:Consolas" lang="EN-US">[]</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">()</span><span style="font-family:宋体">就是</span><span style="font-family:Consolas" lang="EN-US">apply()</span><span style="font-family:
宋体">的简写，</span><span style="font-family:Consolas" lang="EN-US">a(i)===a.apply(i)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// Array</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val a =
Array(100,200,300) // a(0)=100, a(1)=200, a(3)=300</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a(0) // 100, </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">a.apply(0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a(0)=10 // Array(10,
200, 300)</span><span style="font-family:宋体">，相当于</span><span style="font-family:Consolas" lang="EN-US">a.update(0, 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// List</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val list =
List("a","b","c")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">//
list(0)=="a", list(1)=="b", list(2)=="c"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// Tuple</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">val t1 =
("a","b","c") // t1._1="a",
t1._2="b", t1._3="c"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027584"></a><a name="_Toc281660047"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.2.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">view</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">在某类型的集合对象上调用</span><span style="font-family:Consolas" lang="EN-US">view</span><span style="font-family:
宋体">方法，得到相同类型的集合，但所有的</span><span style="font-family:Consolas" lang="EN-US">transform</span><span style="font-family:宋体">函数都是</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">的，从该</span><span style="font-family:Consolas" lang="EN-US">view</span><span style="font-family:宋体">返回调用</span><span style="font-family:Consolas" lang="EN-US">force</span><span style="font-family:宋体">方法。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val v = Vector(1 to 10:_*)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">v map (1+) map (2*) // <span class="apple-style-span"><span style="color:#660099">Vector</span><span style="color:black">(4,&nbsp;6,&nbsp;8,&nbsp;10,&nbsp;12,&nbsp;14,&nbsp;16,&nbsp;18,&nbsp;20,&nbsp;22)</span></span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">以上过程得生成</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个新的</span><span style="font-family:Consolas" lang="EN-US">Vector</span><span style="font-family:
宋体">，而：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val v = Vector(1 to 10:_*)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">v.view map (1+) map (2*) force </span></p>

<p class="MsoNormal"><span style="font-family:宋体">只在过程中生成</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个新的</span><span style="font-family:Consolas" lang="EN-US">Vector</span><span style="font-family:
宋体">，相当于：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">v map (x=&gt;2*(1+x))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">((1 to 1000000000) view).take(3).force //
Vector(1,2,3)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">Stream</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Stream.range(1,1000000000).take(3).force // &nbsp;Stream(1,
2, 3)</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027585"></a><a name="_Toc281660048"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.2.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Java</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">集合间的转换（</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">scalaj</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">）</span></u></h3>

<p class="MsoNormal" style="margin-left:42.5pt;text-indent:-42.5pt"><span style="font-family:宋体">方案一：</span><span style="font-family:Consolas" lang="DE">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="DE">List&lt;T&gt;</span><span style="font-family:宋体">很容易通过</span><span style="font-family:Consolas" lang="DE">List.toArray</span><span style="font-family:宋体">转换到</span><span style="font-family:Consolas" lang="DE">Array</span><span style="font-family:宋体">，和</span><span style="font-family:Consolas" lang="DE">Scala</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="DE">Array</span><span style="font-family:宋体">是等价的，可使用</span><span style="font-family:Consolas" lang="DE">map</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="DE">filter</span><span style="font-family:宋体">等。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方案二：使用第三方的</span><span style="font-family:Consolas" lang="DE">scalaj</span><span style="font-family:宋体">扩展包（需自行下载设置</span><span style="font-family:Consolas" lang="DE">classpath</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="DE">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">val a1 = new java.util.ArrayList[Int]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">a1.add(100);
a1.add(200); a1.add(300)</span></p>

<p class="MsoNormal"><a name="OLE_LINK4"></a><a name="OLE_LINK3"><span style="font-family:Consolas;color:#5B6E6E" lang="DE">// </span></a><span style="font-family:宋体;color:#5B6E6E">自行转换</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">val a2 = a1.<span style="background:yellow">toArray</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">a2 map (e=&gt;e.<span style="background:yellow">asInstanceOf</span>[Int]) map(2*) filter (300&gt;)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="DE">//</span><span style="font-family:宋体;color:#5B6E6E">采用</span><span style="font-family:
Consolas;color:#5B6E6E" lang="DE">scalaj(</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US"><a href="http://github.com/scalaj/scalaj-collection" target="_blank" rel="external"><span style="color:#5B6E6E" lang="DE">http://github.com/scalaj/scalaj-collection</span></a></span><span style="font-family:Consolas;color:#5B6E6E" lang="DE">)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">import
scalaj.collection.Imports._</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">val a3 = a1.<span style="background:yellow">asScala</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="DE">//
scala-&gt;java</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">List(1, 2,
3).asJava</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">Map(1 -&gt;
"a", 2 -&gt; "b", 3 -&gt; "c").asJava</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DE">Set(1, 2,
3).asJava</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="DE">// scalaj</span><span style="font-family:宋体;color:#5B6E6E">还可以在</span><span style="font-family:
Consolas;color:#5B6E6E" lang="DE">java</span><span style="font-family:宋体;color:#5B6E6E">的</span><span style="font-family:Consolas;color:#5B6E6E" lang="DE">collection</span><span style="font-family:宋体;color:#5B6E6E">上使用</span><span style="font-family:
Consolas;color:#5B6E6E" lang="DE">foreach (</span><span style="font-family:宋体;color:#5B6E6E">目前除</span><span style="font-family:Consolas;color:#5B6E6E" lang="DE">foreach</span><span style="font-family:宋体;color:#5B6E6E">外</span><span style="font-family:宋体;
color:#5B6E6E">，</span><span style="font-family:宋体;color:#5B6E6E">还不支持</span><span style="font-family:Consolas;color:#5B6E6E" lang="DE">filter</span><span style="font-family:宋体;color:#5B6E6E">、</span><span style="font-family:
Consolas;color:#5B6E6E" lang="DE">map)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1.foreach(println)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scalaj</span><span style="font-family:宋体">的简易文档如下：</span></p>

<p class="MsoNormal"><code><span style="font-size:10.0pt;font-family:
Consolas;color:#5B6E6E" lang="EN-US">// <a name="_Toc282027586">Java to Scala</a></span></code></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="text-align:center;line-height:16.8pt"><code><b><span style="font-size:10.0pt;font-family:Consolas;color:#C0504D" lang="EN-US">Java</span></b></code><code><b><span style="font-size:10.0pt;color:#C0504D">类型</span></b></code></pre></td>
  <td style="width:300.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="text-align:center;
  line-height:16.8pt"><code><b><span style="font-size:10.0pt;color:#C0504D">转换方法</span></b></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.lang.Comparable[A] </span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.math.Ordered[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Comparator[A] </span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.math.Ordering[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Enumeration[A]</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Iterator[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Iterator[A] </span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Iterator[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.lang.Iterable[A] </span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Iterable[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.List[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Seq[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#asScalaMutable: scala.collection.mutable.Seq[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Set[A] </span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Set[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#asScalaMutable: scala.collection.mutable.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Map[A, B] </span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.Map[A, B]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#asScalaMutable: scala.collection.mutable.Map[A, B]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#foreach(((A, B)) =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="224"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">java.util.Dictionary[A, B] </span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="400"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asScala: scala.collection.mutable.Map[A, B]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#foreach(((A, B)) =&gt; Unit): Unit</span></code></pre></td>
 </tr>
</tbody></table>

<pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
font-family:Consolas;color:#5B6E6E" lang="EN-US">// Scala to Java</span></code></pre>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="text-align:center;line-height:16.8pt"><code><b><span style="font-size:10.0pt;font-family:Consolas;color:#C0504D" lang="EN-US">Scala</span></b></code><code><b><span style="font-size:10.0pt;color:#C0504D">类型</span></b></code></pre></td>
  <td style="width:267.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="text-align:center;
  line-height:16.8pt"><code><b><span style="font-size:10.0pt;color:#C0504D">转换方法</span></b></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.math.Ordered[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Comparable[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.math.Ordering[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Comparator[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.Iterator[A]&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Iterator[A]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#asJavaEnumeration: java.util.Enumeration[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.Iterable[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.lang.Iterable[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.Seq[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.mutable.Seq[A] &nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.mutable.Buffer[A]</span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.Set[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.mutable.Set[A] &nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.Map[A, B]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Map[A, B]</span></code></pre></td>
 </tr>
 <tr>
  <td style="width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="276"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">scala.collection.mutable.Map[A, B]</span></code></pre></td>
  <td style="width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="356"><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">#asJava: java.util.Map[A, B]</span></code></pre><pre style="line-height:16.8pt"><code><span style="font-size:10.0pt;
  font-family:Consolas;color:black" lang="EN-US">#asJavaDictionary: java.util.Dictionary[A, B]</span></code></pre></td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132220"></a><a name="_Toc282027587"></a><a name="_Toc281660049"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Map</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027588"></a><a name="_Toc281660050"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Map</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">var m = Map[Int,
Int]()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">var m =
Map(1-&gt;100, 2-&gt;200)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">var m =
Map((1,100), (2,200))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相加：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">val m =
Map(1-&gt;100, 2-&gt;200) <span style="background:yellow">++</span>
Map(3-&gt;300)&nbsp; <span style="color:#5B6E6E">//</span></span><span style="color:#5B6E6E" lang="DA"> </span><span style="font-family:Consolas;
color:#5B6E6E" lang="DA">Map((1,100), (2,200), (3,300))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="DA">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以用</span><span style="font-family:Consolas" lang="DA">zip()</span><span style="font-family:宋体">生成</span><span style="font-family:Consolas" lang="DA">Map</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="DA">List(1,2,3).<span style="background:yellow">zip</span>(List(100,200,300)).toMap <span style="color:#5B6E6E">// Map((1,100), (2,200), (3,300))</span></span></p>

<p class="MsoNormal"><i><span style="font-family:宋体">注解：</span></i><i><span style="font-family:Consolas" lang="DA">zip</span></i><i><span style="font-family:
宋体">有“拉拉链”的意思，就是把两排链扣完全对应扣合在一起，非常形象。</span></i></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027589"></a><a name="_Toc281660051"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">不可变</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Map(</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">缺省</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">)</span></u></h3>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">定义：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m2 = <span style="background:yellow">Map</span>()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m3 = <span style="background:yellow">Map</span>(1-&gt;100, 2-&gt;200, 3-&gt;300)&nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:宋体">指定类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m1:Map<span style="background:yellow">[Int,String]</span> =
Map(1-&gt;"a",2-&gt;"b")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：如果</span><span style="font-family:Consolas" lang="EN-US">import java.util._</span><span style="font-family:
宋体">后发生冲突，可指明：</span><span style="font-family:Consolas;background:
yellow" lang="EN-US">scala.collection.immutable.Map</span></p>

<p class="MsoNormal"><span style="font-family:宋体">保持循序的</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">可以使用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">collection.immutable.ListMap</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">读取元素：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// m3<span style="background:yellow">(1)</span>=100, m3(2)=200, m3(3)=300</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// m3.<span style="background:yellow">get(1)</span>=Some(100), m3.get(3)=Some(300),
m3.get(4)=None</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val v = m3.get(4).<span style="background:yellow">getOrElse</span>(-1)
// -1</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者简化成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m3.<span style="background:yellow">getOrElse</span>(4, -1) // -1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">增加、删除、更新：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">本身不可改变，即使定义为</span><span style="font-family:
Consolas" lang="EN-US">var</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">update</span><span style="font-family:宋体">也是返回一个新的不可变</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">var m4 = Map(1-&gt;100)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">val m5 = <span style="background:yellow">m4(1)=1000</span>
// m4</span><span style="font-family:宋体">还是</span><span style="font-family:Consolas" lang="EN-US"> 1-&gt;100, m5</span><span style="font-family:
宋体">：</span><span style="font-family:Consolas" lang="EN-US">1-&gt;1000</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">m4 += (2-&gt;200) // m4</span><span style="font-family:宋体">指向新的</span><span style="font-family:Consolas" lang="EN-US">(1-&gt;100,2-&gt;200),
(1-&gt;100)</span><span style="font-family:宋体">应该被回收</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另一种更新方式：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">m4.<span style="background:yellow">updated</span>(1,1000)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">增加多个元素：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">Map(1-&gt;100,2-&gt;200) <span style="background:
yellow">+</span> (3-&gt;300, 4-&gt;400) // Map((1,100), (2,200), (3,300),
(4,400))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">删除元素：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
Map(1-&gt;100,2-&gt;200,3-&gt;300) <span style="background:yellow">-</span>
(2,3) // Map((1,100))</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">Map(1-&gt;100,2-&gt;200,3-&gt;300) <span style="background:yellow">--</span> List(2,3) // Map((1,100))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">合并</span><span style="font-family:Consolas" lang="EN-US">Mpa</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Map(1-&gt;100,2-&gt;200)
<span style="background:yellow">++</span> Map(3-&gt;300) // Map((1,100),
(2,200), (3,300))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027590"></a><a name="_Toc281660052"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">可变</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Map</span></u></h3>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val map = <span style="background:yellow">scala.collection.mutable.Map</span>[String,
Any]()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">map("k1")=100&nbsp;&nbsp;&nbsp;&nbsp; //
</span><span style="font-family:宋体">增加元素，方法</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">map += "k2"-&gt;"v2" // </span><span style="font-family:宋体">增加元素，方法</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">// map("k2")=="v2",
map.get("k2")==Some("v2"), map.get("k3")==None</span></p>

<p class="MsoNormal"><span style="font-family:宋体">有则取之，无则加之：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val mm =
collection.mutable.Map(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">getOrElseUpdate</span>
(3,-1) // 300, mm</span><span style="font-family:宋体">不变</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">getOrElseUpdate</span>
(4,-1) // 300, mm=</span><span lang="EN-US"> </span><span style="font-family:Consolas" lang="EN-US">Map((2,200), <b><u>(4,-1)</u></b>, (1,100),
(3,300))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">删除：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val mm =
collection.mutable.Map(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">-=</span> 1 // Map((2,200),
(3,300))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">-=</span> (2,3)
// Map()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">+=</span>
(1-&gt;100,2-&gt;200,3-&gt;300) // Map((2,200), (1,100), (3,300))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">--=</span> List(1,2)
// Map((3,300))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">remove</span> 1
// Some(300), mm=Map()</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">+=</span>
(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm.<span style="background:yellow">retain</span>((x,y)
=&gt; x&gt;1) // mm = Map((2,200), (3,300))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm.<span style="background:yellow">clearn</span>
// mm = Map()</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改变</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm <span style="background:yellow">transform</span>
((x,y)=&gt; 0) // mm = Map((2,0), (1,0), (3,0))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm transform ((x,y)=&gt; x*10) // Map((2,20),
(1,10), (3,30))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">mm transform ((x,y)=&gt; y+3) // Map((2,23), (1,13),
(3,33))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027591"></a><a name="_Toc281660053"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Java</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">HashMap</span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">HashMap</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
m1:java.util.Map[Int, String] = new java.util.HashMap</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027592"></a><a name="_Toc281660054"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读取所有元素</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">上面说过，</span><span style="font-family:Consolas" lang="EN-US">Map(1-&gt;100,2-&gt;200,3-&gt;300) </span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">
Map((1,100),(2,200),(3,300))</span><span style="font-family:宋体">的写法是一样的，可见</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:
宋体">中的每一个</span><span style="font-family:Consolas" lang="EN-US">entry</span><span style="font-family:宋体">都是一个</span><span style="font-family:Consolas" lang="EN-US">Tuple</span><span style="font-family:宋体">，所以：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">for(e&lt;-map) println(e._1 + ": " +
e._2)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">map.foreach(e=&gt;println(e._1 + ": " +
e._2))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者（<b><span style="color:red">最好</span></b>）</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">for (<span style="background:yellow">(k,v)</span>&lt;-map)
println(k + ": " + v)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以进行</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">操作：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map <span style="background:yellow">filter</span> (e=&gt;e._1&gt;1) <span style="color:#5B6E6E">// Map((2,200), (3,300))</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map <span style="background:yellow">filterKeys</span> (_&gt;1) <span style="color:#5B6E6E">//
Map((2,200), (3,300))</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map.map(e=&gt;(e._1*10,
e._2)) // Map(10-&gt;100,20-&gt;200,30-&gt;300)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map <span style="background:yellow">map</span> (e=&gt;e._2) <span style="color:#5B6E6E">//
List(100, 200, 300)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体;color:#5B6E6E">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map.values.toList</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">按照</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">来取对应的</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:
宋体">值：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2 to 100
flatMap map.get // (200,300) </span><span style="font-family:宋体">只有</span><span style="font-family:Consolas" lang="EN-US">key=2</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">有值</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027593"></a><a name="_Toc281660055"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.3.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">多值</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">Map</span></u><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US"> </span></u></h3>

<p class="MsoNormal"><span style="font-family:宋体">结合</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Tuple</span><span style="font-family:
宋体">，很容易实现一个</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">对应的</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:宋体">是组合值的数据结构：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val m =
Map(1-&gt;("james",20), 2-&gt;("qh",30),
3-&gt;("qiu", 40))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m(2)._1 //
"qh"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m(2)._2 // 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for( <span style="background:yellow">(k,(v1,v2))</span> &lt;- m ) printf("%d: (%s,%d)\n",
k, v1, v2)</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132221"></a><a name="_Toc282027594"></a><a name="_Toc281660056"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Set</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">BitSet</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">collection.immutable.BitSet</span><span style="font-family:宋体">）</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Set</span><span style="font-family:
宋体">类似，但操作更快</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027595"></a><a name="_Toc281660057"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.4.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var s =
Set(1,2,3,4,5) // scala.collection.immutable.Set</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var s2 =
Set[Int]() // scala.collection.immutable.Set[Int]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">增加元素：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s2 += 1&nbsp;
// Set(1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s2 += 3&nbsp;
// Set(1,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s2 += (2,4) //
Set(1,3,2,4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">删除元素</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) - 2
// Set(1,3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) -
(1,2) // Set(3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3).empty
// Set() </span><span style="font-family:宋体">全部删除</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">判断是否包含某元素</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s(3) // true, </span><span style="font-family:宋体">集合中有元素</span><span style="font-family:Consolas" lang="EN-US">3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s(0) // false,
</span><span style="font-family:宋体">集合中没有元素</span><span style="font-family:Consolas" lang="EN-US">0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">合并</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">++</span> Set(2,3,4) // Set(1, 2, 3, 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">--</span> Set(2,3,4) // Set(1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027596"></a><a name="_Toc281660058"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.4.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">逻辑运算</span></u></a></h3>

<table class="MsoNormalTable" style="width:100.0%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="100%">
 <tbody><tr>
  <td style="width:13.12%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="13%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">运算</span></b></p>
  </td>
  <td style="width:86.88%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="86%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="13%">
  <p class="MsoNormal"><span style="font-family:宋体">交集</span></p>
  </td>
  <td style="width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="86%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">&amp;</span> Set(2,3,4) // Set(2,3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">intersect</span> Set(2,3,4) </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="13%">
  <p class="MsoNormal"><span style="font-family:宋体">并集</span></p>
  </td>
  <td style="width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="86%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">|</span> Set(2,3,4) // Set(1,2,3,4)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">union</span> Set(2,3,4) // Set(1,2,3,4)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="13%">
  <p class="MsoNormal"><span style="font-family:宋体">差集</span></p>
  </td>
  <td style="width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="86%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">&amp;~</span> Set(2,3,4) // Set(1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set(1,2,3) <span style="background:yellow">diff</span> Set(2&nbsp; ,3,4) // Set(1)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027597"></a><a name="_Toc281660059"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">5.4.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">可变</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">BitSet</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val bs =
collection.mutable.BitSet()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">bs += (1,3,5)
// BitSet(1, 5, 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">bs ++=
List(7,9) // BitSet(1, 9, 7, 5, 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">bs.clear //
BitSet()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132222"></a><a name="_Toc282027598"></a><a name="_Toc281660060"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Iterator</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Iterator</span><span style="font-family:宋体">不属于集合类型，只是逐个存取集合中元素的方法：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val it = Iterator(1,3,5,7) // Iterator[Int] =
non-empty iterator</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">it foreach println // 1 3 5 7</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">it foreach println // </span><span style="font-family:宋体">无输出</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">三种常用的使用模式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// <a name="_Toc282027599">1</a></span><span style="font-family:宋体">、使用</span><span style="font-family:Consolas" lang="EN-US">while</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val it = Iterator(1,3,5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">while(it.<span style="background:yellow">hasNext</span>)
println(it.<span style="background:yellow">next</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// 2</span><span style="font-family:宋体">、使用</span><span style="font-family:Consolas" lang="EN-US">for</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">for</span><span style="font-family:Consolas" lang="EN-US">(e&lt;- Iterator(1,3,5,7)) println(e)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// <a name="_Toc282027600">3</a></span><span style="font-family:宋体">、使用</span><span style="font-family:Consolas" lang="EN-US">foreach</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Iterator(1,3,5,7) <span style="background:yellow">foreach</span>
println</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Iterator</span><span style="font-family:宋体">也可以使用</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">的方法：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Iterator(1,3,5,7) map (10*) toList // List(10, 30,
50, 70)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Iterator(1,3,5,7) dropWhile (5&gt;) toList //
List(5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">由于</span><span style="font-family:Consolas" lang="EN-US">Iterator</span><span style="font-family:宋体">用一次后就消失了，如果要用两次，需要</span><span style="font-family:Consolas" lang="EN-US">toList</span><span style="font-family:
宋体">或者使用</span><span style="font-family:Consolas" lang="EN-US">duplicate</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val (a,b) = Iterator(1,3,5,7) duplicate // a = b =
non-empty iterator</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val it = Iterator(1,3,5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">val (a,b) = it duplicate</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">在使用</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:宋体">前，不能使用</span><span style="font-family:Consolas" lang="EN-US">it</span><span style="font-family:宋体">，否则</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:宋体">都不可用了。</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">a toList // List(1,3,5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">b toList // List(1,3,5,7)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">此时</span><span style="font-family:Consolas" lang="EN-US">it</span><span style="font-family:宋体">也不可用了</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132223"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">5.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Paralllel collection</span></u></a></h2>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">Scala 2.9+</span><span style="font-family:宋体">引入：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(1 to 10).<span style="background:yellow">par</span>
foreach println</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:宋体">多运行几次，注意打印顺序会有不同</span></p>

<h1><a name="_Toc306132224"></a><a name="_Toc282027601"></a><a name="_Toc281660061"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">io</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132225"></a><a name="_Toc282027602"></a><a name="_Toc281660062"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">6.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文件</span></u></a><u><span style="font-family:Consolas" lang="EN-US">I/O</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027603"></a><a name="_Toc281660063"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">6.1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读文件</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">特有的是</span><span style="font-family:Consolas" lang="EN-US">scala.io.Source</span><span style="font-family:宋体">，例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">import scala.io._</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Source.fromFile("cn.scala","utf8").mkString</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">逐行读文件内容：</span><a name="_Toc282027604"></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><u><span style="font-family:Consolas" lang="EN-US">Source.fromFile</span></u><span style="font-family:Consolas" lang="EN-US">(<u>new java.io.File("cn.scala")</u>).getLines().foreach(println)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027605"></a><a name="_Toc281660064"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">6.1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">写文件</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">直接调用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">io</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">import java.io._, java.nio.channels._, java.nio._</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">写文件</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val f = new
FileOutputStream("o.txt").getChannel</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">f write ByteBuffer.wrap("a little bit long
...".getBytes)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">f close</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">var out = new
java.io.FileWriter("./out.txt") // <span style="color:#5B6E6E">FileWriter("./out.txt",
<span style="background:yellow">true</span>) </span></span><span style="font-family:宋体;color:#5B6E6E">为追加模式</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">out.write("hello\n")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">out close</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027606"></a><a name="_Toc281660065"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">6.1.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">复制文件</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">直接调用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">io</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val in&nbsp; = new
FileInputStream("in").getChannel</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val out = new
FileOutputStream("out").getChannel</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">in transferTo (0, in.size, out)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027607"></a><a name="_Toc281660066"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">6.1.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">全目录扫描</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:宋体">递归使用</span><span style="font-family:Consolas" lang="EN-US">listFiles</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">import</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">java</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">io</span><span style="font-family:Consolas;color:black" lang="EN-US">.File</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Dir</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">) {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:gray" lang="EN-US">// </span><span style="font-family:宋体;color:gray">目录则返回所有</span><span style="font-family:Consolas;color:gray" lang="EN-US">1</span><span style="font-family:宋体;
color:gray">级子文件；文件则返回</span><span style="font-family:Consolas;
color:gray" lang="EN-US">empty</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">child</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Iterable</span><span style="font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">] {</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;
</span><span style="font-family:Consolas;color:gray" lang="EN-US">// Iterable</span><span style="font-family:宋体;color:gray">接口必须实现</span><span style="font-family:Consolas;color:gray" lang="EN-US">elements</span><span style="font-family:
宋体;color:gray">方法</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">elements</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">if</span><span style="font-family:Consolas;color:black" lang="EN-US"> (</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">isDirectory</span><span style="font-family:Consolas;color:black" lang="EN-US">) </span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">listFiles</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">elements</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">else</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Iterator</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">empty</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:gray" lang="EN-US">// </span><span style="font-family:宋体;color:gray">递归扫描，组成列表</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">scan</span><span style="font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Iterable</span><span style="font-family:Consolas;color:black" lang="EN-US">[</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">] = {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Seq</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">singleton</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US">) </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">++</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">child</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">flatMap</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">i</span><span style="font-family:Consolas;color:black" lang="EN-US">=&gt; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Dir</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">i</span><span style="font-family:Consolas;color:black" lang="EN-US">).</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">scan</span><span style="font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:gray" lang="EN-US">// </span><span style="font-family:宋体;color:gray">定义一个隐式类型转换</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">implicit</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">foo</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">f</span><span style="font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">) = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Dir</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">f</span><span style="font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:green" lang="EN-US">"."</span><span style="font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Console</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">File</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:green" lang="EN-US">"."</span><span style="font-family:Consolas;color:black" lang="EN-US">).</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">getCanonicalPath</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">list</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">file</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">scan</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:gray" lang="EN-US">// File</span><span style="font-family:
宋体;color:gray">对象隐形转换成</span><span style="font-family:Consolas;
color:gray" lang="EN-US">Dir</span><span style="font-family:宋体;color:gray">对象</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">for</span><span style="font-family:Consolas;color:black" lang="EN-US"> (</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">f</span><span style="font-family:Consolas;color:black" lang="EN-US">&lt;-</span><u><span style="font-family:Consolas;color:#2300FB" lang="EN-US">lis</span></u><span style="font-family:Consolas;color:#2300FB" lang="EN-US">t</span><span style="font-family:Consolas;color:black" lang="EN-US">) </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">f</span><span style="font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132226"></a><a name="_Toc282027608"></a><a name="_Toc281660067"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">6.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">网络</span></u></a><u><span style="font-family:Consolas" lang="EN-US">I/O</span></u></h2>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">import</span></a> java.<span class="me1">net</span>.<span class="br0">{</span>URL, URLEncoder<span class="br0">}</span><br>
<a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">import</span></a> scala.<span class="me1">io</span>.<span class="me1">Source</span>.<span class="me1"><span style="background:yellow">fromURL</span></span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas;background:yellow" lang="EN-US">fromURL</span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(new URL("<u>http://qh.appspot.com</u>")).mkString</span></pre>

<p class="MsoNormal"><span style="font-family:宋体">或者指定编码：</span></p>

<pre><span style="font-size:10.5pt;font-family:Consolas;background:
yellow" lang="EN-US">fromURL</span><span style="font-size:10.5pt;font-family:
Consolas" lang="EN-US">(new URL("<u>http://qh.appspot.com</u>"))(<span style="background:yellow">io.Codec.UTF8</span>).mkString</span></pre>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc306132227"></a><a name="_Toc282027609"></a><a name="_Toc281660068"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">actor</span></u></a></h1>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html" target="_blank" rel="external">http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html#</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中处理并发，有很多选择：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">消息模型，类似</span><span style="font-family:Consolas" lang="EN-US">Erlang</span><span style="font-family:宋体">，首选，</span><span style="font-family:Consolas" lang="EN-US">Lift</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">akka</span><span style="font-family:宋体">也实现了自己的</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">模型。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Thread</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Runnable</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">java.util.concurennt</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">3<sup>rd</sup></span><span style="font-family:宋体">并发框架如</span><span style="font-family:Consolas" lang="EN-US">Netty</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Mina</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132228"></a><a name="_Toc282027610"></a><a name="_Toc281660069"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">actor</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">模型</span></u></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Java</span></b><b><span style="font-family:宋体">内置线程模型</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scala actor</span></b><b><span style="font-family:宋体">模型</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">“共享数据</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">锁”模型（</span><span style="font-family:Consolas" lang="EN-US">share data and lock</span><span style="font-family:宋体">）</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">share
  nothing</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">每个</span><span style="font-family:Consolas" lang="EN-US">object</span><span style="font-family:宋体">有一个</span><span style="font-family:Consolas" lang="EN-US">monitor</span><span style="font-family:
  宋体">，监视多线程对共享数据的访问</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">不共享数据，</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
  宋体">之间通过</span><span style="font-family:Consolas" lang="EN-US">message</span><span style="font-family:宋体">通讯</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">加锁的代码段用</span><span style="font-family:Consolas" lang="EN-US">synchronized</span><span style="font-family:宋体">标识</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">死锁问题</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">每个线程内部是顺序执行的</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">每个</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">内部是顺序执行的</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132229"></a><a name="_Toc282027611"></a><a name="_Toc281660070"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">多核计算</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">对比如下的算法：</span></p>

<table class="MsoNormalTable" style="width:100.0%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="100%">
 <tbody><tr>
  <td style="width:50.0%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def perfect(n:Int)
  = </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">n==(1 until n filter (n%_==0) sum)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val n =
  33550336</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">串行计算</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n to n+10
  foreach (i=&gt;println(perfect(i)))</span></p>
  </td>
  <td style="width:50.0%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def perfect(n:Int)
  = </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">n==(1 until n filter (n%_==0) sum)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val n =
  33550336</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// </span><span style="font-family:宋体">并行计算</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class
  T1(n:Int) extends Thread {</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; override
  def run(){println(perfect(n))}}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n to n+10
  foreach (i=&gt;new T1(i).start)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:宋体">耗时：</span><span style="font-family:Consolas" lang="EN-US">8297</span></p>
  </td>
  <td style="width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:宋体">耗时：</span><span style="font-family:Consolas" lang="EN-US">5134</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image012.jpg" border="0" height="271" width="188"></span></p>
  </td>
  <td style="width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span lang="EN-US"><img src="/static/images/scala/image013.jpg" border="0" height="271" width="188"></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:宋体">单线程串行计算，不能很好发挥多核优势</span></p>
  </td>
  <td style="width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="50%">
  <p class="MsoNormal"><span style="font-family:宋体">多线程并行计算，平均分配到多核，更快</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">上面是</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的写法，也可以用</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">import actors.Actor,actors.Actor._</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">class A1 extends Actor { </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">def act { react { case
n:Int=&gt;println(perfect(n)) }}}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">n to n+10 foreach (i=&gt;{ (new A1).start ! i})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">写法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">val aa = Array.fill(11)(actor { react { case
n:Int=&gt;println(perfect(n)) }})</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">n to n+10 foreach (i=&gt;aa(i-n) ! i)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">n to n+10 foreach (i=&gt; <u>actor { react { case
n:Int=&gt;println(perfect(n)) }}</u> ! i)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132230"></a><a name="_Toc282027612"></a><a name="_Toc281660071"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Actor</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">用法</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">会建立一个线程池共所有</span><span style="font-family:
Consolas" lang="EN-US">Actor</span><span style="font-family:宋体">来使用。</span><span style="font-family:Consolas" lang="EN-US">receive</span><span style="font-family:宋体">模型是</span><span style="font-family:Consolas" lang="EN-US">Actor</span><span style="font-family:
宋体">从池中取一个线程一直使用；</span><span style="font-family:Consolas" lang="EN-US">react</span><span style="font-family:宋体">模型是</span><span style="font-family:Consolas" lang="EN-US">Actor</span><span style="font-family:宋体">从池中取一个线程用完给其他</span><span style="font-family:
Consolas" lang="EN-US">Actor</span><span style="font-family:宋体">用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><span style="font-family:宋体">实现方式</span></b><b><span style="font-family:Consolas" lang="EN-US">1</span></b><b><span style="font-family:
宋体">：</span></b></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">import</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">scala</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">object</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Actor1</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">extends</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> { // </span><span style="font-size:10.0pt;font-family:宋体;color:black">或者</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">class</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:10.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">实现线程</span></p>

<p class="MsoNormal" style="text-indent:10.0pt"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">act</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">() { react
{ case _ =&gt;println("ok"); exit} }</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">//</span><span style="font-size:10.0pt;font-family:宋体">发送消息：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">Actor1.start ! 1001 //
</span><span style="font-size:10.0pt;font-family:宋体">必须调用</span><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">start</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><span style="font-family:宋体">实现方式</span></b><b><span style="font-family:Consolas" lang="EN-US">2</span></b><b><span style="font-family:
宋体">：</span></b></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">import</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">scala</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors.Actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">val</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">a2</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US"> react { case _ =&gt;println("ok")
} <span style="color:black">} // </span></span><span style="font-size:10.0pt;
font-family:宋体;color:black">马上启动</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">//</span><span style="font-size:10.0pt;font-family:宋体">发送消息：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">a2 !
"message" // </span><span style="font-size:10.0pt;font-family:宋体">不必调用</span><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">start</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">提示：</span></p>

<table class="MsoNormalTable" style="width:66.62%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="66%">
 <tbody><tr>
  <td style="width:10.14%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="10%">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">!</span><span style="font-family:Consolas" lang="EN-US">&nbsp; </span></p>
  </td>
  <td style="width:89.86%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="89%">
  <p class="MsoNormal"><span style="font-family:宋体">发送异步消息，没有返回值。</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="10%">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">!?</span></p>
  </td>
  <td style="width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="89%">
  <p class="MsoNormal"><span style="font-family:宋体">发送同步消息，等待返回值。（会阻塞发送消息语句所在的线程）</span><span style="font-family:Consolas"> </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="10%">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">!!</span></p>
  </td>
  <td style="width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="89%">
  <p class="MsoNormal"><span style="font-family:宋体">发送异步消息，返回值是</span><span style="font-family:Consolas" lang="EN-US"> Future[Any]</span><span style="font-family:宋体">。</span><span style="font-family:Consolas"> </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="10%">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">?</span><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="89%">
  <p class="MsoNormal"><span style="font-family:宋体">不带参数。查看</span><span style="font-family:Consolas" lang="EN-US"> mailbox </span><span style="font-family:宋体">中的下一条消息。</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132231"></a><a name="_Toc282027613"></a><a name="_Toc281660072"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方式</span></u></a><u><span style="font-family:Consolas" lang="EN-US">1</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">：接受</span></u><u><span style="font-family:Consolas" lang="EN-US">receive</span></u></h2>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:宋体;color:black">特点：要反复处理消息，</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">receive</span><span style="font-size:10.0pt;font-family:宋体;color:black">外层用</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">while(..)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">import
actors.Actor, actors.Actor._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">val a1 = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">Actor.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:10.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">var</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">work</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">true</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:10.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">while</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">work</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">) {</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:20.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85;background:yellow" lang="EN-US">receive</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> { </span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">接受消息</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">, </span><span style="font-size:10.0pt;font-family:宋体;color:gray">或者用</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">receiveWith(1000)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:30.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">msg</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">String</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> =&gt; </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"a1:
"</span><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">+</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">msg</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:30.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> =&gt; </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">work</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">false;</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"a1
stop: "</span><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">+</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:20.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:10.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "hello" // "a1: hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "world" // "a1: world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> -1 // "a1 stop: -1"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "no response :(" </span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132232"></a><a name="_Toc282027614"></a><a name="_Toc281660073"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方式</span></u></a><u><span style="font-family:Consolas" lang="EN-US">2</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">：接受</span></u><u><span style="font-family:Consolas" lang="EN-US">react, loop</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">特点：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">从不返回</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">要反复执行消息处理，</span><span style="font-family:Consolas" lang="EN-US">react</span><span style="font-family:宋体">外层用</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:
宋体">，<span style="background:yellow">不能</span>用</span><span style="font-family:Consolas" lang="EN-US">while(..); </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">通过复用线程，比</span><span style="font-family:Consolas" lang="EN-US">receive</span><span style="font-family:宋体">更高效，应尽可能使用</span><span style="font-family:Consolas" lang="EN-US">react</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">import
actors.Actor, Actor._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">val a1 = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">Actor.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:black;background:yellow" lang="EN-US">react</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> x:Int
=&gt; println(</span><span style="font-size:10.0pt;font-family:Consolas;
color:green" lang="EN-US">"a1 stop: "</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US"> + x)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">
msg:String =&gt; println(</span><span style="font-size:10.0pt;
font-family:Consolas;color:green" lang="EN-US">"a1: "</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> + msg); <span style="background:yellow">act()</span></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "hello" // "a1: hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "world" // "a1: world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> -1 // "a1 stop: -1"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">a1 <span style="background:yellow">!</span> "no response :(" </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果不用退出的线程，可使用</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:
宋体">改写如下：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">val a1 = </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">Actor.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; <span style="background:yellow">loop</span> {</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;
color:black;background:yellow" lang="EN-US">react</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none" align="left"><span style="font-size:10.0pt;
font-family:Consolas;color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">:</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Int</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> =&gt; </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"a1
stop: "</span><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">+</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">x</span><span style="font-size:
10.0pt;font-family:Consolas;color:black" lang="EN-US">); </span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85;background:yellow" lang="EN-US">exit</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">()</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">
msg:String =&gt; println(</span><span style="font-size:10.0pt;
font-family:Consolas;color:green" lang="EN-US">"a1: "</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> + msg)</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132233"></a><a name="_Toc282027615"></a><a name="_Toc281660074"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">REPL</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">接受消息</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala&gt; self
! "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala&gt; self.receive
{ case x =&gt; x }</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scala&gt; self.receiveWithin(1000)
{ case x =&gt; x }</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132234"></a><a name="_Toc282027616"></a><a name="_Toc281660075"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">actor</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">最佳实践</span></u></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027617"></a><a name="_Toc281660076"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">7.7.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">不阻塞</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">actor</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">不应由于处理某条消息而阻塞，可以调用</span><span style="font-family:Consolas" lang="EN-US">helper-actor</span><span style="font-family:宋体">处理耗时操作</span><span style="font-family:Consolas" lang="EN-US">(helper actor</span><span style="font-family:宋体">虽然是阻塞的，但由于不接受消息所以没问题</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:宋体">，以便</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">接着处理下一条消息</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-----------------------------------------</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">import</span><span style="font-family:Consolas;color:black" lang="EN-US"> actors._, actors.Actor._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-indent:10.5pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> time = 1000</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Fixedsys;color:black" lang="EN-US">&nbsp;</span><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">（</span><span style="font-family:
Consolas;color:#3F7F5F" lang="EN-US">1</span><span style="font-family:宋体;color:#3F7F5F">）</span><span style="font-family:宋体;color:#3F7F5F">原来阻塞的程序</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> mainActor1 = actor {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; loop {
react {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">case</span><span style="font-family:Consolas;color:black" lang="EN-US"> n: </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Int</span><span style="font-family:Consolas;color:black" lang="EN-US"> =&gt; <span style="background:yellow">Thread.sleep(time)</span></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println(n)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">case</span><span style="font-family:Consolas;color:black" lang="EN-US"> s =&gt; println(s) } }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; 1 to 5 foreach {
mainActor1 ! _ } </span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">// 5</span><span style="font-family:宋体;color:#3F7F5F">秒钟后打印完数字</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">（</span><span style="font-family:
Consolas;color:#3F7F5F" lang="EN-US">2</span><span style="font-family:宋体;color:#3F7F5F">）</span><span style="font-family:宋体;color:#3F7F5F">改写由</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">helper actor</span><span style="font-family:宋体;color:#3F7F5F">去阻塞的程序</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> mainActor2: Actor = actor
{</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; loop {
react {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">case</span><span style="font-family:Consolas;color:black" lang="EN-US"> n: </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">Int</span><span style="font-family:Consolas;color:black" lang="EN-US"> =&gt; <span style="background:yellow">actor { Thread.sleep(time); mainActor2 ! </span></span><span style="font-family:Consolas;color:#2A00FF;background:yellow" lang="EN-US">"wakeup"</span><span style="font-family:Consolas;color:black;background:yellow" lang="EN-US"> }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println(n)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">case</span><span style="font-family:Consolas;color:black" lang="EN-US"> s =&gt; println(s) } }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; 1 to 5 foreach {
mainActor2 ! _ } </span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">马上打印数字</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">; 1</span><span style="font-family:宋体;color:#3F7F5F">秒钟后打印</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">5</span><span style="font-family:
宋体;color:#3F7F5F">个</span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">wakeup</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-----------------------------------------</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027618"></a><a name="_Toc281660077"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">7.7.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">actor</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">之间用且仅用消息来通讯</span></u></h3>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:
Consolas" lang="EN-US">actor</span><span style="font-family:宋体">模型让我们写多线程程序时只用关注各个独立的单线程程序（</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">），他们之间通过消息来通讯。例如，如果</span><span style="font-family:Consolas" lang="EN-US">BadActor</span><span style="font-family:宋体">中有一个</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">的引用</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:Consolas" lang="EN-US">class BadActor(a:GoodActor) extends
Actor {...}</span></p>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:宋体">那在</span><span style="font-family:Consolas" lang="EN-US">BadActor</span><span style="font-family:
宋体">中即可以通过该引用来直接调用</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">的方法，也可以通过“</span><span style="font-family:
Consolas" lang="EN-US">!</span><span style="font-family:宋体">”来传递消息。<span style="background:
yellow">选择后者</span>！因为一旦</span><span style="font-family:Consolas" lang="EN-US">BadActor</span><span style="font-family:宋体">通过引用读取</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">实例的私有数据，而这些数据可能正被其他线程改写值，结果就避免不了“共享数据</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">锁”模型中的麻烦事：即必须保证</span><span style="font-family:Consolas" lang="EN-US">BadActor</span><span style="font-family:
宋体">线程读取</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">的私有数据时，</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">线程在这块成为“共享数据”的操作上加锁。</span><span style="font-family:Consolas" lang="EN-US">GoodActor</span><span style="font-family:宋体">只要有了共享数据，就必须来加锁防范竞用冲突和死锁，你又得从</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">模型退回到“共享数据</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">锁”模型（注：</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">对消息是顺序处理的，本来不用考虑共享数据）。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027619"></a><a name="_Toc281660078"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">7.7.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">采用不可变消息</span></u></a></h3>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:
Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">模型让每个</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">act</span><span style="font-family:宋体">方法内部接近于单线程环境，你不用当心</span><span style="font-family:Consolas" lang="EN-US">act</span><span style="font-family:宋体">方法里面的操作是否线程安全。在</span><span style="font-family:Consolas" lang="EN-US">act</span><span style="font-family:
宋体">方法中你可以尽情使用非同步、可变对象，因为每个</span><span style="font-family:Consolas" lang="EN-US">act</span><span style="font-family:宋体">方法被有效限制在单个线程中，这也是</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">模型被称为“</span><span style="font-family:Consolas" lang="EN-US">share-nothing</span><span style="font-family:宋体">”</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">模型（零共享模型）的原因，其数据的作用范围被限制在单个线程中。不过一旦对象内的数据被用于多个</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">之间进行消息传递。这时你就必须考虑消息对象是否线程安全。</span></p>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:宋体">保证消息对象线程安全的最好方法就是保证只使用不可变对象作为消息对象。<b><u>消息类中只定义</u></b></span><b><u><span style="font-family:Consolas" lang="EN-US">val</span></u></b><b><u><span style="font-family:宋体">字段，且只能指向不可变对象</span></u></b><span style="font-family:
宋体">。定义这种不可变消息类的简单方法就是使用</span><span style="font-family:Consolas" lang="EN-US">case
class</span><span style="font-family:宋体">，</span><span style="font-family:Consolas">
</span><span style="font-family:宋体">并保证其所有的</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">字段都是不可变的。</span><span style="font-family:Consolas" lang="EN-US">Scala API</span><span style="font-family:
宋体">中提供了很多不可变对象可用，例如基本类型、</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Tuple</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">，不可变</span><span style="font-family:Consolas" lang="EN-US">Set</span><span style="font-family:宋体">、不可变</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">等。</span></p>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:宋体">如果你发现确实需要把一个可变对象</span><span style="font-family:Consolas" lang="EN-US">obj1</span><span style="font-family:
宋体">发送给其他</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:宋体">，也因该是发送一份拷贝对象</span><span style="font-family:
Consolas" lang="EN-US">obj1.clone</span><span style="font-family:宋体">过去，而不是把</span><span style="font-family:Consolas" lang="EN-US">obj1</span><span style="font-family:
宋体">直接发过去。例如，数据对象</span><span style="font-family:Consolas" lang="EN-US">Array</span><span style="font-family:宋体">是可变且未做同步的，所以</span><span style="font-family:
Consolas" lang="EN-US">Array</span><span style="font-family:宋体">只应该由一个</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">同时存取，如果需要发送数组</span><span style="font-family:Consolas" lang="EN-US">arr</span><span style="font-family:宋体">，就发送</span><span style="font-family:Consolas" lang="EN-US">arr.clone</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">arr</span><span style="font-family:宋体">中的元素也应该是不可变对象），或者直接发送一个不可变对象</span><span style="font-family:Consolas" lang="EN-US">arr.toList</span><span style="font-family:宋体">更好。</span></p>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:宋体">总结：大部分时候使用不可变对象很方便，不可变对象是并行系统的曙光，它们是易使用、低风险的线程安全对象。当你将来要设计一个和并行相关的程序时，无论是否使用</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">，都应该尽量使用不可变的数据结构。</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027620"></a><a name="_Toc281660079"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">7.7.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">让消息自说明</span></u></a></h3>

<p class="MsoNormal" style="line-height:150%"><span style="font-family:宋体">对每一种消息创建一个对应的</span><span style="font-family:Consolas" lang="EN-US">case class</span><span style="font-family:宋体">，而不是使用上面的</span><span style="font-family:
Consolas" lang="EN-US">tuple</span><span style="font-family:宋体">数据结构。虽然这种包装在很多情况下并非必须，但该做法能使</span><span style="font-family:Consolas" lang="EN-US">actor</span><span style="font-family:
宋体">程序易于理解，例如：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">不易理解，因为传递的是个一般的字符串，很难指出那个</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">actor</span><span style="font-family:宋体;color:#3F7F5F">来响应这个消息</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">lookerUpper ! (</span><span style="font-family:Consolas;color:#2A00FF" lang="EN-US">"www.scala-lang.org"</span><span style="font-family:Consolas;color:black" lang="EN-US">, self)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">// </span><span style="font-family:宋体;color:#3F7F5F">改为如下，则指出只有</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">react</span><span style="font-family:
宋体;color:#3F7F5F">能处理</span><span style="font-family:Consolas;
color:#3F7F5F" lang="EN-US">LoopupIP</span><span style="font-family:宋体;color:#3F7F5F">的</span><span style="font-family:Consolas;color:#3F7F5F" lang="EN-US">actor</span><span style="font-family:宋体;color:#3F7F5F">来处理：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#7F0055" lang="EN-US">case</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#7F0055" lang="EN-US">class</span><span style="font-family:Consolas;color:black" lang="EN-US"> LookupIP(hostname: String, requester:
Actor)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">lookerUpper ! LookupIP(</span><span style="font-family:Consolas;color:#2A00FF" lang="EN-US">"www.scala-lang.org"</span><span style="font-family:Consolas;color:black" lang="EN-US">, self)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132235"></a><a name="_Toc282027621"></a><a name="_Toc281660080"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">不同</span></u></a><u><span style="font-family:Consolas" lang="EN-US">jvm</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">间的消息访问</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">服务器端：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">object</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">ActorServer</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">extends</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Application</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">import</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:
10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.Actor, <u>actor</u></span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">s</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">._, </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">remote</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.<span style="background:yellow">RemoteActor</span></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> { </span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">创建并启动一个</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">当前</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor </span><span style="font-size:10.0pt;font-family:宋体;color:gray">监听的端口：</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> 3000</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">RemoteActor</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">alive</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(3000)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">在</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> 3000 </span><span style="font-size:10.0pt;font-family:宋体;color:gray">端口注册本</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor</span><span style="font-size:10.0pt;font-family:宋体;color:gray">，取名为</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> server1</span><span style="font-size:10.0pt;font-family:宋体;color:gray">。</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">第一个参数为</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor </span><span style="font-size:10.0pt;font-family:宋体;color:gray">的标识，它以单引号开头，是</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> Scala </span><span style="font-size:10.0pt;font-family:宋体;color:gray">中的</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> Symbol </span><span style="font-size:10.0pt;font-family:宋体;color:gray">量，</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// Symbol </span><span style="font-size:10.0pt;font-family:宋体;
color:gray">量和字符串相似，但</span><span style="font-size:10.0pt;
font-family:Consolas;color:gray" lang="EN-US"> Symbol </span><span style="font-size:10.0pt;
font-family:宋体;color:gray">相等是基于字符串比较的。</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// self </span><span style="font-size:10.0pt;font-family:宋体;
color:gray">指代当前</span><span style="font-size:10.0pt;font-family:
Consolas;color:gray" lang="EN-US"> actor </span><span style="font-size:10.0pt;font-family:
宋体;color:gray">（注意此处不能用</span><span style="font-size:10.0pt;
font-family:Consolas;color:gray" lang="EN-US"> this</span><span style="font-size:10.0pt;
font-family:宋体;color:gray">）</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">RemoteActor</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">register</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#FF5E5E" lang="EN-US">'server1</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">, </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">self</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">收到消息后的响应</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">loop</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">react</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {</span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">case</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">msg</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> =&gt;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"server1
get: "</span><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">+</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">msg</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">客户端：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">object</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">ActorClient</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#4C4C4C" lang="EN-US">extends</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Application</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">import</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:
10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.Actor, </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">remote</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.Node, </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">actors</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">remote</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.RemoteActor&nbsp;
</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#8E3E00" lang="EN-US">Actor</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;
font-family:Consolas;color:#003E85" lang="EN-US">actor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> {&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">取得一个节点（</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">ip:port </span><span style="font-size:10.0pt;font-family:宋体;color:gray">唯一标识一个节点）</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// Node </span><span style="font-size:10.0pt;font-family:宋体;
color:gray">是个</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US"> case class</span><span style="font-size:10.0pt;font-family:宋体;
color:gray">，所以不需要</span><span style="font-size:10.0pt;font-family:
Consolas;color:gray" lang="EN-US"> new&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">val</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">node</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">Node</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"127.0.0.1"</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">,
3000)&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">取得节点对应的</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor </span><span style="font-size:10.0pt;font-family:宋体;color:gray">代理对象</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#4C4C4C" lang="EN-US">val</span><span style="font-size:10.0pt;font-family:
Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;
font-family:Consolas;color:#2300FB" lang="EN-US">remoteActor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-size:10.0pt;font-family:Consolas;color:#8E3E00" lang="EN-US">RemoteActor</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-size:10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">select</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:10.0pt;font-family:Consolas;color:#2300FB" lang="EN-US">node</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">, </span><span style="font-size:10.0pt;font-family:Consolas;color:#FF5E5E" lang="EN-US">'server1</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:gray" lang="EN-US">// </span><span style="font-size:10.0pt;font-family:宋体;color:gray">现在</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">
remoteActor </span><span style="font-size:10.0pt;font-family:宋体;color:gray">就和普通的</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US"> actor </span><span style="font-size:10.0pt;font-family:宋体;color:gray">一样，可以向它发送消息了！</span><span style="font-size:10.0pt;font-family:Consolas;color:gray" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:green" lang="EN-US">"-- begin to send message"</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#2300FB" lang="EN-US">remoteActor</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:
10.0pt;font-family:Consolas;color:#003E85" lang="EN-US">!</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"ActorClient</span><span style="font-size:10.0pt;font-family:宋体;color:green">的消息</span><span style="font-size:10.0pt;font-family:Consolas;color:green" lang="EN-US">"</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size:10.0pt;font-family:Consolas;
color:#003E85" lang="EN-US">println</span><span style="font-size:10.0pt;
font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-size:
10.0pt;font-family:Consolas;color:green" lang="EN-US">"-- end"</span><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:10.0pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;
}&nbsp; </span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas;
color:black" lang="EN-US">}</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132236"></a><a name="_Toc282027622"></a><a name="_Toc281660081"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">7.9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">STM</span></u></a><u><span style="font-family:Consolas" lang="EN-US"> </span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://nbronson.github.com/scala-stm/" target="_blank" rel="external">http://nbronson.github.com/scala-stm/</a></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-size:11.5pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">a
lightweight <b><u>Software Transactional Memory</u></b> for Scala, inspired by
the STMs in Haskell and Clojure.</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-size:11.5pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Cheat-Sheet:</span></span></p>

<div style="border:solid #A0A0A0 1.0pt;padding:7.0pt 7.0pt 7.0pt 7.0pt"><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">import</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="nn"><b><span style="font-size:10.5pt;font-family:Consolas;
color:blue" lang="EN-US">scala.concurrent.stm._</span></b></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">x</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="nc"><b><span style="font-size:10.5pt;font-family:Consolas;
color:blue;background:yellow" lang="EN-US">Ref</span></b></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">(</span></span><span class="mi"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">0</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">)</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// allocate a Ref[Int]</span></span></pre><pre style="line-height:
15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="nc"><b><span style="font-size:10.5pt;font-family:Consolas;
color:blue;background:yellow" lang="EN-US">Ref</span></b></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">make</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">[</span></span><span class="kt"><span style="font-size:10.5pt;font-family:Consolas;color:#B00040" lang="EN-US">String</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">]()</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// type-specific default</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">z</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">x</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black;background:
yellow" lang="EN-US">single</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// Ref.View[Int]</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black;background:
yellow" lang="EN-US">atomic</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">implicit</span></b></span><code><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">txn</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">=&gt;</span></b></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">i</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">x</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// read</span></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#BA2121" lang="EN-US">"x was "</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">i</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// write</span></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">eq</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black;background:yellow" lang="EN-US">atomic</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">implicit</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">txn</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=&gt;</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// nested atomic</span></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">x</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">==</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">z</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// both Ref and Ref.View can be used inside atomic</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">}</span></span></pre><pre style="line-height:15.0pt;border:none;
padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">assert</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">(</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">eq</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">)</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">set</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">(</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">get</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#BA2121" lang="EN-US">", long-form access"</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">)</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">}</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// only Ref.View can be used outside atomic</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">println</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">(</span></span><span class="s"><span style="font-size:
10.5pt;font-family:Consolas;color:#BA2121" lang="EN-US">"y was '"</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">single</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#BA2121" lang="EN-US">"'"</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">)</span></span></pre><pre style="line-height:15.0pt;border:none;
padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:
Consolas;color:black" lang="EN-US">println</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">(</span></span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#BA2121" lang="EN-US">"z was "</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">z</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">())</span></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black;background:
yellow" lang="EN-US">atomic</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">implicit</span></b></span><code><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">txn</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">=&gt;</span></b></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#BA2121" lang="EN-US">", first alternative"</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">if</span></b></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">(</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">x</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">getWith</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">_</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">&gt;</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="mi"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">0</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">})</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// read via a function</span></span></pre><pre style="text-indent:21.0pt;line-height:15.0pt;border:none;padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">retry</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// try alternatives or block </span></span><a name="_Toc282027623"></a></pre><pre style="line-height:15.0pt;border:none;
padding:0cm"><span class="o"><span style="font-size:10.5pt;font-family:
Consolas;color:#666666" lang="EN-US">}</span></span><code><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">orAtomic</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">implicit</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">txn</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=&gt;</span></b></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp; </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">()</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">+</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#BA2121" lang="EN-US">", second alternative"</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">}</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></code></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">prev</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">z</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">swap</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">(</span></span><span class="mi"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">10</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">)</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// atomic swap</span></span></pre><pre style="line-height:15.0pt;
border:none;padding:0cm"><span class="k"><b><span style="font-size:
10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">success</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">z</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">compareAndSet</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">(</span></span><span class="mi"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">10</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">,</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="mi"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">11</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">)</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;
color:gray" lang="EN-US">// atomic compare-and-set</span></span></pre><pre style="line-height:
15.0pt;border:none;padding:0cm"><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">z</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">transform</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">_</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">max</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="mi"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">20</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">}</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="c1"><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">// atomic transformation</span></span></pre><pre style="line-height:15.0pt;border:none;padding:0cm"><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">pre</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">single</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">getAndTransform</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">_</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">toUpperCase</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">}</span></span></pre><pre style="line-height:15.0pt;border:none;
padding:0cm"><span class="k"><b><span style="font-size:10.5pt;
font-family:Consolas;color:green" lang="EN-US">val</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">post</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">=</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">y</span></span><span class="o"><span style="font-size:
10.5pt;font-family:Consolas;color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">single</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">transformAndGet</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="n"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">_</span></span><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">.</span></span><span class="n"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">filterNot</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">{</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;color:green" lang="EN-US">_</span></b></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">==</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="sc"><span style="font-size:10.5pt;font-family:Consolas;color:#BA2121" lang="EN-US">' '</span></span><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">}</span></span><code><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span></code><span class="o"><span style="font-size:10.5pt;font-family:Consolas;color:#666666" lang="EN-US">}</span></span></pre></div>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-size:11.5pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">&nbsp;</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc306132237"></a><a name="_Toc282027624"></a><a name="_Toc281660082"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">misc</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132238"></a><a name="_Toc282027625"></a><a name="_Toc281660083"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">8.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">xml</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027626"></a><a name="_Toc281660084"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.1.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">生成</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">原生支持</span><span style="font-family:Consolas" lang="EN-US">xml</span><span style="font-family:宋体">，就如同</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">支持</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">一样，这就让生成</span><span style="font-family:Consolas" lang="EN-US">xml</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">xhtml</span><span style="font-family:宋体">很简单优雅：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val name =
"james"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val age = 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val html =
&lt;html&gt;name=<span style="background:yellow">{name}</span>, age="<span style="background:yellow">{age}</span>"&lt;/html&gt; toString</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// &lt;html&gt;name=james,
age=&amp;quot;10&amp;quot;&lt;/html&gt;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val html =
&lt;html&gt;&lt;head&gt;&lt;title&gt;<span style="background:yellow">{myTitle}</span>&lt;/title&gt;&lt;/head&gt;&lt;body&gt;<span style="background:yellow">{"hello world"}</span>&lt;/boty&gt;&lt;/html&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更复杂的例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x =
&lt;r&gt;<span style="background:yellow">{(1 to 5).map(i =&gt;
&lt;e&gt;{i}&lt;/e&gt;)}</span>&lt;/r&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">// &lt;r&gt;&lt;e&gt;1&lt;/e&gt;&lt;e&gt;2&lt;/e&gt;&lt;e&gt;3&lt;/e&gt;&lt;e&gt;4&lt;/e&gt;&lt;e&gt;5&lt;/e&gt;&lt;/r&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x0 =
&lt;users&gt;<span style="background:yellow">&lt;user name="qh"/&gt;</span>&lt;/users&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
&lt;users&gt;<span style="background:yellow">{u}</span>&lt;/users&gt; =
x0&nbsp; // u: scala.xml.Node = <span style="background:yellow">&lt;user
name="qh"&gt;&lt;/user&gt;</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027627"></a><a name="_Toc281660085"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.1.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">xml</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文件</span></u></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">xml.XML <span style="background:yellow">loadString</span> "&lt;p&gt;&lt;/p&gt;"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">xml.XML <span style="background:yellow">loadFile</span> "abc.xml"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">xml.XML.<span style="background:yellow">saveFull</span>("foo.xml", node,
"UTF-8", &#61623;</span></p>

<p class="MsoNormal" style="margin-left:63.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">xmlDecl:&nbsp;Boolean,&nbsp;doctype&nbsp;:&nbsp;DocType)</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027628"></a><a name="_Toc281660086"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.1.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读取：</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x =
&lt;r&gt;<span style="background:yellow">{(1 to 5).map(i =&gt;
&lt;e&gt;{i}&lt;/e&gt;)}</span>&lt;/r&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
&lt;r&gt;<u>&lt;e&gt;1&lt;/e&gt;&lt;e&gt;2&lt;/e&gt;&lt;e&gt;3&lt;/e&gt;&lt;e&gt;4&lt;/e&gt;&lt;e&gt;5&lt;/e&gt;</u>&lt;/r&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x \
"e") map (_.text.toInt) <span style="color:#5B6E6E">// List(1, 2, 3,
4, 5)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x0 =
&lt;users&gt;</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&lt;user
name="qh"&gt;&lt;age&gt;20&lt;/age&gt;&lt;/user&gt;</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&lt;user
name="james"&gt;&lt;age&gt;30&lt;/age&gt;&lt;/user&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/users&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x0 \
"user") // <span style="color:#5B6E6E">&lt;user
name="qh"&gt;&lt;age&gt;20&lt;/age&gt;&lt;/user&gt;, &lt;user
name="james"&gt;&lt;age&gt;30&lt;/age&gt;&lt;/user&gt;)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x0 \
"user" \ "age") // <span style="color:#5B6E6E">(&lt;age&gt;20&lt;/age&gt;,
&lt;age&gt;30&lt;/age&gt;)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x0 \
"age")&nbsp; <span style="color:#5B6E6E">// </span></span><span style="font-family:宋体;color:#5B6E6E">直接下级</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">: ()</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x0 \\
"age") <span style="color:#5B6E6E">// </span></span><span style="font-family:宋体;color:#5B6E6E">所有下级：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">(&lt;age&gt;20&lt;/age&gt;,
&lt;age&gt;30&lt;/age&gt;)</span><a name="_Toc282027629"></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x0 \
"_") </span><span style="font-family:宋体">所有</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027630"></a><a name="_Toc281660087"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.1.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">访问属性</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val x =
&lt;uu&gt;&lt;<span style="background:yellow">u</span> <span style="background:
yellow">name</span>="qh" /&gt;&lt;u name="james" /&gt;&lt;u
name="qiu" /&gt;&lt;/uu&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x \ "<span style="background:yellow">u</span>" \\ "<b><span style="background:
lime">@</span></b><span style="background:yellow">name</span>") foreach
println // "qh\njames\nqiu"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">val data = </span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">&lt;shopping&gt;</span></span><span style="font-family:Consolas;color:black" lang="EN-US"><br>
<span class="apple-style-span">&nbsp; &lt;item name="bread"
quantity="3" price="2.50"/&gt;</span><br>
<span class="apple-style-span">&nbsp; &lt;item name="milk"
quantity="2" price="3.50"/&gt;</span><br>
<span class="apple-style-span">&lt;/shopping&gt;</span><br>
<br>
<span class="apple-style-span">val res = for (item &lt;- data \ "item"
; </span><br>
<span class="apple-style-span">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
price = (item \ "@price").text.toDouble ; </span><br>
<span class="apple-style-span">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qty
= (item \ "@quantity").text.toInt)</span><br>
<span class="apple-style-span">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield
(price * qty)</span><br>
<br>
<span class="apple-style-span">printf("$%.2f\n", res.sum)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027631"></a><a name="_Toc281660088"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.1.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">格式化输出</span></u></a></h3>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val&nbsp;pp&nbsp;=&nbsp;new&nbsp;xml.<span style="background:yellow">PrettyPrinter</span>(80,&nbsp;4)&nbsp;&nbsp;//&nbsp;</span><span style="font-family:宋体">行宽</span><span style="font-family:Consolas" lang="EN-US">&nbsp;80</span><span style="font-family:宋体">，缩进为</span><span style="font-family:Consolas" lang="EN-US">&nbsp;4&nbsp;&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">pp&nbsp;<span style="background:yellow">formatNodes</span>&nbsp;&lt;b&gt;&lt;a/&gt;&lt;/b&gt;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结果是字符串</span><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
#D9D9D9" lang="EN-US">&lt;b&gt;&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
#D9D9D9" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&gt;&lt;/a&gt;&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
#D9D9D9" lang="EN-US">&lt;/b&gt;&nbsp;</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132239"></a><a name="_Toc282027632"></a><a name="_Toc281660089"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">8.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">json</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala-json</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132240"></a><a name="_Toc282027633"></a><a name="_Toc281660090"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">8.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Configgy</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.lag.net/configgy/" target="_blank" rel="external">http://www.lag.net/configgy/</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">简单配置及</span><span style="font-family:Consolas" lang="EN-US">logging</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">----------------------------</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">log {</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
filename = "/var/log/pingd.log"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; roll =
"daily"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; level =
"debug"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hostname =
"pingd.example.com"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">port = 3000</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">----------------------------</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val conf = net.lag.configgy.Configgy.configure("<u>/etc/pingd.conf</u>").config</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val hostname =
conf.getString("<span style="background:yellow">hostname</span>",
"localhost")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val port =
conf.getInt("<span style="background:yellow">port</span>", 3000)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132241"></a><a name="_Toc282027634"></a><a name="_Toc281660091"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">8.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">正则表达式</span></u></a><u><span style="font-family:Consolas" lang="EN-US">regex</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：完全匹配</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//</span><span style="font-family:宋体;color:#5B6E6E">将字符串转为</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">scala.util.matching.Regex</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val pattern = "<span style="color:#C00000">^[a-z0-9._%\\-+]+@(?:[a-z0-9\\-]+\\.)+[a-z]{2,4}$</span>"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val emailRegex
= pattern.<span style="background:yellow">r</span> <span style="color:#5B6E6E">//
</span></span><span style="font-family:宋体;color:#5B6E6E">或者</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US"> new
scala.util.matching.Regex(pattern)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//<a name="_Toc282027635">emailRegex.pattern=&gt;java.util.regex.Pattern </a></span><span style="font-family:宋体;color:#5B6E6E">使用</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">java</span><span style="font-family:
宋体;color:#5B6E6E">的</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US">Pattern</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">emailRegex.<span style="background:yellow">pattern</span>.<span style="background:yellow">matcher</span>("<span style="color:#0070C0">tt@16.cn</span>").<span style="background:yellow">matches</span>
<span style="color:#5B6E6E">// true</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：查找匹配部分</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val p = "<span style="color:#C00000">[0-9]+</span>".r&nbsp;&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">p.<span style="background:yellow">findAllIn</span>("<span style="color:#C00000">2</span><span style="color:#0070C0"> ad </span><span style="color:#C00000">12</span><span style="color:#0070C0">ab ab</span><span style="color:#C00000">21</span><span style="color:#0070C0"> </span><span style="color:#C00000">23</span>").toList
<span style="color:#5B6E6E">// List(2, 12, 21, 23)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">p.<span style="background:yellow">findFirstMatchIn</span>("<span style="color:
#0070C0">abc</span><span style="color:#C00000">123</span><span style="color:#0070C0">xyz</span>").get <span style="color:#5B6E6E">// scala.util.matching.Regex.Match
= 123</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更多例子如下：</span></p>

<p class="MsoNormal"><b><u><span style="font-family:宋体">定义：</span></u></b></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r1 <span class="sy0">=</span> <span class="st0">"(</span><span class="es0">\\</span><span class="st0">d+) lines"</span><span style="background:yellow">.<span class="me1">r</span></span>&nbsp; <span class="co1"><span style="color:#5B6E6E">// syntactic sugar</span></span><span style="color:#5B6E6E"><br>
</span><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r2 <span class="sy0">=</span> <span class="st0">"""(</span><span class="es0">\d</span><span class="st0">+) lines"""</span><span style="background:yellow">.<span class="me1">r</span></span> <span style="color:#5B6E6E">&nbsp;<span class="co1">// using triple-quotes to preserve backslashes</span></span></span></pre><pre><span class="co1"><span style="font-size:10.5pt">或者</span></span></pre><pre><span class="co1"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">import scala.util.matching.Regex</span></span><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><br>
<a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r3 <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">new</span></a> <span class="me1">Regex</span><span class="br0">(</span><span class="st0">"(</span><span class="es0">\\</span><span class="st0">d+) lines"</span><span class="br0">)</span>&nbsp; <span class="co1"><span style="color:#5B6E6E">// standard</span></span><span style="color:#5B6E6E"><br>
</span><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r4 <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">new</span></a> <span class="me1">Regex</span><span class="br0">(</span><span class="st0">"""(</span><span class="es0">\d</span><span class="st0">+) lines"""</span>, <span class="st0">"lines"</span><span class="br0">)</span> <span class="co1"><span style="color:#5B6E6E">// with named groups</span></span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">search</span></u></b><b><u><span style="font-family:宋体">和</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">replace</span></u></b><b><u><span style="font-family:宋体">（</span></u></b><b><u><span style="font-family:Consolas" lang="EN-US">java.lang.String</span></u></b><b><u><span style="font-family:宋体">的方法）：</span></u></b></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"99 lines" <span style="background:yellow">matches</span> "(\\d+) lines" <span style="color:#5B6E6E">// true</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"99 Lines" <span style="background:yellow">matches</span> "(\\d+) lines" <span style="color:#5B6E6E">// false</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"99 lines" <span style="background:yellow">replace</span> ("99", "98") <span style="color:#5B6E6E">// "98 lines"</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"99 lines lines" <span style="background:yellow">replaceAll</span> ("l", "L") <span style="color:#5B6E6E">// 99 Lines Lines</span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">search</span></u></b><b><u><span style="font-family:宋体">（</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">regex</span></u></b><b><u><span style="font-family:宋体">的方法）：</span></u></b></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"\\d+".r <span style="background:yellow">findFirstIn</span> "99 lines" <span style="color:#5B6E6E">// Some(99)</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"\\w+".r <span style="background:yellow">findAllIn</span> "99 lines" <span style="color:#5B6E6E">// iterator(</span></span><span style="font-size:10.5pt;
color:#5B6E6E">长度为</span><span style="font-size:10.5pt;font-family:
Consolas;color:#5B6E6E" lang="EN-US">2)</span></pre><pre><span style="font-size:
10.5pt;font-family:Consolas" lang="EN-US">"\\s+".r <span style="background:yellow">findPrefixOf</span> "99 lines" <span style="color:#5B6E6E">// None</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">"\\s+".r <span style="background:yellow">findPrefixOf</span> "&nbsp; 99 lines" <span style="color:#5B6E6E">// Some(&nbsp; )</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r4 <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">new</span></a> <span class="me1">Regex</span><span class="br0">(</span><span class="st0">"""(</span><span class="es0">\d</span><span class="st0">+) lines"""</span>, <span class="st0">"<span style="background:lime">g1</span>"</span><span class="br0">)</span> <span class="co1"><span style="color:#5B6E6E">// with named groups</span></span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">r4 <span style="background:yellow">findFirstMatchIn</span> "99 lines-a" <span style="color:#5B6E6E">// Some(99 lines)</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">r4 <span style="background:yellow">findPrefixMatchOf</span> "99 lines-a" <span style="color:#5B6E6E">// Some(99 lines)</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span style="color:windowtext;text-decoration:
none">val</span></a> b = (r4 <span style="background:yellow">findFirstMatchIn</span> "99 lines").<span style="background:yellow">get.group</span>("<span style="background:lime">g1</span>") <span style="color:#5B6E6E">// "99"</span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">match</span></u></b><b><u><span style="font-family:宋体">（</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">regex</span></u></b><b><u><span style="font-family:宋体">的方法）：</span></u></b></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r1 <span class="sy0">=</span> <span class="st0">"<span style="background:lime">(</span></span><span class="es0"><span style="background:lime">\\</span></span><span class="st0"><span style="background:
lime">d+)</span> lines"</span><span style="background:yellow">.<span class="me1">r</span></span></span></pre><pre><span style="font-size:
10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r4 <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">new</span></a> <span class="me1">Regex</span><span class="br0">(</span><span class="st0">"""(</span><span class="es0">\d</span><span class="st0">+) lines"""</span>, <span class="st0">"<span style="background:lime">g1</span>"</span><span class="br0">)</span></span></pre><pre><span style="font-size:10.5pt;
font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> Some<span class="br0">(</span>b<span class="br0">)</span> <span class="sy0">=</span> r4 <span style="background:yellow">findPrefixOf</span> <span class="st0">"99 lines"</span> <span class="co1">// "99 lines"</span><br>
<a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">for</span></a> <span class="br0">{</span><br>
&nbsp; line <span class="sy0">&lt;</span>- <span class="st0">"""|99 lines-a</span><br>
<span class="st0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |99 lines</span><br>
<span class="st0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |pass</span><br>
<span class="st0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |98 lines-c"""</span>.<span class="me1">stripMargin</span>.<span class="me1">lines</span><br>
<span class="br0">}</span> line <span style="background:yellow"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">match</span></a></span> <span class="br0">{</span><br>
&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> r1<span class="br0">(</span><span style="background:lime">n</span><span class="br0">)</span> <span class="sy0">=&gt;</span> println<span class="br0">(</span><span class="st0">"Has " </span>+ <span style="background:lime">n</span> + <span class="st0">" Lines."</span><span class="br0">) // "Has 99 Lines."</span></span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">case</span></a> <span class="sy0">_</span> <span class="sy0">=&gt;</span><br>
<span class="br0">}</span></span></pre><pre><span style="font-size:
10.5pt;font-family:Consolas" lang="EN-US">&nbsp;</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">for</span></a> (<span style="background:yellow">matched</span> <span class="sy0">&lt;</span>- <span class="st0">"(</span><span class="es0">\\</span><span class="st0">w+)"</span>.<span class="me1">r</span> <span style="background:
yellow">findAllIn</span> <span class="st0">"99 lines"</span> <span style="background:yellow">matchData</span>)</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"> &nbsp;println<span class="br0">(</span><span class="st0">"Matched from " </span>+ <span style="background:yellow">matched</span>.<span class="me1">start </span>+ <span class="st0">" to " </span>+ <span style="background:yellow">matched</span>.<span class="me1">end</span><span class="br0">)</span></span></pre>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Matched from 0
to 2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Matched from 3
to 8</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">replace</span></u></b><b><u><span style="font-family:宋体">（</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">regex</span></u></b><b><u><span style="font-family:宋体">的方法）：</span></u></b></p>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">val</span></a> r2 <span class="sy0">=</span> <span class="st0">"""(</span><span class="es0">\d</span><span class="st0">+) lines"""</span><span style="background:yellow">.<span class="me1">r</span></span> <span style="color:#5B6E6E">&nbsp;<span class="co1">// using triple-quotes to preserve backslashes</span></span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">r2
replaceFirstIn ("99 lines-a", "aaa") // "aaa-a"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">r2
replaceAllIn ("99 lines-a, 98 lines-b", "bbb") // "bbb-a,
bbb-b"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其他：使用正则表达式定义变量</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val regex =
"(\\d+)/(\\d+)/(\\d+)".r</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">val
regex(year, month, day) = "2010/1/13"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
year: String = 2010</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
month: String = 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">//
day: String = 13</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132242"></a><a name="_Toc282027636"></a><a name="_Toc281660092"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">8.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">GUI</span></u></a></h2>

<h3 style="margin-left:9.0pt"><a name="_Toc282027637"></a><a name="_Toc281660093"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.5.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">java</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方式</span></u></h3>

<pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US"><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">import</span></a> javax.<span class="me1">swing</span>.<span class="me1">JFrame</span><br>
<a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">var</span></a> jf <span class="sy0">=</span> <a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">new</span></a> JFrame<span class="br0">(</span><span class="st0">"Hello!"</span><span class="br0">)</span><br>
jf.<span class="me1">setSize</span><span class="br0">(</span><span class="nu0">800</span>, <span class="nu0">600</span><span class="br0">)</span><br>
jf.<span class="me1">setDefaultCloseOperation</span><span class="br0">(</span>JFrame.<span class="me1">EXIT_ON_CLOSE</span><span class="br0">)</span><br>
jf.<span class="me1">setVisible</span><span class="br0">(</span><a href="http://scala-lang.org/" target="_blank" rel="external"><span class="kw1">true</span></a><span class="br0">)</span></span></pre>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h3 style="margin-left:9.0pt"><a name="_Toc282027638"></a><a name="_Toc281660094"><span style="font-size:10.5pt;line-height:173%;
font-family:Consolas" lang="EN-US">8.5.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-size:14.0pt;line-height:173%;font-family:Consolas" lang="EN-US">scala</span></u></a><u><span style="font-size:14.0pt;line-height:173%;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方式</span></u></h3>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">import</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">swing</span><span style="font-family:Consolas;color:black" lang="EN-US">._, </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">swing</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Swing</span><span style="font-family:Consolas;color:black" lang="EN-US">._</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">object</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Swing1</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">extends</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">SimpleGUIApplication</span><span style="font-family:Consolas;color:black" lang="EN-US"> { </span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">// scala2.7</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">def</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">top</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">MainFrame</span><span style="font-family:Consolas;color:black" lang="EN-US"> { </span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">// </span><span style="font-family:
宋体;color:#5B6E6E">必须实现</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US">top</span><span style="font-family:宋体;color:#5B6E6E">方法</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">title</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:green" lang="EN-US">"</span><span style="font-family:
宋体;color:green">窗口</span><span style="font-family:Consolas;
color:green" lang="EN-US">1"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">preferredSize</span><span style="font-family:Consolas;color:black" lang="EN-US"> = (400, 300)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">val</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">label</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Label</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:green" lang="EN-US">"hello world cn</span><span style="font-family:宋体;color:green">中文</span><span style="font-family:
Consolas;color:green" lang="EN-US">"</span><span style="font-family:Consolas;
color:black" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;color:#003E85" lang="EN-US">contents</span><span style="font-family:Consolas;color:black" lang="EN-US"> = </span><span style="font-family:Consolas;color:#4C4C4C" lang="EN-US">new</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">BorderPanel</span><span style="font-family:Consolas;color:black" lang="EN-US"> {</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:Consolas;color:#003E85" lang="EN-US">layout</span><span style="font-family:Consolas;color:black" lang="EN-US">(</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">label</span><span style="font-family:Consolas;color:black" lang="EN-US">) = </span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">BorderPanel</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#8E3E00" lang="EN-US">Position</span><span style="font-family:Consolas;color:black" lang="EN-US">.</span><span style="font-family:Consolas;color:#2300FB" lang="EN-US">Center</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp; }</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc306132243"></a><a name="_Toc282027639"></a><a name="_Toc281660095"><span style="font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal" lang="EN-US">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">附录</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc282027640"></a><a name="_Toc281660096"></a><a name="_Toc306132244"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">stackoverflow</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的</span></u><u><span style="font-family:Consolas" lang="EN-US">scala</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">教程</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">解答一些实际问题：</span></p>

<p class="MsoNormal"><a href="http://stackoverflow.com/tags/scala/info" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://stackoverflow.com/tags/scala/info</span></a></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132245"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">ProjectEuler</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">数学</span><span style="font-family:Consolas" lang="EN-US">+</span><span style="font-family:宋体">编程答题：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://projecteuler.net/index.php?section=problems" target="_blank" rel="external">http://projecteuler.net/index.php?section=problems</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">对上面问题的</span><span style="font-family:Consolas" lang="EN-US">Haskell</span><span style="font-family:宋体">解答参考：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.haskell.org/haskellwiki/Euler_problems" target="_blank" rel="external">http://www.haskell.org/haskellwiki/Euler_problems</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">对上面问题的</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">解答参考：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.s-anand.net/euler.html" target="_blank" rel="external">http://www.s-anand.net/euler.html</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">对上面问题的</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">解答参考：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://pavelfatin.com/scala-for-project-euler/" target="_blank" rel="external">http://pavelfatin.com/scala-for-project-euler/</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132246"></a><a name="_Toc282027641"></a><a name="_Toc281660097"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Scala</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">问答</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://stackoverflow.com/questions/tagged/scala+list" target="_blank" rel="external">http://stackoverflow.com/questions/tagged/scala+list</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132247"></a><a name="_Toc282027642"></a><a name="_Toc281660098"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">rosettacode</span></u></a></h2>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US"><a href="http://rosettacode.org/wiki/Category:Scala" target="_blank" rel="external">http://rosettacode.org/wiki/Category:Scala</a>
</span></b><b><span style="font-family:宋体">（各种语言解题汇编）</span></b></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132248"></a><a name="_Toc282027643"></a><a name="_Toc281660099"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">编译、</span></u></a><u><span style="font-family:Consolas" lang="EN-US">mvn</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">SBT</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">见</span><span style="font-family:Consolas" lang="EN-US">“<a href="file:///F:/data/__Apache/Maven/Maven%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.doc" target="_blank" rel="external">Maven
<span style="font-family:宋体" lang="EN-US"><span lang="EN-US">学<span lang="EN-US">习笔记</span></span></span></a>”</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">SBT</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中类似于</span><span style="font-family:Consolas" lang="EN-US">ant</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">maven</span><span style="font-family:宋体">的东西，配置文件使用</span><span style="font-family:
Consolas" lang="EN-US">.scala,</span><span style="font-family:宋体">交互模式下使用，可以自定编译和测试。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">vim/emacs/textmate</span><span style="font-family:
宋体">等结合进行增量开发。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结合</span><span style="font-family:Consolas" lang="EN-US">mvn</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">sbt</span><span style="font-family:
宋体">，可以利用</span><span style="font-family:Consolas" lang="EN-US">mvn
eclipse:eclipse</span><span style="font-family:宋体">来产生</span><span style="font-family:Consolas" lang="EN-US">.project</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">.classpath</span><span style="font-family:宋体">，利用</span><span style="font-family:Consolas" lang="EN-US">sbt</span><span style="font-family:宋体">的不间断编译运行，步骤：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行</span><span style="font-family:Consolas" lang="EN-US">maven</span><span style="font-family:宋体">命令（看</span><span style="font-family:Consolas" lang="EN-US">mvnh.bat</span><span style="font-family:
宋体">）创建目录</span><span style="font-family:Consolas" lang="EN-US">./prj1/</span><span style="font-family:宋体">结构：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">mvn archetype:create -DgroupId=jamesqiu -DartifactId=prj1
-DpackageName=test</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 ----------</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:宋体">项目在仓库中的唯一标识</span><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; </span><span style="font-family:宋体">跟目录名及</span><span style="font-family:Consolas" lang="EN-US">jar</span><span style="font-family:宋体">名</span><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:宋体">包名</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行</span><span style="font-family:Consolas" lang="EN-US">sbt</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">问及</span><span style="font-family:Consolas" lang="EN-US">name</span><span style="font-family:
宋体">就填和</span><span style="font-family:Consolas" lang="EN-US">mvn</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">packageName</span><span style="font-family:宋体">一样（“</span><span style="font-family:Consolas" lang="EN-US">test</span><span style="font-family:宋体">”）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">问及</span><span style="font-family:Consolas" lang="EN-US">organization</span><span style="font-family:宋体">就填和</span><span style="font-family:Consolas" lang="EN-US">mvn</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">groupId</span><span style="font-family:宋体">一样（“</span><span style="font-family:Consolas" lang="EN-US">jamesqiu</span><span style="font-family:宋体">”）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">问及</span><span style="font-family:Consolas" lang="EN-US">scala version</span><span style="font-family:宋体">就填</span><span style="font-family:Consolas" lang="EN-US">2.8.0</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行</span><span style="font-family:Consolas" lang="EN-US">mvn eclipse:eclipse</span><span style="font-family:
宋体">生成</span><span style="font-family:Consolas" lang="EN-US">eclipse</span><span style="font-family:宋体">项目文件</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行</span><span style="font-family:Consolas" lang="EN-US">sbt</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">sbt ~compile </span><span style="font-family:宋体">进行增量编译；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">sbt ~run </span><span style="font-family:宋体">进行增量编译运行，有多个可执行类时需要手工选择。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132249"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Scala</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">水平划分</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">来源：</span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.scala-lang.org/node/8610" target="_blank" rel="external">http://www.scala-lang.org/node/8610</a>
</span><span style="font-family:宋体">（</span><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Martin
Odersky</span></span><span style="font-family:宋体">）</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">应用开发者</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">库开发者</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level A1: Beginning
  application programmer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Java-like
  statements and expressions: standard operators, method calls, conditionals,
  loops, try/catch</span></p>
  <ul style="margin-top:0cm" type="disc">
   <li class="MsoNormal" style="color:#222222;text-align:left;line-height:12.0pt"><span style="font-family:Consolas" lang="EN-US">class, object, def, val, var,
       import, package</span></li>
   <li class="MsoNormal" style="color:#222222;text-align:left;line-height:12.0pt"><span style="font-family:Consolas" lang="EN-US">Infix notation for method calls</span></li>
   <li class="MsoNormal" style="color:#222222;text-align:left;line-height:12.0pt"><span style="font-family:Consolas" lang="EN-US">Simple closures</span></li>
   <li class="MsoNormal" style="color:#222222;text-align:left;line-height:12.0pt"><span style="font-family:Consolas" lang="EN-US">Collections with map, filter,
       etc</span></li>
  </ul>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">for-expressions</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level A2: Intermediate
  application programmer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Pattern
  matching</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Trait
  composition</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Recursion,
  in particular tail recursion</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">XML
  literals</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level L1: Junior
  library designer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Type
  parameters</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Traits</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Lazy
  vals</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Control
  abstraction, currying</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">By-name
  parameters</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level A3: Expert
  application programmer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Folds,
  i.e. methods such as&nbsp;foldLeft, foldRight</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Streams
  and other lazy data structures</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Actors</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Combinator
  parsers</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level L2: Senior
  library designer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Variance
  annotations</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Existential
  types (e.g., to interface with Java wildcards)</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Self
  type annotations and the cake pattern for dependency injection</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Structural
  types (aka&nbsp;static duck typing)</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Defining
  map/flatmap/withFilter for new kinds of for-expressions</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Extractors</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt" align="left"><span style="font-family:Consolas;color:#222222" lang="EN-US">Level L3: Expert
  library designer</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Early
  initializers</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Abstract
  types</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Implicit
  definitions</span></p>
  <p class="MsoNormal" style="margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt" align="left"><span style="font-size:
  10.0pt;font-family:Symbol;color:#222222" lang="EN-US">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span style="font-family:Consolas;color:#222222" lang="EN-US">Higher-kinded
  types</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132250"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Scala</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">适合的领域</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://goodstuff.im/scala-use-is-less-good-than-java-use-for-at-l" target="_blank" rel="external">http://goodstuff.im/scala-use-is-less-good-than-java-use-for-at-l</a>
by David Pollak</span></p>

<p class="MsoNormal"><span style="font-family:宋体">小结：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">更适合</span><span style="font-family:Consolas" lang="EN-US">real-time,
distributed, concurrent</span><span style="font-family:宋体">的应用，而不是</span><span style="font-family:Consolas" lang="EN-US">ORM</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">CRUD</span><span style="font-family:宋体">应用（尽管有</span><span style="font-family:Consolas" lang="EN-US">Squeryl</span><span style="font-family:宋体">）；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">大部分的应用还是</span><span style="font-family:Consolas" lang="EN-US">ORM</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">CRUD</span><span style="font-family:
宋体">，与其推销</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">到</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">万个项目里只成功</span><span style="font-family:Consolas" lang="EN-US">20%</span><span style="font-family:宋体">，还不如推荐到</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">千个合适项目里成功</span><span style="font-family:
Consolas" lang="EN-US">80%</span><span style="font-family:宋体">；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">你的公司已高端人才为主，推荐</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">；以堆人力为主，还是</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">吧；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc306132251"><span style="font-size:10.5pt;line-height:173%;font-family:Consolas" lang="EN-US">9.8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Twitter</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的</span></u><u><span style="font-family:Consolas" lang="EN-US">Scala School</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://twitter.github.com/scala_school/" target="_blank" rel="external">http://twitter.github.com/scala_school/</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">训练</span><span style="font-family:Consolas" lang="EN-US">java expert</span><span style="font-family:宋体">快速成为</span><span style="font-family:Consolas" lang="EN-US">scala expert</span></p>

</div>




</body></html>