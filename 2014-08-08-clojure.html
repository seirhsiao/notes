<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="Generator" content="Microsoft Word 14 (filtered)">
<title>Clojure Handbook (by jamesqiu)</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:Latha;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Raavi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Shruti;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tunga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:3 8 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:simhei;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:\02CE\0325_GB2312;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:仿宋_GB2312;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Batang";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:BatangChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@BatangChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Gungsuh;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Gungsuh";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GungsuhChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GungsuhChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:DaunPenh;
	panose-1:1 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:DokChampa;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Euphemia;
	panose-1:2 11 5 3 4 1 2 2 1 4;}
@font-face
	{font-family:Vani;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Gulim";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GulimChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GulimChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Dotum";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:DotumChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@DotumChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Iskoola Pota";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kalinga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kartika;
	panose-1:2 2 5 3 3 4 4 6 2 3;}
@font-face
	{font-family:"Khmer UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lao UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:Meiryo;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@微软雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@MingLiU";
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"\@MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Nyala;
	panose-1:2 0 5 4 7 3 0 2 0 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Plantagenet Cherokee";
	panose-1:2 2 6 2 7 1 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:2 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:新宋体;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@新宋体";
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Shonar Bangla";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Aparajita;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gisha;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kokila;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Leelawadee;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Uighur";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:MoolBoran;
	panose-1:2 11 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:Utsaah;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Vijaya;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Andalus;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Arabic Typesetting";
	panose-1:3 2 4 2 4 4 6 3 2 3;}
@font-face
	{font-family:"Simplified Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Simplified Arabic Fixed";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Sakkal Majalla";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Traditional Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Aharoni;
	panose-1:2 1 8 3 2 1 4 3 2 3;}
@font-face
	{font-family:David;
	panose-1:2 14 5 2 6 4 1 1 1 1;}
@font-face
	{font-family:FrankRuehl;
	panose-1:2 14 5 3 6 1 1 1 1 1;}
@font-face
	{font-family:"Levenim MT";
	panose-1:2 1 5 2 6 1 1 1 1 1;}
@font-face
	{font-family:Miriam;
	panose-1:2 11 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:"Miriam Fixed";
	panose-1:2 11 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:Narkisim;
	panose-1:2 14 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:Rod;
	panose-1:2 3 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:仿宋;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@仿宋";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:楷体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@楷体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:AngsanaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Browallia New";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:BrowalliaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:CordiaUPC;
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:DilleniaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:EucrosiaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:FreesiaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:IrisUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:JasmineUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:KodchiangUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:LilyUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:DFKai-SB;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@DFKai-SB";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:方正舒体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正舒体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:方正姚体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正姚体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:隶书;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@隶书";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:华文彩云;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文彩云";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文仿宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文仿宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文琥珀;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文琥珀";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文楷体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文楷体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文隶书;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文隶书";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文宋体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文宋体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文细黑;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文细黑";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文行楷;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文行楷";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文新魏;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文新魏";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文中宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文中宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:幼圆;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@幼圆";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:文泉驿微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:文泉驿等宽微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿等宽微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:迷你简启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你简启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:迷你繁启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你繁启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:微酷雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@微酷雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:Mathematica1;
	panose-1:5 0 5 2 6 1 0 0 0 1;}
@font-face
	{font-family:Mathematica1Mono;
	panose-1:5 6 4 0 3 1 0 0 1 1;}
@font-face
	{font-family:Mathematica2;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica2Mono;
	panose-1:5 0 4 0 3 0 0 0 0 0;}
@font-face
	{font-family:Mathematica3;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica3Mono;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica4;
	panose-1:5 1 4 0 4 1 1 0 1 1;}
@font-face
	{font-family:Mathematica4Mono;
	panose-1:5 1 4 0 4 1 1 0 1 1;}
@font-face
	{font-family:Mathematica5;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica5Mono;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica6;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica6Mono;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica7;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Mathematica7Mono;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:FixSong;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@FixSong";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Fixedsys;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Vera Sans YuanTi Mono";}
@font-face
	{font-family:金梅毛草書;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
h1
	{margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h2
	{margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h4
	{margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h5
	{margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-50.4pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h6
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";}
p.MsoIndex1, li.MsoIndex1, div.MsoIndex1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex2, li.MsoIndex2, div.MsoIndex2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex3, li.MsoIndex3, div.MsoIndex3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:20.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex4, li.MsoIndex4, div.MsoIndex4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex5, li.MsoIndex5, div.MsoIndex5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex6, li.MsoIndex6, div.MsoIndex6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:50.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex7, li.MsoIndex7, div.MsoIndex7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex8, li.MsoIndex8, div.MsoIndex8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex9, li.MsoIndex9, div.MsoIndex9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:80.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.5pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-variant:small-caps;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:31.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:52.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:73.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoIndexHeading, li.MsoIndexHeading, div.MsoIndexHeading
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTof, li.MsoTof, div.MsoTof
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-10.0pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToa, li.MsoToa, div.MsoToa
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoMacroText, li.MsoMacroText, div.MsoMacroText
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	layout-grid-mode:char;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Courier New";}
p.MsoToaHeading, li.MsoToaHeading, div.MsoToaHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{mso-style-link:"正文文本 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	background:navy;
	font-size:9.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-link:"纯文本 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:宋体;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:宋体;}
code
	{font-family:宋体;}
pre
	{mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:宋体;}
tt
	{font-family:宋体;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.kw1
	{mso-style-name:kw1;}
span.br0
	{mso-style-name:br0;}
span.kw3
	{mso-style-name:kw3;}
span.nu0
	{mso-style-name:nu0;}
span.me1
	{mso-style-name:me1;}
span.kw2
	{mso-style-name:kw2;}
span.keyword
	{mso-style-name:keyword;}
span.string
	{mso-style-name:string;}
span.number
	{mso-style-name:number;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.dct-tt
	{mso-style-name:dct-tt;}
span.dct-elb
	{mso-style-name:dct-elb;}
span.comment
	{mso-style-name:comment;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-link:"HTML 预设格式";
	font-family:宋体;}
span.sy0
	{mso-style-name:sy0;}
span.st0
	{mso-style-name:st0;}
span.es0
	{mso-style-name:es0;}
span.co1
	{mso-style-name:co1;}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.co2
	{mso-style-name:co2;}
span.kw4
	{mso-style-name:kw4;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.opn
	{mso-style-name:opn;}
span.pln
	{mso-style-name:pln;}
span.pun
	{mso-style-name:pun;}
span.kwd
	{mso-style-name:kwd;}
span.clo
	{mso-style-name:clo;}
span.str
	{mso-style-name:str;}
span.lit
	{mso-style-name:lit;}
span.p
	{mso-style-name:p;}
span.nf
	{mso-style-name:nf;}
span.nv
	{mso-style-name:nv;}
span.o
	{mso-style-name:o;}
span.s
	{mso-style-name:s;}
span.k
	{mso-style-name:k;}
span.nb
	{mso-style-name:nb;}
span.mi
	{mso-style-name:mi;}
span.title
	{mso-style-name:title;}
span.body
	{mso-style-name:body;
	font-family:Consolas;}
span.list
	{mso-style-name:list;}
span.code-quote
	{mso-style-name:code-quote;}
span.code-keyword
	{mso-style-name:code-keyword;}
p.3Consolas, li.3Consolas, div.3Consolas
	{mso-style-name:"样式 标题 3 + \(西文\) Consolas \(中文\) 微软雅黑 四号 下划线";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Consolas;
	font-weight:bold;
	text-decoration:underline;}
p.4Consolas1, li.4Consolas1, div.4Consolas1
	{mso-style-name:"样式 标题 4 + \(西文\) Consolas \(中文\) 微软雅黑 五号 下划线 右侧\:  1 字符";
	margin-top:14.0pt;
	margin-right:10.5pt;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:Consolas;
	font-weight:bold;
	text-decoration:underline;}
span.Char1
	{mso-style-name:"纯文本 Char";
	mso-style-link:纯文本;
	font-family:宋体;}
span.Char2
	{mso-style-name:"正文文本 Char";
	mso-style-link:正文文本;
	font-family:Consolas;}
span.firstname
	{mso-style-name:firstname;}
span.othername
	{mso-style-name:othername;}
span.surname
	{mso-style-name:surname;}
span.name
	{mso-style-name:name;}
span.phonetic
	{mso-style-name:phonetic;}
span.w
	{mso-style-name:w;}
span.no
	{mso-style-name:no;}
span.err
	{mso-style-name:err;}
span.typ
	{mso-style-name:typ;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 28.3pt 72.0pt 36.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body style="text-justify-trim:punctuation; padding:50px" lang="ZH-CN" link="blue" vlink="purple">

<div class="WordSection1" style="layout-grid:15.6pt">

<p class="MsoDocumentMap" style="text-align:center" align="center"><a name="_Toc339573060"><b><span style="font-size:26.0pt;color:yellow" lang="EN-US">Clojure
Handbook</span></b></a></p>

<p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:
宋体;color:#C00000">最后更新：</span><span style="font-family:Consolas;
color:#C00000" lang="EN-US">2012-11-01</span></p>

<p class="MsoNormal"><span style="font-family:宋体">发音：</span><span style="font-family:Consolas" lang="EN-US">['kl&#601;u&#658;&#601;] </span><b><span style="font-family:宋体">可落叶儿</span></b><span class="apple-style-span"><span style="font-size:24.0pt;font-family:
Consolas;color:#006600" lang="EN-US">λ</span></span><span class="apple-style-span"><span style="font-size:24.0pt;font-family:&quot;MS Gothic&quot;">&#9775;</span></span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">“和别人分享你的知识，那才是永恒之道”——</span></b><b><span style="font-family:Consolas" lang="EN-US">somebody</span></b></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-size:7.5pt;font-family:Consolas;text-transform:uppercase" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>

<p class="MsoNormal"><b><span style="font-family:宋体">前言：</span></b></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">这只是份简单的笔记，先写点废话在前面。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">书
籍浩如烟海，技术方面的书也是汗牛充栋，可惜我们的阅读速度和理解力、记忆力太有限，好不容易学懂的知识转眼就变得非常陌生，“博闻强志、过目不忘”者毕
竟罕见。对于大部分人来说，即便昔日信手拈来的东西，时间久了也会毫无头绪。所以知识不在于学过多少，而在于你能记住和使用多少。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">“好
记性不如烂笔头”——近年来我慢慢习惯把费力学习的东西都做一个笔记，一是在学习的过程中加深印象，毕竟技术学习不同于欣赏娱乐大片和浏览娱乐新闻看个过
眼烟云；二是便于学而“时习之”，书上的东西一般是针对不同技术背景的读者，有很多作者费力用墨之处对你来说纯属废话，而他一笔带过的地方恰恰让你困惑不
已。事实上本文的大部分内容不是读某一本或者某几本书的笔记，而是在我尝试</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">语言特性或者用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">解决问题时的代码及说明。</span><span style="font-family:
Consolas" lang="EN-US">90%</span><span style="font-family:宋体">以上的人都不喜欢写东西，因为写作太难了，但写不那么正规的短信、微博、邮件、回帖这种片段文字就容易多了，本文的内容也是由不同时间写的简单小段文字拼接而成的，然后在有心情的时候做些调整。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">是一门神秘的语言，有无数的</span><span style="font-family:Consolas" lang="EN-US">geek</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">hacker</span><span style="font-family:宋体">对他推崇备至，也有众多的程序员对它嗤之以鼻，他和我们小学、中学、大学最先接触的</span><span style="font-family:Consolas" lang="EN-US">Basic</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Pascal</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Fortran</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">C/C++</span><span style="font-family:宋体">是如此的风格迥异，以至于第一眼看上去就令人排斥。其根本原因在于，大部分人有天生的排异反应，对于和自己理念相左的事物，第一反应就是：切！胡扯！但其实人类能提出的任何新玩意儿，没有那个是和原有知识完全脱钩的。终于有一天，我看到一篇文章（</span><i><span style="font-family:Consolas" lang="EN-US">Lisp</span></i><i><span style="font-family:宋体">的本质</span></i><i><span style="font-family:
Consolas" lang="EN-US">(The Nature of Lisp)</span></i><span style="font-family:宋体">），分析</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">就是</span><span style="font-family:Consolas" lang="EN-US">XML++</span><span style="font-family:宋体">，即</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">表达式既表示数据也表示代码，代码即数据、数据即代码，</span><span style="font-family:Consolas" lang="EN-US">&lt;f&gt;..&lt;/f&gt;</span><span style="font-family:宋体">简化成</span><span style="font-family:Consolas" lang="EN-US">(f
..)</span><span style="font-family:宋体">。</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">出生数十年后的新的实现（</span><span style="font-family:Consolas" lang="EN-US">200x</span><span style="font-family:宋体">年出品），或者</span><span style="font-family:Consolas" lang="EN-US">JLisp</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">Lisp
on JVM</span><span style="font-family:宋体">）。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">对于从</span><span style="font-family:Consolas" lang="EN-US">C/Java</span><span style="font-family:宋体">或者其他</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">走过来的人，</span><span style="font-family:Consolas" lang="EN-US">Lisp/Clojure</span><span style="font-family:宋体">有很多“别扭”的用法，很难记清楚用正确。学任何语言，包括</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">，最佳的做法是把它用到日常的应用开发中，不断加深记忆。但即便你准备这么做了，手头没有一份方便的备查材料，刚开始也会步履艰难。我在使用的过程中也有这个体会，所以才不厌其烦地把一些学来并尝试过的东西记在本文档中备查，以便之后能行云流水地“玩转”它。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">个人认为，对于一门编程语言使用中的查阅，大致有几个阶段：查教程（</span><span style="font-family:Consolas" lang="EN-US">tutorial</span><span style="font-family:宋体">）——》查手册（</span><span style="font-family:Consolas" lang="EN-US">handbook</span><span style="font-family:
宋体">）——》查自己写的库（把个人所有的编程语言经验写成类或函数）。这个材料，不是严格的教程，或手册，而是介于这两者间。</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">目前已经出版了几本书，这些书从各自的角度解读</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">，大部分是英文的，不利于以母语速度快速浏览。如果说数学问题用公式表达最清楚，那么编程问题就是用<b><u>图表和代码</u></b>表示最清楚，这二者也是本文用的最多的表达方式，我尽量采用简短的代码来说明问题（简短代码也能说明很多事情，广受赞誉的《</span><span style="font-family:Consolas" lang="EN-US">Effective Java</span><span style="font-family:宋体">》基本没有超过一页的程序代码）。能够熟练使用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的程序员，参考本笔记，应该可以自如地开始着手写</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">程序。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">另：本材料起名</span><span style="font-family:Consolas" lang="EN-US">Clojure
Handbook</span><span style="font-family:宋体">也勾起我对多年前买的一本后来不知去向的好书《</span><span style="font-family:Consolas" lang="EN-US">The Java Handbook</span><span style="font-family:宋体">》的怀念（中文名</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">使用手册，基本算当时市面上最早的</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">书，作者</span><span style="font-family:Consolas" lang="EN-US">Patrick Naughton</span><span style="font-family:宋体">还因私生活问题进过局子）。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt;line-height:150%"><span style="font-family:宋体">希望本材料能给同样对</span><span style="font-family:
Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">感兴趣的人一些帮助。</span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:宋体">——</span><span style="font-family:Consolas" lang="EN-US">JamesQiu</span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US"><a href="mailto:jamesqiu@msn.com" target="_blank" rel="external">jamesqiu@msn.com</a></span></p>

<p class="MsoNormal" style="text-align:right;text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US"><a href="http://qiujj.com/" target="_blank" rel="external">http://qiujj.com</a></span></p>

<p class="MsoNormal" style="margin-right:5.25pt;text-align:right;
text-indent:21.0pt" align="right"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-right:5.25pt;text-align:center;
text-indent:21.0pt" align="center"><b><span style="font-family:宋体">【</span></b><b><span style="font-family:Consolas"> </span></b><b><span style="font-family:宋体">目</span></b><b><span style="font-family:Consolas"> </span></b><b><span style="font-family:宋体">录</span></b><b><span style="font-family:Consolas"> </span></b><b><span style="font-family:宋体">】</span></b></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573060">Clojure Handbook<span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">1</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573061"><span style="font-family:Consolas">1</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Why Clojure</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">7</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573062"><span style="font-family:Consolas">1.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">美观方便、</span></span><span style="font-family:Consolas">DSL</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">8</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573063"><span style="font-family:Consolas">1.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">易用的数据结构</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">9</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573064"><span style="font-family:Consolas">1.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">STM</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">模型</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">10</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573065"><span style="font-family:Consolas">1.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">基于</span></span><span style="font-family:Consolas">JVM</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">10</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573066"><span style="font-family:Consolas">1.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">是</span></span><span style="font-family:
Consolas">Lisp reload</span><span style="color:windowtext;display:none;
text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">11</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573067"><span style="font-family:Consolas">1.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">代码</span></span><span style="font-family:Consolas">==</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">数据</span></span><span style="color:windowtext;display:none;
text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">12</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573068"><span style="font-family:Consolas">1.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">开发社区</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">12</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573069"><span style="font-family:Consolas">1.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">几点期待</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">13</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573070"><span style="font-family:Consolas">2</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">lang</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">13</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573071"><span style="font-family:Consolas">2.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">REPL</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">13</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573072"><span style="font-family:Consolas">2.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">定义变量</span></span><span style="font-family:Consolas">def let binding</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">16</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573073"><span style="font-family:Consolas">2.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">内部变量</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">17</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573074"><span style="font-family:Consolas">2.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">基本类型</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">18</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573075"><span style="font-family:Consolas">2.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">类型判断</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">25</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573076"><span style="font-family:Consolas">2.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">do </span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">执行多条语句</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">26</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573077"><span style="font-family:Consolas">2.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">条件语句</span></span><span style="font-family:Consolas">if when cond condp case</span><span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">26</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573078"><span style="font-family:Consolas">2.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">循环语句</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">29</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573079"><span style="font-family:Consolas">2.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">正则表达式</span></span><span style="font-family:Consolas">regex</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">35</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573080"><span style="font-family:Consolas">2.10</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">命名空间</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">35</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573081"><span style="font-family:Consolas">2.11</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">结构</span></span><span style="font-family:Consolas">defstruct</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">（不用了）</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">38</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573082"><span style="font-family:Consolas">2.12</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">类</span></span><span style="font-family:Consolas">defrecord</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">39</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573083"><span style="font-family:Consolas">2.13</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">接口</span></span><span style="font-family:Consolas">defprotocol</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">41</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573084"><span style="font-family:Consolas">2.14</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">对比</span></span><span style="font-family:Consolas">record</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span><span style="font-family:
Consolas">protocol</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span><span style="font-family:Consolas">proxy</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span><span style="font-family:Consolas">defmulti</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">43</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573085"><span style="font-family:Consolas">2.15</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">-&gt;</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">和</span></span><span style="font-family:
Consolas">-&gt;&gt;</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数</span></span><span style="color:windowtext;display:none;
text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">45</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573086"><span style="font-family:Consolas">2.16</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">编码命名规范</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">46</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573087"><span style="font-family:Consolas">3</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">coll</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">数据结构</span></span><span style="color:
windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">47</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573088"><span style="font-family:Consolas">3.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">List</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">47</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573089"><span style="font-family:Consolas">3.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Vector</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">49</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573090"><span style="font-family:Consolas">3.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Set</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">51</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573091"><span style="font-family:Consolas">3.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Map</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">52</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573092"><span style="font-family:Consolas">3.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">操作</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">60</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573093"><span style="font-family:Consolas">3.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">序列</span></span><span style="font-family:Consolas">seq</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">72</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573094"><span style="font-family:Consolas">4</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">73</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573095"><span style="font-family:Consolas">4.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数帮助</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">73</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573096"><span style="font-family:Consolas">4.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调用函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">74</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573097"><span style="font-family:Consolas">4.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">以“函数名”调用</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">74</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573098"><span style="font-family:Consolas">4.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">运行时动态创建函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">75</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573099"><span style="font-family:Consolas">4.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Meta</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">76</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573100"><span style="font-family:Consolas">4.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">定义函数</span></span><span style="font-family:Consolas">defn</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">78</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573101"><span style="font-family:Consolas">4.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">defmutil </span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">函数名重载</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">80</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573102"><span style="font-family:Consolas">4.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">匿名函数</span></span><span style="font-family:Consolas">fn #()</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">82</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573103"><span style="font-family:Consolas">4.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">偏函数</span></span><span style="font-family:Consolas">partial</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">84</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573104"><span style="font-family:Consolas">4.10</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">组合函数</span></span><span style="font-family:Consolas">comp</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">85</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573105"><span style="font-family:Consolas">4.11</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">递归函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">85</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573106"><span style="font-family:Consolas">5</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">宏</span></span><span style="font-family:Consolas">macro</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">86</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573107"><span style="font-family:Consolas">5.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">概念</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">86</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573108"><span style="font-family:Consolas">5.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">设计方法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">87</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573109"><span style="font-family:Consolas">5.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调试宏</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">87</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573110"><span style="font-family:Consolas">5.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas;background:yellow">`</span><span style="font-family:
Consolas">&nbsp; <span style="background:yellow">~'</span> <span style="background:yellow">'~</span> <span style="background:yellow">~@</span></span><span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">87</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573111"><span style="font-family:Consolas">6</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调用</span></span><span style="font-family:Consolas">Java</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">的类和方法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">88</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573112"><span style="font-family:Consolas">6.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">基本用法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">88</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573113"><span style="font-family:Consolas">6.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">得到所有</span></span><span style="font-family:Consolas">Java</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">类方法</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">89</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573114"><span style="font-family:Consolas">6.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Java</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">数组</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">89</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573115"><span style="font-family:Consolas">6.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">reflect</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调用</span></span><span style="font-family:
Consolas">Java</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">方法</span></span><span style="color:windowtext;display:none;
text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">91</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573116"><span style="font-family:Consolas">6.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Java</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">方法作为函数参数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">91</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573117"><span style="font-family:Consolas">6.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">设置属性值</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">91</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573118"><span style="font-family:Consolas">6.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">JavaBean</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">91</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573119"><span style="font-family:Consolas">6.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">提升性能</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">92</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573120"><span style="font-family:Consolas">6.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">proxy </span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">实现接口</span></span><span style="color:
windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">92</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573121"><span style="font-family:Consolas">6.10</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Exception</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">93</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573122"><span style="font-family:Consolas">6.11</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Java</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调</span></span><span style="font-family:
Consolas">Clojure</span><span style="color:windowtext;display:none;text-decoration:
none">. </span><span style="color:windowtext;display:none;text-decoration:none">94</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573123"><span style="font-family:Consolas">6.12</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">编译</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">94</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573124"><span style="font-family:Consolas">6.13</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">调用</span></span><span style="font-family:Consolas">OS</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">系统功能</span></span><span style="color:windowtext;display:none;
text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">94</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573125"><span style="font-family:Consolas">7</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">正则表达式</span></span><span style="font-family:Consolas">regex</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">95</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573126"><span style="font-family:Consolas">8</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">并发</span></span><span style="font-family:Consolas"> STM</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">96</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573127"><span style="font-family:Consolas">8.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">基本概念</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">96</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573128"><span style="font-family:Consolas">8.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">ref</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">96</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573129"><span style="font-family:Consolas">8.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">atom</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">98</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573130"><span style="font-family:Consolas">8.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">agent</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">99</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573131"><span style="font-family:Consolas">8.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">binding</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span><span style="font-family:
Consolas">set!</span><span style="color:windowtext;display:none;text-decoration:
none">. </span><span style="color:windowtext;display:none;text-decoration:none">99</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573132"><span style="font-family:Consolas">8.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">lazy</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">变量</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">99</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573133"><span style="font-family:Consolas">8.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">状态更新对比</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">100</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573134"><span style="font-family:Consolas">8.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">多线程</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">100</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573135"><span style="font-family:Consolas">8.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">pmap</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">100</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573136"><span style="font-family:Consolas">9</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">GUI</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">101</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573137"><span style="font-family:Consolas">10</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">IO JDBC</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">102</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573138"><span style="font-family:Consolas">10.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">文件</span></span><span style="font-family:Consolas">IO</span><span style="color:windowtext;display:
none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">102</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573139"><span style="font-family:Consolas">10.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">网络</span></span><span style="font-family:Consolas">IO</span><span style="color:windowtext;display:
none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">104</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573140"><span style="font-family:Consolas">10.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">配置</span></span><span style="font-family:Consolas">config</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、数据文件</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">105</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573141"><span style="font-family:Consolas">10.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">JDBC</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">数据库</span></span><span style="font-family:
Consolas">IO</span><span style="color:windowtext;display:none;text-decoration:
none">. </span><span style="color:windowtext;display:none;text-decoration:none">107</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573142"><span style="font-family:Consolas">10.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">ClojureQL</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">108</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573143"><span style="font-family:Consolas">10.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">MongoDB</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">操作</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">109</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573144"><span style="font-family:Consolas">11</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure-contrib</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">113</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573145"><span style="font-family:Consolas">12</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Unit Test</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">114</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573146"><span style="font-family:Consolas">13</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">web</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">开发</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">114</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573147"><span style="font-family:Consolas">13.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Ring</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">114</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573148"><span style="font-family:Consolas">13.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Compojure</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">116</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573149"><span style="font-family:Consolas">13.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Conjure</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">117</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573150"><span style="font-family:Consolas">13.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Weld</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">117</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573151"><span style="font-family:Consolas">13.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Noir</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">117</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573152"><span style="font-family:Consolas">13.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">hiccup</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">117</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573153"><span style="font-family:Consolas">13.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Enlive</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">模板引擎</span></span><span style="color:
windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">120</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573154"><span style="font-family:Consolas">14</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">网络资源</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">120</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573155"><span style="font-family:Consolas">15</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">临时</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">121</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573156"><span style="font-family:Consolas">15.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">InfoQ</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">采访</span></span><span style="font-family:
Consolas">Clojure</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">实用</span></span><span style="color:windowtext;display:none;
text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">121</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573157"><span style="font-family:Consolas">15.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Lisp</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">用户的问题</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">123</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573158"><span style="font-family:Consolas">15.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Rich Hickey</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">访谈</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">124</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573159"><span style="font-family:Consolas">15.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">语言结构决定人类思维方式及行动方法</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">127</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573160"><span style="font-family:Consolas">15.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">The Joy of Clojure</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">笔记</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">127</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573161"><span style="font-family:Consolas">15.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">On Lisp</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">笔记</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">127</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573162"><span style="font-family:Consolas">15.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure on Heroku</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">127</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573163"><span style="font-family:Consolas">15.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure 1.3 changelog</span><span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">128</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573164"><span style="font-family:Consolas">15.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure 1.4 changelog</span><span style="color:windowtext;display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">128</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573165"><span style="font-family:Consolas">16</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">Clojure</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">和</span></span><span style="font-family:
Consolas">clisp</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">、</span></span><span style="font-family:Consolas">scheme</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">对照表</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">129</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573166"><span style="font-family:Consolas">17</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">附录：</span></span><span style="font-family:Consolas">ClojureScript</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">131</span></a></span></span></p>

<p class="MsoToc1"><span class="MsoHyperlink"><span lang="EN-US"><a href="#_Toc339573167"><span style="font-family:Consolas">18</span><span style="font-size:10.5pt;color:windowtext;text-transform:none;font-weight:normal;
text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">附录：</span></span><span style="font-family:Consolas">newLISP</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">132</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573168"><span style="font-family:Consolas">18.1</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">和</span></span><span style="font-family:Consolas">Clojure</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">的不同</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">132</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573169"><span style="font-family:Consolas">18.2</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">配置</span></span><span style="font-family:Consolas">repl</span><span style="color:windowtext;
display:none;text-decoration:none">. </span><span style="color:windowtext;display:none;text-decoration:none">133</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573170"><span style="font-family:Consolas">18.3</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">数据类型</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">133</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573171"><span style="font-family:Consolas">18.4</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">newlisp</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">常用模式</span></span><span style="color:
windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">135</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573172"><span style="font-family:Consolas">18.5</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">REPL</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">在线文档</span></span><span style="color:
windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">136</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573173"><span style="font-family:Consolas">18.6</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">代码即数据</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">137</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573174"><span style="font-family:Consolas">18.7</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas">constant</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">定义</span></span><span style="color:windowtext;
display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">138</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573175"><span style="font-family:Consolas">18.8</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">制作可执行文件</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">138</span></a></span></span></p>

<p class="MsoToc2"><span class="MsoHyperlink"><span style="font-variant:
normal !important;text-transform:uppercase" lang="EN-US"><a href="#_Toc339573176"><span style="font-family:Consolas">18.9</span><span style="font-size:10.5pt;
color:windowtext;text-transform:none;text-decoration:none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;" lang="EN-US"><span lang="EN-US">分类函数</span></span><span style="color:windowtext;display:none;text-decoration:none">... </span><span style="color:windowtext;display:none;text-decoration:none">139</span></a></span></span></p>

<p class="MsoNormal" style="margin-right:5.25pt;text-align:center;
text-indent:21.0pt" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-right:5.25pt;text-align:center;
text-indent:21.0pt" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573061"><span style="font-family:Consolas" lang="EN-US">1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">Why Clojure</span></a></h1>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">“Clojure is computer reload and Lisp reload”</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">“</span><span style="font-family:Consolas" lang="EN-US">Rooted
in 50 years of Lisp, as well as 15 years of Java best practices</span><span style="font-family:宋体">”</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">“不识篆字不好意思说懂中文，不熟</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">不好意思说懂编程”</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">“<b><u>方便有用酷</u></b>是我判断一个东西好坏的标准”</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">方便</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">简化，消除附加复杂性</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">REPL</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">小写</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">空格而非骆驼命名法</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">内置的数据结构及统一处理方式</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">有用</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">模型</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">无缝接入</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:宋体">，直接使用现有资源</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">友好的开发社区</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">酷</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">Lisp reload</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">STM</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">微内核，比</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">简单得多</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:none;border-right:dashed windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的设计者</span><span style="font-family:Consolas" lang="EN-US">Rich
  Hickey</span><span style="font-family:宋体">的语言设计理念。</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><b><span style="font-family:宋体">简单</span></b><span style="font-family:宋体">——设计理念简单。代码即数据；可变状态太复杂，就设计成缺省不可变；</span><span style="font-family:Consolas" lang="EN-US">OOP</span><span style="font-family:
  宋体">太复杂，就完全采用</span><span style="font-family:Consolas" lang="EN-US">FP+</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">Protocol</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">types</span><span style="font-family:宋体">）。</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><b><span style="font-family:宋体">专注</span></b><span style="font-family:宋体">——让用户专注于问题本身而非语法、运算符优先级、编译链接等；专注于提高语言表现力和编程效率。</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><b><span style="font-family:宋体">实用</span></b><span style="font-family:宋体">——源于实战，用于实战。不过分纠结于优雅性、纯正性、规范性。好用的就拿过来用（如</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:
  宋体">、</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:宋体">）</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span lang="EN-US"><img src="/static/images/clojure/image001.jpg" height="300" width="414"></span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal" style="text-align:center" align="center"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573062"></a><a name="_Toc281923983"></a><a name="_Toc281658823"></a><a name="_Toc281556330"></a><a name="_Toc281556226"></a><a name="_Toc281556122"></a><a name="_Toc281555920"></a><a name="_Toc281555763"><span style="font-family:Consolas" lang="EN-US">1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">美观方便、</span></u></a><u><span style="font-family:Consolas" lang="EN-US">DSL</span></u></h2>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">美观方便</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">C/Java</span><span style="font-family:宋体">中用得最多的就是</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">, ; { }</span></p>

<p class="MsoNormal"><span style="font-family:宋体">而</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中用得最多的是</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">( ) </span><span style="font-family:宋体">空格</span></p>

<p class="MsoNormal"><span style="font-family:宋体">无论敲起来还是看起来，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">都更方便更美观，</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">小写字母和连字符也比骆驼命名法不断切换大小写快得多，也好看得多（请对比：</span><span style="font-family:Consolas" lang="EN-US"> strJoin</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">str-join,
writeFileWithName</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">write-file-with-name</span><span style="font-family:
宋体">）。事实上有人宣称</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">是“</span><span class="apple-style-span"><span style="font-family:宋体;color:black">世界上最美丽的编程语言”，除了设计思想，估计外观也是个原因。</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法上</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">相对</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">有其方便之处，如：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Java</span></b><b><span style="font-family:宋体">等</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 + 2 + 3 +
  4 + 5</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(+ 1 2 3 4
  5)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{1:10, 2:20,
  3:30} // javascript</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m = new
  HashMap(); m.add(1,10), m.add(2,20), m.add(3,30) // java</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{1 10 2 20 3
  30}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">int s=0; for(i
  : arr) s+=i; //</span><span style="font-family:宋体">数据元素求和</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply +
  arr)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">if (n&gt;3
  &amp;&amp; n&lt;5)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(if (&lt; 3
  n 5))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello-world".substring(0,5).toUpperCase()</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; "hello-world"
  (subs 0 5) .toUpperCase)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">简单函数也必须包装在</span><span style="font-family:Consolas" lang="EN-US">class</span><span style="font-family:
  宋体">中</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">class foo { </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">void f() {..}</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">public static void main(String[] args) {..}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">函数随手可用：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fn ..) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#(..) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [] ..)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:宋体">易于表达业务</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">XML</span><span style="font-family:宋体">可以表示任意</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">xml++</span><span style="font-family:宋体">，当然更面向</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:宋体">了。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如对比：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">xml</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">s</span></b><b><span style="font-family:宋体">表达式（</span></b><b><span style="font-family:
  Consolas" lang="EN-US">Symbolic-Expressions</span></b><b><span style="font-family:宋体">）</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;todo
  des="</span><span style="font-family:宋体">写</span><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:宋体">笔记</span><span style="font-family:Consolas" lang="EN-US">"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  &lt;item priority="high"&gt;</span><span style="font-family:宋体">定框架</span><span style="font-family:Consolas" lang="EN-US">&lt;/item&gt;</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&lt;item priority="high"&gt;</span><span style="font-family:宋体">写内容</span><span style="font-family:Consolas" lang="EN-US">&lt;/item&gt;</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&lt;item priority="low"&gt;</span><span style="font-family:宋体">调整格式</span><span style="font-family:Consolas" lang="EN-US">&lt;/item&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/todo&gt;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(todo "</span><span style="font-family:宋体">写</span><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:宋体">笔记</span><span style="font-family:Consolas" lang="EN-US">"</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (item
  (priority high) "</span><span style="font-family:宋体">定框架</span><span style="font-family:Consolas" lang="EN-US">")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (item
  (priority high) "</span><span style="font-family:宋体">写内容</span><span style="font-family:Consolas" lang="EN-US">")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (item
  (priority low) "</span><span style="font-family:宋体">调整格式</span><span style="font-family:Consolas" lang="EN-US">"))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：也可以用</span><span style="font-family:Consolas" lang="EN-US">hiccup</span><span style="font-family:宋体">的写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:todo {:des
"</span><span style="font-family:宋体">写</span><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:宋体">笔记</span><span style="font-family:Consolas" lang="EN-US">"}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; [:item
{:priority "high"} "</span><span style="font-family:宋体">定框架</span><span style="font-family:Consolas" lang="EN-US">"]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; [:item
{:priority "high"} "</span><span style="font-family:宋体">写内容</span><span style="font-family:Consolas" lang="EN-US">"]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; [:item
{:priority "low"} "</span><span style="font-family:宋体">调整格式</span><span style="font-family:Consolas" lang="EN-US">"]]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573063"></a><a name="_Toc281923984"></a><a name="_Toc281658824"></a><a name="_Toc281556331"></a><a name="_Toc281556227"></a><a name="_Toc281556123"></a><a name="_Toc281555921"></a><a name="_Toc281555764"><span style="font-family:Consolas" lang="EN-US">1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">易用的数据结构</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">list/vector/map</span><span style="font-family:宋体">及其丰富特性支持让你解决数据结构问题时游刃有余。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'(1 2 3 4 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3 4 5]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:name
"qh" :age 30}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [n]
(and (&gt; n 10) (&lt; n 100)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(filter f '(1
31 4 3 53 4 234)) <span style="color:#5B6E6E">; (31 53)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中的数据结构具备</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">immutable</span><span style="font-family:宋体">，线程安全，易于测试，便于从小程序逐步进化到大型应用。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">为了避免大量的数据结构复制会出现性能和内存瓶颈，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">采用共享元素的方式仅进行部分</span><span style="font-family:Consolas" lang="EN-US">copy</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span lang="EN-US"><img src="/static/images/clojure/image002.gif" height="351" width="500"></span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">可用</span><span style="font-family:Consolas" lang="EN-US">identical?</span><span style="font-family:宋体">简单验证是否同一对象：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(def a [1 3 5 [2 4]])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(def b (cons 7 (next a))) ; b </span><span style="font-family:宋体">复用了</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">的部分对象</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(identical? (last a) (last b)) ; true</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573064"></a><a name="_Toc281923985"></a><a name="_Toc281658825"></a><a name="_Toc281556332"></a><a name="_Toc281556228"></a><a name="_Toc281556124"></a><a name="_Toc281555922"></a><a name="_Toc281555765"><span style="font-family:Consolas" lang="EN-US">1.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">STM</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">模型</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">采用</span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">模型、</span><span style="font-family:Consolas" lang="EN-US">agent</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">、动态变量简化了并发编程。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">模型和</span><span style="font-family:Consolas" lang="EN-US">RDB</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">OLTP</span><span style="font-family:宋体">交易概念类似，易于程序员理解。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573065"></a><a name="_Toc281923986"></a><a name="_Toc281658826"></a><a name="_Toc281556333"></a><a name="_Toc281556229"></a><a name="_Toc281556125"></a><a name="_Toc281555923"></a><a name="_Toc281555766"><span style="font-family:Consolas" lang="EN-US">1.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基于</span></u></a><u><span style="font-family:Consolas" lang="EN-US">JVM</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">——使用</span><span style="font-family:Consolas" lang="EN-US">ASM</span><span style="font-family:宋体">在内存中进行编译后运行，比大部分动态语言要快得多。</span><span style="font-family:Consolas" lang="EN-US">(Clojure</span><span style="font-family:
宋体">将</span><u><span style="font-family:Consolas" lang="EN-US">org.objectweb.asm</span></u><span style="font-family:宋体">包下最必要的源代码摘取到</span><u><span style="font-family:
Consolas" lang="EN-US">clojure.asm</span></u><span style="font-family:宋体">包中，和</span><span style="font-family:Consolas" lang="EN-US">ASM</span><span style="font-family:
宋体">依赖包解耦。</span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">——调用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的对象、方法直接而快速，没有太多额外开销。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">——有更多的内建库和数据结构，编程就更快，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">在完全继承</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">.NET</span><span style="font-family:宋体">的标准库的基础上，还扩展了更丰富有用的函数库。</span><span style="font-family:
宋体">看看</span><span style="font-family:Consolas" lang="EN-US">C++</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">D</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Go</span><span style="font-family:宋体">等语言</span><span style="font-family:宋体">库的发展情况（不是匮乏就是混乱），就知道从头创建如</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">.NET</span><span style="font-family:宋体">这般庞大全面的类库并非易事；</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">类库除了和开发速度有关，和运行速度有关系吗？——很大程度上有，众多专家已经在类库中准备了充分优化的稳定算法，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">对</span><span style="font-family:Consolas" lang="EN-US">Java Collection</span><span style="font-family:宋体">算法进行直接包装或者直接调用，如果没有丰富的类库，你在时间紧迫的项目中免不了摘抄一些不一定靠谱的算法和功能代码，这些代码极有可能在运行时给你带来麻烦。使用类库算法，不用担忧自造轮子的运行效率低下和有隐藏的大</span><span style="font-family:Consolas" lang="EN-US">bug</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Java/Scala</span></b><b><span style="font-family:
宋体">运行模式如下</span></b><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/clojure/image003.jpg" height="313" width="566"></span></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b><b><span style="font-family:
宋体">运行模式如下</span></b><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/clojure/image004.jpg" height="376" width="566"></span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573066"></a><a name="_Toc281923987"></a><a name="_Toc281658827"></a><a name="_Toc281556334"></a><a name="_Toc281556230"></a><a name="_Toc281556126"></a><a name="_Toc281555924"></a><a name="_Toc281555767"><span style="font-family:Consolas" lang="EN-US">1.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">是</span></u><u><span style="font-family:Consolas" lang="EN-US">Lisp reload</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">语言是大事——语言影响使用者的思维方式，语言和语言不一样。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果编程语言不够强大，就需要开发人员足够强大（更多东西必须自己动手，既耗体力又耗脑力），或者社区足够强大（拿来主义），才能做出强大的应用来；如果编程语言很强大，那你不需要很强大（脑力和体力）就可以做出强大的应用。</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">是强大的语言，即便不是最强也得排前三；而借助</span><span style="font-family:Consolas" lang="EN-US">JVM</span><span style="font-family:宋体">，足够强大的社区已经存在了，所以</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">是强中强！</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">微内核，几乎没有多余的关键字和语法，只有</span><span style="font-family:Consolas" lang="EN-US">(f (g ..) (h..) ..) '() [] {} #{} (def ) (defn )</span><span style="font-family:宋体">等少数，其他都是函数库，学习起来比</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">都简单。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">基于数学逻辑</span><span style="font-family:Consolas" lang="EN-US">s-</span><span style="font-family:宋体">符号表达式、支持</span><span style="font-family:Consolas" lang="EN-US">GC</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">年代久远（</span><span style="font-family:Consolas" lang="EN-US">1958
by John McCarthy</span><span style="font-family:宋体">），健康长寿。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">有</span><span style="font-family:Consolas" lang="EN-US">metaprogramming</span><span style="font-family:宋体">能力</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">^</span><span style="font-family:宋体">开头的类名或者任意</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">，如：</span><span style="font-family:Consolas" lang="EN-US">^String ^{:doc
".." :author "qh"}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">增加了对非</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">程序员的友好性（语法比传统</span><span style="font-family:
Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">丰富一些）。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">比</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">更纯函数式，</span><span style="font-family:宋体">意味着拥有不可变性和不易错性。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Lisp/Clojure</span><span style="font-family:宋体">是动态类型，动态编译，动态转载的</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Read-Eval-Print
Loop</span><span style="font-family:宋体">交互解释器，无需编译，迭代过程短，编程更愉快</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">代码即数据——我的理解：（</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">）</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">代码足以表述数据，不需单独的</span><span style="font-family:Consolas" lang="EN-US">.properties</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">.xml</span><span style="font-family:宋体">等辅之（</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">）</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">代码也是以</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">的数据结构显式表示的，在编译时、运行时都可以生成</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">修改新代码执行。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">所有数据结构通用的</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">序列处理方式</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">语言内核非常精炼但扩展性极强</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281923988"></a><a name="_Toc281658828"></a><a name="_Toc281556335"></a><a name="_Toc281556231"></a><a name="_Toc281556127"></a><a name="_Toc281555925"></a><a name="_Toc281555768"></a><a name="_Toc339573067"><span style="font-family:Consolas" lang="EN-US">1.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">代码</span></u></a><u><span style="font-family:Consolas" lang="EN-US">==</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数据</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">这是</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">语言最与众不同之处：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="position:relative;z-index:251657728"><span style="position:absolute;
left:-2px;top:-2px;width:711px;height:141px"><img src="/static/images/clojure/image005.gif" height="141" width="711"></span></span><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/clojure/image006.gif" height="138" width="708"></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="position:relative;z-index:251656704"><span style="position:absolute;
left:-2px;top:-2px;width:711px;height:162px"><img src="/static/images/clojure/image007.gif" height="162" width="711"></span></span><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/clojure/image008.gif" height="159" width="708"></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573068"><span style="font-family:Consolas" lang="EN-US">1.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">开发社区</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">选编程语言就像是选聊天茶室，你除了在乎茶室的茶品（语言的好坏），还会在乎是和哪些人聊，聊哪些话题（语言的社区、工具、库等）。</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">开发</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">用户社区气氛良好，基本都是资深开发者、顶级</span><span style="font-family:Consolas" lang="EN-US">Hacker</span><span style="font-family:宋体">以及有追求的程序员，有格调、有层次。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573069"><span style="font-family:Consolas" lang="EN-US">1.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">几点期待</span></u></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">希望</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">加入类似</span><span style="font-family:Consolas" lang="EN-US">python</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">"""
.... """</span><span style="font-family:宋体">多行注释，其中可以包含除</span><span style="font-family:Consolas" lang="EN-US">;;;</span><span style="font-family:
宋体">之外的任意字符，如</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">;;;</span><span style="font-family:Consolas" lang="EN-US"> 11111111111</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">222222222222222</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">333333333333333 <span style="background:yellow">;;;</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">目前可以用如下写法，但必须注意包含</span><span style="font-family:Consolas" lang="EN-US">"<span style="background:yellow">(</span>"
"<span style="background:yellow">)</span>" "<span style="background:yellow">;</span>"</span><span style="font-family:宋体">等特殊符号时要转义：</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas;background:lime" lang="EN-US">(</span><span style="font-family:Consolas;background:yellow" lang="EN-US">comment</span><span style="font-family:Consolas" lang="EN-US"> 111111111</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">22222222222222</span></p>

<p class="MsoNormal" style="margin-left:31.5pt"><span style="font-family:Consolas" lang="EN-US">33333333333333 <span style="background:lime">)</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">更好的错误提示，别来个：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:
Consolas" lang="ES">NullPointerException at line 0</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">更快的启动速度，至少达到</span><span style="font-family:Consolas" lang="EN-US">bsh</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:
宋体">（编译后）这种级别（注：目前推荐</span><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">来写</span><span style="font-family:Consolas" lang="EN-US">shell</span><span style="font-family:宋体">和进行系统调用；还有</span><span style="font-family:
Consolas" lang="EN-US">ClojureScript+Node.js</span><span style="font-family:宋体">，但有个和</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:
宋体">一样的问题，就是编译太慢）。</span></p>

<h1><a name="_Toc339573070"></a><a name="_Toc281923989"></a><a name="_Toc281658829"></a><a name="_Toc281556336"></a><a name="_Toc281556232"></a><a name="_Toc281556128"></a><a name="_Toc281555926"></a><a name="_Toc281555769"><span style="font-family:Consolas" lang="EN-US">2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">lang</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573071"></a><a name="_Toc281923990"></a><a name="_Toc281658830"></a><a name="_Toc281556337"></a><a name="_Toc281556233"></a><a name="_Toc281556129"></a><a name="_Toc281555927"></a><a name="_Toc281555770"><span style="font-family:Consolas" lang="EN-US">2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">REPL</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923991"></a><a name="_Toc281658831"></a><a name="_Toc281556338"></a><a name="_Toc281556234"></a><a name="_Toc281556130"></a><a name="_Toc281555928"></a><a name="_Toc281555771"><span style="text-decoration:none" lang="EN-US">2.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">启动：</span><span style="font-family:Consolas" lang="EN-US">java –cp clojure.jar;clojure-contrib.jar
clojure.main</span></p>

<p class="MsoNormal"><span style="font-family:宋体">退出：</span><span style="font-family:Consolas" lang="EN-US">Ctrl-Z</span></p>

<p class="MsoNormal"><span style="font-family:宋体">手动转载文件中的程序：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">load-file</span>
"temp.clj")</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">自动装载</span><span style="font-family:Consolas" lang="EN-US">clj</span><span style="font-family:宋体">文件：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">classpath</span><span style="font-family:
宋体">如</span><u><span style="font-family:Consolas" lang="EN-US">e:\clojure\jamesqiu</span></u><span style="font-family:宋体">中建名为</span><span style="font-family:Consolas;
background:yellow" lang="EN-US">user.clj</span><span style="font-family:宋体">的文件即可。</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923992"></a><a name="_Toc281658832"></a><a name="_Toc281556339"></a><a name="_Toc281556235"></a><a name="_Toc281556131"></a><a name="_Toc281555929"></a><a name="_Toc281555772"><span style="text-decoration:none" lang="EN-US">2.1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">自动完成</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">通过</span><span style="font-family:Consolas" lang="EN-US">jLine</span><span style="font-family:宋体">（</span><a href="http://jline.sourceforge.net/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://jline.sourceforge.net/</span></a><span style="font-family:宋体">）的</span><span style="font-family:Consolas" lang="EN-US">Completor</span><span style="font-family:宋体">类（放在</span><span style="font-family:Consolas" lang="EN-US">classpath</span><span style="font-family:宋体">如</span><span style="font-family:Consolas" lang="EN-US">jamesqiu</span><span style="font-family:宋体">目录下）：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">@java -cp <u>clojure.jar;clojure-contrib.jar;.\jamesqiu\jline.jar;.\jamesqiu</u>
</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><b><span style="font-family:Consolas;background:yellow" lang="EN-US">-D<i><u>jline.ConsoleRunner.completors</u></i>=<u>ClojureCompletor</u>
<u>jline.ConsoleRunner</u></span></b><span style="font-family:Consolas" lang="EN-US">
clojure.main %*</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">ClojureCompletor.java</span><span style="font-family:宋体">内容如下（</span><span style="font-family:Consolas" lang="EN-US">sorry</span><span style="font-family:宋体">，忘了来自哪里，但自行编译即可）：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">-------------------------------------</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import java.util.List;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import jline.Completor;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import
clojure.lang.MapEntry;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import
clojure.lang.Namespace;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import clojure.lang.RT;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">import
clojure.lang.Symbol;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">public class
ClojureCompletor implements Completor{</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
@Override</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
public int complete(String buffer, int cursor, List candidates) {</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(buffer == null)</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
buffer
 = "";</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Namespace ns = (Namespace) RT.CURRENT_NS.get();</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String split[] = split(buffer);</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String head = split[0];</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String tail = split[1];</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
boolean exist = false;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for(Object it: ns.getMappings()){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MapEntry
 entry = (MapEntry) it;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(entry.getKey()
 instanceof Symbol){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Symbol
 symbol = (Symbol) entry.getKey();</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(symbol.getName().startsWith(tail)){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
candidates.add(symbol.getName());</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exist
=
 true;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return exist ? head.length() : -1;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String[] split(String buffer){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
int end = buffer.length() - 1;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for(; end &gt;= 0; end--){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
char
 ch = buffer.charAt(end);</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if("
 \t,(".indexOf(ch)&gt;0){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
break;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String result[] = new String[2];</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(end &gt;=0){</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[0]
 = buffer.substring(0, end+1);</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[1]
 = buffer.substring(end+1);</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else {</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[0]
 = "";</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[1]
 = buffer;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return result;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class="MsoNormal" style="text-align:left;line-height:8.0pt" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">}</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">-------------------------------------</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">另：如果使用的</span><span style="font-family:Consolas" lang="EN-US">*nix</span><span style="font-family:宋体">，也可以用</span><span style="font-family:Consolas" lang="EN-US">rlwrap</span><span style="font-family:宋体">，可参见下文</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><a href="http://en.wikibooks.org/wiki/Clojure_Programming/Getting_Started#Enhancing_Clojure_REPL_with_rlwrap" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://en.wikibooks.org/wiki/Clojure_Programming/Getting_Started#Enhancing_Clojure_REPL_with_rlwrap</span></a></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">大致用法：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">#!/bin/sh</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">rlwrap --remember -b "<span style="background:
yellow">(){}[],^%$#@\"\";:''|\\</span>" -f <span style="background:lime">.clj_completions</span> java -cp <span style="background:aqua">/root/clojure-1.2.0/clojure.jar:/root/clojure-contrib-1.2.0.jar:/root/wr3.jar</span>
clojure.main</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">注：其中</span><span style="font-family:Consolas;background:lime" lang="EN-US">.clj_completions</span><span style="font-family:宋体">文件可以用如下函数获取</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(sort (keys (mapcat ns-publics
(all-ns)))))</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">补注：怕麻烦的还可以用</span><span style="font-family:Consolas" lang="EN-US">lein</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">lein
repl</span><span style="font-family:宋体">基本帮你都弄妥了。</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.1.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">print</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">print</span>
"hello world")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">println </span>"hello"
"world" 1) <span style="color:#5B6E6E">; "hello world 1"</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">printf </span>"hello
%s (%.3f)" "world" 3.0) <span style="color:#5B6E6E">; hello
world (3.000)</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">format </span>"hello
%s (%.3f)" "world" 3.0) <span style="color:#5B6E6E">; "hello
world (3.000)"</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">str</span>
"hello " "world " 3) <span style="color:#5B6E6E">; "hello
world 3"</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">println-str</span>
"hello" "world" 3)<span style="color:#5B6E6E"> ; "hello
world 3\n"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-out-str</span>
(doseq [i (range 5)] (println 10))) ; <span style="color:#5B6E6E">"10\n10\n10\n10\n10\n"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">pr,prn,pr-str,prn-str</span><span style="font-family:宋体">与</span><span style="font-family:Consolas" lang="EN-US">print,println,print-str,println-str</span><span style="font-family:宋体">略有不同</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923993"></a><a name="_Toc281658833"></a><a name="_Toc281556340"></a><a name="_Toc281556236"></a><a name="_Toc281556132"></a><a name="_Toc281555930"></a><a name="_Toc281555773"><span style="text-decoration:none" lang="EN-US">2.1.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">注释</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">单行：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US"> ; ;; ;;; Lisper</span><span style="font-family:宋体;color:#5B6E6E">习惯于用越多</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;</span><span style="font-family:
宋体;color:#5B6E6E">表示越重要或者越概要的注释</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:宋体;color:#5B6E6E">单行注释</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:宋体;color:#5B6E6E">函数注释</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;;;&nbsp;&nbsp;&nbsp;
macro</span><span style="font-family:宋体;color:#5B6E6E">或者</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">defmulti</span><span style="font-family:宋体;color:#5B6E6E">的注释</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;;;;&nbsp;&nbsp;
ns</span><span style="font-family:宋体;color:#5B6E6E">注释</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多行：</span></p>

<p class="MsoNormal"><b><span style="font-family:Consolas;color:#5B6E6E;
background:yellow" lang="EN-US">(</span></b><span style="font-family:Consolas;
color:#5B6E6E;background:yellow" lang="EN-US">comment</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US"> "</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">...1...</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">...2...</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">"<b><span style="background:yellow">)</span></b></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.1.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">设置</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(set! <span style="background:yellow">*print-length*</span> 103)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(iterate inc
1)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出就不会太多而停不下来了：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(1 2 3 4 5 6 7
8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60
61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86
87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 ...)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">要改回无限制：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(set! <span style="background:yellow">*print-length*</span> false)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另：</span><span style="font-family:Consolas"> <span lang="EN-US">*command-line-args* &nbsp;</span></span><span style="font-family:宋体">获得命令行参数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.1.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">自定义</span><span lang="EN-US">prompt</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defn my-prompt [] (printf "my\n%s&gt;"
(ns-name *ns*)))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(clojure.main/repl :prompt my-prompt)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另，查看相关：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(doc <span style="background:yellow">clojure.main/repl</span>)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; (source clojure.main/repl-prompt)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">repl-prompt</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; "Default :prompt hook for repl"</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;[]</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (printf "%s=&gt; " (ns-name
*ns*)))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573072"></a><a name="_Toc281923994"></a><a name="_Toc281658834"></a><a name="_Toc281556341"></a><a name="_Toc281556237"></a><a name="_Toc281556133"></a><a name="_Toc281555931"></a><a name="_Toc281555774"><span style="font-family:Consolas" lang="EN-US">2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义变量</span></u></a><u><span style="font-family:Consolas" lang="EN-US">def let binding</span></u></h2>

<pre style="line-height:16.8pt"><span style="font-size:10.5pt;color:black">变量名可以下面字符开始（</span><span style="font-size:7.5pt;font-family:Consolas" lang="EN-US"><a href="https://github.com/laurentpetit/ccw/blob/master/clojure-antlr-grammar/src/Clojure.g" target="_blank" rel="external">https://github.com/laurentpetit/ccw/blob/master/clojure-antlr-grammar/src/Clojure.g</a></span><span style="font-size:10.5pt;color:black">）</span><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">:&nbsp;&nbsp; </span></pre><pre style="line-height:16.8pt"><span style="font-size:10.5pt;font-family:
Consolas;color:black" lang="EN-US">'a'..'z' | 'A'..'Z' | '*' | '+' | '!' | '-' | '_' | '?' | '&gt;' | '&lt;' | '=' | '$'</span></pre>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">def</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">定义值或名称，大致相当于</span><span style="font-family:
Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">val/def</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Go/JS</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">var</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">def</span> v1 10)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v2 (int 10)) ; </span><span style="font-family:
宋体">定义成基本类型，在循环计算中可以提高效率</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v3 (fn [n] (* n n))) ; v3</span><span style="font-family:宋体">是函数别名</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">也可用来定义函数别名：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
len count)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">let</span></p>

<p class="MsoNormal"><span style="font-family:宋体">局部临时变量定义：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">let</span> [x 10] (println x))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义多个变量</span><span style="font-family:Consolas" lang="EN-US"> (def</span><span style="font-family:宋体">好像不能定义多个</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:宋体">并进行</span><span style="font-family:Consolas" lang="EN-US">destruction</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let <span style="background:yellow">[</span>[x y]
[3 4]<span style="background:yellow">]</span> (println (* x y))) ; 12</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [x 3 y 4] (println (* x y)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [[x y] [3 4 5]] [x y]) ; [3 4] </span><span style="font-family:宋体">多余的</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">被忽略</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [[_ _ z] [3 4 5]] z) ; 5</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [[a b <span style="background:yellow">&amp; c</span>]
[1 2 <span style="background:yellow">3 4 5</span>]] [a b c]) ; [1 2 <span style="background:yellow">(3 4 5)</span>]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [a 10 <span style="background:yellow">[</span><b><span style="background:lime">x</span></b><span style="background:yellow"> </span><b><span style="background:lime">y</span></b><span style="background:yellow">] (split
"2012-1" "-")</span> b 20] (str <b><span style="background:
lime">x</span></b> "." <b><span style="background:lime">y</span></b>))
; "2012.1"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [{x 0 y 6} '[<span style="background:yellow">a</span>
b c d e f <span style="background:yellow">g</span>]] [x y]) ; [a g] 0,6</span><span style="font-family:宋体">表示下标</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多个变量之间可以依赖（后面的依赖前面的），这点</span><b><span style="font-family:Consolas" lang="EN-US">*</span></b><b><span style="font-family:
宋体">非常</span></b><b><span style="font-family:Consolas" lang="EN-US">*</span></b><b><span style="font-family:宋体">非常</span></b><b><span style="font-family:
Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">有用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (let
[x 10 y (* x x) z (* 2 y)] (println z)) ; 200</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:宋体">的执行体内可以调用多个函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (let
[x 10] <u>(println x)</u> <u>(println (* x x))</u>)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.2.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">binding</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:宋体">可以临时改变</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">declare</span><span style="font-family:宋体">定义的变量：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v1 10)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v2 20)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(declare v3)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">binding</span>
[v1 1 v2 2 v3 3] (+ v1 v2 v3)) ; 6</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ v1 v2) ; 30</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [] (+ v1 v2))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">binding</span>
[v1 1 v2 2] (f)) ; 3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f) ; 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:宋体">内部还可以使用</span><span style="font-family:Consolas" lang="EN-US">set!</span><span style="font-family:宋体">来设置变量：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v 10)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">declare</span> x)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">binding</span> [x
20] (inc x)) ; 1 x</span><span style="font-family:宋体">必须先用</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:
宋体">或者</span><span style="font-family:Consolas" lang="EN-US">declare</span><span style="font-family:宋体">定义</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">declare</span><span style="font-family:宋体">定义变量但不绑定初始值：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">declare</span>
v1)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [] (println v1))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [v1 10] (f)) ; </span><span style="font-family:
宋体">报错</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(binding [v1 100] (f)) ; 100</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.2.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">let binding</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">区别</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:宋体">的变量，必须之前</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">或者的</span><span style="font-family:Consolas" lang="EN-US">declare</span><span style="font-family:宋体">了；而</span><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:宋体">不必。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:宋体">更深度。例如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v 0)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [] (println v))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [v 10]
(f))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 0 </span><span style="font-family:宋体">没有影响</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数，只会影响</span><span style="font-family:Consolas" lang="EN-US">(let..)</span><span style="font-family:宋体">内显式出现的</span><span style="font-family:Consolas" lang="EN-US">v</span><span style="font-family:宋体">值</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(binding [v 100] (f))&nbsp;&nbsp;&nbsp;&nbsp; ;
100 </span><span style="font-family:宋体">影响</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数，是</span><span style="font-family:Consolas" lang="EN-US">ThreadLocal</span><span style="font-family:宋体">级别的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573073"><span style="font-family:Consolas" lang="EN-US">2.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">内部变量</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">函数或者过程内的变量可以使用</span><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:
宋体">或者</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">来定义：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">定义：</span><span style="font-family:Consolas" lang="EN-US">(x+y)*(x+y)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:宋体">（<span style="color:#0070C0">推荐</span>）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f1 [x y]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">let</span>
[xy (+ x y)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(* xy xy)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用内部</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">（<span style="color:red">慎用</span></span><span style="font-family:Consolas;
color:red" lang="EN-US">,</span><span style="font-family:宋体;color:red">不推荐</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f2 [x y]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">def</span>
xy (+ x y))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (* xy xy))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573074"></a><a name="_Toc281923995"></a><a name="_Toc281658835"></a><a name="_Toc281556342"></a><a name="_Toc281556238"></a><a name="_Toc281556134"></a><a name="_Toc281555932"></a><a name="_Toc281555775"><span style="font-family:Consolas" lang="EN-US">2.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本类型</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923996"></a><a name="_Toc281658836"></a><a name="_Toc281556343"></a><a name="_Toc281556239"></a><a name="_Toc281556135"></a><a name="_Toc281555933"></a><a name="_Toc281555776"><span style="text-decoration:none" lang="EN-US">2.4.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">一览表</span></a></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">类型</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">例子</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">boolean</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">true false</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class true)
  -&gt; java.lang.Boolean</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">char</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">\a</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class \a)
  -&gt; java.lang.Character</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">string</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello"</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class
  "hi") -&gt; java.lang.String</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">keyword</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:tag :doc</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class :tag)
  -&gt; clojure.lang.Keyword</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">symbol</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">指针或内部标识</span><span style="font-family:
  Consolas" lang="EN-US">)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'a</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">+</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java.lang.String</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class 'a) ;
  clojure.lang.Symbol</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class +) ; clojure.core$_PLUS_</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class map)
  ; clojure.core$map</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class
  java.lang.String) -&gt; java.lang.Class</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">list</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'(1 2 3) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(println
  "hello")</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">一组数据，或者函数调用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class '(2
  3)) -&gt; clojure.lang.PersistentList</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3]</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class [1 2
  3]) -&gt; clojure.lang.PersistentVector</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#{:red
  :green :blue}</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class #{:r
  :g :b}) -&gt; clojure.lang.PersistentHashSet</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:name
  "qh" :age 30}</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class {:k1
  "v1"}) -&gt; clojure.lang.PersistentArrayMap</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">空</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class nil)
  -&gt; nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">number</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 4.2</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class 1)
  -&gt; java.lang.Integer</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class 1.2)
  -&gt; java.lang.Double</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class 1.2M)
  -&gt; java.math.BigDecimal</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：取类型用</span><span style="font-family:Consolas"> </span><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">class</span> foo) </span><span style="font-family:
宋体">或者</span><span style="font-family:Consolas" lang="EN-US"> (<span style="background:yellow">type</span> foo)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：包含空格的</span><span style="font-family:Consolas" lang="EN-US">keyword</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (keyword
"a b") # <span style="background:yellow">:a b</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923997"></a><a name="_Toc281658837"></a><a name="_Toc281556344"></a><a name="_Toc281556240"></a><a name="_Toc281556136"></a><a name="_Toc281555934"></a><a name="_Toc281555777"><span style="text-decoration:none" lang="EN-US">2.4.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">区分</span><span lang="EN-US">#</span></a></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">样式</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">#{</span><span style="font-family:Consolas" lang="EN-US">1 3 5<span style="background:yellow">}</span></span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">#(</span><span style="font-family:Consolas" lang="EN-US">.toUpperCase %<span style="background:yellow">)</span></span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">匿名函数</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">#"</span><span style="font-family:Consolas" lang="EN-US">a?b<span style="background:yellow">"</span></span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">regex</span><span style="font-family:宋体">正则表达式</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923998"></a><a name="_Toc281658838"></a><a name="_Toc281556345"></a><a name="_Toc281556241"></a><a name="_Toc281556137"></a><a name="_Toc281555935"></a><a name="_Toc281555778"><span style="text-decoration:none" lang="EN-US">2.4.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">Number</span></a></p>

<p class="4Consolas1"><a name="_Toc281556242"></a><a name="_Toc281556138"></a><a name="_Toc281555936"></a><a name="_Toc281555779"><span style="text-decoration:none" lang="EN-US">2.4.3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">Int</span></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(int 10)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(int 10.9) ; 10</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(int \a) ; 97</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(Integer/parseInt "12") ; 12</span></p>

<p class="MsoNormal"><span style="font-family:宋体">数字转换为字符串：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str 10) ; "10"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">数字运算符：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;
0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 3
4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 7</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 3 4 5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 12</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; </span><span style="font-family:宋体;color:#C00000">错误</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; -3</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(- 3
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(- 3 2
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; -1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(*)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; 1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(/)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; </span><span style="font-family:宋体;color:#C00000">错误</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(/
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 1/3</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(/ 3
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3/2</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(/ 3 2
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3/4</span></p>

<p class="MsoNormal"><span style="font-family:宋体">判断奇偶：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(even? 10) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(odd? 3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:宋体">判断正负：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(neg? -1.2) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(pos? 3) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(zero? 0.0) ; true</span></p>

<p class="MsoNormal"><span style="font-family:宋体">增减</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(inc 3) ; 4</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(dec 4) ; 3 </span></p>

<p class="MsoNormal"><span style="font-family:宋体">愿意用</span><span style="font-family:Consolas" lang="EN-US">++</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">--</span><span style="font-family:宋体">的，可以</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def ++ inc)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def -- inc)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">随机数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(rand-int 100) ; </span><span style="font-family:
宋体">得到一个</span><span style="font-family:Consolas" lang="EN-US">[0 100) </span><span style="font-family:宋体">的随机数</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [i (range 20)] (<span style="background:yellow">rand-int</span>
10)) ; (4 0 5 9 9 7 5 9 3 1 0 8 7 1 9 8 9 4 7 1)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(take 10 (repeatedly #(<span style="background:
yellow">rand-int</span> 100))) ; (50 12 86 73 42 90 84 96 71 33)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">取一个集合中的随机位置元素：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rand-nth</span>
[11 22 33 44 55]) ; </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(rand-nth (range 100)) ; </span><span style="font-family:宋体">每次运行结果会变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">float</span><span style="font-family:宋体">随机数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rand</span>) ; [0
1.0) </span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">float</span><span style="font-family:宋体">，如：</span><span style="font-family:Consolas" lang="EN-US">0.43488316932510274</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(rand 10) ; [0 10.0)</span><span style="font-family:
宋体">，如：</span><span style="font-family:Consolas" lang="EN-US">6.26826853733003</span></p>

<p class="4Consolas1"><a name="_Toc281556243"></a><a name="_Toc281556139"></a><a name="_Toc281555937"></a><a name="_Toc281555780"><span style="text-decoration:none" lang="EN-US">2.4.3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">bigint</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span><span lang="EN-US">BigInt</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span><span lang="EN-US">BigInteger</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure 1.3</span><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">bigint</span><span style="font-family:宋体">的处理发生了变化：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">1.2</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">bigint</span><span style="font-family:宋体">就直接用</span><span style="font-family:Consolas" lang="EN-US">java.math.BigInteger</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">1.3</span><span style="font-family:宋体">为了统一并提高数值较小时的运算速度，自己造了</span><span style="font-family:Consolas" lang="EN-US">clojure.lang.BigInt</span><span style="font-family:
宋体">，但没有实现所有</span><span style="font-family:Consolas" lang="EN-US">BigInteger</span><span style="font-family:宋体">的方法，用</span><span style="font-family:Consolas" lang="EN-US">3<span style="background:yellow">N</span></span><span style="font-family:宋体">这种表达方式。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def v
(BigInteger/valueOf 10000000000000000000000000))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(type v) ; java.math.BigInteger</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(type (<span style="background:yellow">bigint</span> v)) ; BigInteger </span><span style="font-family:宋体">转为</span><span style="font-family:Consolas" lang="EN-US">clojure.lang.BigInt</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(type (<span style="background:yellow">BigInteger/valueOf</span> (bigint v))) ; BigInt</span><span style="font-family:宋体">转为</span><span style="font-family:Consolas" lang="EN-US">BigInteger</span></p>

<table class="MsoNormalTable" style="width:93.12%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="93%">
 <tbody><tr>
  <td style="width:16.52%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:83.48%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.52%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure 1.2</span></p>
  </td>
  <td style="width:83.48%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- (type
  (bigint 3)) ; java.math.BigInteger </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- </span><span style="font-family:宋体">有</span><span style="font-family:Consolas" lang="EN-US">.pow
  .isProbablePrime</span><span style="font-family:宋体">等方法可用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- </span><span style="font-family:宋体">乘法函数</span><span style="font-family:Consolas" lang="EN-US">
  * </span><span style="font-family:宋体">会自动提升到</span><span style="font-family:Consolas" lang="EN-US">BigInteger</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.52%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure 1.3+</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:83.48%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- (type
  (bigint 3)) ; clojure.lang.BigInt</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- (type 3<span style="background:yellow">N</span>) ; Clojure 1.2</span><span style="font-family:宋体">不能这么写</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- </span><span style="font-family:宋体">可用方法少，但当数字较小时运算更快</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">要用</span><span style="font-family:Consolas" lang="EN-US">BigInteger</span><span style="font-family:宋体">的方法的话，可先转换：</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(BigInteger/valueOf 3) ; 3</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(BigInteger/valueOf 3N) ; 3</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(bigint 3) ; 3N</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">- </span><span style="font-family:宋体">乘法函数</span><span style="font-family:Consolas" lang="EN-US">
  * </span><span style="font-family:宋体">不会自动提升到</span><span style="font-family:Consolas" lang="EN-US">BigInteger</span><span style="font-family:宋体">，需要函数</span><span style="font-family:Consolas"> <span style="background:yellow" lang="EN-US">*'</span><span lang="EN-US"> </span></span><span style="font-family:宋体">才行，例如</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(apply <span style="background:yellow">*'</span>
  (range 1 101))&nbsp; </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas"> </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(apply * (range 1<span style="background:yellow">N</span>
  101))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">BigDecimal</span><span style="font-family:宋体">用如</span><span style="font-family:Consolas" lang="EN-US">1<span style="background:yellow">M</span></span><span style="font-family:宋体">表示</span></p>

<p class="4Consolas1"><span style="text-decoration:none" lang="EN-US">2.4.3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">任意精度运算</span><span lang="EN-US">+' –' *' </span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">Clojure1.3+</span><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">+ - *</span><span style="font-family:
宋体">不会自动提升精度，越界会报溢出，需要</span><span style="font-family:Consolas" lang="EN-US">+' –'
*'</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:40.8pt;border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" width="54">
  <p class="MsoNormal"><span style="font-family:宋体">错误</span></p>
  </td>
  <td style="width:480.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce *
  (range 1 1001))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(+
  Long/MAX_VALUE 1)</span><span lang="EN-US"> </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(- -2
  Long/MAX_VALUE )</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">输出：</span><span style="font-family:Consolas;color:red" lang="EN-US">ArithmeticException integer
  overflow&nbsp; clojure.lang.Numbers.throwIntOverflow</span><span style="font-family:Consolas" lang="EN-US"> </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:40.8pt;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 5.4pt 0cm 5.4pt" width="54">
  <p class="MsoNormal"><span style="font-family:宋体">正确</span></p>
  </td>
  <td style="width:480.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce <span style="background:yellow">*'</span> (range 1 1001)) ; 40...00N</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">+'</span> Long/MAX_VALUE 1) ; 9223372036854775808N</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-'</span> -2 Long/MAX_VALUE ) ; -9223372036854775809N</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="4Consolas1"><span style="text-decoration:none" lang="EN-US">2.4.3.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-US">= ==</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">==</span><span style="font-family:宋体">只能用于</span><span style="font-family:Consolas" lang="EN-US">Number</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">=</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">equals()</span><span style="font-family:宋体">，可用于对象、数字、数据结构集合等</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (==
(+ 1 2) 3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=&nbsp;
(+ 1 2) 3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (==
(+ 0.5 0.5) 1) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=&nbsp;
(+ 0.5 0.5) 1) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (==
true (not false)) ; </span><span style="font-family:宋体;color:#C00000">报错</span><span style="font-family:Consolas;color:#C00000"> </span><span style="font-family:
宋体;color:#C00000">不是数字类型</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=&nbsp;
true (not false)) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=
[1 2 3] (conj [1 2] 3)) ; true</span></p>

<p class="4Consolas1"><span style="text-decoration:none" lang="EN-US">2.4.3.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">其他进制的数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">表示法：进制</span><span style="font-family:Consolas" lang="EN-US">r</span><span style="font-family:宋体">数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">比如</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">进制</span><span style="font-family:Consolas" lang="EN-US">101</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">2r</span>1001 ; 2</span><span style="font-family:
宋体">进制数，</span><span style="font-family:Consolas" lang="EN-US">=9</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">16r</span>FF&nbsp; ; 16</span><span style="font-family:
宋体">进制数，</span><span style="font-family:Consolas" lang="EN-US">=256</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">10r</span>19&nbsp; ; 10</span><span style="font-family:
宋体">进制数，</span><span style="font-family:Consolas" lang="EN-US">=19</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; 36rZ
; 36</span><span style="font-family:宋体">进制数，</span><span style="font-family:Consolas" lang="EN-US">=35</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其中，</span><span style="font-family:Consolas" lang="EN-US">16</span><span style="font-family:宋体">进制和</span><span style="font-family:Consolas" lang="EN-US">8</span><span style="font-family:宋体">进制可表示成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; 0xFF
; 256</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; 010
; 8</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">进制数——</span><span style="font-family:Consolas" lang="EN-US">&gt;</span><span style="font-family:宋体">其他进制字符串：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Integer/toString
1024 2) ; "10000000000"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Integer/toString
196 16) ; "c4"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Integer/toString
206 16) ; "ce"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其他进制字符串——</span><span style="font-family:Consolas" lang="EN-US">&gt; 10</span><span style="font-family:
宋体">进制数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Integer/parseInt
"1001" 2) ; 9</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Integer/parseInt
"ce" 16) ; 206</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="4Consolas1"><a name="_Toc281556244"></a><a name="_Toc281556140"></a><a name="_Toc281555938"></a><a name="_Toc281555781"><span style="text-decoration:none" lang="EN-US">2.4.3.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">Ratio</span></a></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def x (/ 1 3))&nbsp; ; 1/3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">class</span> x) ;
clojure.lang.Ratio</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(* x 3) ; 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">小数转换为分数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rationalize</span><b>
</b>1.33) ; 133/100</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rationalize</span>
1.4M) ; 7/5</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rationalize</span>
5.0) ; 5</span></p>

<p class="MsoNormal"><span style="font-family:宋体">取分子分母：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">numerator</span>
(/ 2 3))&nbsp;&nbsp;&nbsp; ; 2</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">denominator</span>
(/ 2 3))&nbsp; ; 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">要整除：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">quot</span> 10 3) ; 3 </span><span style="font-family:
宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">10/3&nbsp;
quotient: </span><span style="font-family:宋体">除法的商</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">rem</span> 10 3) ; 1 </span><span style="font-family:
宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">
10 % 3 <span style="background:yellow">rem</span>inder</span><span style="font-family:宋体">：余数</span></p>

<p class="4Consolas1"><a name="_Toc281556245"></a><a name="_Toc281556141"></a><a name="_Toc281555939"></a><a name="_Toc281555782"><span style="text-decoration:none" lang="EN-US">2.4.3.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">四舍五入</span></a></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:宋体">简单控制，可以用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">format</span><span style="font-family:宋体">函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">format</span>
"%.2f" 3.400003) ; "3.40"</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:宋体">精细控制，用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">DecimalFormat</span><span style="font-family:宋体">类：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.format (java.text.<span style="background:yellow">DecimalFormat</span>.
"#.##") 3.40000003) ; "3.4"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.format (java.text.<span style="background:yellow">DecimalFormat</span>.
"#.00") 3.40000003) ; "3.40"</span></p>

<p class="4Consolas1"><span style="text-decoration:none" lang="EN-US">2.4.3.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-US">BigDecimal</span></p>

<p class="MsoNormal"><span style="font-family:宋体">表示：</span><span style="font-family:Consolas" lang="EN-US">1.20M</span></p>

<p class="MsoNormal"><span style="font-family:宋体">比较：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 1 (/ 0.00001 1000000000000000000)) ; 1.0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 1 (/ 0.00001M 1000000000000000000)) ; 1.00000000000000000000001<span style="background:yellow">M</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(class (* 1000 1000 1000)) ; java.lang.Integer</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(class (* 1000 1000 1000 1000 1000 1000 1000
1000)) ; </span><span style="font-family:宋体">自动提升为</span><span style="font-family:Consolas" lang="EN-US">java.math.BigInteger</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-precision</span> 10 (/ 1<span style="background:
yellow">M</span> 3)) ; 0.3333333333<span style="background:yellow">M</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">BigInt</span><span style="font-family:宋体">用：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">1000000000000000000000000<span style="background:
yellow">N</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281923999"></a><a name="_Toc281658839"></a><a name="_Toc281556346"></a><a name="_Toc281556246"></a><a name="_Toc281556142"></a><a name="_Toc281555940"></a><a name="_Toc281555783"><span style="text-decoration:none" lang="EN-US">2.4.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">Boolean</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">原则：<b><u>除了</u></b></span><b><u><span style="font-family:Consolas" lang="EN-US">false</span></u></b><b><u><span style="font-family:宋体">和</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">nil</span></u></b><b><u><span style="font-family:宋体">，其他都为</span></u></b><b><u><span style="font-family:Consolas" lang="EN-US">true</span></u></b></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(&gt; 5 2) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (&gt;=
5 2) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (&gt;=
5 5) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=
5 2) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=
5 5) ; true</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以不止</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个数比较，非常方便：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (&gt;
5 3 1 -1) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (&gt;
5 3 6) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=
2 2 2 2 2) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (not
(= 5 3)) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">not=</span> 5 3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (and
true false) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (or
true false) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">为</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">，可以写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (&lt;=
0 n 1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">返回值为</span><span style="font-family:Consolas" lang="EN-US">true/false</span><span style="font-family:宋体">的函数一般名字最后是</span><span style="font-family:Consolas" lang="EN-US">"?"</span><span style="font-family:宋体">，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (string<span style="background:yellow">?</span> "hello") ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
isodd<span style="background:yellow">?</span> [n] (= 0 (mod n 2))) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">判断奇偶正负：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (odd?
3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (even?
2) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (pos?
1.2) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (zero?
0) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (neg?
-3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="4Consolas1"><span style="text-decoration:none" lang="EN-US">2.4.4.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-US">and/or</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的应用</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:31.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="42">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">or</span></p>
  </td>
  <td style="width:333.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="445">
  <p class="MsoNormal"><span style="font-family:宋体">从左到右，碰到非“</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:
  宋体">和</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">”马上返回，否则返回最后一个</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="42">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">and</span></p>
  </td>
  <td style="width:333.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="445">
  <p class="MsoNormal"><span style="font-family:宋体">从左到右，碰到“</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:
  宋体">或</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">”马上返回，否则返回最后一个</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：操作不成功时提供缺省值：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">or</span> (first
nil) "default") ; "default"</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">or</span> (first
[1 2]) "default") ; 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(and nil "default") ; nil</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(and 1 2) ; 2</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(when (and (&gt; x 0) (&lt; x 5)) (println
"ok"))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可变为</span><span style="font-family:Consolas" lang="EN-US">and</span><span style="font-family:宋体">版本：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">and</span> (&gt;
x 0) (&lt; x 5) (println "ok"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924000"></a><a name="_Toc281658840"></a><a name="_Toc281556347"></a><a name="_Toc281556247"></a><a name="_Toc281556143"></a><a name="_Toc281555941"></a><a name="_Toc281555784"><span style="text-decoration:none" lang="EN-US">2.4.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">String</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str 10) <span style="color:#5B6E6E">;
"10"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str \a) <span style="color:#5B6E6E">;
"a"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str \a <span style="background:yellow">nil</span>
"bc") <span style="color:#5B6E6E">; "abc"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str "hello" "world") <span style="color:#5B6E6E">; "hello world"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str '(\a \b \c)) <span style="color:#5B6E6E">; "(\\a
\\b \\c)"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">apply</span> str
'(\a \b \c)) <span style="color:#5B6E6E">; "abc" </span></span><span style="font-family:宋体;color:#5B6E6E">相当于</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US"> (str \a \b \c)</span><span style="font-family:Consolas" lang="EN-US"><br>
(seq "abc") <span style="color:#5B6E6E">; (\a \b \c)</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(format "%s %s" "hello"
"world") <span style="color:#5B6E6E">; "hello world"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(subs "12345" 1) ; <span style="color:#5B6E6E">"2345" </span></span><span style="font-family:
宋体;color:#5B6E6E">相当于</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US"> (.substring "12345" 1)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(subs "12345" 1 3) ; <span style="color:#5B6E6E">"23"</span></span><span style="font-family:
宋体;color:#5B6E6E">相当于</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US"> (.substring "12345" 1 3)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str (<span style="background:yellow">reverse</span>
"12345")) ; <span style="color:#5B6E6E">"54321"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">Stringx.join</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">实现</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str (interpose sep seq))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str (interpose " + " [1 2 3 4
5])) ; "1 + 2 + 3 + 4 + 5"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">wr3.clj.s</span><span style="font-family:宋体">有所有常用的</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:
宋体">处理函数，</span><span style="font-family:Consolas" lang="EN-US">clojure.string</span><span style="font-family:宋体">也有部分重要的</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">函数，如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">blank? escape join split split-lines</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">capitalize lower-case/upper-case</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">replace replace-first reverse</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：可以用</span><span style="font-family:Consolas" lang="EN-US">\</span><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">str</span><span style="font-family:
宋体">函数中增加空格</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (str
"hello" <span style="background:yellow">\</span> "world") ;
"hello world"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (str
"hello" <span style="background:yellow">\space</span>
"world") </span></p>

<p class="MsoNormal"><span style="font-family:宋体">但不能在</span><span style="font-family:Consolas" lang="EN-US">\</span><span style="font-family:宋体">后直接跟变量或者数字，需要</span><span style="font-family:Consolas" lang="EN-US">" ' [ (</span><span style="font-family:宋体">等符号，否则</span><span style="font-family:Consolas" lang="EN-US">reader</span><span style="font-family:宋体">解析不了：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str "hello" <span style="background:
yellow">\</span> 3) ; </span><span style="font-family:宋体;color:red">错误</span></p>

<p class="MsoNormal"><span style="font-family:宋体">要写成</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str "hello" <span style="background:
yellow">\space</span> 3)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924001"></a><a name="_Toc281658841"></a><a name="_Toc281556348"></a><a name="_Toc281556248"></a><a name="_Toc281556144"></a><a name="_Toc281555942"></a><a name="_Toc281555785"><span style="text-decoration:none" lang="EN-US">2.4.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">Char</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">\a \n \t <span style="background:yellow">\space</span> \\</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(char 97) ; \a</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(first
"hello") ; \h</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ffirst</span> ["hello" "world"])
; \h</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth
"hello" 4) ; \o</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(Character/toUpperCase
\s) ; \S</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(interleave
"abc" "123") ; (\a \1 \b \2 \c \3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply str
(interleave "abc" "123")) ; "a1b2c3"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(seq
"hello") ; (\h \e \l \l \o)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vec
"hello") ; [\h \e \l \l \o]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector
"hello") ; ["hello"]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.4.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">fnil</span></p>

<p class="MsoNormal"><span style="font-family:宋体">针对</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">提供了</span><span style="font-family:Consolas" lang="EN-US">fnil</span><span style="font-family:宋体">函数，提供传给函数的参数为</span><span style="font-family:
Consolas" lang="EN-US">nil</span><span style="font-family:宋体">时的缺省值。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：可把</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数的第</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个或者</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个参数如下处理：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [a b]
(+ a b))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f 10 nil) ;<span style="color:red"> java.lang.NullPointerException</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fnil</span> f 0 0) 10 nil) ; 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fnil</span> f 0 0) nil 10) ; 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fnil</span> f 0 0) nil nil) ; 0 </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fnil</span> f 0) nil 10) ; 10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fnil</span> f 0) 10 nil) ; <span style="color:red">java.lang.NullPointerException</span></span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573075"></a><a name="_Toc281924002"></a><a name="_Toc281658842"></a><a name="_Toc281556349"></a><a name="_Toc281556249"></a><a name="_Toc281556145"></a><a name="_Toc281555943"></a><a name="_Toc281555786"><span style="font-family:Consolas" lang="EN-US">2.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类型判断</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">取类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">class</span> foo)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">判断类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">instance?</span> Integer 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">instance?</span> String "hi")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">特定类型判断的单目表达式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (true?
true) ; </span><span style="font-family:宋体">只有</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:宋体">为</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:
宋体">，其他皆为</span><span style="font-family:Consolas" lang="EN-US">false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (true?
false) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (true?
nil) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (true?
"") ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (true?
"abc") ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (false?
false) ; </span><span style="font-family:宋体">只有</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">为</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:
宋体">，其他皆为</span><span style="font-family:Consolas" lang="EN-US">false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (false?
true) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (false?
nil) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (nil?
nil) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (nil?
false) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (zero?
0) ; true </span><span style="font-family:宋体">参数只能是数字</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (zero?
0.0) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (zero?
0.0M) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (zero?
(/ 1 3)) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (char?
\a) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (string?
"hello") ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (number?
10) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (number?
10.3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (number?
10.3M) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (number?
(/ 1 3)) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (integer?
10) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (ratio?
(/ 1 3)) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (every?
rational? [3 3.14M (/ 1 3)]) ; true </span><span style="font-family:宋体">有理数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (float?
1.3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (float?
(double 1.3)) ; true *</span><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">* (double? 1.3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (keyword?
:k1) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (symbol?
's1) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(every? <span style="background:yellow">coll?</span>
(list [] '() {} #{})) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(seq? '()) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(vector? []) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(list? '()) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(map? {}) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(set? #{}) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.5.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span><span lang="EN-US">seq</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">做判断</span></p>

<p class="MsoNormal"><span style="font-family:宋体">利用</span><span style="font-family:Consolas" lang="EN-US">seq </span><span style="font-family:宋体">的特性</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(seq nil) ; nil</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(seq {}) ; nil</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(seq []) ; nil</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(seq #{}) ; nil</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(seq '()) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可统一判断处理<span style="background:
yellow">为空的</span>基本类型、</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">类型</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281924003"></a><a name="_Toc281658843"></a><a name="_Toc281556350"></a><a name="_Toc281556250"></a><a name="_Toc281556146"></a><a name="_Toc281555944"></a><a name="_Toc281555787"></a><a name="_Toc339573076"><span style="font-family:Consolas" lang="EN-US">2.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">do </span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">执行多条语句</span></u></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">do</span><span style="font-family:宋体">执行多条语句，返回最后一条语句值</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">do</span> nil "hello"
<b><span style="background:lime">10</span></b>) ; </span><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">10</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(def v (<span style="background:yellow">do</span>
(println 123) (println 321) <b><span style="background:lime">-1</span></b>)) ;
v=-1</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573077"><span style="font-family:Consolas" lang="EN-US">2.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">条件语句</span></u></a><u><span style="font-family:Consolas" lang="EN-US">if when cond</span></u><u><span style="font-family:Consolas" lang="EN-US"> condp case</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">if</span><span style="font-family:宋体">条件中除了</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">，其他都为</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if true "true") ; "true"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if 0 "true") ; "true" </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if "" "true") ;
"true"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if nil "true") ; nil</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if false "true") ; nil</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">if-not</span>
false "true") ; true</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">if-not</span>
true "true") ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (if
(not (= a b)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">not=</span><span style="font-family:宋体">可以写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (if
(<span style="background:yellow">not=</span> a b))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">if-not</span><span style="font-family:宋体">可以写成</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (if-not
(= a b))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">第三个参数就是</span><span style="font-family:Consolas" lang="EN-US">else</span><span style="font-family:宋体">子句，但</span><span style="font-family:Consolas" lang="EN-US">"else"</span><span style="font-family:宋体">不用写：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if true "true" "false") ;
"true"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if false "true" "false") ;
"false"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">when</span><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">else</span><span style="font-family:宋体">子句，执行条件后的所有语句：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (when
true <u>"1" "2" "3"</u>)&nbsp; ; "3"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (when
false <u>"1" "2" "3"</u>) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">when-not</span> false "1") ; "1"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (when-not
true "1") ; nil</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：区别</span><span style="font-family:Consolas" lang="EN-US">if</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">when</span><span style="font-family:
宋体">，打印小于</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">的正整数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [i 1] (<span style="background:yellow">if</span> (&lt; i 5) (println i) (recur (inc i)))) ; </span><span style="font-family:宋体;color:red">错误</span><span style="font-family:Consolas;
color:red"> </span><span style="font-family:宋体;color:red">仅打印</span><span style="font-family:Consolas;color:red" lang="EN-US">1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [i 1] (<span style="background:yellow">if</span> (&lt; i 5) (<span style="background:yellow">do</span>
(println i) (recur (inc i))))) ; </span><span style="font-family:宋体">正确</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [i 1] (<span style="background:yellow">when</span> (&lt; i 5) (println i) (recur (inc i))))
; </span><span style="font-family:宋体">正确</span><span style="font-family:Consolas" lang="EN-US"> when</span><span style="font-family:宋体">把条件判断后的所有都执行</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cond</span><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">switch..case..default:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">cond</span> (= 5 2) "5==2" </span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">(= 5 5) "5==5" </span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">(= 5 6) "5==6") ;
"5==5"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f [n] (<span style="background:yellow">cond</span> (&lt; n 0) "&lt;0"
</span></p>

<p class="MsoNormal" style="margin-left:94.5pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(&lt; n 10) "&lt;10" </span></p>

<p class="MsoNormal" style="margin-left:94.5pt;text-indent:31.6pt"><b><span style="font-family:Consolas;background:yellow" lang="EN-US">:else</span></b><span style="font-family:Consolas" lang="EN-US"> "&gt;=10"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
-1) ; "&lt;0"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
1) ; "&lt;10"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
10) ; "&gt;=10"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">:else</span><span style="font-family:宋体">只是个习惯用法，</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">变成其他的东西（只要为</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:
宋体">），不影响</span><span style="font-family:Consolas" lang="EN-US">cond</span><span style="font-family:宋体">的功能。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：猜数字游戏</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def ans
(rand-int 100))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn guess
[n] (cond (= n ans) "got it!" (&lt; n ans) "too small"
(&gt; n ans) "too large"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(guess 62)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">condp:</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">condp</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">对应的</span></b><b><span style="font-family:
  Consolas" lang="EN-US">cond</span></b><b><span style="font-family:宋体">写法</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def n 3)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def n 3)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">condp</span> <b><span style="background:yellow">= n</span></b>
  <u>2 "2=n"</u> <u>3 "3=n"</u> <u>"no match"</u>)
  ; "3=n"</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond (= 2
  n) "2=n" (= 3 n) "3=n" :else "no match")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">condp</span> <b><span style="color:red;background:
  yellow">&gt; n</span></b> <u>0 "0&gt;n"</u> <u>5 "5&gt;n"</u>
  <u>"others"</u>) ; "5&gt;n"</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond <b><span style="background:yellow">(<span style="color:red">&gt; 0 n</span>)</span></b>
  "0&gt;n" <b><span style="color:red;background:yellow">(&gt; 5 n)</span></b>
  "5&gt;n" :else "other")</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注意：可见后面的值如</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">是作为</span><span style="font-family:Consolas" lang="EN-US">&gt;</span><span style="font-family:
宋体">函数的第一个参数</span><span style="font-family:Consolas" lang="EN-US">.</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case</span><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">switch:</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">(defn f [x] (<span style="background:
yellow">case</span> x </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">1 10 </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">2 20 </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">3 30 </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">0))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">(f 1) ; 10</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">(f 3) ; 30</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">(f 4) ; 0</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case</span><span style="font-family:宋体">可以用列表一次匹配</span><span style="font-family:
Consolas" lang="EN-US">*</span><b><span style="font-family:宋体">多个</span></b><b><span style="font-family:Consolas" lang="EN-US">*</span></b><span style="font-family:
宋体">值：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn&nbsp; f [x] (case x </span></p>

<p class="MsoNormal" style="margin-left:84.0pt;text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">(5 10)</span><span style="font-family:Consolas" lang="EN-US"> "*5" </span></p>

<p class="MsoNormal" style="margin-left:84.0pt;text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">(3 6 9)</span><span style="font-family:Consolas" lang="EN-US"> "*3" </span></p>

<p class="MsoNormal" style="margin-left:84.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">"others"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f <span style="background:yellow">5</span>) ;
"*5"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f <span style="background:yellow">10</span>) ;
"*5"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f 6) ; "*3"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f 2) ; "others"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：列表前不用加</span><span style="font-family:Consolas;background:lime" lang="EN-US">'</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:14.15pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">case</span><span style="font-family:宋体">可以匹配不同类型：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn jumper [x]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">case</span>
x</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; "JoC"&nbsp;&nbsp;
:a-book</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; "Fogus" :a-boy</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; :eggs&nbsp;&nbsp; :breakfast</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+ x 100)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; [42]&nbsp;&nbsp;&nbsp;
:a-vector-of-42</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">"The default"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.7.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">when-first</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另有</span><span style="font-family:Consolas" lang="EN-US">when-first(</span><span style="font-family:宋体">“但集合不为空或者</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:
宋体">时，绑定为第一个元素”：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(when-first [a
[1 3 5]] a) ; 1 </span><span style="font-family:宋体">如果</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(when-first [a
[1 3 5]] "hello") ; "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(when-first [a
[]] a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(when-first [a
nil] a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; nil</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.7.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">if-let when-let</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">if-let</span><span style="font-family:宋体">在值不为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">时执行前者，否则后者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (<span style="background:yellow">if-let</span> [a nil] a 10) 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (<span style="background:yellow">if-let</span> [a false] "yes"
"no") "no")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (<span style="background:yellow">if-let</span> [a 4] (* a 10) 10) 40)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">when-let</span><span style="font-family:宋体">在值为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:宋体">时返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (<span style="background:yellow">when-let</span> [a 4] (* a 10)) 40)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (<span style="background:yellow">when-let</span> [a false] (* a 10)) nil)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">when-let</span> [a 9] (println a) (+ a 4))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">9</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">13</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573078"></a><a name="_Toc281924004"></a><a name="_Toc281658844"></a><a name="_Toc281556351"></a><a name="_Toc281556251"></a><a name="_Toc281556147"></a><a name="_Toc281555945"></a><a name="_Toc281555788"><span style="font-family:Consolas" lang="EN-US">2.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">循环语句</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281658845"></a><a name="_Toc281556352"></a><a name="_Toc281556252"></a><a name="_Toc281556148"></a><a name="_Toc281555946"></a><a name="_Toc281555789"></a><a name="_Toc281924005"><span style="text-decoration:none" lang="EN-US">2.8.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">loop</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">loop</span> <span style="background:yellow">[</span><u>a
[1 3 5] b [2 4 6]</u><span style="background:yellow">]</span> (interleave a b))
<span style="color:#5B6E6E">; (1 2 3 4 5 6)</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924006"><span style="text-decoration:none" lang="EN-US">2.8.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">if recur, when recur</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((fn [s ii] (<span style="background:yellow">if</span> ii <u>(<span style="background:yellow">recur</span>
(subs s (first ii)) (next ii))</u> s)) </span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">"hello world" [1 2 3]) ;
"world"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US">loop..if..recur</span><span style="font-family:
宋体">版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">loop</span> [s "hello world" ii [1 2 3]] (<span style="background:yellow">if</span> ii <u>(<span style="background:yellow">recur</span>
(subs s (first ii)) (next ii))</u> s)) ; "world"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">仅使用</span><span style="font-family:Consolas" lang="EN-US">recur</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [n] <u>(when (pos? <b>n</b>) (println <b>n</b>)
(<span style="background:yellow">recur</span> (dec <b>n</b>))))</u></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [n] <u>(when (pos? <b>n</b>) (do (println <b>n</b>)
(<span style="background:yellow">recur</span> (dec <b>n</b>))))</u>)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">相当于如下的简写：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [n] (loop [i n] <u>(when (pos? <b>i</b>)
(do (println <b>i</b>) (<span style="background:yellow">recur</span> (dec <b>i</b>))))</u>
))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：求下一个素数</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn pnext [n] (let [n2 (inc n)] (if (prime? n2) n2
(<span style="background:yellow">recur</span> n2))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如何找集合中符合条件的第一个元素（模拟</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">find</span><span style="font-family:宋体">）</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:59.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>
  </td>
  <td style="width:451.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">可以用</span><span style="font-family:Consolas" lang="EN-US">if..recur</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn
  find-first [pred coll]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [c
  coll] (if (or (empty? c) (pred (first c))) (first c) (recur (rest c)))))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">其实由于</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:
  宋体">的，如下即可：</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(first (filter pred coll))</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">或者直接用</span><span style="font-family:Consolas" lang="EN-US">contrib</span><span style="font-family:宋体">中的函数：</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '[<u>clojure.contrib.seq-utils</u> :only
  (find-first)])</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">find-first</span>
  even? [1 3 5 2 4]) ; 2</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><b><span style="font-family:宋体">方法</span></b><b><span style="font-family:Consolas" lang="EN-US">4</span></b><b><span style="font-family:宋体">：</span></b></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">巧用</span><span style="font-family:Consolas" lang="EN-US">some</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(some #(when
  (pred %) %) coll)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">：</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-family:
  宋体;color:black">用补函数：</span></span></p>
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(first (drop-while (complement pred)
  coll))</span></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">这样</span><span style="font-family:Consolas" lang="EN-US">pnext</span><span style="font-family:宋体">也可以写成</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn pnext
[n] (find-first prime? (range (inc n) (* 2 n))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn pnext
[n] (first (filter prime? (iterate inc (inc n)))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(take 10
(iterate pnext 2))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.8.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">loop if recur</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">FP</span><span style="font-family:宋体">，没有</span><span style="font-family:Consolas" lang="EN-US">C/Java</span><span style="font-family:宋体">的循环变量，要使用递归（</span><span style="font-family:
Consolas" lang="EN-US">recursion</span><span style="font-family:宋体">）。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">形式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">loop </span>[<u><span style="background:lime">v ..</span></u>]
(<span style="background:yellow">if </span>(..) <b><u>rt</u></b> (<span style="background:yellow">recur </span><u><span style="background:lime">v' ..</span></u>)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">说明：</span></p>

<p class="MsoNormal" style="margin-left:42.05pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">recur</span><span style="font-family:宋体">表示递归表达式；</span><span style="font-family:Consolas" lang="EN-US">if</span><span style="font-family:宋体">内的条件是循环退出条件，如果多个条件也可以用</span><span style="font-family:Consolas" lang="EN-US">cond</span><span style="font-family:宋体">；</span><span style="font-family:Consolas" lang="EN-US">rt</span><span style="font-family:宋体">是递归出口值；</span></p>

<p class="MsoNormal" style="margin-left:42.05pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas;background:lime" lang="EN-US">v
..</span></u><span style="font-family:宋体">是循环变量初始值，</span><u><span style="font-family:Consolas;background:lime" lang="EN-US">v' ..</span></u><span style="font-family:宋体">是</span><u><span style="font-family:Consolas;
background:lime" lang="EN-US">v ..</span></u><span style="font-family:宋体">对应的变化（位置必须一致，变量个数必须一致）；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：变量</span><span style="font-family:Consolas" lang="EN-US">x</span><span style="font-family:宋体">从</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">到</span><span style="font-family:Consolas" lang="EN-US">7</span><span style="font-family:宋体">，变量</span><span style="font-family:Consolas" lang="EN-US">r</span><span style="font-family:宋体">存值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">loop</span> [r [] x 1] (<span style="background:yellow">if</span>
(&gt; x 7) r <u>(<span style="background:yellow">recur</span> (conj r x) (inc
x))</u>)) ; [1 2 3 4 5 6 7]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:宋体">就不用定义函数了，对比：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [r x]
(if (&gt; x 7) r (recur (conj r x) (inc x))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f [] 1) ; [1
2 3 4 5 6 7]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">1+2+</span><span style="font-family:宋体">……</span><span style="font-family:Consolas" lang="EN-US">+100</span></p>

<p class="MsoNormal"><span style="position:relative;z-index:251658752"><span style="position:absolute;
left:-2px;top:-2px;width:711px;height:119px"><img src="/static/images/clojure/image009.gif" height="119" width="711"></span></span><span style="font-family:Consolas" lang="EN-US"><img src="/static/images/clojure/image010.gif" border="0" height="83" width="510"></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列（</span><span style="font-family:Consolas" lang="EN-US">1 2 3 5 8 13 </span><span style="font-family:宋体">……）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fib [n] (<span style="background:yellow">loop</span>
[a 1 b 2 i n] (<span style="background:yellow">if</span> (zero? i) a <u>(<span style="background:yellow">recur</span> b (+ a b) (dec i))</u>)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map fib (range 10)) ; (1 2 3 5 8 13 21 34 55 89)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比不使用</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:宋体">的自递归写法：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fib [a b i] (<span style="background:yellow">if</span>
(zero? i) a <u>(<span style="background:yellow">recur</span> b (+ a b) (dec i))</u>))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map (partial fib 1 2) (range 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列的另一种</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:
宋体">写法，直接得到前</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fib2 [n] (loop [i 2 r [1 2]] </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(if (&gt;= i n) r (recur (inc i) (conj
r (+ (last r) (last (butlast r))))))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：阶乘</span><span style="font-family:Consolas" lang="EN-US"> 5</span><span style="font-family:宋体">！</span><span style="font-family:Consolas" lang="EN-US">=120</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">loop</span> [i 1
r 1] (<span style="background:yellow">if</span> (&gt; i 5) r (<span style="background:yellow">recur</span> (inc i) (* i r)))) ; 120</span></p>

<p class="MsoNormal"><span style="font-family:宋体">参照上面，可定义阶乘函数如下：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fac [n] (<span style="background:yellow">loop</span>
[i 1 r 1] (if (&gt; i n) r (<span style="background:yellow">recur</span> (inc
i) (* i r)))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比不用</span><span style="font-family:Consolas" lang="EN-US">loop</span><span style="font-family:宋体">的：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fac0 [i r] (if (zero? i) r (<span style="background:yellow">recur</span> (dec i) (* i r))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn fac [n] (fac0 n 1))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:1.0cm;text-indent:-1.0cm"><span style="font-family:宋体">例子：牛顿法求</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">的平方根（说明：任取一个数</span><span style="font-family:
Consolas" lang="EN-US">a</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">n/2</span><span style="font-family:
宋体">）</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">另一个因子就是</span><span style="font-family:Consolas" lang="EN-US">b=n/a;
</span><span style="font-family:宋体">如果</span><span style="font-family:
Consolas" lang="EN-US">a</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:宋体">不够接近，取平均</span><span style="font-family:Consolas" lang="EN-US">a=(a+b)/2, </span><span style="font-family:宋体">而</span><span style="font-family:Consolas" lang="EN-US">b=n/a</span><span style="font-family:宋体">直到</span><span style="font-family:Consolas" lang="EN-US">a</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">b</span><span style="font-family:宋体">足够接近）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">sqrt2</span> [n]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (loop
[a (/ n 2.0) b (/ n a)]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if (&gt;= 0.00001 (Math/abs (- a b))) (double a) </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(recur (/ (+ a b) 2) (/ n (/ (+ a b) 2)) ))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sqrt2 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924007"></a><a name="_Toc281658846"></a><a name="_Toc281556353"></a><a name="_Toc281556253"></a><a name="_Toc281556149"></a><a name="_Toc281555947"></a><a name="_Toc281555790"><span style="text-decoration:none" lang="EN-US">2.8.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">dotimes dorun doall</span></a></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dotimes</span> [i
5] (println i)) ; </span><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US"> 0 1 2 3 4</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="color:#C0504D">0 until 5 foreach println // Scala</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">一般也可以写成</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dotimes
[<span style="background:yellow">_</span> 5] (println <span style="background:
yellow">_</span>))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：可以用</span><span style="font-family:Consolas" lang="EN-US">doseq</span><span style="font-family:宋体">来完成</span><span style="font-family:Consolas" lang="EN-US">dotimes</span><span style="font-family:
宋体">的工作</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(doseq [i (range 5)] (println i))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：打印</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">中的所有元素</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
s <u>[2 4 6 8]</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dotimes
[i (count s)] (println (nth s i)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">4</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">6</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">8</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dorun</span> (map println <u>[2 4 6 8]</u>)) ; </span><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;&nbsp;&nbsp; List(2,4,6,8)
foreach println // Scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以用</span><span style="font-family:Consolas" lang="EN-US">doseq</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">doseq</span> [x <u>[2 4 6 8]</u>] (println x))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dorun</span><span style="font-family:宋体">只逐个处理</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">元素而不在内存中生成</span><span style="font-family:
Consolas" lang="EN-US">seq</span><span style="font-family:宋体">；与</span><span style="font-family:Consolas" lang="EN-US">doall</span><span style="font-family:宋体">有区别：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">doall</span> (map println [2 4 6 8])) ; </span><span style="font-family:宋体">返回</span><span style="font-family:Consolas"> <span lang="EN-US">(nil nil nil nil)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281658847"></a><a name="_Toc281556354"></a><a name="_Toc281556254"></a><a name="_Toc281556150"></a><a name="_Toc281555948"></a><a name="_Toc281555791"></a><a name="_Toc281924008"><span style="text-decoration:none" lang="EN-US">2.8.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">doseq</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">doseq</span> [i (range
10)] (println i))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;&nbsp;&nbsp; for
(i&lt;-Range(0,10)) println(i) // Scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：而</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:
宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">for..yield</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">变量可以是多个：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">doseq</span> [<b><u>i</u></b><u> [1 2 3]</u> <b><u>j</u></b><u>
[10 20]</u>] (println i "-" j))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">1 - 10</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">1 - 20</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">2 - 10</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">2 - 20</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">3 - 10</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">3 – 20</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;&nbsp;&nbsp; for
(i&lt;- List(1,2,3); j&lt;- List(10,20)) println(i + " - " + j) //
Scala</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结合</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v (map vector (iterate inc 0)
["one" "two" "three"])) <span style="color:#5B6E6E">;([0
"one"] [1 "two"] [2 "three"])</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">doseq</span> [<b>[i w]</b> v] (println i w)) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">0 one</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1 two</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2 three</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">深入分析：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其实</span><span style="font-family:Consolas" lang="EN-US">doseq</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:
宋体">的语法是一样的，只不过</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">lazy
seq</span><span style="font-family:宋体">而</span><span style="font-family:Consolas" lang="EN-US">doseq</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">side effect</span><span style="font-family:宋体">的，对比：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doseq <span style="background:yellow">[x (range 7) y (range x) :while (odd? x)]</span> </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(print [x y]))</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(for <span style="background:yellow">[x (range 7) y (range x) :while (odd? x)]</span> </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">[x y])</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 0][3 0][3
  1][3 2][5 0][5 1][5 2][5 3][5 4]nil</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">([1 0] [3 0]
  [3 1] [3 2] [5 0] [5 1] [5 2] [5 3] [5 4])</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924009"><span style="text-decoration:none" lang="EN-US">2.8.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">repeat</span></a><span lang="EN-US"> replicate</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">repeat </span>10
\a) ; (\a \a \a \a \a \a \a \a \a \a)</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str (<span style="background:yellow">repeat
</span>10 \a)) ; "aaaaaaaaaa"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">上两个例子中，也可以用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">replicate</span><span style="font-family:宋体">（</span><span style="font-family:Consolas;
color:red" lang="EN-US">@deprecated</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">无次数限制：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (repeat
\a) ; </span><span style="font-family:宋体">注意会无限循环</span></p>

<p class="MsoNormal"><span style="font-family:宋体">需要配合</span><span style="font-family:Consolas" lang="EN-US">take</span><span style="font-family:宋体">来限制次数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">take</span> 10 (repeat \a))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924010"></a><a name="_Toc281658848"></a><a name="_Toc281556355"></a><a name="_Toc281556255"></a><a name="_Toc281556151"></a><a name="_Toc281555949"></a><a name="_Toc281555792"><span style="text-decoration:none" lang="EN-US">2.8.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">iterate</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var</span><span style="font-family:宋体">变量迭代：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(iterate f v)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; while(true)
{ v = f(v) }</span></p>

<p class="MsoNormal"><span style="font-family:宋体">所以一般要配合</span><span style="font-family:Consolas" lang="EN-US">(take n sequence)</span><span style="font-family:
宋体">来中止：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">take</span> 10 (<span style="background:yellow">iterate</span>
<u>inc</u> 5)) ; (5 6 7 8 9 10 11 12 13 14)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">take</span> 10 (<span style="background:yellow">iterate</span>
<u>#(+ % 5)</u> 5)) ; (5 10 15 20 25 30 35 40 45 50)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">take</span> 10 (<span style="background:yellow">iterate</span>
<u>#(* % 2)</u> 2)) ; (2 4 8 16 32 64 128 256 512 1024)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列（</span><span style="font-family:Consolas" lang="EN-US">1 2 3 5 8 13 </span><span style="font-family:宋体">……）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fib [[a b]] [b (+ a b)]) ; </span><span style="font-family:宋体">得到下一组</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:
宋体">数，如</span><span style="font-family:Consolas" lang="EN-US">[1 2]-&gt;[2
3]-&gt;[3 5]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (take
5 (<u>iterate fib [1 2]</u>)) ; ([<span style="background:yellow">1</span> 2] [<span style="background:yellow">2</span> 3] [<span style="background:yellow">3</span>
5] [<span style="background:yellow">5</span> 8] [<span style="background:yellow">8</span>
13])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(take 5 (map first (<u>iterate fib [1 2]</u>))) ; </span><span style="font-family:宋体">取头部</span><span style="font-family:Consolas"> <span lang="EN-US">(1 2 3 5 8)</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：质数</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">素数表</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn pnext
[n] (first (filter prime? (<span style="background:yellow">iterate</span> inc
(inc n)))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(take 10 (<span style="background:yellow">iterate</span> pnext 2)) ; (2 3 5 7 11 13 17 19 23
29)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924011"></a><a name="_Toc281658849"></a><a name="_Toc281556356"></a><a name="_Toc281556256"></a><a name="_Toc281556152"></a><a name="_Toc281555950"></a><a name="_Toc281555793"><span style="text-decoration:none" lang="EN-US">2.8.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">cycle</span></a></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">(repeat var)</span><span style="font-family:宋体">，不过</span><span style="font-family:Consolas" lang="EN-US">(cycle
seq)</span><span style="font-family:宋体">针对</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">，也必须用</span><span style="font-family:Consolas" lang="EN-US">take</span><span style="font-family:
宋体">来限制次数：</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take 5 (<span style="background:
yellow">repeat</span> [1 0])) ; ([1 0] [1 0] [1 0] [1 0] [1 0])</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take 5 (<span style="background:
yellow">cycle</span> &nbsp;[<u>1 0</u>])) ; (<u>1 0</u> <u>1 0</u> <u>1</u>)</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take 10 (cyble (range 3))) ; (<u>0 1
2</u> <u>0 1 2</u> <u>0 1 2</u> <u>0</u>)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924012"></a><a name="_Toc281658850"></a><a name="_Toc281556357"></a><a name="_Toc281556257"></a><a name="_Toc281556153"></a><a name="_Toc281555951"></a><a name="_Toc281555794"><span style="text-decoration:none" lang="EN-US">2.8.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">take, take-while, drop-while</span></a></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">repeat, iterate, cycle</span><span style="font-family:宋体">等无限循环都涉及</span><span style="font-family:Consolas" lang="EN-US">
(take n coll)</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (<span style="background:yellow">take-while</span>
<span style="background:lime">pred?</span> <span style="background:aqua">coll</span>)</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; <span style="background:yellow">while</span>
(<span style="background:lime">pred?</span>) { <span style="background:yellow">take</span>
element from <span style="background:aqua">coll</span> }</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:宋体">如：</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take-while even? [2 4 6 1 8]) ; [2 4
6]</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take-while #(&gt; % 0) [3 2 1 0 -1
-2]) ; (3 2 1)</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:宋体">或者使用</span><span style="font-family:Consolas" lang="EN-US">pos?</span><span style="font-family:
宋体">代替匿名函数：</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (take-while pos? [3 2 1 0 -1 -2]) ;
(3 2 1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">drop-while</span><span style="font-family:宋体">：一直</span><span style="font-family:Consolas" lang="EN-US">drop</span><span style="font-family:宋体">直到碰到不符合条件后马上停止，并返回剩下的部分。</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (<span style="background:yellow">drop-while</span>
even? [2 4 6 1 3 5]) ; [1 3 5] </span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (drop-while even? [1 3 2 4 5]) ; [1 3
2 4 5]</span></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924013"></a><a name="_Toc281658851"></a><a name="_Toc281556358"></a><a name="_Toc281556258"></a><a name="_Toc281556154"></a><a name="_Toc281555952"></a><a name="_Toc281555795"><span style="text-decoration:none" lang="EN-US">2.8.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">for</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US"><a href="#_%B2%D9%D7%F7"><span style="font-family:
宋体" lang="EN-US"><span lang="EN-US">后<span lang="EN-US">面</span></span></span></a></span><span style="font-family:宋体">还有</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">的其他说明</span></p>

<p class="MsoNormal"><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">for..yield</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Python</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">list
comps</span><span style="font-family:宋体">。用于简化</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">#()</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">fn</span><span style="font-family:宋体">：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">用</span></b><b><span style="font-family:
  Consolas" lang="EN-US">map filter #()</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">用</span></b><b><span style="font-family:
  Consolas" lang="EN-US">for</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map #(* %
  %) (range 10))</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> <span style="background:yellow">[</span>i
  (range 10)<span style="background:yellow">]</span> (* i i))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map #(* %
  %) (filter #(&lt; (* % %) 20) (range 10)))</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> <span style="background:yellow">[</span>i
  (range 10) <span style="background:yellow">:when</span> (&gt; 20 (* i i))<span style="background:yellow">]</span> (* i i))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多个变量：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [x (range 10) y (range 3) <span style="background:yellow">:while</span> (&lt; y x)] [x y])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [a [1 3 5] b [2 4]] [a b]) ; ([1 2] [1 4] [3
2] [3 4] [5 2] [5 4])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">区别</span><span style="font-family:Consolas" lang="EN-US">:when</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">:while</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(for [x [1 2 0 3 4] <span style="background:yellow">:when</span>
(pos? x)] x)&nbsp;&nbsp; ; (1 2 3 4) </span><span style="font-family:宋体">全部做完为止</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(for [x [1 2 0 3 4] <span style="background:yellow">:while</span>
(pos? x)] x)&nbsp; ; (1 2)&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体">碰到不满足就停</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：乘法口诀表</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (for
[a (range 1 10) b (range 1 10) :while (&lt;= b a)] (str b "*" a
"=" (* a b)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：找杨辉三角形</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn tri-yang?
[a b] (def c (Math/sqrt (+ (* a a) (* b b)))) (= (int c) c))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [n] (for
[a (range 1 n) b (range (inc a) n) :when (tri-yang? a b)] (list a b)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f 21) ; <span style="color:#5B6E6E">((3 4) (5 12) (6 8) (8 15) (9 12) (12 16) (15 20))</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924014"></a><a name="_Toc281658852"></a><a name="_Toc281556359"></a><a name="_Toc281556259"></a><a name="_Toc281556155"></a><a name="_Toc281555953"></a><a name="_Toc281555796"><span style="text-decoration:none" lang="EN-US">2.8.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">interleave</span></a><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">，</span><span lang="EN-US">interpose</span></p>

<table class="MsoNormalTable" style="width:532.5pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="710">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">interleave</span></p>
  </td>
  <td style="width:194.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="260">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">“</span><span style="font-family:宋体">混合</span><span style="font-family:Consolas" lang="EN-US">”</span><span style="font-family:宋体">两个序列</span><span style="font-family:Consolas" lang="EN-US">:</span><span style="font-family:宋体">无限序列和定长序列</span></p>
  </td>
  <td style="width:269.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="359">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(interleave
  (iterate inc 1) ["a" "b" "c"]) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; (1
  "a" 2 "b" 3 "c")</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">interpose</span></p>
  </td>
  <td style="width:194.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="260">
  <p class="MsoNormal"><span style="font-family:宋体">混合分隔元素和</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:
  宋体">个定长序列</span></p>
  </td>
  <td style="width:269.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="359">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(interpose
  "-" ["a" "b" "c"]) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; ("a"
  "-" "b" "-" "c")</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.8.12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">while</span></p>

<p class="MsoNormal"><span style="font-family:宋体">通过</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">显式使用循环变量：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def a (atom 10))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">while</span>
(pos? @a) (do (println @a) (swap! a dec)))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573079"></a><a name="_Toc281924015"></a><a name="_Toc281658853"></a><a name="_Toc281556360"></a><a name="_Toc281556260"></a><a name="_Toc281556156"></a><a name="_Toc281555954"></a><a name="_Toc281555797"><span style="font-family:Consolas" lang="EN-US">2.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">正则表达式</span></u></a><u><span style="font-family:Consolas" lang="EN-US">regex</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">#</span><span style="font-family:Consolas" lang="EN-US">"foo"
=&gt; </span><span style="font-family:宋体">表示一个</span><span style="font-family:Consolas" lang="EN-US"> java.util.regex.Pattern</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#"a?c"
; </span><span style="font-family:宋体">匹配</span><span style="font-family:Consolas" lang="EN-US">abc aBc aac acc</span><span style="font-family:
宋体">等</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">参见：</span><span style="font-family:Consolas" lang="EN-US"><a href="#_%D5%FD%D4%F2%B1%ED%B4%EF%CA%BDregex"><span style="font-family:宋体" lang="EN-US"><span lang="EN-US">后面关于</span></span>regex<span style="font-family:宋体" lang="EN-US"><span lang="EN-US">的内容</span></span></a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573080"></a><a name="_Toc281924016"></a><a name="_Toc281658854"></a><a name="_Toc281556361"></a><a name="_Toc281556261"></a><a name="_Toc281556157"></a><a name="_Toc281555955"></a><a name="_Toc281555798"><span style="font-family:Consolas" lang="EN-US">2.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">命名空间</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924017"></a><a name="_Toc281658855"></a><a name="_Toc281556362"></a><a name="_Toc281556262"></a><a name="_Toc281556158"></a><a name="_Toc281555956"></a><a name="_Toc281555799"><span style="text-decoration:none" lang="EN-US">2.10.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">namespace</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">参见：</span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure.org/namespaces" target="_blank" rel="external">http://clojure.org/namespaces</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">一样没有类名和包层次的概念，可能设计函数名不够用的情况。例如要定义一个函数名为</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
map [] "hello")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:宋体">自带的</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">函数就会被</span><span style="font-family:Consolas" lang="EN-US">'user/map</span><span style="font-family:宋体">覆盖（用</span><span style="font-family:Consolas" lang="EN-US">refer</span><span style="font-family:宋体">恢复）。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">自带</span><span style="font-family:Consolas" lang="EN-US">6</span><span style="font-family:宋体">个命名空间：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clojure</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">基础命名空间</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clojure.inspector</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Swing</span><span style="font-family:宋体">监视器</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clojure.parallel</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">并发处理库（实现</span><span style="font-family:Consolas" lang="EN-US">JSR166 ForkJoin</span><span style="font-family:宋体">）</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><i><span style="font-family:Consolas;
  color:#002060" lang="EN-US">clojure.set</span></i></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><i><span style="font-family:宋体;color:#002060">处理</span></i><i><span style="font-family:Consolas;color:#002060" lang="EN-US">set</span></i><i><span style="font-family:宋体;color:#002060">集合</span></i></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><i><span style="font-family:Consolas;
  color:#002060" lang="EN-US">clojure.xml</span></i></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><i><span style="font-family:宋体;color:#002060">处理</span></i><i><span style="font-family:Consolas;color:#002060" lang="EN-US">xml</span></i></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><i><span style="font-family:Consolas;
  color:#002060" lang="EN-US">clojure.zip</span></i></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><i><span style="font-family:宋体;color:#002060">压缩</span></i></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:宋体">注：后面</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">Clojure 1.3+ </span><span style="font-family:宋体">版本不自动引入，需要的话需自己引入。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">启动</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:宋体">时，创建一个</span><span style="font-family:Consolas" lang="EN-US">user</span><span style="font-family:
宋体">命名空间</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:129.5pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="173">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">区别</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:129.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="173">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ns</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">自动引入</span><span style="font-family:Consolas" lang="EN-US">java.lang</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">clojure.core</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:129.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="173">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">in-ns</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">自动引入</span><span style="font-family:Consolas" lang="EN-US">java.lang</span><span style="font-family:宋体">但不引入</span><span style="font-family:Consolas" lang="EN-US">clojure.core</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">*ns*</span><span style="font-family:Consolas" lang="EN-US"> </span><span style="font-family:宋体">取得当前</span><span style="font-family:Consolas" lang="EN-US">namespace</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(all-ns) </span><span style="font-family:宋体">取得所有可用的</span><span style="font-family:Consolas" lang="EN-US">namespace</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">切换命名空间：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">in-ns</span> 'my) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v1 10) ; </span><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">my</span><span style="font-family:宋体">名字空间中，</span><span style="font-family:Consolas" lang="EN-US">v1=10</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">in-ns</span> 'user) ; </span><span style="font-family:
宋体">切换回缺省的</span><span style="font-family:Consolas" lang="EN-US">user</span><span style="font-family:宋体">名字空间</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v1 "hello") ; </span><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">user</span><span style="font-family:
宋体">名字空间中，</span><span style="font-family:Consolas" lang="EN-US">
v1="hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在自己开发的函数库文件中定义</span><span style="font-family:Consolas" lang="EN-US">namespace</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">ns</span> wr3)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ns</span>
wr3.util)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">同时也引入其他</span><span style="font-family:Consolas" lang="EN-US">namespace</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">类空间</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">ns</span> wr3 (<span style="background:yellow">:use</span>
clojure.contrib.str-utils) (<span style="background:yellow">:import</span>
(java.io File)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">覆盖</span><span style="font-family:Consolas" lang="EN-US">clojure.core</span><span style="font-family:宋体">中的函数名：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
vec 0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (vec
[1 2 3]) ; </span><span style="font-family:宋体;color:red">报错</span></p>

<p class="MsoNormal"><span style="font-family:宋体">但可以这样用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (clojure.core/vec
[1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">恢复</span><span style="font-family:Consolas" lang="EN-US">clojure.core</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">namespace</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">refer</span>
'clojure.core)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(vec [1 2 3]) ; </span><span style="font-family:
宋体">恢复可用</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">内取消</span><span style="font-family:Consolas" lang="EN-US">"+"</span><span style="font-family:宋体">函数：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ns-unmap</span>
'user '+)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 3 4) ; </span><span style="font-family:宋体;
color:red">报错</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(clojure.core/+ 3 4) ; 7</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以部分使用</span><span style="font-family:Consolas" lang="EN-US">clojure.core</span><span style="font-family:宋体">的函数，部分使用覆盖的：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">refer</span> 'clojure.core <span style="background:
yellow">:exclude</span> '(map set)) ; </span><span style="font-family:宋体">恢复这两个外的其他所有</span><span style="font-family:Consolas" lang="EN-US">core</span><span style="font-family:
宋体">函数</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">refer</span>
'clojure.core <span style="background:yellow">:only</span> '(println prn)) ; </span><span style="font-family:宋体">只恢复两个</span><span style="font-family:Consolas" lang="EN-US">core</span><span style="font-family:宋体">函数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者其别名：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">refer</span> 'clojure.core <span style="background:
yellow">:rename</span> {'map 'core-map, 'set 'core-set})</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">alias</span> 'set
'clojure.set)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924018"></a><a name="_Toc281658856"></a><a name="_Toc281556363"></a><a name="_Toc281556263"></a><a name="_Toc281556159"></a><a name="_Toc281555957"></a><a name="_Toc281555800"><span style="text-decoration:none" lang="EN-US">2.10.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数和</span><span lang="EN-US">macro</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的别名</span></p>

<p class="MsoNormal"><span style="font-family:宋体">函数直接用</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:宋体">就可以，如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def sys-map map)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">macro</span><span style="font-family:宋体">宏必须用如下的方法：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def <span style="background:yellow">#^{:macro
true}</span> sys-loop #'loop)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<b><u>clojure.contrib.def</u></b>)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defalias</span> sys-loop
loop)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.10.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">require, use</span><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">（</span><span lang="EN-US">Clojure</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数空间）</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用全路径名（如果名字有冲突）：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">require</span> <span style="background:yellow">'</span>clojure.contrib.math) ; <span style="background:yellow">'</span></span><span style="font-family:宋体">不能少</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(clojure.contrib.math/round 1.7) ; 2</span></p>

<p class="MsoNormal"><span style="font-family:宋体">合并到当前命名空间（如果名字没有冲突，相当于</span><u><span style="font-family:Consolas" lang="EN-US">import <b>static</b> ns1.*</span></u><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">use</span> <span style="background:yellow">'</span>clojure.contrib.math) //</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(round 1.4) ; 1</span></p>

<p class="MsoNormal"><span style="font-family:宋体">只引入制定的函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">use</span> <span style="background:yellow">'[</span>clojure.contrib.math <span style="background:
yellow">:only</span> (round floor ceil)<span style="background:yellow">]</span>)
; <span style="background:yellow">'[]</span></span><span style="font-family:
宋体">不能少</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(round 1.4) ; 1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(floor 1.9) ; 1.0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(ceil 1.1) ; 2.0</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果开发过程中，函数库文件更改了，可以不重启就重新装载：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(use <span style="background:yellow">:reload</span>
'examples.exploring) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">仅重新装载本函数库</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use <span style="background:yellow">:reload-all</span>
'examples.exploring) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">把</span><span style="font-family:
Consolas;color:#5B6E6E" lang="EN-US">examples.exploring</span><span style="font-family:宋体;
color:#5B6E6E">用到的函数库也重新装载</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">注：需要在</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">的启动脚本中包含</span><span style="font-family:Consolas" lang="EN-US">clojure-contrib-1.2.0.jar</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">use '[</span>clojure.contrib.str-utils
<span style="background:yellow">:only</span> (str-join)<span style="background:
yellow">]</span>)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(str-join "-" ["hello",
"clojure"])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：了解其他</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (find-doc
"ns-")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924019"></a><a name="_Toc281658857"></a><a name="_Toc281556364"></a><a name="_Toc281556264"></a><a name="_Toc281556160"></a><a name="_Toc281555958"></a><a name="_Toc281555801"><span style="text-decoration:none" lang="EN-US">2.10.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">import</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">（</span><span lang="EN-US">Java</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类空间）</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(import java.io.File)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以</span><span style="font-family:Consolas" lang="EN-US">import</span><span style="font-family:宋体">同一包内多个</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">类：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-indent:3.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">import</span>
'(<u>java.io</u> File InputStream)) ; '</span><span style="font-family:宋体">可以省略</span></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-indent:3.0pt"><span style="font-family:Consolas" lang="EN-US">(File/separator) ; </span><span style="font-family:宋体">注意不能只用</span><span style="font-family:Consolas" lang="EN-US">
(seperator)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者不同包下的类：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">import</span> '(<u>java.io</u> File InputStream) '(<u>java.util</u>
Random))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924020"></a><a name="_Toc281658858"></a><a name="_Toc281556365"></a><a name="_Toc281556265"></a><a name="_Toc281556161"></a><a name="_Toc281555959"></a><a name="_Toc281555802"><span style="text-decoration:none" lang="EN-US">2.10.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">load-file</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">classpath</span><span style="font-family:宋体">类路径下的用</span><span style="font-family:Consolas" lang="EN-US"> use</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">import</span><span style="font-family:宋体">即可。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不在类路径下的可以使用：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">load-file</span>
"path/to/file.clj") ; unix</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">load-file</span>
"f:\\lib\\Clojure\\file.clj") ; win</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.10.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">列出</span><span lang="EN-US">ns</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">下的所有函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns-publics
  'clojure.core)</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">所有</span><span style="font-family:Consolas" lang="EN-US">public</span><span style="font-family:宋体">的函数</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns-interns
  'clojure.core)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">所有函数（含</span><span style="font-family:Consolas" lang="EN-US">private</span><span style="font-family:
  宋体">的）</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns-imports
  'clojure.core)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">所有从</span><span style="font-family:Consolas" lang="EN-US">java import</span><span style="font-family:宋体">的东西</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns-map
  'clojure.core)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">含</span><span style="font-family:Consolas" lang="EN-US">ns-interns </span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US"> ns-imports</span><span style="font-family:宋体">的结果</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">一般：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(require
'wr3.clj.s)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map first (<span style="background:yellow">ns-publics</span> 'wr3.clj.s)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例：取得含特定字符串的所有函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defmacro kw </span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">"</span><span style="font-family:宋体">查询含特定字符串的函数，如</span><span style="font-family:Consolas" lang="EN-US">: (kw -index)"</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">[s] </span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">`(filter #(&gt;= (.indexOf (str %) (name '~s)) 0) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(sort (keys (mapcat ns-publics
(all-ns))))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.10.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">得到</span><span lang="EN-US">ns</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的</span><span lang="EN-US">meta</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">信息</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:117.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:宋体">当前</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
  宋体">信息</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">meta</span> *ns*)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:宋体">指定</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
  宋体">信息</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (<span style="background:yellow">find-ns</span> 'clojure.core))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573081"></a><a name="_Toc281924021"></a><a name="_Toc281658859"></a><a name="_Toc281556366"></a><a name="_Toc281556266"></a><a name="_Toc281556162"></a><a name="_Toc281555960"></a><a name="_Toc281555803"><span style="font-family:Consolas" lang="EN-US">2.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">结构</span></u></a><u><span style="font-family:Consolas" lang="EN-US">defstruct</span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">（不用了）</span></u></h2>

<p class="MsoNormal"><b><span style="font-family:宋体;color:#C00000">提示：任何情况下，推荐使用</span></b><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">defrecord</span></b><b><span style="font-family:宋体;color:#C00000">替代</span></b><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">defstruct</span></b><b><span style="font-family:宋体;color:#C00000">，因为</span></b><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">struct</span></b><b><span style="font-family:宋体;color:#C00000">的写法更繁琐矫情。</span></b></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">struct</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">record</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">说明：</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">实质是一个</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">固定的</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
  宋体">，不能用</span><span style="font-family:Consolas" lang="EN-US">dissoc</span><span style="font-family:宋体">来删除已有的</span><span style="font-family:Consolas" lang="EN-US">key</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">说明：</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">实质是生成和</span><span style="font-family:Consolas" lang="EN-US">import</span><span style="font-family:
  宋体">一个含参数构造函数的新</span><span style="font-family:Consolas" lang="EN-US">class</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">定义：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defstruct
  person :name :age)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">定义：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defrecord
  person [name age])</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">初始化：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(struct
  person "qh" 30)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">初始化：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;(person.
  "qh" 30)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:name
  (struct person "qh" 30))</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:name
  (pserson. "qh" 30))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">用结构体来自定义数据结构，</span><span style="font-family:
Consolas" lang="EN-US">Java</span><span style="font-family:宋体">用类来自定义数据结构，</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">用</span><span style="font-family:Consolas" lang="EN-US">defstruct</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defstruct</span>
person :first-name :last-name) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">声明</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">struct</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def qh (<span style="background:yellow">struct</span>
person "qiu" "jj")) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">初始化</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">struct</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def jm (<span style="background:yellow">struct</span>
person "james" "qiu"))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(:first-name qh) ; "qiu" <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">访问</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">struct</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(:last-name jm) ; "qiu"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">struct-map</span>
person :age 30 :first-name "qiu") <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">初始化并新增加属性</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573082"></a><a name="_Toc281924022"></a><a name="_Toc281658860"></a><a name="_Toc281556367"></a><a name="_Toc281556267"></a><a name="_Toc281556163"></a><a name="_Toc281555961"></a><a name="_Toc281555804"><span style="font-family:Consolas" lang="EN-US">2.12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类</span></u></a><u><span style="font-family:Consolas" lang="EN-US">defrecord</span></u></h2>

<p class="MsoNormal" style="margin-left:21.2pt;text-indent:-21.2pt"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">*</span><b><span style="font-family:宋体">始终</span></b><b><span style="font-family:
Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">鼓励使用内建的数据结构</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">等，除非基于性能原因（例如频繁操作，连</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">都嫌太重），才考虑使用</span><span style="font-family:Consolas" lang="EN-US">record</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">先对比</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">record</span><span style="font-family:
宋体">：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Map</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">record</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:宋体">原生数据结构，不用定义，</span><span style="font-family:Consolas" lang="EN-US">read-string</span><span style="font-family:宋体">可直接读</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:宋体">没有类型和结构保证，需要自己保证正确性。</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">的性能和开销</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:宋体">实际是在内存中生成并</span><span style="font-family:Consolas" lang="EN-US">import</span><span style="font-family:宋体">一个新</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
  宋体">类，有带参数的构造函数。</span><span style="font-family:Consolas" lang="EN-US">(defrecord
  r [name age])</span><span style="font-family:宋体">相当于：</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">class r { </span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">public r(String name, int age) {..} }</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">所以引用</span><span style="font-family:Consolas" lang="EN-US">record<b>*</b></span><b><span style="font-family:宋体">不能</span></b><b><span style="font-family:
  Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">use</span><span style="font-family:宋体">，要用</span><span style="font-family:Consolas" lang="EN-US">import</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:宋体">需要先定义再使用</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
  </span></span><span style="font-family:宋体">可使用原始类型，性能更好（创建更快、内存更少、存取</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:
  宋体">更快）</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def stu
  {:fname "james" :lname "qiu"</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  :address {:city "beijing" :zip 1001}})</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defrecord
  Stu [fname lname address])</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defrecord Address
  [city zip])</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def stu
  (Stu. "james" "qiu" </span></p>
  <p class="MsoNormal" style="text-indent:89.25pt"><span style="font-family:Consolas" lang="EN-US">(Address. "beijing" 1001)))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:lname stu)
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; stu
  :address :zip)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:lname stu)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; stu
  :address :city)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(assoc stu
  :fname "jj")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(update-in
  stu [:address :zip] inc)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(assoc stu
  :fname "jj")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(update-in
  stu [:address :zip] inc)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">总结：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">可以自由定义格式，</span><span style="font-family:
Consolas" lang="EN-US">record</span><span style="font-family:宋体">给数据结构限定了一个格式，避免不一致引起的难以发现的</span><span style="font-family:Consolas" lang="EN-US">bug</span><span style="font-family:
宋体">；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">record</span><span style="font-family:宋体">可以有方法（直接定义或者</span><span style="font-family:
Consolas" lang="EN-US">extend-type</span><span style="font-family:宋体">）；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">defrecord</span><span style="font-family:宋体">定义</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中类似</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的类，和</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">结合便于被</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">调用。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defrecord</span> person [name age])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def p1 (<span style="background:yellow">new</span> <span style="background:yellow">person</span>
"qh" 20)) ; </span><span style="font-family:宋体">形式</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def p2 (<span style="background:yellow">person.</span> "james" 30)) ; </span><span style="font-family:宋体">形式</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:name p1) ;
"qh"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(:age p2) ; 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span> p1 :name "qiu") <span style="color:#5B6E6E">; #:user.person{:name "qiu", :age 20}&nbsp; </span></span><span style="font-family:宋体;color:#5B6E6E">但</span><span style="font-family:
Consolas;color:#5B6E6E" lang="EN-US">p1</span><span style="font-family:宋体;color:#5B6E6E">没有改变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dissoc</span> p1 :name) ; <span style="color:#5B6E6E">{:age
20} p1</span></span><span style="font-family:宋体;color:#5B6E6E">也没有改变，返回新</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">person</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.12.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">结合</span><span lang="EN-US">protocol</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span></p>

<p class="MsoNormal"><span style="font-family:宋体">语法如下：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defrecord recode-name [fields...] </span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<b> Protocol-A </b></span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:22.5pt"><span style="font-family:Consolas" lang="EN-US">(method-1 [args] ... method body ...) </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:22.5pt"><span style="font-family:Consolas" lang="EN-US">(method-2 [args] ... method body ...) </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.55pt"><b><span style="font-family:Consolas" lang="EN-US">Protocol-B </span></b></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (method-3 [args] ... method body
...))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：给</span><span style="font-family:Consolas" lang="EN-US">person</span><span style="font-family:宋体">类增加</span><span style="font-family:Consolas" lang="EN-US">father</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">employer</span><span style="font-family:宋体">接口</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defprotocol</span>
<b>father</b> (<i><u>upgrade</u></i> [o]))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defprotocol</span>
<b>employer</b> (<i><u>info</u></i> [o]))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defrecord</span> <span style="color:#0000CC">person</span> [name age y c]</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.55pt"><b><span style="font-family:Consolas" lang="EN-US">father</span></b><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<i><u>upgrade</u></i> [o] (str
"become father at " (:y o))))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-type</span>
<span style="color:#0000CC">person</span> </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><b><span style="font-family:Consolas" lang="EN-US">employer</span></b><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<i><u>info</u></i> [o] (str "work
at " (:c o))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">类</span><span style="font-family:Consolas" lang="EN-US">person</span><span style="font-family:宋体">的实例化对象具备实现的接口函数：</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def qh (<span style="color:#0000CC;background:
yellow">person</span><span style="background:yellow">.</span> "qh" 35
2010 "nasoft"))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<i><u>upgrade</u></i> qh) ; "become father
at 2010"</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<i><u>info</u></i> qh) ; "work at
nasoft"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.12.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">实现</span><span lang="EN-US">Java</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">接口</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如实现</span><span style="font-family:Consolas" lang="EN-US">Comparable</span><span style="font-family:宋体">接口来进行</span><span style="font-family:Consolas" lang="EN-US">person</span><span style="font-family:
宋体">的比较</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defrecord
person [name age]</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas;background:lime" lang="EN-US">java.lang.Comparable</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">compareTo</span>
[<b><u>this</u></b> other] (compare (:age <b><u>this</u></b>) (:age other))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(compare
(person. "qh" 20) (person. "james" 30))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort
[(person. "a" 32) (person. "b" 35) (person. "c"
30)])</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.12.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">更轻量级的</span><span lang="EN-US">deftype</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">defrecord</span><span style="font-family:宋体">的数据结构实现了</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">的所有方法和行为，如果不需要任何方法的实现，可以使用</span><span style="font-family:Consolas" lang="EN-US">deftype</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">deftype</span> <b>Ia</b>
[i] &nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><b><u><span style="font-family:Consolas" lang="EN-US">clojure.lang.ISeq </span></u></b></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:lime">seq </span>[this]
(lazy-seq (cons (* 2 i) (<span style="background:lime">seq </span>this)))))</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(take 3 (<b>Ia</b>. 4)) <span style="color:#7F7F7F">;
(8 8 8)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：把</span><span style="font-family:Consolas" lang="EN-US">deftype</span><span style="font-family:宋体">换成</span><span style="font-family:Consolas" lang="EN-US">defrecord</span><span style="font-family:
宋体">会报错，因为</span><span style="font-family:Consolas" lang="EN-US">record</span><span style="font-family:宋体">已经实现了</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">方法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(deftype
Person [name sex age])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def p1
(Person. "qh" :m 30)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.age p1) ; 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(class p1) ;
user.Person</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573083"></a><a name="_接口defprotocol"></a><span style="font-family:Consolas" lang="EN-US">2.13<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">接口</span></u><u><span style="font-family:Consolas" lang="EN-US">defprotocol</span></u><u><span style="font-family:Consolas" lang="EN-US"> </span></u></h2>

<p class="MsoNormal" style="margin-left:21.2pt;text-indent:-21.2pt"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">Clojure
1.2</span><span style="font-family:宋体">新增加的功能，主要用于对已有的</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">类、接口进行扩展；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">是函数的集合，</span><b><span style="font-family:
Consolas" lang="EN-US">*</span></b><b><span style="font-family:宋体">类似</span></b><b><span style="font-family:Consolas" lang="EN-US">*</span></b><span style="font-family:
宋体">但不同且优于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的接口；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">只对指定的数据</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">对象类型生效；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">可以使得同一个函数名对于不同的数据类型有不同的行为，从而实现多态（比</span><span style="font-family:Consolas" lang="EN-US">defmulti</span><span style="font-family:
宋体">简单高效，但更复杂的情况还是需要</span><span style="font-family:Consolas" lang="EN-US">defmulti</span><span style="font-family:宋体">）。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">中的函数</span><b><span style="font-family:Consolas" lang="EN-US">*</span></b><b><span style="font-family:宋体">至少</span></b><b><span style="font-family:
Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">有一个参数，这第一个参数无论如何命名，都相当于</span><span style="font-family:Consolas" lang="EN-US">Java/Python</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">this/self</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr style="height:34.0pt">
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">已有的</span><span style="font-family:Consolas" lang="EN-US">Interfaces</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">自定义</span></b><b><span style="font-family:
  Consolas" lang="EN-US">Interfaces</span></b></p>
  </td>
 </tr>
 <tr style="height:34.0pt">
  <td style="border:solid windowtext 1.0pt;border-top:none;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">已有的</span><span style="font-family:Consolas" lang="EN-US">Types</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:宋体">已有的方法实现</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:yellow;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr style="height:34.0pt">
  <td style="border:solid windowtext 1.0pt;border-top:none;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">自定义</span></b><b><span style="font-family:
  Consolas" lang="EN-US">Types</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:yellow;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#92D050;padding:0cm 5.4pt 0cm 5.4pt;
  height:34.0pt">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子，使</span><span style="font-family:Consolas" lang="EN-US">person</span><span style="font-family:宋体">类型具有</span><span style="font-family:Consolas" lang="EN-US">father</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">employer</span><span style="font-family:宋体">两个接口</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defprotocol</span>
<b>father</b> (<i><u>upgrade</u></i> [o]))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defprotocol</span>
<b>employer</b> (<i><u>info</u></i> [o]))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">clojure.java.io</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US"><a href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/java/io.clj" target="_blank" rel="external">https://github.com/clojure/clojure/blob/master/src/clj/clojure/java/io.clj</a></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：变</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">倍的接口</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defprotocol</span>
Ifoo </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<b><i>trible</i></b> [s] "</span><span style="font-family:宋体">可选的说明</span><span style="font-family:Consolas" lang="EN-US">..."))
<span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;
color:#7F7F7F">可以有多个方法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">对</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">nil String Integer</span><span style="font-family:宋体;color:#7F7F7F">类型进行实现</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-protocol</span>
Ifoo</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">nil (<b><i>trible</i></b> [_] nil)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">String (<b><i>trible</i></b> [s] (str s
s s))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Integer (<b><i>trible</i></b> [i] (* 3
i)))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<b><i>trible</i></b> "ab") <span style="color:#7F7F7F">; "ababab"</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<b><i>trible</i></b> 5) <span style="color:#7F7F7F">; 15</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<b><i>trible</i></b> 2.1) </span><span style="font-size:8.0pt;font-family:Consolas;color:#C00000" lang="EN-US">; java.lang.IllegalArgumentException:
No implementation of method: </span></p>

<p class="MsoNormal" style="margin-left:84.0pt;text-indent:21.0pt"><span style="font-size:8.0pt;font-family:Consolas;color:#C00000" lang="EN-US">:<b><i>trible</i></b>
of protocol: #'user/Ifoo found for class: java.lang.Double (NO_SOURCE_FILE:0)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">; </span><span style="font-family:
宋体;color:#7F7F7F">对</span><span style="font-family:Consolas;
color:#7F7F7F" lang="EN-US">Double</span><span style="font-family:宋体;color:#7F7F7F">类型进行实现</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-protocol</span>
Ifoo</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Double (<b><i>trible</i></b> [d] (str
"3*" d)))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<b><i>trible</i></b> 2.1) <span style="color:#7F7F7F">; "3*2.1"</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:宋体">注：有些时候，</span><span style="font-family:Consolas" lang="EN-US">defprotocol</span><span style="font-family:宋体">比</span><span style="font-family:Consolas" lang="EN-US"><a href="#_defmutil_%BA%AF%CA%FD%C3%FB%D6%D8%D4%D8">defmulti</a></span><span style="font-family:宋体">的写法更直观易读。</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.13.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">给现有类型增加接口</span><span lang="EN-US">protocol</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以扩展</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">来支持多种类型；也可以扩展一个类型实现多个</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defprotocol <b>P1</b> (f1 [a] ".."))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defrecord <b>R1</b> [s] P1 (f1 [o] (str "R1:
" (:s o))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 (R1. "hello"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 "hello") <span style="color:#C00000">;
</span></span><span style="font-family:宋体;color:#C00000">报错</span></p>

<p class="MsoNormal"><span style="font-family:宋体">为</span><span style="font-family:Consolas" lang="EN-US">f1</span><span style="font-family:宋体">函数参数增加</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:
宋体">类型和</span><span style="font-family:Consolas" lang="EN-US">string</span><span style="font-family:宋体">类型（注意：</span><span style="font-family:Consolas" lang="EN-US">P1</span><span style="font-family:宋体">放在前面）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-protocol</span>
P1 </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">nil</span>&nbsp;&nbsp;&nbsp;
(f1 [s] nil) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">String</span>
(f1 [s] (str "f1: " s)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 "hello") ; "f1: hello"</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以使用</span><span style="font-family:Consolas" lang="EN-US">extend-type</span><span style="font-family:宋体">实现同样的效果（注意：</span><span style="font-family:Consolas" lang="EN-US">P1</span><span style="font-family:宋体">放在后面）：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-type</span>
String </span></p>

<p class="MsoNormal" style="margin-left:20.8pt;text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">P1 (f1 [s] s))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f1 "hello") ; "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">extend-type</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">extend-protocol</span><span style="font-family:宋体">的区别：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:106.4pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="142">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">extend-type</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用同一<span style="background:
  yellow">数据类型</span>实现多个<span style="background:aqua">协议</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(extend-type
  <span style="background:yellow">R1</span></span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas;background:aqua" lang="EN-US">P1</span><span style="font-family:Consolas" lang="EN-US"> (f1 [s] s)</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas;background:aqua" lang="EN-US">P2</span><span style="font-family:Consolas" lang="EN-US"> (f2 [s] s))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:106.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="142">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">extend-protocol</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用多个<span style="background:
  yellow">数据类型</span>实现同一<span style="background:aqua">协议</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(extend-protocol
  <span style="background:aqua">P1</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">String</span> (f1 [s] s)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;<span style="background:yellow">Integer</span> (f1 [i] i))</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">换个说法，同一个函数名可以用于不同类型，例如</span><span style="font-family:Consolas" lang="EN-US">cat</span><span style="font-family:
宋体">函数用于</span><span style="font-family:Consolas" lang="EN-US">string</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Number</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defprotocol <span style="background:yellow">p1 </span>(<b><u>cat</u></b>
[a b] nil))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(extend-protocol <span style="background:yellow">p1
</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">String (<b><u>cat</u></b> [a b] (apply
str (concat a b)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">java.util.List (<b><u>cat</u></b> [a b]
(concat a b))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Number (<b><u>cat</u></b> [a b]
(BigInteger. (str a b)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<b><u>cat</u></b> "hello"
"world") ; <span style="color:#5B6E6E">"helloworld"</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<b><u>cat</u></b> [1 3 5] [7 9]) ; <span style="color:#5B6E6E">(1 3 5 7 9)</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<b><u>cat</u></b> 10 24) ; <span style="color:#5B6E6E">1024</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">2.13.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">具体化</span><span lang="EN-US">reify</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">reify</span><span style="font-family:宋体">只能实现接口</span><span style="font-family:Consolas" lang="EN-US">Interface</span><span style="font-family:宋体">的虚方法；</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">proxy</span><span style="font-family:宋体">可以实现接口的虚方法及覆盖类的方法；</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">一般用</span><span style="font-family:Consolas" lang="EN-US">reify</span><span style="font-family:宋体">，除非要覆盖类方法；</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="#_proxy_%CA%B5%CF%D6%BD%D3%BF%DA"><span style="font-family:宋体" lang="EN-US"><span lang="EN-US">参见</span></span>proxy</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defprotocol P1 (f1 [a] ".."))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def thing (let [v 10] (<span style="background:
yellow">reify</span> P1 (f1 [this] v)))) <span style="color:#7F7F7F">; thing </span></span><span style="font-family:宋体;color:#7F7F7F">是一个实现了</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">P1</span><span style="font-family:
宋体;color:#7F7F7F">的对象</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 thing) ; 10</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：实现</span><i><u><span style="font-family:Consolas" lang="EN-US">java.lang.Object</span></u></i><span style="font-family:宋体">接口的</span><span style="font-family:Consolas" lang="EN-US">toString</span><span style="font-family:宋体">方法</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def String2
(let [s "hello world"] </span></p>

<p class="MsoNormal" style="margin-left:84.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reify</span>
<i><u>java.lang.Object</u></i> (toString [this] (.toUpperCase s)))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(str String2) <span style="color:#7F7F7F">; "HELLO WORLD"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281924023"></a><a name="_Toc281658861"></a><a name="_Toc281556368"></a><a name="_Toc281556268"></a><a name="_Toc281556164"></a><a name="_Toc281555962"></a><a name="_Toc281555805"></a><a name="_Toc339573084"><span style="font-family:Consolas" lang="EN-US">2.14<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">对比</span></u></a><u><span style="font-family:Consolas" lang="EN-US">record</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">protocol</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">proxy</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">defmulti</span></u></h2>

<table class="MsoNormalTable" style="width:100.0%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="100%">
 <tbody><tr>
  <td style="width:19.38%;border:solid windowtext 1.0pt;
  background:#DBE1E1;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="19%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">语法</span></b></p>
  </td>
  <td style="width:80.62%;border:solid windowtext 1.0pt;
  border-left:none;background:#DBE1E1;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:19.38%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="19%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Record</span></p>
  </td>
  <td style="width:80.62%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80%">
  <p class="MsoNormal"><b><span style="font-family:宋体">简述：</span></b><span style="font-family:宋体">用于自定义数据类型</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">用法：</span><span style="font-family:Consolas" lang="EN-US">defrecord</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">extend-type</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">extend-protocol</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">定义</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">(</span></b><span style="font-family:Consolas;background:yellow" lang="EN-US">defrecord</span><span style="font-family:Consolas" lang="EN-US"> person [name age] </span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<b> IHome </b></span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:22.5pt"><span style="font-family:Consolas" lang="EN-US">(son [this n] (format "%s has %s
  sons" (:name this) n)) </span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:22.5pt"><span style="font-family:Consolas" lang="EN-US">(wife [this s] (str "has wife
  " s))<b><span style="color:#C00000">)</span></b></span></p>
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  color:#C00000" lang="EN-US">&nbsp; </span></b><span style="font-family:Consolas;
  color:#7F7F7F" lang="EN-US">; </span><span style="font-family:宋体;color:#7F7F7F">使用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;</span><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">&nbsp;</span></b><span style="font-family:Consolas" lang="EN-US">(def p1<span style="color:#C00000"> <b>(</b></span>person.
  "qh" 30<b><span style="color:#C00000">)</span></b>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;
  ; </span><span style="font-family:宋体;color:#C0504D">可配合</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">protocol</span><span style="font-family:宋体;color:#C0504D">为</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">record</span><span style="font-family:宋体;color:#C0504D">增加多个该类型的函数操作</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">extend-type</span> person</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.55pt"><b><span style="font-family:Consolas" lang="EN-US">IWork </span></b></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (address [this email tel] (format
  "email: %s (%s)" email tel)))</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-protocol</span>
  IWork</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; person ...)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:19.38%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="19%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">protocol</span></p>
  </td>
  <td style="width:80.62%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80%">
  <p class="MsoNormal"><b><span style="font-family:宋体">简述：</span></b><span style="font-family:宋体">拓展自定义</span><span style="font-family:Consolas" lang="EN-US">record</span><span style="font-family:宋体">或内部数据结构的虚函数集合</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">用法：</span><span style="font-family:Consolas" lang="EN-US">defprotocol</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">extend-protocol</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">reify</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <b><span style="color:#C00000">(</span></b><span style="background:yellow">defprotocol</span>
  <b>IHome</b> </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(son [this n])</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(wife [this s])<b><span style="color:#C00000">)</span></b></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <b><span style="color:#C00000">(</span></b><span style="background:yellow">defprotocol</span>
  <b>IWork</b></span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(address [this email tel])<b><span style="color:#C00000">)</span></b> </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <b><span style="color:#C00000">(</span></b><span style="background:yellow">defprotocol</span>
  <b>ISchool</b></span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(score [this d])<b><span style="color:#C00000">)</span></b>
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <b><span style="color:#C00000">(</span></b><span style="background:lime">defrecord</span>
  person [name age] )</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="color:#C0504D">; </span></span><span style="font-family:宋体;color:#C0504D">为多个类型增加</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">1</span><span style="font-family:宋体;color:#C0504D">个</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">protocol</span></p>
  <p class="MsoNormal" style="text-indent:10.55pt"><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">(</span></b><span style="font-family:Consolas;background:yellow" lang="EN-US">extend-protocol</span><span style="font-family:Consolas" lang="EN-US"> <b>ISchool</b></span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">person</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(score [this d]&nbsp; (format "%s got
  %s" (:name this) d))</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">String</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(score [this s] (str this s) )<b><span style="color:#C00000">)</span></b></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;
  ; </span><span style="font-family:宋体;color:#C0504D">为一个类型增加多个</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">protocol</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">extend-type</span>
  person</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.55pt"><b><span style="font-family:Consolas" lang="EN-US">IWork </span></b></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (address [this email tel] (format
  "email: %s (%s)" email tel))</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><b><span style="font-family:Consolas" lang="EN-US">IHome</span></b></p>
  <p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(son [this n] (format "%s has %s sons"
  (:name this) n)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;
  ; </span><span style="font-family:宋体;color:#7F7F7F">调用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;</span><b><span style="font-family:Consolas;color:#C00000" lang="EN-US">&nbsp;</span></b><span style="font-family:Consolas" lang="EN-US">(def p1<span style="color:#C00000"> <b>(</b></span>person.
  "qh" 30<b><span style="color:#C00000">)</span></b>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  (score p1 85)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:19.38%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="19%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Proxy</span></p>
  </td>
  <td style="width:80.62%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80%">
  <p class="MsoNormal"><b><span style="font-family:宋体">简述：</span></b><span style="font-family:宋体">用于实现</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的接口</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">用法：</span><span style="font-family:Consolas" lang="EN-US">proxy</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def c1 (<span style="background:yellow">proxy</span>
  <span style="color:#C00000">[<b>Runnable</b>]</span> <span style="color:#7030A0">[]
  </span>(<b><span style="color:#0033CC">run</span></b> [] (println
  "hello"))))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  (.start (Thread. c1))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">//------------
  </span><span style="font-family:宋体">对应于</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的：</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">Class t1 implements <b><span style="color:#C00000">Runnable</span></b>
  {</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">public void <b><span style="color:#0033CC">run</span></b>()
  { println "hello" }}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; new
  Thead(new c1()).start()</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:19.38%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="19%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">defmulti</span></p>
  </td>
  <td style="width:80.62%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80%">
  <p class="MsoNormal"><b><span style="font-family:宋体">简述：</span></b><span style="font-family:宋体">用于</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">复杂</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">的函数名重载</span><span style="font-family:Consolas" lang="EN-US">dispatch</span><span style="font-family:宋体">（注：可以用</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">替代的简单</span><span style="font-family:Consolas" lang="EN-US">dispatch</span><span style="font-family:宋体">尽量用</span><span style="font-family:Consolas" lang="EN-US">protocol</span><span style="font-family:宋体">，因为速度更快。）</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">用法：</span><span style="font-family:Consolas" lang="EN-US">defmulti</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmulti</span>
  f1 <u>class</u>)</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
  f1 <b>Integer</b> [x] (double x))</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
  f1 <b>Double</b> [x] (int x))</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
  f1 <span style="background:yellow">:default</span> [x] "unknown")</span></p>
  <p class="MsoNormal"><a href="#_defmutil_%BA%AF%CA%FD%C3%FB%D6%D8%D4%D8"><span style="font-family:宋体">参见后面</span></a></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573085"><span style="font-family:Consolas" lang="EN-US">2.15<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">-&gt;</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u><u><span style="font-family:Consolas" lang="EN-US">-&gt;&gt;</span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></u></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:42.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="57">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt;</span></p>
  </td>
  <td style="width:397.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="530">
  <p class="MsoNormal"><span style="font-family:宋体">后面的函数迭代使用之前的函数结果作为<b><u>第一个</u></b>参数，返回最后一次函数调用的值</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:42.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="57">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt;&gt;</span></p>
  </td>
  <td style="width:397.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="530">
  <p class="MsoNormal"><span style="font-family:宋体">后面的函数迭代使用之前的函数结果作为<b><u>最后一个</u></b>参数，返回最后一次函数调用的值</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:42.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="57">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">doto</span></p>
  </td>
  <td style="width:397.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="530">
  <p class="MsoNormal"><span style="font-family:宋体">所有的函数始终用最初的那个对象值，最后还是返回最初的那个对象</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：组合使用</span><span style="font-family:Consolas" lang="EN-US"> -&gt; </span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US"> -&gt;&gt; </span><span style="font-family:宋体">可以满足参数一会在前一会在后的情况；再特殊的情况即参数在中间，可采用匿名函数包一下。</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span> <i><u>(Math/sqrt 25)</u></i> int list)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(list (int <i><u>(Math/sqrt
25)</u></i>))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">好处在于：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">接近于</span><span style="font-family:Consolas" lang="EN-US">(Math/sqrt 25).int.list</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">调用习惯</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">更少的</span><span style="font-family:Consolas" lang="EN-US">((()))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">doto</span> <i><u>(Math/sqrt 25)</u></i> int list)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [o
(Math/sqrt 25)] (int o) (list o) o)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">所以</span><span style="font-family:Consolas" lang="EN-US">doto</span><span style="font-family:宋体">适用于</span><span style="font-family:Consolas" lang="EN-US">o</span><span style="font-family:宋体">是可变对象的情况：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doto
(java.util.HashMap.) (.put 1 100) (.put 2 200))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [o
(java.util.HashMap.)] (.put o 1 100) (.put o 2 200) o)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">当然也可以用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(java.util.HashMap.
{1 100 2 200})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; (/ 144
12) (/ 2 3) str keyword list) ; (:2)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; (/ 144
12) (/ ,,, 2 3) str keyword list)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(list (keyword
(str (/ <span style="background:yellow">(/ 144 12)</span> 2 3)))) ; </span><span style="font-family:宋体">第一个结果</span><span style="font-family:Consolas" lang="EN-US">(/
144 12)</span><span style="font-family:宋体">是作为后面函数的<b><u>第一个参数</u></b></span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US"><span style="text-decoration:none">&nbsp;</span></span></u></b></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def m
{:address {:city 'beijing :state 'china}})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; m
:address :state) ; 'china</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">-&gt;</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">-&gt;&gt;</span><span style="font-family:
宋体">的区别</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-&gt; 10 (/ 3)) ; 10/3&nbsp; 10</span><span style="font-family:宋体">作为</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">函数第一个参数</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-&gt;&gt; 10 (/ 3)) ; 3/10&nbsp; 10</span><span style="font-family:宋体">作为</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">函数最后一个参数</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：组合使用</span><span style="font-family:Consolas" lang="EN-US"> -&gt; </span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US"> -&gt;&gt;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span> [1 2
3] </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(concat [4]) </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;&gt;</span>
(concat [0])) </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(concat [5]))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ;
(0 1 2 3 4 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：组合使用</span><span style="font-family:Consolas" lang="EN-US"> -&gt; </span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US"> -&gt;&gt;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span>
"20000001" </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (split "") reverse (join
"")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">-&gt;&gt;</span>
(re-seq #"\d{3}|\d+$") (map #(-&gt; % (split "") reverse
(join "")))) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; reverse </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (join " "))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">; "20 000 001"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果碰到参数既不在最前也不在最后位置的情况，采用匿名函数</span><span style="font-family:Consolas" lang="EN-US">fn</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">#</span><span style="font-family:宋体">解决：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：组合</span><span style="font-family:Consolas" lang="EN-US">-&gt;</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">-&gt;&gt;</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">fn</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span> [1 2
3] </span></p>

<p class="MsoNormal" style="text-indent:26.25pt"><span style="font-family:Consolas" lang="EN-US">(concat [4]) </span></p>

<p class="MsoNormal" style="text-indent:26.25pt"><span style="font-family:Consolas;background:lime" lang="EN-US">(</span><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fn</span> [e]
(concat [0] <span style="background:aqua">e</span> [5]))<span style="background:
lime">)</span> )</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span> [1 2
3] </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(concat [4]) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas;background:lime" lang="EN-US">(</span><span style="font-family:Consolas;background:yellow" lang="EN-US">#</span><span style="font-family:Consolas" lang="EN-US">(concat [0] <span style="background:
aqua">%</span> [5])<span style="background:lime">)</span> )</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573086"><span style="font-family:Consolas" lang="EN-US">2.16<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">编码命名规范</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://dev.clojure.org/display/design/Library+Coding+Standards" target="_blank" rel="external">http://dev.clojure.org/display/design/Library+Coding+Standards</a></span></p>

<table class="MsoNormalTable" style="width:454.35pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="606">
 <tbody><tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">规范</span></b></p>
  </td>
  <td style="width:392.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">命名</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">包名：和文件名相同的小写</span><span style="font-family:Consolas" lang="EN-US"> wr3/clj/util.clj</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">函数名：</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">分隔的小写</span><span style="font-family:Consolas" lang="EN-US"> make-array</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">变量名：</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">分隔的小写</span><span style="font-family:Consolas"> </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">常用名</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">f,g,h </span><span style="font-family:宋体">如果传入的参数是函数</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n </span><span style="font-family:宋体">一般表示</span><span style="font-family:Consolas" lang="EN-US">size</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">index </span><span style="font-family:宋体">序号</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">x,y </span><span style="font-family:宋体">数字</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">s </span><span style="font-family:宋体">字符串</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">coll </span><span style="font-family:宋体">集合</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">pred </span><span style="font-family:宋体">条件表达式</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&amp; more </span><span style="font-family:宋体">不定长参数</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">expr </span><span style="font-family:宋体">宏中的表达式</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">body </span><span style="font-family:宋体">宏的执行体</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">binding </span><span style="font-family:宋体">宏的绑定表达式</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">粒度</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">尽量细颗粒化，</span><span style="font-family:Consolas" lang="EN-US">(source doseq)</span><span style="font-family:宋体">看到的函数代码长度是极限了。</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">当然，配置文件和</span><span style="font-family:Consolas" lang="EN-US">hiccup</span><span style="font-family:
  宋体">生成</span><span style="font-family:Consolas" lang="EN-US">html</span><span style="font-family:宋体">的代码除外</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">私有</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">如下写法可以存取到私有函数，例如在测试中</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">@#'some.ns/var</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">@#'clojure.core/assert-args</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hint</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">只有经测试</span><span style="font-family:Consolas" lang="EN-US">type hint</span><span style="font-family:宋体">确实有用时，才去使用</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:宋体">命名冲突</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">如果名字够好，尽量去用，不要怕冲突，</span><span style="font-family:Consolas" lang="EN-US">namespace</span><span style="font-family:宋体">以及</span><span style="font-family:Consolas" lang="EN-US">:only</span><span style="font-family:宋体">等可以解决问题</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">use</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">require</span><span style="font-family:
  宋体">中尽量多使用</span><span style="font-family:Consolas" lang="EN-US">:only</span><span style="font-family:宋体">可以避免名字冲突，实在不行还有</span><span style="font-family:Consolas" lang="EN-US">alias</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">boolean</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">返回</span><span style="font-family:Consolas" lang="EN-US">true/false</span><span style="font-family:宋体">的函数或者</span><span style="font-family:Consolas" lang="EN-US">boolean</span><span style="font-family:
  宋体">变量都用形如</span><span style="font-family:Consolas" lang="EN-US"> map<span style="background:yellow">?</span>, has<span style="background:yellow">?</span></span><span style="font-family:宋体">的名字</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="82">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rebinding</span></p>
  </td>
  <td style="width:392.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="523">
  <p class="MsoNormal"><span style="font-family:宋体">如果该值会被重新</span><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:
  宋体">，就用两个</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">包围，如</span><span style="font-family:Consolas" lang="EN-US">*foo*</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573087"></a><a name="_Toc281924024"></a><a name="_Toc281658862"></a><a name="_Toc281556369"></a><a name="_Toc281556269"></a><a name="_Toc281556165"></a><a name="_Toc281555963"></a><a name="_Toc281555806"><span style="font-family:Consolas" lang="EN-US">3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">coll</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数据结构</span></u></h1>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:42.15pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="56">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">List</span></p>
  </td>
  <td style="width:250.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="334">
  <p class="MsoNormal"><span style="font-family:宋体">单向链表，在头部增加新元素，压栈式</span></p>
  </td>
  <td style="width:248.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="332">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'(1 2 3)
  (list 1 2 3) ()</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="56">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Vect</span></p>
  </td>
  <td style="width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="334">
  <p class="MsoNormal"><span style="font-family:宋体">数组，下标存取，在尾部增加新元素</span></p>
  </td>
  <td style="width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="332">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3] []</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="56">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Map</span></p>
  </td>
  <td style="width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="334">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-</span></p>
  </td>
  <td style="width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="332">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:a 1 :b 2
  :c 3} {1 "aa" 2 "bb"} {}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="56">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Set</span></p>
  </td>
  <td style="width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="334">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-</span></p>
  </td>
  <td style="width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="332">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#{1 2 3} #{}</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573088"></a><a name="_Toc281924025"></a><a name="_Toc281658863"></a><a name="_Toc281556370"></a><a name="_Toc281556270"></a><a name="_Toc281556166"></a><a name="_Toc281555964"></a><a name="_Toc281555807"><span style="font-family:Consolas" lang="EN-US">3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">List</span></u></a></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(list 1 2 3)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(quote (1 2 3))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简写成：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">'(</span><span style="font-family:Consolas" lang="EN-US">1 2 3<span style="background:yellow">)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是</span><span style="font-family:Consolas" lang="EN-US">symbol</span><span style="font-family:宋体">而不是数字或者字符串等，必须用</span><span style="font-family:Consolas" lang="EN-US">'</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">'</span><span style="font-family:Consolas" lang="EN-US">(a b c d)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(quote (a b c d))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(list a b c) ; </span><span style="font-family:
宋体;color:red">报错</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">range</span><span style="font-family:宋体">函数生成</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(range 10) ; (0 1 2 3 4 5 6 7 8 9)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(range 1 10) ; (1 2 3 4 5 6 7 8 9)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(range 1 10 2) ; (1 3 5 7 9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">repeat</span><span style="font-family:宋体">函数生成相同元素的</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(repeat 5 1) ; (1 1 1 1 1)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(repeat 0 1) ; ()</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str (repeat 10 "*")) ; "**********"</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">List</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本操作</span></p>

<table class="MsoNormalTable" style="width:96.5%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="96%">
 <tbody><tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">CRUD</span></b><b><span style="font-family:宋体">操作</span></b></p>
  </td>
  <td style="width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">R</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">读取</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">first </span>'(2
  4 6 8)) ; 2</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">second </span>'(2
  4 6 8)) ; 4</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">last </span>'(2
  4 6 8)) ; 8</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">更通用的函数：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">nth</span> '(2
  4 6 8) 0) ; 2</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rest</span> '(2
  4 6 8)) ; '(4 6 8)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">butlast</span>
  '(2 4 6 8)) ; (2 4 6)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">next</span> '(2
  4 6 8)) ; '(4 6 8) </span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">nnext</span>
  '(2 4 6 8)) ; '(6 8) </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">(next (next ..))</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">nthnext</span>
  [2 4 6 8 10] 3) ; (8 10) </span><span style="font-family:宋体">取第</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:
  宋体">个及以后元素</span><span style="font-family:Consolas" lang="EN-US">&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rest</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">next</span><span style="font-family:宋体">大致相同，不同如下：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">rest</span>
  '(3)) ; ()</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">next</span>
  '(3)) ; nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">CU</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">增加或者修改</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">加入元素（只能在前面，与</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
  宋体">不用）：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">cons</span> 9
  l) ; '(9 2 4 6 8) </span><span style="font-family:宋体">结果同下</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span> l
  9) ; '(9 2 4 6 8) </span><span style="font-family:宋体">结果同上，</span><span style="font-family:Consolas"> <span style="background:yellow" lang="EN-US">conj</span><span lang="EN-US">oin</span></span></p>
  <p class="MsoNormal"><span style="font-family:宋体">如果一定要加一个元素到最后，就先把这个元素也变成单个元素的</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
  宋体">后用</span><span style="font-family:Consolas" lang="EN-US">concat</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">concat</span>
  '(1 2 3) (<span style="background:yellow">list</span> <b>4</b>)) ; (1 2 3 <b>4</b>)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">在前面加入多个元素：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">list*</span> 1
  2 3 [4 5 6]) ; (1 2 3 4 5 6) </span><span style="font-family:宋体">把前面的元素都当成元素</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:
  宋体">最后一个当成</span><span style="font-family:Consolas" lang="EN-US">List</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">apply list</span>
  1 2 3 [4 5 6]) ; </span></p>
  <p class="MsoNormal"><span style="font-family:宋体">合并</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
  宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">concat</span>
  '(9 7) l) ; (9 7 2 4 6 8) </span><span style="font-family:宋体">可</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:
  宋体">至多个</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> '(<u>9
  7</u>) '(2 4 6 8)) ; </span><span style="font-family:宋体">把后一个</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
  宋体">的元素逐个压栈到另一个</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">(8
  6 4 2 <u>9 7</u>)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US">[]:</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(concat [9 7] [2 4 6 8]) ; <span style="background:yellow">(</span>9 7 2 4 6 8<span style="background:yellow">)</span></span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(into&nbsp;&nbsp; [9 7] [2 4 6 8]) ; <span style="background:yellow">[</span>9 7 2 4 6 8<span style="background:yellow">]</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">D</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">删除</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">remove</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:
  宋体">或者</span><span style="font-family:Consolas" lang="EN-US">take-while, drop-while</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(remove #(&gt;= % 7) '(9 7 2 4 6 8))</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(filter #(&lt; % 7) '(9 7 2 4 6 8)) ; (2 4 6)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(conj nil 6) ;
'(6)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">java.util.List</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">互转</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:105.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="141">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java.util.List
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt;
  Clojure list</span></p>
  </td>
  <td style="width:383.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="511">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def l (doto
  (java.util.ArrayList.) (.add 1) (.add 3) (.add 5))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply list
  l) </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US"> (concat () l)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:105.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="141">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure
  list&nbsp;&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt;
  java.util.List</span></p>
  </td>
  <td style="width:383.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="511">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(java.util.ArrayList.
  '(1 3 5))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573089"></a><a name="_Toc281924026"></a><a name="_Toc281658864"></a><a name="_Toc281556371"></a><a name="_Toc281556271"></a><a name="_Toc281556167"></a><a name="_Toc281555965"></a><a name="_Toc281555808"><span style="font-family:Consolas" lang="EN-US">3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Vector</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">区别</span><span lang="EN-US">vec</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">vector</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">vec: </span><span style="font-family:宋体">把其他</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:
  宋体">转为</span><span style="font-family:Consolas" lang="EN-US">vector</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">：用不定长参数构建新</span><span style="font-family:Consolas" lang="EN-US">vector</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vec '(1 2
  3))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vec
  "hello") ; [\h \e \l \l \o]</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector 1 2
  3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector
  "hello") ; ["hello"]</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (vector
1 3 5 7)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">[</span>1 3 5 7<span style="background:yellow">]</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是</span><span style="font-family:Consolas" lang="EN-US">symbol</span><span style="font-family:宋体">，必须加</span><span style="font-family:Consolas" lang="EN-US">'</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">'</span>[a b c d]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">quote</span> [a b c d])</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">Vector</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本操作</span></p>

<table class="MsoNormalTable" style="width:96.5%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="96%">
 <tbody><tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">CRUD</span></b><b><span style="font-family:宋体">操作</span></b></p>
  </td>
  <td style="width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">C</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">创建</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3 4 5]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(into
  (vector-of :int) [3.14 2 5 0.1]) ; [3 2 5 0]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(into
  (vector-of :char) (range 65 91)) ; [\A \B .. \Z]</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">和如下结果相同：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vec (map
  char (range 65 91)))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">R</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">读取</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">可以定位元素</span><span style="font-family:Consolas" lang="EN-US">:</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def v [1 3 5 7])</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">nth</span> v 0)
  ; 1 </span><span style="font-family:宋体">越界报错</span><span style="font-family:Consolas" lang="EN-US"> (nth v -1) <span style="color:red">java.lang.IndexOutOfBoundsException</span></span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">get</span> v 0)
  &nbsp;; 1 </span><span style="font-family:宋体">越界返回</span><span style="font-family:Consolas" lang="EN-US">nil (get v -1)</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">find</span> [10
  20 30] <span style="background:yellow">1</span>) ; [<span style="background:
  yellow">1</span> 20] </span><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:
  宋体">是下标，</span><span style="font-family:Consolas" lang="EN-US">find</span><span style="font-family:宋体">也可用于</span><span style="font-family:Consolas" lang="EN-US">map</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">因为</span><span style="font-family:Consolas" lang="EN-US">vector</span><b><u><span style="font-family:
  宋体">是数组</span></u></b><span style="font-family:宋体">，也可以轻松使用下标存取，可简写如下</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(v 0) ; </span><span style="font-family:宋体">从</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:
  宋体">开始第一个元素，</span><span style="font-family:Consolas" lang="EN-US">1</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(count v) ; 4 </span><span style="font-family:
  宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">size</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">length</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(v (dec (count v))) ; </span><span style="font-family:宋体">最后一个元素，</span><span style="font-family:
  Consolas" lang="EN-US">7</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">first, rest,
  next</span><span style="font-family:宋体">用法与</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">相同，可用</span><span style="font-family:Consolas" lang="EN-US">nth</span><span style="font-family:
  宋体">取任何位置元素。</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">C</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">增加</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">concat</span><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">而不是</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(concat [-3 -1] [1 3 5 7]) ; (-3 -1 1 3 5 7)</span><span style="font-family:宋体">而非</span><span style="font-family:Consolas" lang="EN-US">[-3
  -1 1 3 5 7]</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> [-3
  -1] [1 3 5 7]) ; </span><span style="font-family:宋体">这个才返回：</span><span style="font-family:Consolas" lang="EN-US">[-3 -1 1 3 5 7]</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">增加元素，</span><span style="font-family:Consolas" lang="EN-US">conj</span><span style="font-family:宋体">在后，</span><span style="font-family:Consolas" lang="EN-US">cons</span><span style="font-family:
  宋体">在前（</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">调用</span><span style="font-family:Consolas" lang="EN-US">conj,cons</span><span style="font-family:宋体">都插入在前）：</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(conj v 0) ; [1 3 5 7 0]</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(cons 0 v) ; [0 1 3 5 7]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">get-in</span><span style="font-family:宋体">可以处理多维数组：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
  (get-in [[10 20 30] [<span style="background:yellow">100</span> 200 300]] <span style="background:lime">[1 0]</span>) ; 100</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">U</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">修改</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">更改指定位置元素：</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span> [1
  3 5 7] 2 0) ; [1 3 0 7] </span><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">list<span style="color:red">*</span></span><span style="font-family:宋体;color:red">不能</span><span style="font-family:
  Consolas;color:red" lang="EN-US">*</span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">assoc</span><span style="font-family:
  宋体">更改</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">assoc</span><span style="font-family:宋体">可连续更改，如：交换第一个和最后一个元素</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [v [1 3 5 7] n (dec (count v))]</span></p>
  <p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">assoc</span>
  v <u>0 (v n)</u> <u>n (v 0)</u>))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">assoc-in </span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">update-in</span><span style="font-family:宋体">修改多维数组</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">更改</span><span style="font-family:Consolas" lang="EN-US">[[1 <span style="background:yellow">2</span>] [3
  4] [5 6]]</span><span style="font-family:宋体">列表的第</span><span style="font-family:Consolas" lang="EN-US">[0 1]</span><span style="font-family:宋体">个元素为</span><span style="font-family:Consolas" lang="EN-US">20</span><span style="font-family:
  宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc-in</span>
  [[1 <span style="background:yellow">2</span>] [3 4] [5 6]] <span style="background:lime">[0 1]</span> <span style="background:yellow">20</span>)
  ; <span style="color:#7F7F7F">[[1 <span style="background:yellow">20</span>]
  [3 4] [5 6]]</span></span></p>
  <p class="MsoNormal"><span style="font-family:宋体">通过函数更新：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update-in</span>
  [[1 <span style="background:yellow">2</span>] [3 4] [5 6]] <span style="background:lime">[0 1]</span> * 10) ; <span style="color:#7F7F7F">[[1 <span style="background:yellow">20</span>] [3 4] [5 6]]</span></span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update-in</span>
  [[1 <span style="background:yellow">2</span>] [3 4] [5 6]] <span style="background:lime">[0 1]</span> <u>(fn [i] (* i i i))</u>) </span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">; [[1 <span style="background:
  yellow">8</span>] [3 4] [5 6]]</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">D</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">删除</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">取片段：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">take</span> 3
  [1 3 5 7]) ; [1 3 5]</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop</span> 2
  [1 3 5 7]) ; [5 7]</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">subvec</span>
  [1 3 5 7] 1) ; [3 5 7]</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(subvec [1 3 5 7 9] 1 3) ; [3 5]</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">take</span> 2 (<span style="background:yellow">drop</span> 1 [1 3 5 7 9])) ; [3 5]</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">例子：把</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">转为</span><span style="font-family:Consolas" lang="EN-US">Vector</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce into {1 10 2 20 3 30 4 40}) ; <span style="color:#5B6E6E">[1 10 2 20 3 30 4 40]</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(vec (apply concat {1 10 2 20 3 30 4 40})) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以把</span><span style="font-family:Consolas" lang="EN-US">Vector</span><span style="font-family:宋体">转为</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v [1 10 2 20 3 30 4 40])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(into {} (for [i (range 0 (count v) 2)] [(v i) (v
(inc i))])) ; <span style="color:#5B6E6E">{1 10, 2 20, 3 30, 4 40}</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.2.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">list</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">互转</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">list&lt;-&gt;vector</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:110.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="148">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">list&nbsp;&nbsp;
  -&gt; vector</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><a name="OLE_LINK16"></a><a name="OLE_LINK15"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">vec</span>
  '(1 2 3))</span></a></p>
  </td>
 </tr>
 <tr>
  <td style="width:110.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="148">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">vector
  -&gt; list</span></b></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><a name="OLE_LINK10"></a><a name="OLE_LINK9"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">lazy-seq</span>
  [1 2 3])</span></a></p>
  <p class="MsoNormal"><a name="OLE_LINK12"></a><a name="OLE_LINK11"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">seq</span>
  [1 2 3])</span></a></p>
  <p class="MsoNormal"><a name="OLE_LINK14"></a><a name="OLE_LINK13"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">list*</span>
  [1 2 3])</span></a></p>
  </td>
 </tr>
</tbody></table>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.2.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">java</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数组互转</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:124.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="166">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">数组</span><span style="font-family:Consolas" lang="EN-US">
  -&gt; vector</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">vec</span> (into-array [1 3 5]))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:124.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="166">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector –&gt;
  java</span><span style="font-family:宋体">数组</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into-array</span> [1 3 5])</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.2.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">改造</span><span lang="EN-US">conj</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">cons</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">;; conj cons </span><span style="font-family:宋体">函数对</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">的行为不一致，很容易引起混乱，改造如下：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">conj+</span> </span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp; "<span style="color:#7F7F7F">conj </span></span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">和</span><span style="font-size:9.0pt;
font-family:Consolas;color:#7F7F7F" lang="EN-US"> conj+ </span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">的区别，</span><span style="font-size:
9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">(conj&nbsp; [1 2] 3) -&gt; [1 2 3] , (conj
'(1 2) 3) -&gt; '(3 1 2)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;
conj+</span><span style="font-size:9.0pt;font-family:宋体;color:#7F7F7F">统一增加元素在后，</span><span style="font-size:9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">(conj+ [1
2] 3) -&gt; [1 2 3] , (conj '(1 2) 3) -&gt; '(1 2 3)</span><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp; ([coll x] (if
(list? coll) (concat coll (list x)) (conj coll x)))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp; ([coll x &amp;
xs] (if (list? coll) (concat coll (list x) xs) (apply conj coll x xs))))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">cons+</span></span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp; "<span style="color:#7F7F7F">cons </span></span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">和</span><span style="font-size:9.0pt;
font-family:Consolas;color:#7F7F7F" lang="EN-US"> cons+ </span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">的区别，</span><span style="font-size:
9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">(cons&nbsp; 1 '(2 3)) -&gt; '(1 2 3),
(cons&nbsp; 1 [2 3]) -&gt; '(1 2 3), </span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">类型由</span><span style="font-size:9.0pt;
font-family:Consolas;color:#7F7F7F" lang="EN-US">vector</span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">变为</span><span style="font-size:9.0pt;
font-family:Consolas;color:#7F7F7F" lang="EN-US">list</span><span style="font-size:9.0pt;
font-family:宋体;color:#7F7F7F">；</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;
cons+</span><span style="font-size:9.0pt;font-family:宋体;color:#7F7F7F">统一为和输入一致，</span><span style="font-size:9.0pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">(cons+ 1
'(2 3)) -&gt; '(1 2 3), (cons+ 1 [2 3]) -&gt;&nbsp; [1 2 3]</span><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">"</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">&nbsp; [x coll] (if
(vector? coll) (into (vector x) coll) (cons x coll)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573090"></a><a name="_Toc281924027"></a><a name="_Toc281658865"></a><a name="_Toc281556372"></a><a name="_Toc281556272"></a><a name="_Toc281556168"></a><a name="_Toc281555966"></a><a name="_Toc281555809"><span style="font-family:Consolas" lang="EN-US">3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Set</span></u></a></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(set [1 3 5])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简写成：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">#{</span><span style="font-family:Consolas" lang="EN-US">1 3 5<span style="background:yellow">}</span></span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sorted-set</span>
3 5 1) ; #{1 3 5}</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(set [1 3 5 3]) ; #{1 3 5}</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">常用操作</span></b></p>
  </td>
  <td style="width:434.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:宋体">增加元素</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span> #{1 3} 1 5 7) ; #{1 3 5 7}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:宋体">删除元素</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">disj</span> #{1 3 5 7} 3 7) ; <span style="color:#595959">#{1 5}) <span style="background:yellow">disj</span>oin</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:宋体">条件筛选</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.set/<b>select</b></span> even? #{1 2 3 4
  5}) <span style="color:#5B6E6E">; #{2 4}</span></span></p>
  <p class="MsoNormal"><span style="font-family:宋体">注意与</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">的区别，返回值类型不同</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">filter</span> even? #{1 2 3 4 5}) <span style="color:#5B6E6E">; (2 4) </span></span><span style="font-family:宋体;
  color:#5B6E6E">返回</span><span style="font-family:Consolas;
  color:#5B6E6E" lang="EN-US">list</span><span style="font-family:宋体;color:#5B6E6E">而不是</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">set</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">合集（加法）</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.set/<b>union</b></span> #{1 2 3} #{1 2 4})
  ; #{1 2 3 4}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">差集（减法）</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.set/<b>difference</b></span> #{1 2 3} #{1 2
  4}) ; #{3}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">交集</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.set/<b>intersection</b></span> #{1 2 3} #{1
  2 4}) ; #{1 2}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:102.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="137">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">子集</span></p>
  </td>
  <td style="width:434.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="579">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.contrib.combinatorics/<b>subsets</b></span>
  '#{a b c}) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">;</span><span style="font-family:宋体;color:#5B6E6E">全子集：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">(() (a) (c) (b) (a c) (a b) (c b)
  (a c b))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.contrib.combinatorics/<b>combinations</b></span>
  '[a b c] 2)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">;</span><span style="font-family:宋体;color:#5B6E6E">元素数目为</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">2</span><span style="font-family:
  宋体;color:#5B6E6E">的子集：</span><span style="font-family:Consolas;
  color:#5B6E6E" lang="EN-US">((a b) (a c) (b c))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">clojure.contrib.combinatorics</span><span style="font-family:宋体">里面有排列组合函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use '[clojure.contrib.combinatorics
:only (<span style="background:yellow">selections</span> <span style="background:yellow">lex-permutations</span>)])</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:62.1pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83">
  <p class="MsoNormal"><span style="font-family:宋体">排列</span><span style="font-family:Consolas" lang="EN-US">Pnm</span></p>
  </td>
  <td style="width:479.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(clojure.contrib.combinatorics/<span style="background:yellow">selections</span> '[a b c] 2)</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">; (<s>(a a)</s> (a b) (a c) (b a) <s>(b b)</s>
  (b c) (c a) (c b) <s>(c c)</s>)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:62.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83">
  <p class="MsoNormal"><span style="font-family:宋体">全排列</span><span style="font-family:Consolas" lang="EN-US">Pnn</span></p>
  </td>
  <td style="width:479.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(clojure.contrib.combinatorics/<span style="background:yellow">lex-permutations</span> '[1 2 3])</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">; ([1 2 3] [1 3 2] [2 1 3] [2 3 1] [3 1 2] [3 2
  1])</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:62.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83">
  <p class="MsoNormal"><span style="font-family:宋体">组合</span><span style="font-family:Consolas" lang="EN-US">Cnm</span></p>
  </td>
  <td style="width:479.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(clojure.contrib.combinatorics/<span style="background:yellow">combinations</span> '[a b c] 2)</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">;<span style="color:#5B6E6E"> ((a b) (a c) (b
  c))</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:62.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83">
  <p class="MsoNormal"><span style="font-family:宋体">笛卡尔积</span></p>
  </td>
  <td style="width:479.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(clojure.contrib.combinatorics/<span style="background:yellow">cartesian-product</span> '[1 2 3] '[a b])</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">; ((1 a) (1 b) (2 a) (2 b) (3 a) (3 b))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:62.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:479.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="640">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573091"></a><a name="_Toc281924028"></a><a name="_Toc281658866"></a><a name="_Toc281556373"></a><a name="_Toc281556273"></a><a name="_Toc281556169"></a><a name="_Toc281555967"></a><a name="_Toc281555810"><span style="font-family:Consolas" lang="EN-US">3.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Map</span></u></a></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(hash-map 1 10 2 20 3 30)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简写为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{1 10, 2 20, 3 30}</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{1 10 2 20 3 30}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="width:96.5%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="96%">
 <tbody><tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">CRUD</span></b><b><span style="font-family:宋体">操作</span></b></p>
  </td>
  <td style="width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">R</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">读取</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">keyword</span><span style="font-family:宋体">类型则可前可后，其他类型做</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:
  宋体">只能放后面用：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">:name</span> {:name "qh" :age 10})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">({:name
  "qh" :age 10} <span style="background:yellow">:name</span>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">({1 100 2
  200} <span style="background:yellow">2</span>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">get-in</span> {:n "qh", :addr {:cn {:bj
  {:hd "tsinghua"}}}} [:addr :cn :bj :hd])</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">CU</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">增加或者修改</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:宋体">没有则增加，有则修改</span><span style="font-family:Consolas" lang="EN-US">:</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span> {:name "qh" :age 20} {:age
  30} {:gender 'male})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">merge</span> {:name "qh" :age 20} {:age
  30} {:gender 'male})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce <span style="background:yellow">into</span> {} [{:name "qh" :age 20}
  {:age 30} {:gender 'male}])</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span> {:name "qh" :age 20} :age 30
  :gender 'male)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">D</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">删除</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dissoc</span> {:name "qh" :age 30} :name)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="15%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="84%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读取、选取</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(hash-map 1 100 2 200 3 300)</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">{1 100, 2 200, 3 300} <span style="color:#5B6E6E">;
</span></span><span style="font-family:宋体;color:#5B6E6E">注意不是</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">(map 1 100 2 200 3 300), </span><span style="font-family:宋体;color:#5B6E6E">因为</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">map</span><span style="font-family:
宋体;color:#5B6E6E">是列表操作符</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可省略分隔符</span><span style="font-family:Consolas" lang="EN-US">","</span><span style="font-family:宋体">简写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">{</span>1 100 2 200 3 300<span style="background:
yellow">}</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">不保证循序，元素达到一定数量后就乱序了，排序的用</span><span style="font-family:Consolas" lang="EN-US">array-map</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; '{a a, b b, c c, d d, e e, f f, g g, h
h}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:47.25pt"><span style="font-family:Consolas" lang="EN-US">{a a, b b, c c, d d, e e, f f, g g, h
h} <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;
color:#5B6E6E">顺序没变</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; '{a a, b b, c c, d d, e e, f f, g g, h h,
i i}</span></p>

<p class="MsoNormal" style="margin-left:52.5pt;text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">{a a, c c, b b, f f, g g, d d, e e, i
i, h h} <span style="color:#5B6E6E">; </span></span><span style="font-family:
宋体;color:#5B6E6E">顺序变了</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
m {:name "qh" :age 30})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">get</span> m :name) ; "qh" </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (:name
m) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; "qh" </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m
:name) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; "qh" </span><span style="font-family:宋体">方式</span><span style="font-family:Consolas" lang="EN-US">3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (:age
m) ; 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">count</span> m) ; 2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m
:mail) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">get</span> m :mail "anonymous@mail") ;
"anonymous@mail" </span><span style="font-family:宋体">返回缺省值，相当于</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">getOrElse</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者不用</span><span style="font-family:Consolas" lang="EN-US">"<span style="background:yellow">:</span>"</span><span style="font-family:宋体">，用</span><span style="font-family:Consolas" lang="EN-US">"<span style="background:yellow">'</span>"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
m <span style="background:yellow">'</span>{name "qh" age 30})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m
<span style="background:yellow">'</span>name) ; "qh"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m
<span style="background:yellow">'</span>age) ; 30</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">通过</span><span style="font-family:Consolas" lang="EN-US">get</span><span style="font-family:宋体">函数获取</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:
宋体">的元素更安全，因为能处理</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">的情况</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(nil :a) ; </span><span style="font-family:宋体;
color:red">报错</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">get</span> nil
:a) ; nil</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">get</span><span style="font-family:宋体">函数也适用于</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">类型，把</span><span style="font-family:Consolas" lang="EN-US">index</span><span style="font-family:宋体">当成</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">来取</span><span style="font-family:Consolas" lang="EN-US"><br>
(get "abcde" 0) ; \a </span><span style="font-family:宋体">越界返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">get</span><span style="font-family:宋体">用于</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">时返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(get (seq "abcde") 0) ; nil</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">get</span><span style="font-family:宋体">只取得</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">，而</span><span style="font-family:Consolas" lang="EN-US">find</span><span style="font-family:宋体">取得</span><span style="font-family:Consolas" lang="EN-US">[key
val]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">find</span>
{:name "qh" :age 30 :mail "qh@mail"} :age) ; [:age 30]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">层层</span><span style="font-family:Consolas" lang="EN-US">get</span><span style="font-family:宋体">可以用</span><span style="font-family:Consolas" lang="EN-US">get-in</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:76.3pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="102">
  <p class="MsoNormal"><span style="font-family:宋体">不用</span><span style="font-family:Consolas" lang="EN-US">get-in</span></p>
  </td>
  <td style="width:465.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="621">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((((<u>{:n
  "qh", :addr {:cn {:bj {:hd "tsinghua"}}}}</u> :addr) :cn)
  :bj) :hd)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-&gt; <u>{:n
  "qh", :addr {:cn {:bj {:hd "tsinghua"}}}}</u> :addr :cn
  :bj :hd)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:76.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="102">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">get-in</span></p>
  </td>
  <td style="width:465.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="621">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">get-in</span> <u>{:n "qh", :addr {:cn
  {:bj {:hd "tsinghua"}}}}</u> [:addr :cn :bj :hd])</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">参见：</span><span style="font-family:Consolas" lang="EN-US">assoc-in</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">destructure</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m [<span style="background:yellow">{a :age}</span>] (println "age is:"
<span style="background:yellow">a</span>))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m
<span style="background:yellow">{:name "qh" :age 30}</span>) ; "age
is: 30"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：根据</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">取</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map1
k1) </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US"> (map1 k1 k1-default)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ({1
100 2 200} 3 -1) ; </span><span style="font-family:宋体">有</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:
宋体">为</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">的就取其值，否则返回缺省值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：取部分</span><span style="font-family:Consolas" lang="EN-US">keys-vals</span><span style="font-family:宋体">对：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">select-keys</span> {1 100 2 200 3 300} [1 3]) ; {3
300, 1 100}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">select-keys</span> {1 100 2 200 3 300} (reverse [1 3]))
; {1 100, 3 300}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">取出给定</span><span style="font-family:Consolas" lang="EN-US">keys</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">values</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">、用组合函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((comp
vals select-keys) {1 100 2 200 3 300} [3 1]) ; {100, 300}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">、用</span><span style="font-family:Consolas" lang="EN-US">juxt</span><span style="font-family:
宋体">并列函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">juxt </span>#(get
% 3) #(get % 1)) {1 100 2 200 3 300}) ; [300 100]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">juxt </span>:3
:1) {:1 100 :2 200 :3 300}) ; [300 100]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：按指定</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">的顺序取出</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">的部分</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span> {} (<span style="background:yellow">select-keys</span> {1 100 2 200 3 300} [3 1])) ; {3
300, 1 100}</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：条件选择</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m {1 100 2 200 3 300})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">select-keys</span>
m (for [[k v] m :when (even? k)] k))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> {}
(filter #(even? (key %)) m))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：取</span><span style="font-family:Consolas" lang="EN-US">keys</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">vals</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">keys</span> {:name "qh" :age 30}) ; (:name
:age)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">vals</span> {:name "qh" :age 30}) ; ("qh"
30)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (keys
{1 100 2 200 3 300})</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
<span style="background:yellow">key</span> {1 100 2 200 3 300})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (vals
{1 100 2 200 3 300})</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意</span><span style="font-family:Consolas" lang="EN-US">,key</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:
宋体">函数的参数不是一个</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">，而是</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">的一个</span><span style="font-family:Consolas" lang="EN-US">Entry&lt;k,v&gt;</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">key</span> {1
100}) ; </span><span style="font-family:宋体;color:red">报错</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">key</span> (first
{1 100 2 200})) ; 1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(first (keys {1 100}))&nbsp; ; 1</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
<span style="background:yellow">val</span> {1 100 2 200 3 300})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：判断</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">是否已经存在：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">contains?</span> {:name "qh" :age 30} :age)
; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><span style="font-family:宋体;color:red">特别注意</span></b><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">基于性能考虑，</span><span style="font-family:Consolas" lang="EN-US">contains?</span><span style="font-family:宋体">主要针对</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">就是元素本身），如：</span></p>

<p class="MsoNormal" style="margin-left:42.0pt"><span style="font-family:Consolas" lang="EN-US">(contains? #{1 3 5 7} 7) ; true</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">contains?</span><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">也有效，但</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">是下标而不是值。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(contains? [10 20 30 40] 3) ; true </span><span style="font-family:宋体">表明存在下标</span><span style="font-family:Consolas" lang="EN-US">index=3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(contains? [10 20 30 40] 40) ; false </span><span style="font-family:宋体">没有下标</span><span style="font-family:Consolas" lang="EN-US">40</span><span style="font-family:宋体">，只有</span><span style="font-family:Consolas" lang="EN-US">0,1,2,3</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">要判断</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">中是否包含某个元素可以使用</span><span style="font-family:
Consolas" lang="EN-US">.contains</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">.indexOf</span><span style="font-family:
宋体">方法，如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">.contains</span>
'(10 20 30 40) 40) ; true</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">.indexOf</span>
[10 20 30 40] 40) ; 3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Contains?</span><span style="font-family:宋体">对没有</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">的数据类型始终返回</span><span style="font-family:
Consolas" lang="EN-US">false</span></p>

<p class="MsoNormal" style="margin-left:42.0pt"><span style="font-family:Consolas" lang="EN-US">(contains? '(0 1 2 3) 0) ; false</span></p>

<p class="MsoNormal" style="margin-left:42.0pt"><span style="font-family:Consolas" lang="EN-US">(contains? 3 3) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：选取第一个名为</span><span style="font-family:Consolas" lang="EN-US">james</span><span style="font-family:
宋体">（不区分大小写）的人的年龄</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m {"qh" 10 "James" 20 "qiu"
30})</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(some (fn [[k v]] (when (.equalsIgnoreCase k
"james") v)) m)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">修改</span></p>

<p class="MsoNormal"><span style="font-family:宋体">合并多个</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span>
{:name "qh" :age 30} {:gender 'm :mail "qh@mail"})</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">; {:mail "qh@mail",
:gender m, :name "qh", :age 30}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者增加</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">[key value]</span><span style="font-family:宋体">新元素</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">conj</span>
{:name "qh" :age 30} [:gender 'm]) ; <span style="color:#5B6E6E">[]</span></span><span style="font-family:宋体;color:#5B6E6E">不能用</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">assoc</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以用</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">merge</span>
{:name "qh" :age 30} {:gender 'm :mail "qh@mail"})</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相同</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">可以合并</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">merge-with</span>
<span style="background:yellow">+</span> {:name "qh" <b><u>:age</u></b>
<span style="background:lime">30</span>} {:gender 'm <b><u>:age</u></b> <span style="background:lime">5</span>})</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">; {:gender m, :name "qh", <b><u>:age</u></b>
<span style="background:lime">35</span>}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">merge</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">into</span><span style="font-family:
宋体">都可以用于</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">合并元素，注意区别</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  background:#DBE1E1;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">into</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;background:#DBE1E1;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">merge</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">顺序：追加到原</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
  宋体">后</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> {1 10 2 20} {3 30 4 40})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt; <span style="color:#7F7F7F">{1 10, 2 20, 3 30, 4 40}</span></span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">顺序：逐个插入到原</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
  宋体">前</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">merge</span> {1 10 2 20} {3 30 4 40})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt; <span style="color:#7F7F7F">{4 40, 3 30, 1 10, 2 20}</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">的返回类型</span><b><span style="font-family:Consolas" lang="EN-US">*</span></b><b><span style="font-family:宋体">不是</span></b><b><span style="font-family:
  Consolas" lang="EN-US">*</span></b><span style="font-family:Consolas" lang="EN-US">hash-map</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> nil {1 10 2 20})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt; <span style="color:#7F7F7F">([2 20] [1 10])</span></span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">的返回类型是</span><span style="font-family:Consolas" lang="EN-US">hash-map</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">merge</span> nil {1 10 2 20})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-&gt; <span style="color:#7F7F7F">{2 20, 1 10}</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">增加多个新元素</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:宋体">返回新</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">：</span><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span>iate</span><span style="font-family:宋体">联合</span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span>
{:name "qh" :age 30} <u>:gender 'm</u> <u>:mail "qh@mail"</u>)
</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">; {<u>:mail "qh@mail",
:gender m</u>, :name "qh", :age 30}</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">删除多个元素</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:宋体">返回新</span><span style="font-family:Consolas" lang="EN-US">map:</span><span style="font-family:
宋体">（</span><span style="font-family:Consolas;background:yellow" lang="EN-US">dissoc</span><span style="font-family:Consolas" lang="EN-US">iate</span><span style="font-family:
宋体">分离）</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dissoc</span>
{:name "qh" :age 30} :name) ; {:age 30}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">更改值（用函数）：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update-in</span>
{:name "qh" :age <b>30</b>} [:age] #(inc %)) ; <span style="color:#5B6E6E">{:name "qh", :age <b>31</b>}</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">简单设置值：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span>
{:name "qh" :age <b>30</b>} :age <b>31</b>) ;<span style="color:#5B6E6E">
{:name "qh", :age <b>31</b>}</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">增加或者修改层次深的元素：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc-in</span> {<u>:name
"qh", :<b>addr</b> {:<b>cn</b> {:<b>bj</b> {:<b>hd</b>
"tsinghua"}}}</u>} <b>[:addr :cn :bj :hd]</b> "pku")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">; {:name "qh", :addr {:cn
{:bj {:hd "pku"}}}}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">参见：</span><span style="font-family:Consolas" lang="EN-US">get-in</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：使用</span><span style="font-family:Consolas" lang="EN-US">-&gt;</span><span style="font-family:宋体">进行一系列修改操作</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">-&gt;</span>
{:name "qh" :age 10} (<span style="background:yellow">dissoc</span>
:age) (<span style="background:yellow">assoc</span> :name "james"))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; {:name "james"}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：把所有的</span><span style="font-family:Consolas" lang="EN-US">value</span><span style="font-family:宋体">变大写</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m {:k1 "hello" :k2
"world" :k3 "clojure"})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">zipmap</span>
(keys m) (map #(.toUpperCase %) (vals m)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：按</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">排序：</span></p>

<p class="MsoNormal" style="text-indent:9.0pt"><span style="font-family:
Consolas" lang="EN-US">(<span style="background:yellow">into</span> (<span style="background:
yellow">sorted-map</span>) { 1 10 3 30 2 20})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：修改</span><span style="font-family:Consolas" lang="EN-US">key</span></p>

<p class="MsoNormal" style="text-indent:9.0pt"><span style="font-family:
Consolas" lang="EN-US">(into {} (for [[k v] {1 10 2 20 3 30}] [(str "k" k) v])) ; <span style="color:#5B6E6E">{"k1" 10, "k2" 20, "k3" 30}</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：修改多个</span><span style="font-family:Consolas" lang="EN-US">key</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn map-change-key</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; "ks0</span><span style="font-family:宋体">为原</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">列表，</span><span style="font-family:Consolas" lang="EN-US">ks1</span><span style="font-family:宋体">为新</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">列表</span><span style="font-family:Consolas" lang="EN-US">"</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; [m ks0 ks1]</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let [vs0 (map m ks0)</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;m1 (zipmap ks1 vs0)]</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (into (apply dissoc
m ks0) m1) ))</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [m {1 10 2 20 3 30 4 40} ]</span></p>

<p class="MsoNormal" style="margin-left:31.5pt;text-indent:-21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (map-change-key m [<span style="background:yellow">2</span> <span style="background:lime">4</span>] [<span style="background:yellow">"22"</span> <span style="background:lime">44</span>]))
; </span><span style="font-size:10.0pt;font-family:Consolas;
color:green" lang="EN-US">{1 10, 3 30, <span style="background:lime">44</span> 40, <span style="background:yellow">"22"</span> 20}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：“人名</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">公司”数据库记录按“公司”分组统计“人名”</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(reduce </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(fn [m {pn <span style="background:
lime">:pn</span> en <span style="background:lime">:en</span>}] (<span style="background:yellow">update-in</span> m [en] conj pn)) </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">{} </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">[{<span style="background:lime">:pn</span>
"a" <span style="background:lime">:en</span> "google"} </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">{<span style="background:lime">:pn</span>
"b" <span style="background:lime">:en</span> "apple"} </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">{<span style="background:lime">:pn</span>
"c" <span style="background:lime">:en</span> "google"}])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结果：</span></p>

<p class="MsoNormal" style="text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">{"apple" ("b"),
"google" ("c" "a")}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">update-in </span><span style="font-family:宋体">可以有</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">个参数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; (update-in
{} ["a"] conj <span style="background:yellow">"google"</span>)
<span style="color:#7F7F7F">; {"a" ("google")}</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span style="font-family:宋体">此处</span><span style="font-family:Consolas" lang="EN-US">conj</span><span style="font-family:宋体">函数的第一个参数为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:
宋体">，第二个参数为</span><span style="font-family:Consolas" lang="EN-US">"google"
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (conj nil "google") ;
("google")</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">生成</span><span lang="EN-US">map</span></p>

<p class="MsoNormal"><span style="font-family:宋体">通过</span><span style="font-family:Consolas" lang="EN-US">keys</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">vals</span><span style="font-family:
宋体">来构造</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">zipmap</span> [1
2 3] [100 200 300]) ; {3 300, 2 200, 1 100}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">list-&gt;map:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> {} (for [k ["Susan"
"Barbara" "Ian" "Vicki"]] [k (count k)]))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">结果：</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">{"Susan" 5,
"Barbara" 7, "Ian" 3, "Vicki" 5}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其他解决办法：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">zipmap</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [k ["Susan"
"Barbara" "Ian" "Vicki"]] </span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">zipmap</span> k
(map count k)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#5B6E6E">{"Vicki"
5, "Ian" 3, "Barbara" 7, "Susan" 5}</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">juxt</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(into {} (map
(<span style="background:yellow">juxt</span> identity count) ["Susan"
"Barbara" "Ian" "Vicki"]))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#7F7F7F">{"Susan"
5, "Barbara" 7, "Ian" 3, "Vicki" 5}</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：特定</span><span style="font-family:Consolas" lang="EN-US">list-&gt;map</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def s [1 10 2 20 3 30 4 40])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(into {} (for [i (range (/ (count s) 2))] [(nth s
i) (nth s (+ (* 2 i) 1))]))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#5B6E6E">{1 10, 10 20, 2 30,
20 40}</span></span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span> <span lang="EN-US">vector / list </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">互转</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:94.85pt;border:solid windowtext 1.0pt;padding:
  0cm 5.4pt 0cm 5.4pt" width="126">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector/list </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--&gt; map</span></p>
  </td>
  <td style="width:382.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="510">
  <p class="MsoNormal"><span style="font-family:宋体">把长度为偶数的</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
  宋体">转为</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">，例如：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 10 2 20 3
  30 4 40 5 50] &lt;-&gt; {1 10 2 20 3 30 4 40}</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">apply array-map</span>
  v) <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;
  color:#7F7F7F">如果无序的话，用</span><span style="font-family:Consolas;
  color:#7F7F7F" lang="EN-US">hash-map</span><span style="font-family:宋体;color:#7F7F7F">也一样</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:94.85pt;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 5.4pt 0cm 5.4pt" width="126">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map --&gt;
  vector</span></p>
  </td>
  <td style="width:382.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="510">
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defn m2v [m] (<span style="background:yellow">reduce
  into</span> m))</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def m {1 10 2 20 3 30 4 40})</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(m2v m) ; <span style="color:#5B6E6E">[1 10 2 20
  3 30 4 40]</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:94.85pt;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 5.4pt 0cm 5.4pt" width="126">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map --&gt;
  list</span></p>
  </td>
  <td style="width:382.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="510">
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce concat</span>
  {1 10 2 20 3 30 4 40}) ; <span style="color:#7F7F7F">(1 10 2 20 3 30 4 40)</span></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; hash-map</span><span style="font-family:宋体">转为</span><span style="font-family:Consolas" lang="EN-US">vector</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span><span lang="EN-US">java.util.HashMap</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">互转</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:111.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="149">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java.util.HashMap
  </span></p>
  <p class="MsoNormal"><span style="font-family:宋体">转换成</span><span style="font-family:Consolas" lang="EN-US"> </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hash-map</span></p>
  </td>
  <td style="width:418.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="558">
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:-5.25pt"><span style="font-family:Consolas" lang="EN-US">(def m (doto (java.util.HashMap.)
  (.put 1 10) (.put 2 20) (.put 3 30)))</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">（推荐）：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">into</span> {}
  m) ; {1 10, 2 20, 3 30}</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">zipmap</span>
  (keys m) (vals m)) ; {3 30, 2 20, 1 10}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:111.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="149">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hash-map</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">转换成</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">java.util.HashMap</span></p>
  </td>
  <td style="width:418.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="558">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">java.util.HashMap.</span> {1 10 2 20 3 30}) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">;
  #&lt;HashMap {1=10, 2=20, 3=30}&gt;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924029"></a><a name="_Toc281658867"></a><a name="_Toc281556374"></a><a name="_Toc281556274"></a><a name="_Toc281556170"></a><a name="_Toc281555968"></a><a name="_Toc281555811"><span style="text-decoration:none" lang="EN-US">3.4.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">有序</span><span lang="EN-US">array-map</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(hash-map 1 1
2 2 3 3 0 0) &nbsp;; {0 0, 1 1, 2 2, 3 3}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(array-map 1 1
2 2 3 3 0 0) ; {1 1, 2 2, 3 3, 0 0}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply
array-map [1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply
array-map (mapcat #(list % %) (range 10))) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">;
{0 0, 1 1, 2 2, 3 3, 4 4, 5 5, 6 6, 7 7, 8 8, 9 9}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法一（更安全）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply
array-map (<span style="background:yellow">reduce into</span> (for [i (range
20) :let [j (- 20 i)]] [j (* 10 j)])))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">{20
200, 19 190, 18 180, 17 170, 16 160, 15 150, 14 140, 13 130, 12 120, 11 110, </span></p>

<p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">10 100, 9 90, 8 80, 7 70, 6 60, 5
50, 4 40, 3 30, 2 20, 1 10}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写法二（不安全）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply
array-map (<span style="color:red;background:yellow">flatten</span> (for [i
(range 20) :let [j (- 20 i)]] [j (* 10 j)])))</span></p>

<p class="MsoNormal"><span style="font-family:宋体;color:red">一般不会有问题，但如果</span><span style="font-family:Consolas;color:red" lang="EN-US">[k v]</span><span style="font-family:宋体;color:red">中的</span><span style="font-family:
Consolas;color:red" lang="EN-US">k</span><span style="font-family:宋体;color:red">或者</span><span style="font-family:Consolas;color:red" lang="EN-US">v</span><span style="font-family:宋体;color:red">是列表的话，可能会得到意想不到的结果。</span></p>

<p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">array-map</span><span style="font-family:宋体">进行</span><span style="font-family:Consolas" lang="EN-US">assoc</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">merge</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">into</span><span style="font-family:宋体">操作后又变成无序的</span><span style="font-family:
Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">了，可以用一个专门的</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
宋体">来存储</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">的顺序。</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">map</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">运算</span><span lang="EN-US">merge-with</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多个</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">的指定运算操作：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; (<span style="background:yellow">merge-with</span>
<span style="background:lime">+</span> {1 10 <b><span style="background:aqua">2</span></b>
20 <b><span style="background:aqua">3</span></b> 30}&nbsp; {<b><span style="background:aqua">2</span></b> 200 <b><span style="background:aqua">3</span></b>
300 4 400})</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{4 400, 1 10, <span style="background:aqua">2</span>
220, <span style="background:aqua">3</span> 330}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又例如：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; (<span style="background:yellow">merge-with</span>
<span style="background:lime">concat</span> {<span style="background:aqua">1</span>
[10 100] <span style="background:aqua">2</span> [20 200]} {<span style="background:aqua">1</span> [1000] <span style="background:aqua">2</span>
[2000]})</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{<span style="background:aqua">1</span> (10 100
1000), <span style="background:aqua">2</span> (20 200 2000)}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.4.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">destructure</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">——</span><span style="font-family:Consolas" lang="EN-US">“</span><span style="font-family:宋体">结构拆分</span><span style="font-family:Consolas" lang="EN-US">”</span><span style="font-family:宋体">在函数定义的参数中（或者变量初始化中）把数据结构拆分出部分或者全部，方便调用，避免在函数体中拆分。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如我们只对</span><span style="font-family:Consolas" lang="EN-US">{:name "qh" :age 30}</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">age</span><span style="font-family:宋体">感兴趣：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">，一般方法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f1 [m] (:age m))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (println
(f1 {:name "qh" :age 30}))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f2 [{<u><span style="background:yellow">age :age</span></u>}] age)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (println
(f2 {:name "qh" :age 30})) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">，再如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f1 [m] (+ (:x m) (:y m)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f1
{:x 3 :y 5})</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f1 [{<u><span style="background:yellow">x :x</span></u> <u><span style="background:yellow">y :y</span></u>}] (+ x y))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f1
{:x 3 :y 5})</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f2 [{<span style="background:yellow">:keys</span> [x y]}] (+ x y))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f2
{:x 3 :y 5})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">，求勾股弦</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f3 [xy] (Math/sqrt (+ (* (nth xy 0) (nth xy 0)) (* (nth xy 1) (nth xy 1)))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f3
[3 4]) ; 5.0</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f4 [<span style="background:yellow">[x y]</span>] (Math/sqrt (+ (* x x) (* y
y))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f4
[3 4]) ; 5.0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [[a b
&amp; m]] (str a b m))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f) (f []) ;
""</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f [2]) ;
"2"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f [2 4]) ;
"24"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f [2 4 6 8])
; "24(6 8)"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f) (f 2 4 6)
; </span><span style="font-family:宋体">报错</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以在</span><span style="font-family:Consolas" lang="EN-US">Map</span><span style="font-family:宋体">之外的其他数据结构中进行</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">，例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (let
[[x <span style="background:yellow">_</span> y] [1 2 3]] (+ x y)) ; 4</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(let [{x 0 y 6} '[<span style="background:yellow">a</span>
b c d e f <span style="background:yellow">g</span>]] [x y]) ; [a g] 0,6</span><span style="font-family:宋体">表示下标</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573092"></a><a name="_Toc281924030"></a><a name="_Toc281658868"></a><a name="_Toc281556375"></a><a name="_Toc281556275"></a><a name="_Toc281556171"></a><a name="_Toc281555969"></a><a name="_Toc281555812"></a><a name="_操作"></a><span style="font-family:
Consolas" lang="EN-US">3.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">操作</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">对集合</span><span style="font-family:Consolas" lang="EN-US">coll</span><span style="font-family:宋体">进行操作最有意思的两个操作是</span><span style="font-family:Consolas" lang="EN-US">MapReduce</span><span style="font-family:
宋体">（</span><span style="font-family:Consolas" lang="EN-US">map/mapcat</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">reduce/reductions</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:宋体">表</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：常用</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">操作</span></b></p>
  </td>
  <td style="width:184.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">结果</span></b></p>
  </td>
  <td style="width:171.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scala</span></b><b><span style="font-family:宋体">对应函数</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;n </span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">
  n*m-&gt;n</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">mapcat</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;n*m</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">flatMap</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reduce</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;1</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reduce
  foldLeft foldRight</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reductions</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;n</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">scanLeft
  scanRight</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;n</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for..yield</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for :when</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;m</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for..if..yield</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">filter
  remove</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;m</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">filter filterNot</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">distinct</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;m</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">distinct</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">split
  split-with</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;2</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">span
  partition</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">partition</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;m*k</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">group-by</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;2</span><span style="font-family:宋体">～</span><span style="font-family:Consolas" lang="EN-US">m</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:宋体">没有</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dotimes
  doseq dorun</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;nil</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">foreach</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="249">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">juxt</span></p>
  </td>
  <td style="width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="246">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n-&gt;m1+m2+..+mi</span></p>
  </td>
  <td style="width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="228">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">表</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：分类</span></p>

<table class="MsoNormalTable" style="width:100.0%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="100%">
 <tbody><tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:83.64%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">减少长度</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; m-</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">distinct </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">filter/remove</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for :while/:when</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">keep/keep-indexed</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">增加长度</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; m+</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cons</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">concat
  lazy-cat mapcat</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cycle</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">interpose
  interleave</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">取一个</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; 1</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">first ffirst
  nfirst second last</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">nth rand-nth
  when-first</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">掐头</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; 1~m-</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rest</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">next fnext
  nnext nthnext</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">drop/drop-while</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">去尾</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; 1~m-</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">take
  take-nth take-while</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">butlast
  drop-last</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">整理</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; m~m+</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">flatten</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reverse sort
  sort-by shuffle</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">分组</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m –&gt; 2+</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">split-at
  split-with</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">partition
  partition-all partition-by</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="16%">
  <p class="MsoNormal"><span style="font-family:宋体">映射</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">m -&gt; m |
  n*m</span></p>
  </td>
  <td style="width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="83%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map pmap mapcat
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">replace reductions
  map-indexed seque</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924031"></a><a name="_Toc281658869"></a><a name="_Toc281556376"></a><a name="_Toc281556276"></a><a name="_Toc281556172"></a><a name="_Toc281555970"></a><a name="_Toc281555813"><span style="text-decoration:none" lang="EN-US">3.5.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">apply</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">apply</span> <b>f</b>
[e1 e2 e3])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">apply</span> <b>f</b> e1 [e2 e3]) ; </span><span style="font-family:宋体">这个很有用！</span></p>

<p class="MsoNormal"><span style="font-family:宋体">都是把</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">转换函数参数来用，相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<b>f</b>
e1 e2 e3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
str [1 2 3 4 5]) ; "12345"</span><span style="font-family:宋体">，对比</span><span style="font-family:Consolas" lang="EN-US"> (str [1 2 3 4 5]) ; "[1 2 3 4
5]"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
str 1 2 [3 4 5]) ; "12345",</span><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US"> (str 1 2 [3 4 5]) ; "12[3 4
5]"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
str "hello:" [1 3 5]) ; "hello:135"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
+ 1 [2 3]) ; (+ 1 [2 3])</span><span style="font-family:宋体">是不行的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (max
[1 3 2]) ; </span><span style="font-family:宋体;color:#C00000">错误</span><span style="font-family:Consolas;color:#C00000" lang="EN-US"> [1 3 2]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
max [1 3 2]) ; 3 </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US"> (max 1 3 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924032"></a><a name="_Toc281658870"></a><a name="_Toc281556377"></a><a name="_Toc281556277"></a><a name="_Toc281556173"></a><a name="_Toc281555971"></a><a name="_Toc281555814"><span style="text-decoration:none" lang="EN-US">3.5.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">map</span></a></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">模式</span></b><b><span style="font-family:
  Consolas" lang="EN-US">1</span></b><b><span style="font-family:宋体">：操作一个集合</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">模式</span></b><b><span style="font-family:
  Consolas" lang="EN-US">2</span></b><b><span style="font-family:宋体">：操作多个集合</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map <span style="background:yellow">f</span> [a1 a2..an])</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">f</span> a1) (<span style="background:yellow">f</span>
  a2) .. (<span style="background:yellow">f</span> an))</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">注：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(for [e [a1
  a2..an]] (f e))</span><span style="font-family:宋体">是一样的效果。</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">简单操作使用</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
  宋体">省事，<span style="background:yellow">复杂操作推荐用</span></span><b><span style="font-family:Consolas;background:yellow" lang="EN-US">for</span></b><span style="font-family:宋体;background:yellow">更清晰</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map <span style="background:yellow">f</span> [a1 a2..an] [b1 b2..bn] [c1 c2..cn])</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">f</span> a1 b1 c1) (<span style="background:yellow">f</span>
  a2 b2 c2) .. (<span style="background:yellow">f</span> an bn cn))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(def v ["aa" "bbb"
"cccc"])</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">map</span> count
v) ; (2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以通过</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">把</span><span style="font-family:Consolas" lang="EN-US">symbol</span><span style="font-family:
宋体">转换为</span><span style="font-family:Consolas" lang="EN-US">string</span><span style="font-family:宋体">，免得敲无数的</span><span style="font-family:Consolas" lang="EN-US">""</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
str '[aa bbb cccc]) ; ("aa" "bbb" "cccc")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
<span style="background:yellow">name</span> '[aa bbb cccc])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">上例就变成</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
(comp count str) '[aa bbb cccc])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可使用匿名函数：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(map #(* % %) (range 6)) ; (0 1 4 9 16 25)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：多个</span><span style="font-family:Consolas" lang="EN-US">coll</span><span style="font-family:宋体">做</span><span style="font-family:Consolas" lang="EN-US">map</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
+ [1 2 3] [10 20 30] [100 200 300]) ; (111 222 333)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
vector [1 2 3] [10 20 30] [100 200 300]) </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">; ([1 10 100] [2 20 200] [3 30 300])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列（</span><span style="font-family:Consolas" lang="EN-US">1 2 3 5 8 </span><span style="font-family:宋体">……）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
fib (lazy-cat [1 2] <u>(<span style="background:yellow">map</span> + fib (rest
fib))</u>))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (take
10 fib) ; (1 2 3 5 8 13 21 34 55 89)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">原理说明</span><span style="font-family:Consolas" lang="EN-US">(from SICP)</span><span style="font-family:宋体">：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:Consolas" lang="EN-US">fib</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">2</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">3</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">5</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">8</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">13</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">21</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">..</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">..</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:Consolas" lang="EN-US">(rest fib)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">2</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">3</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">5</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">8</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">13</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">21</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">34</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">..</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">..</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:right" align="right"><span style="font-family:Consolas" lang="EN-US">[<b>1 2</b>]</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">3</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">5</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">8</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">13</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">21</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">34</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><b><span style="font-family:Consolas" lang="EN-US">55</span></b></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">keep</span><span style="font-family:宋体">和操作一个集合的</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">相似，但不保留为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">的元素</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">对比：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map first [[1 2] [] [3 4]])&nbsp; ; (1 <span style="background:yellow">nil</span> 3)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">keep</span> first
[[1 2] <span style="background:yellow">[]</span> [3 4]]) ; (1 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：一种有趣的写法</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map '[a b c d e] [0 3]) ; (a d)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">解析：</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">数组可以直接使用下标来存取，</span><span style="font-family:Consolas" lang="EN-US">('[a b c d e] 0)</span><span style="font-family:宋体">是合法的（返回</span><span style="font-family:Consolas" lang="EN-US">'a</span><span style="font-family:宋体">），比如下的写法简单：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map #(nth '[a b c d e] %) [0 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也体现了</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中数据（</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
宋体">）即代码（函数）的说法。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：数据分段</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def c [0 60 80 100])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">map</span> vector
(butlast c) (next c)) ; <span style="color:#5B6E6E">([0 60] [60 80] [80 100])</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：转置一个矩阵</span><span style="font-family:Consolas" lang="EN-US">matrix&nbsp; </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply map vector [[11 12 13] [21 22 23]])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#7F7F7F">([11 21] [12 22] [13
23])</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281556378"></a><a name="_Toc281556278"></a><a name="_Toc281556174"></a><a name="_Toc281555972"></a><a name="_Toc281555815"></a><a name="_Toc281924033"></a><a name="_Toc281658871"><span style="text-decoration:none" lang="EN-US">3.5.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">map-indexed</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map-indexed f
coll)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其中</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">有两个参数</span><span style="font-family:Consolas" lang="EN-US">[i e]</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">i</span><span style="font-family:宋体">为元素</span><span style="font-family:Consolas" lang="EN-US">index</span><span style="font-family:宋体">，从</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">开始；</span><span style="font-family:Consolas" lang="EN-US">e</span><span style="font-family:宋体">为元素本身。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map-indexed (fn [i e] (str i "-" e))
[10 20 30])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
("0-10" "1-20" "2-30")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">（使用</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">iterate</span><span style="font-family:宋体">模拟</span><span style="font-family:Consolas" lang="EN-US">indexed</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map (fn [i e] (str i "-" e)) <span style="background:yellow">(iterate inc 0)</span> [10 20 30])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">看如下更简单例子来理解：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map #(<u>str <span style="background:yellow">%1</span>
"-" <span style="background:lime">%2</span></u>) <span style="background:yellow">[1 2 3]</span> '<span style="background:lime">[a b c]</span>)
; <span style="color:#5B6E6E">("1-a" "2-b" "3-c")</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">只取</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">中的</span><span style="font-family:Consolas" lang="EN-US">val</span><span style="font-family:宋体">，带上</span><span style="font-family:Consolas" lang="EN-US">index)</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m [{:name "qh" :age 20} {:name
"james" :age 30}])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map-indexed (fn [i r] (conj (map val r) i)) m)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">; ((0 "qh" 20) (1
"james" 30))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另有</span><span style="font-family:Consolas" lang="EN-US">keep-indexed</span><span style="font-family:宋体">，和</span><span style="font-family:Consolas" lang="EN-US">map-indexed</span><span style="font-family:宋体">类似，但不保留为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">的元素。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">doseq</span><span style="font-family:
宋体">也可以带</span><span style="font-family:Consolas" lang="EN-US">index</span><span style="font-family:宋体">，例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m '[a b c d e f])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [[i x] (map-indexed vector m)] [i x])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(doseq [[i x] (map-indexed vector m)] (println i
x))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [[x i] (map vector m (iterate inc 0))] [i x])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(doseq [[x i] (map vector m (iterate inc 0))]
(println i x))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">lazy-cat</span><span lang="EN-US"> lazy-cons</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">lazy-cat</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">concat</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">版本，有时必须使用</span><span style="font-family:
Consolas" lang="EN-US">lazy-cat</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列（</span><span style="font-family:Consolas" lang="EN-US">1 1 2 3 5 8 </span><span style="font-family:宋体">……）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fib1 [n1 n2] (<span style="background:yellow">concat</span> [n1] (fib1 n2 (+ n1
n2))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (take
10 (fib1 1 2)) ; </span><span style="font-family:宋体;color:#C00000">出错</span><span style="font-family:Consolas;color:#C00000"> <span lang="EN-US">java.lang.StackOverflowError</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:Consolas" lang="EN-US">(defn fib2 [a b] (<span style="background:yellow">lazy-cat</span> [a] (fib2 b (+ a b))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (take
10 (fib2 1 2)) ; </span><span style="font-family:宋体;color:#0070C0">正确</span><span style="font-family:Consolas;color:#0070C0"> <span lang="EN-US">(1 2 3 5 8 13 21
34 55 89)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">这是</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">最自然易读的写法，和</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">对应的</span><span style="font-family:Consolas;background:yellow" lang="EN-US">Stream</span><span style="font-family:宋体">版本一样：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#8064A2" lang="EN-US">&nbsp;&nbsp;&nbsp; defn
fib2(a:Int,b:Int):Stream[Int] = a #:: fib2(b,a+b) // Scala</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列的前后项之比接近黄金分割比：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fibn [n] (nth (fib2 1 2) n))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (for
[i (range 10)] (double (/ (fibn i) (fibn (inc i))))) ; (0.5 0.666 ... 0.618)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924034"></a><a name="_Toc281658872"><span style="text-decoration:none" lang="EN-US">3.5.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span lang="EN-US">mapcat</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">用于把</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个元素</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">成集合的情况。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map + concat:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">map</span> #(repeat 3 %) [1 2 3]) ; ((1 1 1) (2 2 2)
(3 3 3))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">mapcat</span> #(repeat 3 %) [1 2 3]) ; (1 1 1 2 2 2 3
3 3)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (reduce
<span style="background:yellow">concat </span>(<span style="background:yellow">map
</span>#(repeat 3 %) [1 2 3]))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">中对应的是</span><span style="font-family:Consolas" lang="EN-US">flatMap</span><span style="font-family:
宋体">，如：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">1 to 3 <span style="background:yellow">flatMap</span>
(x=&gt;List.fill(3)(x)) // Scala</span><span style="font-family:宋体;color:#C0504D">：</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">Vector(1, 1, 1, 2, 2, 2,
3, 3, 3)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：得到多个</span><span style="font-family:Consolas" lang="EN-US">zip</span><span style="font-family:宋体">文件的所有文件列表</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(mapcat #(enumeration-seq (.entries (ZipFile. %)))
["1.zip" &nbsp;"2.zip"])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：产生</span><span style="font-family:Consolas" lang="EN-US">n&gt;=i&gt;j&gt;=1</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">(i j)</span><span style="font-family:宋体">序列如</span><span style="font-family:Consolas" lang="EN-US">n=4</span><span style="font-family:宋体">时</span><span style="font-family:Consolas" lang="EN-US">(<u>(2
1)</u> <u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn f1 [i] (map #(list i %) (range 1 i)))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f1 4) ;<span style="color:#5B6E6E"> ((4 1) (4 2)
(4 3))</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">;-------------- *</span><span style="font-family:
宋体">不</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">mapcat</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn f2 [n] (map f1 (range 2 (inc n))))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f2 4) ; <span style="color:#5B6E6E">(</span><b><u><span style="color:#C00000">(</span></u></b><u><span style="color:#5B6E6E">(2 1)</span><b><span style="color:#C00000">)</span></b></u><span style="color:#5B6E6E"> </span><b><u><span style="color:#C00000">(</span></u></b><u><span style="color:#5B6E6E">(3 1) (3
2)</span><b><span style="color:#C00000">)</span></b></u><span style="color:
#5B6E6E"> </span><b><u><span style="color:#C00000">(</span></u></b><u><span style="color:#5B6E6E">(4 1) (4 2) (4 3)</span><b><span style="color:#C00000">)</span></b></u><span style="color:#5B6E6E">)</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce</span> <span style="background:yellow">concat</span> (f2 4)) ; <span style="color:#5B6E6E">(<u>(2
1)</u> <u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">;-------------- </span><span style="font-family:
宋体">使用</span><span style="font-family:Consolas" lang="EN-US">mapcat</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn f3 [n] (<span style="background:yellow">mapcat</span>
f1 (range 2 (inc n))))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f3 4) ; <span style="color:#5B6E6E">(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">;-------------- </span><span style="font-family:
宋体">使用</span><span style="font-family:Consolas" lang="EN-US">mapcat</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">f1
f3</span><span style="font-family:宋体">合在一起</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn f4 [n] (<span style="background:yellow">mapcat</span>
(<u>fn [i] (map #(list i %) (range 1 i))</u>) (range 2 (inc n))))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f4 4) ; <span style="color:#5B6E6E">(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">;-------------- </span><span style="font-family:
宋体">使用</span><span style="font-family:Consolas" lang="EN-US">for, </span><b><span style="font-family:宋体;color:#002060">最清楚明白</span></b></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn f5 [n] (<span style="background:yellow">for</span>
[i (range 2 (inc n)) j (range 1 i)] (list i j)))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(f5 4) ; <span style="color:#5B6E6E">(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：求集合元素的全排列</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn perm [s] </span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (defn rm [e s] (filter #(not= e %) s))</span></p>

<p class="MsoNormal" style="text-indent:31.7pt"><span style="font-family:Consolas" lang="EN-US">(if (empty? s) (list ()) </span></p>

<p class="MsoNormal" style="text-indent:42.2pt"><span style="font-family:Consolas" lang="EN-US">(mapcat <b><u><span style="color:#006600">(</span></u></b>fn
[x] (map <b><span style="color:#C00000">(</span></b><u>fn [p] (cons x p)</u><b><span style="color:#C00000">)</span></b> (perm (rm x s)))<b><u><span style="color:#006600">)</span></u></b> s)))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924035"></a><a name="_Toc281658873"></a><a name="_Toc281556379"></a><a name="_Toc281556279"></a><a name="_Toc281556175"></a><a name="_Toc281555973"></a><a name="_Toc281555816"><span style="text-decoration:none" lang="EN-US">3.5.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">filter</span></a></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(<span style="background:yellow">filter</span>
(fn [x] (= 0 (mod x 2))) (range 10)) ; (0 2 4 6 8)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简化为：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (filter
even? (range 10))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924036"></a><a name="_Toc281658874"></a><a name="_Toc281556380"></a><a name="_Toc281556280"></a><a name="_Toc281556176"></a><a name="_Toc281555974"></a><a name="_Toc281555817"><span style="text-decoration:none" lang="EN-US">3.5.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">remove</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">remove</span>
zero? [1 2 0 2 4 0 3 5 0]) ; [1 2 2 4 3 5]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">remove</span><span style="font-family:宋体">的操作用</span><span style="font-family:Consolas" lang="EN-US">filter</span><span style="font-family:宋体">都可以完成，但更直接，对比：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(filter (complement zero?) [1 2 0 2 4 0 3 5 0]) ;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924037"></a><a name="_Toc281658875"></a><a name="_Toc281556381"></a><a name="_Toc281556281"></a><a name="_Toc281556177"></a><a name="_Toc281555975"></a><a name="_Toc281555818"><span style="text-decoration:none" lang="EN-US">3.5.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">replace</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">用法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span><span style="font-family:宋体">替换</span><span style="font-family:Consolas" lang="EN-US">coll</span><span style="font-family:宋体">中的匹配元素，</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(replace {<span style="background:yellow">0</span>
'zero <span style="background:aqua">-1</span> 'neg} [1 <span style="background:
yellow">0</span> 3 <span style="background:yellow">0</span> <span style="background:aqua">-1</span>]) ; [1 zero 3 zero neg]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;_______________&nbsp;&nbsp;
__________</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:宋体">替换</span><span style="font-family:
Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-family:宋体">源</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：按照</span><span style="font-family:Consolas" lang="EN-US">index</span><span style="font-family:
宋体">重新排列（第二个参数是下标）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(replace ['a 'b 'c 'd] [3 2 1 0]) ; [d c b a]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(replace ['a 'b 'c 'd] [0 0 3 3]) ; [a a d d]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">和如下写法效果一样（推荐）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map ['a 'b 'c 'd] [3 2 1 0]) ; [d c b a]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map ['a 'b 'c 'd] [0 0 3 3]) ; [a a d d]</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">peek pop</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">FIFO</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">取第一个；</span><span style="font-family:Consolas" lang="EN-US">FILO</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">取最后一个。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'(1 2 3)</span><span style="font-family:宋体">列表是压栈在前面，所以：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(peek '(1 2
3)) ; 1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(pop '(1 2 3))
; (2 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3]</span><span style="font-family:宋体">数组是压栈在后面，所以：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(peek [1 2 3])
; 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(pop [1 2 3])
; [1 2]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">drop drop-last take take-last</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop</span> 2 [1 2 3 4 5]) ; (3 4 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop-last</span> [1 2 3 4 5]) ; (1 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop-last</span> 2&nbsp; [1 2 3 4 5]) ; (1 2 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">take</span> 2 [1 2 3 4 5]) ; (1 2)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">take-last</span> 2 [1 2 3 4 5]) ; (4 5)</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">reduce</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce</span> <span style="background:yellow">f</span> [<u>a b</u> c d ... z])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce</span> <span style="background:yellow">f</span> <u>a</u> [<u>b</u> c d ... z])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就是：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">f</span> (<span style="background:yellow">f</span> ..
(<span style="background:yellow">f</span> (<span style="background:yellow">f</span>
(<span style="background:yellow">f</span> <u>a b</u>) c) d) ... y) z)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">即先把</span><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">的头</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个元素作为</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数的</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个参数运行，所得结果和第</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">个元素再作为</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数的</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个参数运行，一直到最后一个元素。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce</span> +
[1 2 4 5]) ; 12</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开来就是：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (+
(+ (+ 1 2) 4) 5)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US">reduce</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">apply</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (apply
+ [1 2 4 5])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开就是</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(+ 1 2 4 5)</span></p>

<p class="MsoNormal"><b><u><span style="font-family:宋体">可见有时</span></u></b><b><u><span style="font-family:Consolas" lang="EN-US">reduce</span></u></b><b><u><span style="font-family:宋体">和</span></u></b><b><u><span style="font-family:
Consolas" lang="EN-US">apply</span></u></b><b><u><span style="font-family:宋体">结果一样，但过程不同</span></u></b><span style="font-family:宋体">。</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce * (range 1 6)) ; 120</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开为：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(* (* (* (* 1 2) 3) 4) 5)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US">apply</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(apply * (range 1 6))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开为：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(* 1 2 3 4 5)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas"> </span><span style="font-family:宋体">求</span><span style="font-family:Consolas" lang="EN-US">1000</span><span style="font-family:
宋体">以下是</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">或</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">的倍数的所有数的</span><span style="font-family:Consolas" lang="EN-US">sum</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [n] (or (= 0 (mod n 3)) (= 0 (mod n 5))))</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce</span> + (<span style="background:yellow">filter</span> f (range 1000))) ; </span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">apply</span><span style="font-family:宋体">结果一样</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：只能用</span><span style="font-family:Consolas" lang="EN-US">reduce</span><span style="font-family:宋体">，不能用</span><span style="font-family:Consolas" lang="EN-US">apply</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (reduce
subs <span style="background:yellow">[</span>"hello world" 1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (reduce
subs "hello world" <span style="background:yellow">[</span>1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开为：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (subs
(subs (subs "hello world" 1) 2) 3) ; "world"</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：如果</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">函数的参数不止</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个，可用</span><span style="font-family:Consolas" lang="EN-US">applay</span><span style="font-family:
宋体">展开</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">reduce</span> #(<span style="background:yellow">apply</span>
subs %1 %2) <span style="background:yellow">[</span>"hello world" [0
10] [0 8] [0 6]])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">reduce</span> #(<span style="background:yellow">apply</span>
subs %1 %2) "hello world" <span style="background:yellow">[</span>[0
10] [0 8] [0 6]])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开为：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">apply subs</span> (<span style="background:yellow">apply
subs</span> (<span style="background:yellow">apply subs</span> "hello
world" [0 10]) [0 8]) [0 6])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">进一步展开：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (subs
(subs (subs "hello world" 0 10) 0 8) 0 6)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：替换</span><span style="font-family:Consolas" lang="EN-US">str</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">”aa”,”bb”</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce #(replace-all %1 %2 "")
"111-<span style="background:yellow">aa</span>-222-<span style="background:
yellow">bb</span>-333-<span style="background:yellow">aa</span>-444"
["<span style="background:yellow">aa</span>" "<span style="background:yellow">bb</span>"]) </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; "111--222--333--444"</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(reverse [1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就是：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce conj () [1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">展开为：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (conj
(conj (conj () 1) 2) 3)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reverse</span><span style="font-family:宋体">可以针对所有</span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">，但效率不高；为了提高效率，</span><span style="font-family:
Consolas" lang="EN-US">[]</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">sorted-map</span><span style="font-family:宋体">可以使用</span><span style="font-family:Consolas" lang="EN-US">rseq</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">rseq</span> [1 2 3])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">但</span><span style="font-family:Consolas" lang="EN-US">(list 1 2 3)</span><span style="font-family:宋体">等不行：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (rseq
'(1 2 3)) ; </span><span style="font-family:宋体;color:red">报错，必须是</span><span style="font-family:Consolas;color:red" lang="EN-US">clojure.lang.Reversible</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:red" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">fold-left fold-right</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">foldLeft</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">foldRight</span><span style="font-family:宋体">可以由</span><span style="font-family:Consolas" lang="EN-US">reduce</span><span style="font-family:宋体">完成：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">(reduce f x coll)</span><span style="font-family:宋体">直接对应</span><span style="font-family:Consolas" lang="EN-US">coll.foldLeft(x)(f)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce / 1 [2 4 8]) ; 1/64=</span><span lang="EN-US"> </span><span style="font-family:Consolas" lang="EN-US">0.015625</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;color:#7030A0" lang="EN-US">List(2,4,8).foldLeft(1.0)(_/_) ; <b><u>Scala</u></b></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">(reduce #(f %2 %1)
(reverse [x coll]))) </span><span style="font-family:宋体">对应</span><span style="font-family:Consolas" lang="EN-US">coll.foldRight(x)(f)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(reduce #(/ %2 %1) (reverse [1 2 4 8]) ; (/ 1 (/ 2
(/ 4 8)))=1/4=0.25</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;color:#7030A0" lang="EN-US">List(2,4,8).foldRight(1.0)(_/_) ; <b><u>Scala</u></b>
1.0/(2/(4/8.0))=0.25</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">所以可以定义</span><span style="font-family:Consolas" lang="EN-US">fold-left, fold-right</span><span style="font-family:宋体">如下</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">fold-left</span>
[f x coll] (reduce f x coll))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">fold-right</span>
[f x coll] (reduce #(f %2 %1) (reverse (cons x coll))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(fold-left / 1 [2 4 8]) ; 1/64</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(fold-right / 1 [2 4 8]) ; 1/4</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924038"></a><a name="_Toc281658876"></a><a name="_Toc281556382"></a><a name="_Toc281556282"></a><a name="_Toc281556178"></a><a name="_Toc281555976"></a><a name="_Toc281555819"><span style="text-decoration:none" lang="EN-US">3.5.13<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">reductions</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reductions f
[<u>a b</u> c d .. z])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reductions f <u>a</u>
[<u>b</u> c d ...z])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就是：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">[<b>a</b> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<span style="background:lime">(</span><span style="background:yellow">reduce</span> f [<u>a b</u>]<span style="background:
lime">)</span> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<span style="background:lime">(</span><span style="background:yellow">reduce</span> f [a b c]<span style="background:lime">)</span>
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<span style="background:lime">(</span><span style="background:yellow">reduce</span> f [a b c d]<span style="background:
lime">)</span> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;... </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;<span style="background:lime">(</span><span style="background:yellow">reduce</span> f [a b c d .. z]<span style="background:
lime">)</span>]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">scanLeft</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reductions *
[1 2 3 4 5]) ; [1 2 6 24 120]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对应</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">List(2,3,4,5).scanLeft(1)(_*_)
; List(1, 2, 6, 24, 120) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以用</span><span style="font-family:Consolas" lang="EN-US">loop..recur</span><span style="font-family:宋体">完成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn
scan-left [f i0 seq] </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;(loop
[<b>s</b> seq <b>r</b> [i0]] (if (empty? s) r (recur (rest s) (conj r (f (last
r) (first s)))))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(scan-left + 0
[1 2 3 4 5]) ; [0 1 3 6 10 15] </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">List(1,2,3,4,5).scanLeft(0)(_+_)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(scan-left * 1
[1 2 3 4 5]) ; [1 1 2 6 24 120] </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas;color:#C0504D" lang="EN-US">List(1,2,3,4,5).scanLeft(1)(_*_)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.14<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">split</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">split-at</span> 3 (range 10)) ; [(0 1 2) (3 4 5 6 7 8
9)]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">split-with</span> neg? (range -3 3)) ; [(-3 -2 -1) (0
1 2)]</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924039"></a><a name="_Toc281658877"></a><a name="_Toc281556383"></a><a name="_Toc281556283"></a><a name="_Toc281556179"></a><a name="_Toc281555977"></a><a name="_Toc281555820"><span style="text-decoration:none" lang="EN-US">3.5.15<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">partition</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">([n coll] [n
step coll] [n step pad coll])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">n: </span><span style="font-family:宋体">每组元素的个数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">step</span><span style="font-family:宋体">：上下组第一个元素之间的距离，缺省</span><span style="font-family:Consolas" lang="EN-US">step=n</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">pad</span><span style="font-family:宋体">：最后一组元素不够时补足的元素</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">按个数分组：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(partition 2 [1 2 3 4 5 6 7]) ; ((1 2) (3 4) (5
6))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(partition 2 1 [1 2 3 4 5 6 7]) ; ((<b>1</b> 2) (<b>2</b>
3) (<b>3</b> 4) (<b>4</b> 5) (<b>5</b> 6) (<b>6</b> 7)) ; </span><span style="font-family:宋体">步长</span><span style="font-family:Consolas" lang="EN-US">1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(partition 3 3 [0 0] [1 2 3 4]) ; ((1 2 3) (4 0
0))&nbsp;&nbsp; &nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924040"></a><a name="_Toc281658878"></a><a name="_Toc281556384"></a><a name="_Toc281556284"></a><a name="_Toc281556180"></a><a name="_Toc281555978"></a><a name="_Toc281555821"><span style="text-decoration:none" lang="EN-US">3.5.16<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">group-by</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">group-by</span>
neg? [0 1 -2 3 -4 5]) ; {false [0 1 3 5], true [-2 -4]}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(group-by #(&lt; % 3) (range 10)) ; {true [0 1 2],
false [3 4 5 6 7 8 9]}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可分多组</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(group-by #<span style="background:lime">(</span><u>cond
(&gt; % 0) "+" (= % 0) "0" (&lt; % 0) "-"</u><span style="background:lime">)</span> [1 2 -3 -2 0 4 -1 0])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#5B6E6E">{"+" [1 2
4], "-" [-3 -2 -1], "0" [0 0]}</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(group-by <u>count</u> ["aa"
"bbb" "cccc" "ddd" "ee"]) ; <span style="color:#5B6E6E">{2 ["aa" "ee"], 3 ["bbb"
"ddd"], 4 ["cccc"]}</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.17<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">juxt</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">juxt</span><span style="font-family:Consolas" lang="EN-US">aposition: </span><span style="font-family:宋体">并列</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924041"></a><a name="_Toc281658879"></a><a name="_Toc281556385"></a><a name="_Toc281556285"></a><a name="_Toc281556181"></a><a name="_Toc281555979"></a><a name="_Toc281555822"><span style="text-decoration:none" lang="EN-US">3.5.18<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">juxt</span></a></p>

<p class="MsoNormal" style="text-align:left" align="left"><b><span style="font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:black;background:yellow" lang="EN-US">juxt</span></b><b><span style="font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">aposition</span></b><span style="font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:gray" lang="EN-US"> &nbsp;</span><span style="font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;" lang="EN-US">n.</span><span style="font-family:宋体">并排</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">((juxt f1 f2 f3 ..) coll) =&gt; [(f1 coll) (f2 coll)
(f3 coll) ..]</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">例如：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">((juxt inc +
dec) 7) ; [8 7 6]</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US"> ((juxt :1 :3) {:1 10 :2 20 :3 30}) ; [10 30]</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US"> ((juxt count first) "hello") ; [5 \H]</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:宋体">例子：把数字按奇偶分组</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">juxt</span> filter remove) even? (range 10)) ; [(0 2
4 6 8) (1 3 5 7 9)]</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">[(filter
even? (range 10)) (remove even? (range 10))]</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：也可以用</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">(map val (<span style="background:yellow">group-by</span> even? (range 10))) ; ([0 2 4 6 8] [1
3 5 7 9])</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：用</span><span style="font-family:Consolas" lang="EN-US">contrib</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">(use '[<span style="background:yellow">clojure.contrib.seq-utils</span> :only [separate]])</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">separate</span> even? (range 10))</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;line-height:14.4pt" align="left"><span style="font-family:宋体">例子：配合</span><span style="font-family:Consolas" lang="EN-US">identity</span><span style="font-family:宋体">（返回参数本身）生成</span><span style="font-family:
Consolas" lang="EN-US">map</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">(into {} </span></p>

<p class="MsoNormal" style="text-align:left;text-indent:31.5pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">(map <span style="background:lime">(</span><span style="background:yellow">juxt</span>
identity count<span style="background:lime">)</span> ["what"
"was" "the" "matter" "with"
"you"])</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#7F7F7F">{"what" 4, "was" 3, "the"
3, "matter" 6, "with" 4, "you" 3}</span></span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
line-height:14.4pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.19<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">sort</span><span lang="EN-US"> sort-by</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort</span> [1 3
6 2 5]) ; (1 2 3 5 6)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort</span> <span style="background:yellow">&gt;</span> (range 10)) ; (9 8 7 6 5 4 3 2 1 0)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者写成</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(reverse (range 10)) ; (9 8 7 6 5 4 3 2 1 0)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以结合</span><span style="font-family:Consolas" lang="EN-US">comparator(</span><span style="font-family:宋体">实现</span><span style="font-family:Consolas" lang="EN-US">java.util.Comparator)</span><span style="font-family:宋体">来用：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(sort (<span style="background:yellow">comparator</span>
&gt;) [1 3 6 2 5]) ; [6 5 3 2 1]</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(sort (<span style="background:yellow">comparator</span>
&lt;) [1 3 6 2 5]) ; [1 2 3 5 6]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">自定义排序函数：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort-by</span>
#(.toString %) (range 1 11)) ; (1 <b><u>10</u></b> 2 3 4 5 6 7 8 9)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort-by</span>
#(Math/abs %) [1 -3 2 9 8 -6]) ; (1 2 -3 -6 8 9)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort-by</span>
#(- %) [1 -3 2 9 8 -6]) ; (9 8 2 1 -3 -6) </span><span style="font-family:宋体">倒序</span></p>

<p class="MsoNormal"><span style="font-family:宋体">排序</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort-by</span>
:age [{:age 10} {:age 3} {:age 5}]) </span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sort-by</span>
:age <span style="background:yellow">&gt;</span> [{:age 10} {:age 3} {:age 5}])</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：按照指定顺序</span><span style="font-family:Consolas" lang="EN-US">sort</span><span style="font-family:
宋体">排序</span><span style="font-family:Consolas" lang="EN-US">map</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [m '({:k
a :v 10} {:k c :v 30} {:k b :v 20} {:k d :v 40})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">order '(c b a)]</span></p>

<p class="MsoNormal" style="margin-left:9.0pt;text-indent:12.0pt"><span style="font-family:Consolas" lang="EN-US">(sort-by </span></p>

<p class="MsoNormal" style="margin-left:30.0pt;text-indent:12.0pt"><span style="font-family:Consolas" lang="EN-US">#(<b><u>(into {} (map-indexed (fn [i e]
[e i]) order))</u></b> (:k %)) </span></p>

<p class="MsoNormal" style="margin-left:30.0pt;text-indent:12.0pt"><span style="font-family:Consolas" lang="EN-US">m))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结果：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">({:k c, :v 30} {:k b, :v 20} {:k a, :v 10})</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924042"></a><a name="_Toc281658880"></a><a name="_Toc281556386"></a><a name="_Toc281556286"></a><a name="_Toc281556182"></a><a name="_Toc281555980"></a><a name="_Toc281555823"><span style="text-decoration:none" lang="EN-US">3.5.20<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">min max min-key max-key</span></a></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数</span></b></p>
  </td>
  <td style="width:343.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="457">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">用法</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">min</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">max</span></p>
  </td>
  <td style="width:343.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="457">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(min 3 1 4 1
  5 9 2 7) ; 1</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply max
  [3 1 4 1 5 9 2 7]) ; 9</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:宋体">自定义：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">min-key</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">max-key</span></p>
  </td>
  <td style="width:343.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="457">
  <p class="MsoNormal"><span style="font-family:宋体">取出绝对值最小</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:
  宋体">大的数：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(min-key
  #(Math/abs %) -3 -1 4 -1 5 -9 2 7) ; -1</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply
  max-key #(Math/abs %) [-3 -1 4 -1 5 -9 2 7]) ; -9</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">min-key, max-key</span><span style="font-family:
宋体">为根据自定义函数选出最小</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">大值</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.21<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">for</span></p>

<p class="MsoNormal"><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">for..yield:</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> <span style="background:yellow">[</span>i (range 10)<span style="background:yellow">]</span>
(* i i)) ; (0 1 4 9 16 25 36 49 64 81)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> <span style="background:yellow">[</span>i (range 10) <span style="background:yellow">:when</span>
(&gt; 20 (* i i))<span style="background:yellow">]</span> (* i i)) ; (0 1 4 9
16)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [i (range 10) :<span style="background:yellow">when</span>
(even? i)] i) ; (0 2 4 6 8) </span><span style="font-family:宋体">做到完</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [i (range 10) :<span style="background:yellow">while</span>
(even? i)] i) ; (0) </span><span style="font-family:宋体">碰到</span><span style="font-family:Consolas" lang="EN-US">false</span><span style="font-family:
宋体">停止</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：上例中</span><span style="font-family:Consolas" lang="EN-US">(* i i)</span><span style="font-family:宋体">算了两次没有必要，可用</span><span style="font-family:Consolas" lang="EN-US">:let</span><span style="font-family:
宋体">来解决</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for <span style="background:lime">[</span>i
(range 10) <span style="background:yellow">:let</span> [ii (* i i)] <span style="background:yellow">:when</span> (&gt; 20 ii)<span style="background:
lime">]</span> ii)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">对单个集合的操作都可以用</span><span style="font-family:
Consolas" lang="EN-US">for</span><span style="font-family:宋体">来代替（选择原则：很简单的用</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">，其他都用</span><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">map</span> (comp
count str) '[aa bbb cccc])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; (2 3 4)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> [i
'[aa bbb cccc]] (count (str i)))&nbsp;&nbsp; ; (2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">map</span> #(* %
%) [1 2 3 4 5]))&nbsp; ; (1 4 9 16 25)</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> [i [1
2 3 4 5]] (* i i))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">比</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">少的功能：不能操作多个集合如</span><span style="font-family:
Consolas" lang="EN-US">(map + [1 2] [10 20] [100 200])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">比</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">多出来的功能：可用多个变量，还可加</span><span style="font-family:Consolas" lang="EN-US">when</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：乘法口诀表</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> [<span style="background:yellow">i</span> (range 1 10) <span style="background:yellow">j</span>
(range 1 10) <span style="background:yellow">:when</span> (&gt;= i j)] (str j
"x" i "=" (* i j)))</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">for</span> [<span style="background:yellow">i</span> (range 1 10) <span style="background:yellow">j</span>
(range 1 (inc <span style="background:yellow">i</span>))] (str j "x"
i "=" (* i j)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">该简单问题的最佳解决方案还是分而治之：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [n] (for [i (range 1 (inc n))] (format
"%d*%d=%d" i n (* i n))))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(dotimes [i 9] (println (f (inc i))))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for</span><span style="font-family:宋体">循环中进行</span><b><u><span style="font-family:
Consolas" lang="EN-US">destruction</span></u></b><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [[<span style="background:lime">a</span> <span style="background:yellow">b</span> <span style="background:aqua">c</span>] '((<span style="background:lime">A</span> <span style="background:yellow">B</span> <span style="background:aqua">C</span>) (<span style="background:lime">D</span> <span style="background:yellow">E</span> <span style="background:aqua">F</span>))] <span style="background:yellow">b</span>) <span style="color:#7F7F7F">; (B E)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">不需要的也可忽略：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [[<span style="background:lime">a</span> <span style="background:yellow">b</span>] '((<span style="background:lime">A</span> <span style="background:yellow">B</span> C) (<span style="background:lime">D</span> <span style="background:yellow">E</span> F))] <span style="background:yellow">b</span>)
<span style="color:#7F7F7F">; (B E)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">还可以使用</span><span style="font-family:Consolas" lang="EN-US"> &amp;:</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(for [[<span style="background:lime">a</span>
&amp; <span style="background:yellow">r</span>] '((<span style="background:
lime">A</span> <span style="background:yellow">B C</span>) (<span style="background:lime">D</span> <span style="background:yellow">E F</span>))] <span style="background:yellow">r</span>) <span style="color:#7F7F7F">; ((B C) (E F))</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924043"></a><a name="_Toc281658881"></a><a name="_Toc281556387"></a><a name="_Toc281556287"></a><a name="_Toc281556183"></a><a name="_Toc281555981"></a><a name="_Toc281555824"><span style="text-decoration:none" lang="EN-US">3.5.22<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">every? some</span></a></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">条件</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(erery? cond
  seq)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">每个都符合</span><span style="font-family:Consolas" lang="EN-US">cond</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(some cond
  seq)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">返回第一个符合</span><span style="font-family:Consolas" lang="EN-US">cond</span><span style="font-family:
  宋体">的结果，或者</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">find</span><span style="font-family:
  宋体">不一样</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not-every?
  cond seq)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">不是每个都符合</span><span style="font-family:Consolas" lang="EN-US">cond</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not-any?
  cond seq)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">没有任何一个符合</span><span style="font-family:Consolas" lang="EN-US">cond</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注意：没有</span><span style="font-family:Consolas" lang="EN-US">exists?</span><span style="font-family:宋体">，可用</span><span style="font-family:Consolas" lang="EN-US">some</span><span style="font-family:
宋体">来模拟</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：判断字符串是否仅仅包含空格字符</span><span style="font-family:Consolas" lang="EN-US">(" ", "\n",
"\t")</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(defn blank? [s] (<span style="background:yellow">every?</span>
#(Character/isWhitespace %) s))</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：判断是否质数</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(defn prime? [n] (<span style="background:yellow">not-any?</span>
#(zero? (rem n %)) (range 2 n)))</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(filter prime? (range 2 100))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">contrib</span><span style="font-family:宋体">中的惰性质数序列</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use '[<u>clojure.contrib.lazy-seqs</u>
:only (<span style="background:yellow">primes</span>)])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(take 10
primes)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth primes
1000)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.23<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">nth get</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:57.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="76">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></b></p>
  </td>
  <td style="width:318.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="424">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">nth</span></b></p>
  </td>
  <td style="width:166.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="222">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">get</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="76">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">list set</span></p>
  </td>
  <td style="width:318.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="424">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(nth '(10 20 30) 0) <span style="color:#7F7F7F">;
  10</span> </span></p>
  </td>
  <td style="width:166.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="222">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(get '(10 20
  30) 0) <span style="color:#7F7F7F">; nil</span></span></p>
  <p class="MsoNormal"><span style="font-family:宋体">始终返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="76">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector
  hash-map</span></p>
  </td>
  <td style="width:318.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="424">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth [10 20
  30] 0) ; 10</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(nth [10 20 30] 4) ; <span style="color:red">java.lang.IndexOutOfBoundsException</span></span></p>
  </td>
  <td style="width:166.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="222">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(get [10 20
  30] 0) ; 10</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(get [10 20
  30] 4) ; nil</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(get {3 30 5
  50} 3) ; 30</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(get {3 30 5
  50} 0) ; nil</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">按</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">去，</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">就是</span><span style="font-family:Consolas" lang="EN-US">index</span><span style="font-family:宋体">，超出</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">3.5.24<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">frequences</span></p>

<p class="MsoNormal"><span style="font-family:宋体">计算一个</span><span style="font-family:Consolas" lang="EN-US">coll</span><span style="font-family:宋体">中各元素出现的频率</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">clojure.core/frequencies</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">([coll])</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; Returns a map from distinct items in coll
to the number of times</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; they appear.</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">frequencies</span> "hello world") <span style="color:#7F7F7F">; {\h 1, \e 1, \l 3, \o 2, \space 1, \w 1, \r 1, \d 1}</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573093"></a><a name="_Toc281924044"></a><a name="_Toc281658882"></a><a name="_Toc281556388"></a><a name="_Toc281556288"></a><a name="_Toc281556184"></a><a name="_Toc281555982"></a><a name="_Toc281555825"><span style="font-family:Consolas" lang="EN-US">3.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">序列</span></u></a><u><span style="font-family:Consolas" lang="EN-US">seq</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中几乎所有东西都可以抽象成序列</span><span style="font-family:
Consolas" lang="EN-US">seq</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
'(1 2 3 4)) ; (1 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
[1 2 3 4]) ; (1 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
#{1 2 3 4}) ; (1 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
{1 2 3 4}) ; ([1 2] [3 4])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">所有可序列化的数据结构都可以使用相同的函数来处理：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (first
seq1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (rest
seq1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (cons
e seq1) ; </span><span style="font-family:宋体">插前</span><span style="font-family:Consolas;background:yellow" lang="EN-US">cons</span><span style="font-family:Consolas" lang="EN-US">truct</span><span style="font-family:宋体">，构造</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:
宋体">，也说明该数据结构的不可变性</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (conj
seq1 e) ; </span><span style="font-family:宋体">加后</span><span style="font-family:Consolas;background:yellow" lang="EN-US">j</span><span style="font-family:Consolas" lang="EN-US">oin</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (concat
seq1 seq2) ; </span><span style="font-family:宋体">连接前后</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (into
seq1 seq2) ; </span><span style="font-family:宋体">压栈</span><span style="font-family:Consolas" lang="EN-US">seq2</span><span style="font-family:宋体">元素到</span><span style="font-family:Consolas" lang="EN-US">seq1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">distinct</span> seq1) ; </span><span style="font-family:宋体">去重复</span><span style="font-family:Consolas" lang="EN-US">,
(distinct (into [1 2 3] [2 3 4])) ; (1 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">distinct?</span> 1 2 3) ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">distinct?</span> 1 2 1 3) ; false</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：原始的</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">cons</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">car</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">cdr</span><span style="font-family:宋体">作为</span><span style="font-family:Consolas" lang="EN-US">List</span><span style="font-family:宋体">的基本操作函数</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cons</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个元素构造一个</span><span style="font-family:Consolas" lang="EN-US">list</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">car</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">first</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cdr</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">rest</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">常用函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn p "</span><span style="font-family:
宋体">打印一个</span><span style="font-family:Consolas" lang="EN-US">sequence"
[seq] (<span style="background:yellow">dorun</span> (<span style="background:
yellow">map</span> println seq)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn p "</span><span style="font-family:
宋体">打印一个</span><span style="font-family:Consolas" lang="EN-US">sequence"
[seq] (<span style="background:yellow">doseq</span> [i seq] (println i)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573094"></a><a name="_Toc281924045"></a><a name="_Toc281658883"></a><a name="_Toc281556389"></a><a name="_Toc281556289"></a><a name="_Toc281556185"></a><a name="_Toc281555983"></a><a name="_Toc281555826"><span style="font-family:Consolas" lang="EN-US">4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></u></a></h1>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中函数也是</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">列表：第</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个元素是函数名，后面是函数参数的列表</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573095"></a><a name="_Toc281924046"></a><a name="_Toc281658884"></a><a name="_Toc281556390"></a><a name="_Toc281556290"></a><a name="_Toc281556186"></a><a name="_Toc281555984"></a><a name="_Toc281555827"><span style="font-family:Consolas" lang="EN-US">4.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数帮助</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">文本帮助：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">doc </span>print) ; </span><span style="font-family:
宋体">准确查找</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">find-doc</span> "print") ; </span><span style="font-family:宋体">模糊（</span><span style="font-family:Consolas" lang="EN-US">regex</span><span style="font-family:宋体">）查找</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (source
print) ; </span><span style="font-family:宋体">查看源码</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">url</span><span style="font-family:宋体">形式提供的</span><span style="font-family:Consolas" lang="EN-US">html</span><span style="font-family:
宋体">帮助，如：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<b>clojure.java.browse</b>)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">browse-url</span>
"http://clojure.org/special_forms#var")</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">javadoc</span>
String)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<b>clojure.java.browse</b>)</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(defmacro demo [f]</span></p>

<p class="MsoNormal" style="text-indent:38.85pt"><span style="font-family:Consolas" lang="EN-US">`(browse-url (format "</span><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US"><a href="http://clojuredocs.org/clojure_core/clojure.core/%25s#examples" target="_blank" rel="external">http://clojuredocs.org/clojure_core/clojure.core/%s#examples</a></span><span style="font-family:Consolas" lang="EN-US">" '~f)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">自定义例子：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defmacro <span style="background:yellow">kw</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; "</span><span style="font-family:宋体">查询当前所有</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">中含特定字符串的函数，如</span><span style="font-family:Consolas" lang="EN-US">: (kw -index)</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">
@see apropos "</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; [s] `(filter #(&gt;= (.indexOf (str %)
(name '~s)) 0)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(sort (keys (mapcat ns-publics (all-ns))))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defmacro <span style="background:yellow">demo</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; "</span><span style="font-family:宋体">打开</span><span style="font-family:Consolas" lang="EN-US"> clojuredocs.org </span><span style="font-family:宋体">查询</span><span style="font-family:Consolas" lang="EN-US">
clojure.core </span><span style="font-family:宋体">的函数使用样例</span><span style="font-family:Consolas" lang="EN-US">"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; [f]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; `(let [~'f2 (str '~f) <span style="color:#7F7F7F">; map? </span></span><span style="font-family:宋体;
color:#7F7F7F">等以</span><span style="font-family:Consolas;
color:#7F7F7F" lang="EN-US">?</span><span style="font-family:宋体;color:#7F7F7F">结尾的变为</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">map_q</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
~'f2 (if (.endsWith ~'f2 "?") (str (.substring ~'f2 0 (dec (count
~'f2))) "_q") ~'f2)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;
(clojure.java.browse/browse-url <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">形如</span><span style="font-family:Consolas;
color:#7F7F7F"> </span><span style="font-family:宋体;color:#7F7F7F">“</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">-&gt;</span><span style="font-family:宋体;color:#7F7F7F">”</span><span style="font-family:Consolas;
color:#7F7F7F"> </span><span style="font-family:宋体;color:#7F7F7F">需要</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">encode</span><span style="font-family:宋体;color:#7F7F7F">成</span><span style="font-family:
Consolas;color:#7F7F7F" lang="EN-US"> -%3E ,browse-url</span><span style="font-family:宋体;
color:#7F7F7F">才能打开</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (str
"http://clojuredocs.org/clojure_core/clojure.core/" </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(java.net.URLEncoder/encode ~'f2) "#examples"))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">class-methods</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; "</span><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">类的所有方法并排序，用法：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (class-methods String)&nbsp; (class-methods
System)&nbsp; (class-methods java.util.Date)"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; [c] (sort (map #(.getName %) (.getMethods
c))))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573096"></a><a name="_Toc281924047"></a><a name="_Toc281658885"></a><a name="_Toc281556391"></a><a name="_Toc281556291"></a><a name="_Toc281556187"></a><a name="_Toc281555985"></a><a name="_Toc281555828"><span style="font-family:Consolas" lang="EN-US">4.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调用函数</span></u></a></h2>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(method-name param1 param2 ...)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">count</span> "hello") ; 5</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">println</span> "hello" "world")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">返回值为</span><span style="font-family:Consolas" lang="EN-US">true/false</span><span style="font-family:宋体">的函数名一般带一个</span><span style="font-family:Consolas" lang="EN-US">"?":</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (string<span style="background:yellow">?</span> "hello") ; true</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (string<span style="background:yellow">?</span> 10) ; false</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (keyword?
:foo)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (symbol?
'boo)</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281924048"></a><a name="_Toc281658886"></a><a name="_Toc281556392"></a><a name="_Toc281556292"></a><a name="_Toc281556188"></a><a name="_Toc281555986"></a><a name="_Toc281555829"></a><a name="_Toc339573097"><span style="font-family:Consolas" lang="EN-US">4.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">以“函数名”调用</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ns-resolve *ns*</span> 'f)</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">可指定</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">；只查找，不创建，使用中安全些</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">intern *ns*</span> 'f)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">可指定</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">；有则查找，没有则创建</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">eval</span> 'f)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用当前</span><span style="font-family:Consolas" lang="EN-US">ns</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">resolve</span> 'f)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">使用当前</span><span style="font-family:Consolas" lang="EN-US">ns</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [n] (*
n n n))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">ns-resolve</span> *ns* (symbol "<span style="background:yellow">f</span>")) 10) ; 1000</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">*ns* </span><span style="font-family:宋体">取得当前</span><span style="font-family:Consolas" lang="EN-US">namespace</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者使用</span><span style="font-family:Consolas" lang="EN-US">intern</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">intern</span> *ns* (symbol "f2")) ; </span><span style="font-family:宋体">没有</span><span style="font-family:Consolas" lang="EN-US">f2</span><span style="font-family:宋体">函数就创建一个，但不绑定</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">intern</span> *ns* (symbol "f2") f) ; </span><span style="font-family:宋体">绑定到</span><span style="font-family:Consolas" lang="EN-US">f2</span><span style="font-family:宋体">到</span><span style="font-family:Consolas" lang="EN-US">f</span><span style="font-family:宋体">，相当于别名</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以使用</span><span style="font-family:Consolas" lang="EN-US">eval</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">eval</span> (symbol "f")) 10) ; 1000</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">还可以使用</span><span style="font-family:Consolas" lang="EN-US">resolve</span><span style="font-family:宋体">（相当于</span><span style="font-family:Consolas" lang="EN-US">ns-resolve *ns*</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">resolve</span> (symbol "f")) 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">通过字符串</span><span style="font-family:Consolas" lang="EN-US">use</span><span style="font-family:宋体">包：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use (symbol
"<i><u>wr3.clj.stringx</u></i>"))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">等同于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use '<i><u>wr3.clj.stringx</u></i>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">ns-resolve</span> (<span style="background:yellow">the-ns</span>
(symbol "wr3.clj.stringx")) (symbol "left"))
"hello-world" "-")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [n (symbol
"<i><u>wr3.clj.stringx</u></i>") f (symbol "<i><u>left</u></i>")]</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">require</span> n)</span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">ns-resolve</span>
(the-ns n) f) "hello-world" "-"))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573098"><span style="font-family:Consolas" lang="EN-US">4.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">运行时动态创建函数</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn gen-fn</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">[n as b] <span style="color:#7F7F7F">; n:fname
as:args, b:body</span> </span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(let [n (symbol n)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as (vec (map symbol
as))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fn-value (<span style="background:yellow">eval</span> `(fn ~n ~as ~b))]</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">intern
*ns*</span> n fn-value)))</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(gen-fn
"foo" ["x"] '(do (println x) (println (inc x))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(foo 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(gen-fn "f1"
["x" "y"] '(* x y) )</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f1 3 5)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以直接使用</span><span style="font-family:Consolas" lang="EN-US">read-string</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">eval</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def f1 (<span style="background:yellow">eval</span> (<span style="background:yellow">read-string</span>
"<span style="color:#632423">(fn [x y] (* x y))</span>")))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f1 3 5) ; 15</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def f1
(read-string "#=<span style="color:#632423">(fn [x y] (* x y))</span>"))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573099"><span style="font-family:Consolas" lang="EN-US">4.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Meta</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">4.5.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义</span><span lang="EN-US">meta</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">信息</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def <span style="background:yellow">^</span><span style="background:lime">{:doc "hello world" :author "james"}</span>
v 10)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">^</span><span style="background:lime">{:doc "foo..." :added "1.2"}</span>
f2 [x] (* x x x))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(ns <span style="background:yellow">^</span><span style="background:lime">{:doc "The core Clojure language."</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:lime">:author "Rich Hickey"}</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; clojure.core)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">^</span><span style="font-family:宋体">告诉</span><span style="font-family:Consolas" lang="EN-US">reader</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">^</span><span style="font-family:宋体">开始的部分（如：</span><span style="font-family:Consolas;
background:lime" lang="EN-US">{:doc "foo..." :added "1.2"}</span><span style="font-family:宋体">）是紧接着的后面一个元素（如：</span><span style="font-family:
Consolas" lang="EN-US">f2</span><span style="font-family:宋体">）的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:宋体">信息</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">紧跟在</span><span style="font-family:Consolas" lang="EN-US">def | defn | ns </span><span style="font-family:
宋体">后面；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas;background:yellow" lang="EN-US">^</span><span style="font-family:宋体">开头的一个</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">，每对值的类型为：</span><span style="font-family:
Consolas" lang="EN-US">[Keyword String]</span><span style="font-family:宋体">；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">以下形式等价，注意</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
宋体">信息的位置不同</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:234.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="312">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
  <td style="width:260.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="347">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:234.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="312">
  <p class="MsoNormal"><span style="font-family:宋体">形式</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">在函数名前，带</span><span style="font-family:Consolas" lang="EN-US">^</span><span style="font-family:
  宋体">的一个</span><span style="font-family:Consolas" lang="EN-US">{:k
  "v"}</span><span style="font-family:宋体">表</span></p>
  </td>
  <td style="width:260.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="347">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">^{:doc "foo..." :version "1.0"}</span>
  <b><u>f1</u></b> </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">[x] (* x x))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (var
  f1))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:234.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="312">
  <p class="MsoNormal"><span style="font-family:宋体">形式</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">在函数名后，一个</span><span style="font-family:Consolas" lang="EN-US">{:k "v"}</span><span style="font-family:宋体">表</span></p>
  </td>
  <td style="width:260.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="347">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <b><u>f1</u></b></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">{:doc "foo..." :version "1.0"}</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; [x]
  (* x x ))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (var
  f1))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:234.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="312">
  <p class="MsoNormal"><span style="font-family:宋体">形式</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">在函数名后，一个字符串后跟一个</span><span style="font-family:Consolas" lang="EN-US">{:k "v"}</span><span style="font-family:宋体">表</span></p>
  </td>
  <td style="width:260.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="347">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <b><u>f1</u></b></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; <span style="background:yellow">"foo..."</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
  {:version "1.0"}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; [x]
  (* x x))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (var
  f1))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (var
f1))</span><span style="font-family:宋体">得到的结果都一样：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:ns
#&lt;Namespace user&gt;, :name f1, :file "NO_SOURCE_PATH", :line 86,
:arglists ([x]), <span style="background:yellow">:doc "foo...", :version
"1.0"</span>}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">4.5.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读取</span><span lang="EN-US">meta</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">信息</span></p>

<p class="MsoNormal"><span style="font-family:宋体">得到函数的</span><span style="font-family:Consolas" lang="EN-US">meta</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(meta map)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">得到函数参数列表：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">((meta map) :arglists)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">得到函数缺省参数个数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-&gt; map var meta :arglists first count)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use 'wr3.clj.s)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(meta
left)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
{:ns #&lt;Namespace wr3.clj.s&gt;, :name left}</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(meta (<span style="background:yellow">var</span>
left)) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
{:ns #&lt;Namespace wr3.clj.s&gt;, :name left, :file "wr3/clj/s.clj",
:line 36, :arglists ([s sep]), :doc"s</span><span style="font-family:宋体;
color:#5B6E6E">中</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">sep</span><span style="font-family:宋体;color:#5B6E6E">左边的部分</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">"}</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(meta (resolve (symbol "left")))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:83.95pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="112">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b><b><span style="font-family:宋体">版本</span></b></p>
  </td>
  <td style="width:277.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="369">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">meta</span></b><b><span style="font-family:宋体">函数的行为</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:83.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="112">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.2</span></p>
  </td>
  <td style="width:277.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="369">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">core</span><span style="font-family:宋体">命名空间中的函数用</span><span style="font-family:
  Consolas" lang="EN-US"> (meta foo) </span><span style="font-family:宋体">即可，</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">非</span><span style="font-family:Consolas" lang="EN-US">core</span><span style="font-family:宋体">命名空间中的函数必须</span><span style="font-family:Consolas" lang="EN-US">(meta (var foo))</span><span style="font-family:宋体">才行。</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:83.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="112">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1.3</span></p>
  </td>
  <td style="width:277.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="369">
  <p class="MsoNormal"><span style="font-family:宋体">都需要用</span><span style="font-family:Consolas" lang="EN-US"> (meta (var foo))</span><span style="font-family:
  宋体">，否则基本返回</span><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure 1.2</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:宋体">函数对于</span><span style="font-family:Consolas" lang="EN-US">core</span><span style="font-family:宋体">函数和其他函数行为不一致，</span><span style="font-family:
Consolas" lang="EN-US">core</span><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">(meta foo)</span><span style="font-family:宋体">即可，其他要用</span><span style="font-family:Consolas" lang="EN-US">(meta (var foo))</span><span style="font-family:宋体">；但在</span><span style="font-family:Consolas" lang="EN-US">Clojure
1.3 </span><span style="font-family:宋体">中，</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">设置和获取对象（基本对象不行）的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
宋体">（类型为</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def v1 (<b>with-meta</b> [1 3 5] <span style="background:yellow">{:type "int"}</span>))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(meta v1) ; <span style="background:yellow">{:type
"int"}</span> </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：读取</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
宋体">信息</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:117.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:宋体">当前</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
  宋体">信息</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">meta</span> *ns*)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:117.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="157">
  <p class="MsoNormal"><span style="font-family:宋体">指定</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">meta</span><span style="font-family:
  宋体">信息</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(meta (<span style="background:yellow">find-ns</span> 'clojure.core))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">4.5.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数所在文件路径</span></p>

<p class="MsoNormal"><span style="font-family:宋体">利用</span><span style="font-family:Consolas" lang="EN-US">clojure.lang.RT/baseLoader</span><span style="font-family:宋体">来获取：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.getPath (.getResource
(clojure.lang.RT/baseLoader) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(:file (meta (var <span style="background:yellow">map</span>))))) <span style="color:#7F7F7F">; "file:/E:/clojure/clojure-1.2.1.jar!/clojure/core.clj"</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.getPath (.getResource
(clojure.lang.RT/baseLoader) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(:file (meta (var <span style="background:yellow">left</span>))))) <span style="color:#7F7F7F">; "/F:/dev3/src/wr3/clj/s.clj"</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者从字符解释：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(.getPath (.getResource
(clojure.lang.RT/baseLoader) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(:file (meta (resolve (symbol <span style="background:yellow">"left"</span>))))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">.clj</span><span style="font-family:宋体">文件的最后更新日期：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(.lastModified (java.io.File. (.getPath </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.getResource
(clojure.lang.RT/baseLoader) &nbsp;"wr3/clj/app/bank.clj"))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573100"><span style="font-family:Consolas" lang="EN-US">4.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义函数</span></u></a><u><span style="font-family:Consolas" lang="EN-US">defn</span></u></h2>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924049"></a><a name="_Toc281658887"></a><a name="_Toc281556393"></a><a name="_Toc281556293"></a><a name="_Toc281556189"></a><a name="_Toc281555987"></a><a name="_Toc281555830"><span style="text-decoration:none" lang="EN-US">4.6.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本用法</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">函数名也可以是未使用的字符，如：</span><span style="font-family:Consolas" lang="EN-US">** !</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不带参数：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defn</span> m1 <span style="background:yellow">[]</span> "hello")</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(m1)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">带参数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m2 [x] (format "hello %s" x))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m2
"world")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m3 [x y] (format "hello %s (%d)" x y))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m3
"world" 108)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">带函数</span><span style="font-family:Consolas" lang="EN-US">doc</span><span style="font-family:宋体">注释：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m <span style="background:yellow">"</span></span><span style="font-family:
宋体;background:yellow">这是</span><span style="font-family:Consolas;
background:yellow" lang="EN-US">doc</span><span style="font-family:宋体;background:yellow">注释</span><span style="font-family:Consolas;background:yellow" lang="EN-US">"</span><span style="font-family:Consolas" lang="EN-US"> [] ("</span><span style="font-family:宋体">函数体</span><span style="font-family:Consolas" lang="EN-US">"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (doc
m) ; </span><span style="font-family:宋体">查看</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：函数注释只能是一个</span><span style="font-family:Consolas" lang="EN-US">string</span><span style="font-family:
宋体">，而</span><span style="font-family:Consolas;color:#C00000" lang="EN-US">*</span><span style="font-family:宋体;color:#C00000">不能</span><span style="font-family:Consolas;color:#C00000" lang="EN-US">*</span><span style="font-family:
宋体">是多个：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:yellow">"</span>comment 111<span style="background:yellow">"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:yellow">"</span>comment 222<span style="background:yellow">"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; []
(..))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">应该是：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:yellow">"</span>comment 111</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;comment
222<span style="background:yellow">"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; []
(..))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
yellow" lang="EN-US">defn-</span><span style="font-family:Consolas" lang="EN-US"> </span><span style="font-family:宋体">用来定义</span><span style="font-family:Consolas" lang="EN-US">private</span><span style="font-family:宋体">的函数</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924050"></a><a name="_Toc281658888"></a><a name="_Toc281556394"></a><a name="_Toc281556294"></a><a name="_Toc281556190"></a><a name="_Toc281555988"></a><a name="_Toc281555831"><span style="text-decoration:none" lang="EN-US">4.6.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">子函数</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">函数内部定义和使用的函数（</span><b><span style="font-family:Consolas" lang="EN-US">*</span></b><b><span style="font-family:
宋体">不推荐</span></b><b><span style="font-family:Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">，可用</span><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如，定义</span><span style="font-family:Consolas" lang="EN-US">f(x y) = x*x + y*y</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn x2y2 [x
y]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">defn</span> <b>f</b> [x] (* x x))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (+ (<b>f</b>
x) (<b>f</b> y)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(x2y2 3 4) ;
25</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">4.6.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数重载</span></p>

<p class="MsoNormal"><span style="font-family:宋体">类似于构造方法重载：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
m1 </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<span style="background:yellow">[]</span> (<span style="background:yellow">m1</span>
"anonymous"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<span style="background:yellow">[name]</span> (str "my name is " name)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m1)
; "my name is anonymous"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m1
"qh") <span style="color:#7F7F7F">; "my name is qh"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">复杂的函数重载使用</span><span style="font-family:Consolas" lang="EN-US"><a href="#_defmutil_%BA%AF%CA%FD%C3%FB%D6%D8%D4%D8">defmulti</a></span><span style="font-family:宋体">。</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924051"></a><a name="_Toc281658889"></a><a name="_Toc281556395"></a><a name="_Toc281556295"></a><a name="_Toc281556191"></a><a name="_Toc281555989"></a><a name="_Toc281555832"><span style="text-decoration:none" lang="EN-US">4.6.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变长参数</span><span lang="EN-US">&amp;</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [a b <span style="background:yellow">&amp;</span> c] (list a b c))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (f 1 2 3 4)
&nbsp;'(1 2 (3 4)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f2 [a b <span style="background:yellow">&amp;</span> c] (list* a b c))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f3 [a b <span style="background:yellow">&amp;</span> c] (apply list a b c))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(= (f2 1 2 3
4) (f3 1 2 3 4) '(1 2 3 4))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">&amp;</span><span style="font-family:宋体">不能紧挨参数，</span><span style="font-family:Consolas;
color:red;background:yellow" lang="EN-US">&amp;c</span><span style="font-family:宋体">的写法是<b><u><span style="color:red">错误</span></u></b>的；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">&amp; c </span><span style="font-family:宋体">是作为一个</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">出现的，一般要用</span><span style="font-family:Consolas" lang="EN-US">apply</span><span style="font-family:宋体">展开</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：全变长</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(defn m [<span style="background:yellow">&amp;</span>
arg] (str arg ", size=" (count arg)))</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(m 2 3 4 5) <span style="color:#7F7F7F">; "(2
3 4 5), size=4"</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：固定</span><span style="font-family:Consolas" lang="EN-US">+</span><span style="font-family:宋体">变长</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
team [leader <span style="background:yellow">&amp;</span> persons]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (format
"%s has %d persons: %s" leader (count persons) persons))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (team
"qh" '</span><span style="font-family:宋体">张三</span><span style="font-family:Consolas" lang="EN-US"> '</span><span style="font-family:宋体">李四</span><span style="font-family:Consolas" lang="EN-US"> '</span><span style="font-family:宋体">王二</span><span style="font-family:Consolas" lang="EN-US">) <span style="color:#7F7F7F">; "qh
has 3 persons: (</span></span><span style="font-family:宋体;color:#7F7F7F">张三</span><span style="font-family:Consolas;color:#7F7F7F"> </span><span style="font-family:
宋体;color:#7F7F7F">李四</span><span style="font-family:Consolas;color:#7F7F7F"> </span><span style="font-family:宋体;color:#7F7F7F">王二</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">)"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924052"></a><a name="_Toc281658890"></a><a name="_Toc281556396"></a><a name="_Toc281556296"></a><a name="_Toc281556192"></a><a name="_Toc281555990"></a><a name="_Toc281555833"><span style="text-decoration:none" lang="EN-US">4.6.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数作为参数</span></a></p>

<p class="MsoNormal" style="margin-left:1.35pt"><span style="font-family:宋体">例如：定义</span><span style="font-family:Consolas" lang="EN-US">C/Java</span><span style="font-family:
宋体">类型的运算</span></p>

<p class="MsoNormal" style="margin-left:11.85pt"><span style="font-family:Consolas" lang="EN-US">(defn exp [a f1 b f2 c] (f2 (f1 a b) c))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(exp 5 - 2 + 3) ; 6</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">4.6.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数作为返回值</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用匿名函数：</span></p>

<p class="MsoNormal" style="margin-left:11.85pt"><span style="font-family:Consolas" lang="EN-US">(defn f [a] (<span style="background:yellow">fn</span>
[b] (- a b)))</span></p>

<p class="MsoNormal" style="margin-left:11.85pt"><span style="font-family:Consolas" lang="EN-US">((f 7) 4) ; 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281658891"></a><a name="_Toc281556397"></a><a name="_Toc281556297"></a><a name="_Toc281556193"></a><a name="_Toc281555991"></a><a name="_Toc281555834"></a><a name="_Toc339573101"></a><a name="_Toc281924053"></a><a name="_defmutil_函数名重载"></a><span style="font-family:Consolas" lang="EN-US">4.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">defmutil</span></u><u><span style="font-family:Consolas" lang="EN-US"> </span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数名重载</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">语法：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmulti</span> <b>fname</b>
dispatch-fn)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span> <b>fname</b>
dispatch-value [args ...] &amp; body)</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">简单函数重载</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:Consolas" lang="EN-US">by</span><span style="font-family:宋体">参数个数</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:宋体">可以无需</span><span style="font-family:Consolas" lang="EN-US">defmulti</span><span style="font-family:宋体">而直接用：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defn f </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([] "000")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([arg1] "111")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([arg1 arg2] "222")</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([arg1 arg2 &amp; args]
"others"))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924054"><span style="text-decoration:none" lang="EN-US">4.7.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">by</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">参数个数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">根据参数个数来决定调用的函数，函数重载的加强版：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmulti</span> f <u>(fn [&amp; args] (count args))</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f <b>0 </b>[&amp; args] "000")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f <b>1</b> [&amp; args]
"111")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f <b>2</b> [&amp; args]
"222")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f <span style="background:yellow">:default</span>
[&amp; args] (str "argn=" (count args) "&gt;3"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f)
; "000"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
'foo) ; "111"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
5 8) ; "222"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f
'a 'b 'c 'd) ; "argn=4&gt;3"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924055"><span style="text-decoration:none" lang="EN-US">4.7.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">by</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">参数类型</span></p>

<p class="MsoNormal"><span style="font-family:宋体">根据参数类型来决定调用的函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmulti</span> f1
<u>class</u>)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
f1 <b>Integer</b> [x] (double x))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
f1 <b>Double</b> [x] (int x))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod</span>
f1 <span style="background:yellow">:default</span> [x] "unknown")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 2) ; 2.0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 3.14) ; 3</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 "abc") ; "unknown"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:aqua" lang="EN-US">(f1 nil) ; "unknown"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">上面单参数且基于类型区分的这种情况下，</span><a href="#_%BD%D3%BF%DAdefprotocol"><span style="font-family:Consolas" lang="EN-US">protocol</span></a><span style="font-family:宋体">也能满足需求：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defprotocol <b><span style="background:yellow">P1</span></b>
(f1 [x]))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(extend-protocol <b><span style="background:yellow">P1</span></b></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><b><span style="font-family:Consolas" lang="EN-US">nil</span></b><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; (f1 [x] nil)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><b><span style="font-family:Consolas" lang="EN-US">Integer</span></b><span style="font-family:Consolas" lang="EN-US"> (f1 [x] (double x))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><b><span style="font-family:Consolas" lang="EN-US">Double</span></b><span style="font-family:Consolas" lang="EN-US">&nbsp; (f1 [x] (int x))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><b><span style="font-family:Consolas" lang="EN-US">Object</span></b><span style="font-family:Consolas" lang="EN-US">&nbsp; (f1 [x] "unknown")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 2)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 3.14)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f1 "abc")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;background:aqua" lang="EN-US">(f1 nil) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是多个参数的类型：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmulti</span> f2 <u>(fn [x y] [(class x) (class
y)])</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f2 [<b>Integer</b> <b>Integer</b>]
[x y] (* x y))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f2 [<b>Double</b> <b>Double</b>] [x
y] (+ x y))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod</span> f2 <span style="background:yellow">:default</span>
[x y] "others")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f2 2 3) ; 6</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f2 2.0 3.0) ; 5.0</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(f2 2 3.0) ; "others"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924056"><span style="text-decoration:none" lang="EN-US">4.7.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">by</span></a><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">参数值</span></p>

<p class="MsoNormal"><span style="font-family:宋体">由单个参数的值来判断：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmulti </span>f3
<u>(fn [x] x)</u>)</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod </span>f3
<b>0</b> [x] (repeat 3 x))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod </span>f3
<b>1</b> [x] (repeat 5 x))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">defmethod </span>f3
<span style="background:yellow">:default</span> [x] "not 0 or 1")</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(f3 0) ; (0 0 0)</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(f3 1) ; (1 1 1 1 1)</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(f3 7) ; "not 0 or 1"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">单个参数的值条件：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmulti </span>f5 <u>(fn [x] (&lt;= 0 x 5))</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f5 <b>true</b> [x] (str x " in
[0,5]"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f5 <b>false</b> [x] (rem x 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f5
3) ; "3 in [0,5]"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f5
107) ; 7</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是多个参数的值：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmulti </span>f4 <u>(fn [x y] (and (&gt; x 0) (&gt;
y 0)))</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f4 <b>true</b> [x y] (- (+ x y)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f4 <b>false</b> [x y] (+ (Math/abs
x) (Math/abs y)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f4
2 3) ; -5</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f4
-2 3) ; 5</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">由参数值</span><span style="font-family:Consolas" lang="EN-US">destructure</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmulti </span>f6 <b>:name</b>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f6 <b>"qh"</b> [arg] (str
"qh: " arg))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f6 <b>"james"</b> [arg]
(str "james: " arg))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">defmethod </span>f6 <span style="background:yellow">:default</span>
[arg] (str "unknown: " arg))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> "qh" :age 20})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> "james" :age 30})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> "rich" :age 40})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列的</span><span style="font-family:Consolas" lang="EN-US">multi-methods</span><span style="font-family:宋体">版本</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defmulti fib int) </span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defmethod fib 0 [n] 1)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defmethod fib 1 [n] 2)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defmethod fib :default [n] (+ (fib (- n 2)) (fib
(- n 1))))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(map fib (range 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
(1 2 3 5 8 13 21 34 55 89)</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573102"></a><a name="_Toc281924057"><span style="font-family:Consolas" lang="EN-US">4.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">匿名函数</span></u></a><u><span style="font-family:Consolas" lang="EN-US">fn</span></u><u><span style="font-family:
Consolas" lang="EN-US"> #()</span></u></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fn</span> []
"hello") ; </span><span style="font-family:宋体">仅定义</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">(fn []
"hello")</span>) ; </span><span style="font-family:宋体">定义并调用</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">(fn [x] x)</span>
"hello") ; </span><span style="font-family:宋体">带参数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">很简短的函数可以使用匿名</span><span style="font-family:Consolas" lang="EN-US">#()</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">%</span><span style="font-family:宋体">表示唯一的参数；</span><span style="font-family:Consolas" lang="EN-US">%1</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">%2
..</span><span style="font-family:宋体">表示第</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">..</span><span style="font-family:宋体">个参数；</span><span style="font-family:Consolas" lang="EN-US">%&amp;</span><span style="font-family:
宋体">表示所有参数</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:lime">#(</span>/ <span style="background:yellow">%</span> 3<span style="background:lime">)</span> 4) ;
4/3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:lime">#(</span>/ <span style="background:yellow">%2</span> <span style="background:yellow">%1</span><span style="background:lime">)</span> 3 4) ; 4/3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:lime">#(</span>apply / <span style="background:yellow">%&amp;</span><span style="background:lime">)</span> 3
5 7) ; 3/35</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个参数</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">(fn [x] (* 2 x))</span>
12) ; 24</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以简写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">#(* 2 %)</span> 12) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">改成偏函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((partial
* 2) 12)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：多个参数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((fn
[x y] (* x y)) 3 4) ; 12</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以简写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (#(*
%1 %2) 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改写成偏函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((partial
* 1) 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map <span style="background:yellow">#(</span>.toUpperCase
%<span style="background:yellow">)</span> ["ab" "cd"
"ef"]) ; ("AB" "CD" "EF")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
ma #(.toUpperCase %))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
ma ["ab" "cd" "ef"])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">没有匿名函数之前有个函数叫</span><span style="font-family:Consolas" lang="EN-US">memfn</span><span style="font-family:
宋体">，功能差不多，但有个匿名函数后基本就被替代不用了：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
(<span style="background:yellow">memfn</span> toUpperCase) ["hello"
"world"])&nbsp; <span style="color:#5B6E6E">; ("HELLO"
"WORLD")</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
#(.toUpperCase %) ["hello" "world"])&nbsp;&nbsp;&nbsp; <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">对应的匿名函数版本</span></p>

<p class="MsoNormal"><span style="font-family:宋体">又如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
(<span style="background:yellow">memfn</span> charAt i) ["hello"
"world"] [1 2]) <span style="color:#5B6E6E">; (\e \r)</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
#(.charAt %1 %2) ["hello" "world"] [1 2]) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;color:#5B6E6E">对应的匿名函数版本</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：使用</span><span style="font-family:Consolas" lang="EN-US">memfn</span><span style="font-family:宋体">可以把</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">的对象方法临时变成</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的函数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">memfn</span><span style="font-family:
宋体">版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
mb (<span style="background:yellow">memfn</span> toUpperCase))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (map
mb ["ab" "cd" "ef"])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">4</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (filter
#(&gt; % 5) (range 10)) ; (6 7 8 9)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改成偏函数形式：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (filter
(partial &lt; 5) (range 10)) ; (6 7 8 9)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">5</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <a name="OLE_LINK8"></a><a name="OLE_LINK7">(filter #(&gt; (count %) 2)
["a" "bb" "ccc" "dddd"])</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#C0504D" lang="EN-US">&nbsp;&nbsp;&nbsp; List("a",
"bb", "ccc", "dddd") filter (_.size&gt;2) //
Scala</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改写成</span><span style="font-family:Consolas" lang="EN-US">comp + partial</span><span style="font-family:
宋体">版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (filter
(comp (partial &lt; 2) count) ["a" "bb" "ccc"
"dddd"])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">6</span><span style="font-family:宋体">：使用</span><span style="font-family:Consolas" lang="EN-US">fn</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">AtomicInteger</span><span style="font-family:宋体">来跟踪状态变化</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def amount
(let [a (<i>java.util.concurrent.atomic.AtomicInteger</i>. 100)]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (fn [x]
(.addAndGet a x))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(amount 50) ;
150</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(amount -80) ;
70</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">匿名函数的使用场合：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">函数体言简意赅，要起个名字都难于下笔</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">在函数内部创建和使用的函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573103"></a><a name="_Toc281924058"></a><a name="_Toc281658892"></a><a name="_Toc281556398"></a><a name="_Toc281556298"></a><a name="_Toc281556194"></a><a name="_Toc281555992"></a><a name="_Toc281555835"><span style="font-family:Consolas" lang="EN-US">4.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">偏函数</span></u></a><u><span style="font-family:Consolas" lang="EN-US">partial</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">形如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((<b>partial</b>&nbsp;
<span style="background:yellow">f&nbsp; <u>arg1 arg2 .. argn</u></span>)&nbsp; <u><span style="background:lime">arga argb .. argz</span></u>)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就是执行：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">f&nbsp; <u>arg1 arg2 .. argn</u></span>&nbsp; <u><span style="background:lime">arga argb .. argz</span></u>)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">从名字以及上面可以看出，</span><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:
宋体">就是整个完整函数执行的前面一部分。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：偏函数的第一个参数是一个函数，后面至少有</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">个其他参数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">部分形式的匿名函数可以改写成偏函数。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:宋体">函数称为“偏函数”或者“部分完整函数”，因为它是不完整的，定义也用</span><span style="font-family:Consolas" lang="EN-US">def</span><span style="font-family:
宋体">而不是</span><span style="font-family:Consolas" lang="EN-US">defn</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f [n] (* n 10)) ; </span><span style="font-family:宋体">正常函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
fp <span style="background:yellow">(partial * 10)</span>) ; </span><span style="font-family:宋体">偏函数</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以直接调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((partial
<span style="background:yellow">* 10</span>) 5) ; 50</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">* 10</span> 5)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">多个参数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((partial
<span style="background:yellow">* 10</span>) 2 3 4) ; 240</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">* 10</span> 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(map #(apply str "=" %&amp;) [1 2 3]
["+" "+" "+"] [10 20 30])</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">; ("=1+10"
"=2+20" "=3+30")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:宋体">的版本：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(map (partial str "=") [1 2 3] (repeat
"+") [10 20 30])</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">对比：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">fn</span></p>
  </td>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (fn [x]
  (* 10 x)) [1 3 5])</span></p>
  </td>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#()</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map #(* 10
  %) [1 3 5])</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">partial</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map
  (partial * 10) [1 3 5])</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">comp</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (comp -
  *) [1 3 5] [2 4 6])</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(-2 -12 -30)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">complement</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (<span style="background:yellow">complement</span> odd?) [1 2 3]) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">;complement </span><span style="font-family:宋体">后面的函数需返回</span><span style="font-family:
  Consolas" lang="EN-US">bool</span><span style="font-family:宋体">值</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(false true
  false) </span></p>
  <p class="MsoNormal"><span style="font-family:宋体;background:yellow">逻辑补</span><span style="font-family:宋体">函数，取反，相当于：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (<span style="background:yellow">comp not</span> odd?) [1 2 3])</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">constantly</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map
  (constantly 0) [1 2 3])</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(0 0 0) ; </span><span style="font-family:宋体;background:yellow">常数</span><span style="font-family:
  宋体">函数</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">补函数例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(filter
(complement zero?) [-1 1 2 0 3 4 0 0 5 6 0]) ;</span><span lang="EN-US"> </span><span style="font-family:Consolas" lang="EN-US">(-1 1 2 3 4 5 6)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">同下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(remove zero?
[[-1 1 2 0 3 4 0 0 5 6 0])</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573104"></a><a name="_Toc281924059"></a><a name="_Toc281658893"></a><a name="_Toc281556399"></a><a name="_Toc281556299"></a><a name="_Toc281556195"></a><a name="_Toc281555993"></a><a name="_Toc281555836"><span style="font-family:Consolas" lang="EN-US">4.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">组合函数</span></u></a><u><span style="font-family:Consolas" lang="EN-US">comp</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">形如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((<span style="background:yellow">comp</span> f1 f2 .. fn) <u>arg1 arg2 .. argn</u>) ; <span style="background:yellow">comp</span>osite</span></p>

<p class="MsoNormal"><span style="font-family:宋体">就是对参数<b><u>从右到左</u></b>组合执行所有函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (f1
(f2 (.. (fn <u>arg1 arg2 .. argn</u>))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-indent:3.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [x y] (- (* x y)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以用组合函数：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def fc <span style="background:yellow">(comp - *)</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (fc
3 5) ; -15</span></p>

<p class="MsoNormal"><span style="font-family:宋体">组合函数按照<b><u>从右到左</u></b>的顺序执行。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以直接调用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; ((comp
- *) 2 4 6) ; -48</span></p>

<p class="MsoNormal"><span style="font-family:宋体">这个不用</span><span style="font-family:Consolas" lang="EN-US">comp</span><span style="font-family:宋体">，需要定义变长参数如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
f [&amp; x] (- (apply * x))) ; (f 2 4 6)=-48</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：得到长度的</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">倍</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">comp</span> (<span style="background:yellow">partial</span> * 10) count) "hello") ; 50</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：函数当数据来计算</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">((apply <span style="background:yellow">comp</span>
(repeat 3 <span style="background:yellow">rest</span>)) [1 2 3 4 5 6]) ; (4 5
6)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(rest (rest (rest [1 2 3 4 5 6])))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">但调用</span><span style="font-family:Consolas" lang="EN-US">rest</span><span style="font-family:宋体">的次数不事先确定的时候，只能用</span><span style="font-family:Consolas" lang="EN-US">comp</span><span style="font-family:
宋体">来处理。</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573105"></a><a name="_Toc281924060"></a><a name="_Toc281658894"></a><a name="_Toc281556400"></a><a name="_Toc281556300"></a><a name="_Toc281556196"></a><a name="_Toc281555994"></a><a name="_Toc281555837"><span style="font-family:Consolas" lang="EN-US">4.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">递归函数</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：阶乘</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">fac </span>[n]
(if (= n 0) 1 (* n (<span style="background:yellow">fac </span>(dec n))))) ;
(fac 5) = 120</span></p>

<p class="MsoNormal"><span style="font-family:宋体">自递归写法：</span></p>

<p class="MsoNormal" style="text-indent:21.2pt"><span style="font-family:Consolas" lang="EN-US">(defn fac [n] <i><span style="background:#D9D9D9">(defn
<b>f</b> [i r] (if (zero? i) r (<span style="background:yellow">recur</span>
(dec i) (* r i))))</span></i> (<b>f</b> n 1))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">非递归写法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fac1 [n] (reduce * (range 1 (inc n))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
! [n] (reduce * (range 1 (inc n)))) ; (! 5)=120</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:
宋体">数列</span><span style="font-family:Consolas" lang="EN-US">(1 1 2 3 5 8 13 ...)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fib [n] (if (&lt; n 3) 1 (+ (fib (- n 1)) (fib (- n 2)))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">自递归的</span><span style="font-family:Consolas" lang="EN-US">fib</span><span style="font-family:宋体">数列：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
fib2 [n1 n2 n] (if (= 1 n) n1 (recur n2 (+ n1 n2) (dec n))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (fib2
1 1 100) ; 354224848179261915075</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：定义</span><span style="font-family:Consolas" lang="EN-US">pow</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
pow0 [n m r] (if (zero? m) r (p n (dec m) (* r n)))) ; </span><span style="font-family:宋体">尾递归</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn pow1 [n m] (if (zero? m) 1 (* n (pow1 n (dec
m))))) ; </span><span style="font-family:宋体">递归</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
pow2 [n m] (reduce * (repeat m n))) ; reduce</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
pow3 [n m] (Math/pow n m)) ; </span><span style="font-family:宋体">利用库</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
pow4 [n m] (.pow (bigint n) m) ; </span><b><span style="font-family:宋体;
color:#0070C0">首选，最快（</span></b><b><span style="font-family:Consolas;
color:#0070C0" lang="EN-US">1.3</span></b><b><span style="font-family:宋体;color:#0070C0">要用</span></b><b><span style="font-family:Consolas;color:#0070C0" lang="EN-US">(BigInteger/valueOf n) </span></b><b><span style="font-family:宋体;color:#0070C0">）</span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (=
(pow0 2 10 1) (pow1 2 10) (pow2 2 10) (pow3 2 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：快速排序</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">qsort </span>[s]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (if
(&lt;= (count s) 1) s</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(let [m (nth s (int (/ (count s) 2)))]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(concat</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(<span style="background:yellow">qsort </span>(filter #(&lt; % m) s))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(filter #(= % m) s)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(<span style="background:yellow">qsort </span>(filter #(&gt; % m) s))))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(qsort [1 5 2
1 4 3 7 2]) ; (1 1 2 2 3 4 5 7)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573106"></a><a name="_Toc281924061"></a><a name="_Toc281658895"></a><a name="_Toc281556401"></a><a name="_Toc281556301"></a><a name="_Toc281556197"></a><a name="_Toc281555995"></a><a name="_Toc281555838"><span style="font-family:Consolas" lang="EN-US">5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">宏</span></u></a><u><span style="font-family:Consolas" lang="EN-US">macro</span></u></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573107"></a><a name="_Toc281924062"></a><a name="_Toc281658896"></a><a name="_Toc281556402"></a><a name="_Toc281556302"></a><a name="_Toc281556198"></a><a name="_Toc281555996"></a><a name="_Toc281555839"><span style="font-family:Consolas" lang="EN-US">5.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">概念</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">macro</span><span style="font-family:宋体">宏在运行之前机械展开；定义宏相当于给语言增加新特性。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写宏的</span><b><u><span style="font-family:Consolas" lang="EN-US">*</span></u></b><b><u><span style="font-family:宋体">原则</span></u></b><b><u><span style="font-family:Consolas" lang="EN-US">*</span></u></b><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">能写成函数就不要用宏（因为写宏没有写函数简单直观，容易写错，需要先在</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:
宋体">中测试一番）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">只有不得不用时才用宏（性能要求高时比函数调用快，或者需要“代码</span><span style="font-family:Consolas" lang="EN-US">&lt;-&gt;</span><span style="font-family:
宋体">数据”相互转换）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">精心设计的宏调用比函数调用更</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:
宋体">（如实现控制结构、传递</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">方法）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">使用宏</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">不使用宏</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defmacro op
  [x f1 y f2 z] </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">(list f2 z (list f1 x y)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(op 3 + 2 *
  10) ; 50</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn op [x
  f1 y f2 z] </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">(f2 z (f1 x y)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(op 3 + 2 *
  10) ; 50</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">、可用</span><span style="font-family:Consolas"> <span lang="EN-US">(<span style="background:yellow">macroexpand</span> '(op 3 + 2 *
10))</span></span><span style="font-family:宋体">来检测展开情况为：</span><span style="font-family:Consolas" lang="EN-US">(* 10 (+ 3 2))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">、若错误地写成</span><span style="font-family:Consolas" lang="EN-US">
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defmacro op [x f1 y f2 z] (f2 z (f1 x
y)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:
宋体">测试一下</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; ('f2 'z ('f1 'x 'y))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">结果为</span><span style="font-family:Consolas"> <span lang="EN-US">y</span></span><span style="font-family:宋体">，所以这时</span><span style="font-family:Consolas" lang="EN-US">
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(op 3 + 2 * 10) ; </span><span style="font-family:宋体">输出</span><span style="font-family:Consolas" lang="EN-US">2</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573108"></a><a name="_Toc281924063"></a><a name="_Toc281658897"></a><a name="_Toc281556403"></a><a name="_Toc281556303"></a><a name="_Toc281556199"></a><a name="_Toc281555997"></a><a name="_Toc281555840"><span style="font-family:Consolas" lang="EN-US">5.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">设计方法</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">例子：实现</span><span style="font-family:Consolas" lang="EN-US"> (do f f f)</span></p>

<p class="MsoNormal"><b><span style="font-size:16.0pt;font-family:
Consolas;color:red" lang="EN-US">X</span></b><b><span style="font-family:宋体">不正确写法：</span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-------------------------------------------------</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:宋体">中写：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; <span style="background:yellow">(do 'fun
'fun 'fun)</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><b><u><span style="font-family:Consolas" lang="EN-US">fun</span></u></b></p>

<p class="MsoNormal"><span style="font-family:宋体">所以一旦套上</span><span style="font-family:Consolas" lang="EN-US">(defmacro macro-name [args] <span style="background:yellow">...</span> )</span><span style="font-family:宋体">的外衣如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defmacro
m [fun] <span style="background:yellow">(do fun fun fun)</span>)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">那就只会执行一次</span><span style="font-family:Consolas" lang="EN-US">fun</span><span style="font-family:
宋体">，例如</span><span style="font-family:Consolas" lang="EN-US">:</span></p>

<div style="border:none;border-bottom:solid windowtext 1.0pt;padding:0cm 0cm 1.0pt 0cm">

<p class="MsoNormal" style="border:none;padding:0cm"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m (println "hello"))
; </span><span style="font-family:宋体">仅仅打印</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">次</span><span style="font-family:Consolas" lang="EN-US">"hello"</span></p>

</div>

<p class="MsoNormal"><b><span style="font-size:16.0pt;font-family:
Consolas;color:#00B050" lang="EN-US">V</span></b><b><span style="font-family:宋体">正确写法：</span></b></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">-------------------------------------------------</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果你写：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">user=&gt; <span style="background:lime">(list 'do
'f 'f 'f)</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><b><u><span style="font-family:Consolas" lang="EN-US">(do f f f)</span></u></b></p>

<p class="MsoNormal"><span style="font-family:宋体">如果套上</span><span style="font-family:Consolas" lang="EN-US">(defmacro macro-name [&amp; args] <span style="background:lime">...</span> )</span><span style="font-family:宋体">的外衣如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defmacro
m [f] <span style="background:lime">(list 'do f f f)</span>)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">那就执行多次了，例如：</span></p>

<div style="border:none;border-bottom:solid windowtext 1.0pt;padding:0cm 0cm 1.0pt 0cm">

<p class="MsoNormal" style="border:none;padding:0cm"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (m (println "hello"))
; </span><span style="font-family:宋体">如愿打印</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">次</span><span style="font-family:Consolas" lang="EN-US">"hello"</span></p>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573109"><span style="font-family:Consolas" lang="EN-US">5.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调试宏</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">macroexpand</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">macroexpand-1</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clojure.walk/macroexpand-all</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573110"><span style="font-family:Consolas" lang="EN-US">5.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas;background:yellow" lang="EN-US">`</span></u></a><u><span style="font-family:Consolas" lang="EN-US"> &nbsp;<span style="background:yellow">~'</span>
<span style="background:yellow">'~</span> <span style="background:yellow">~@</span></span></u><u><span style="font-family:Consolas" lang="EN-US"> &nbsp;</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas;color:red" lang="EN-US">(</span><span style="font-family:Consolas;color:#096BF3" lang="EN-US">defmacro</span><span style="font-family:Consolas;color:black" lang="EN-US"> with-dict</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:rosybrown" lang="EN-US">"</span><span style="font-family:宋体;color:rosybrown">连接到</span><span style="font-family:Consolas;color:rosybrown" lang="EN-US">meta</span><span style="font-family:
宋体;color:rosybrown">库的</span><span style="font-family:Consolas;
color:rosybrown" lang="EN-US">dict</span><span style="font-family:宋体;color:rosybrown">表进行操作</span><span style="font-family:Consolas;color:rosybrown" lang="EN-US">"</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:black" lang="EN-US">[&amp;
body]</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt;
text-autospace:none" align="left"><span style="font-family:Consolas;color:black;
background:yellow" lang="EN-US">`</span><span style="font-family:Consolas;
color:#00CC00" lang="EN-US">(</span><span style="font-family:Consolas;color:#A020F0" lang="EN-US">let</span><span style="font-family:Consolas;color:black" lang="EN-US"> [<span style="background:
yellow">~'</span>dbname </span><span style="font-family:Consolas;
color:rosybrown" lang="EN-US">"meta"</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none" align="left"><span style="font-family:
Consolas;color:black;background:yellow" lang="EN-US">~'</span><span style="font-family:Consolas;color:black" lang="EN-US">tbname </span><span style="font-family:Consolas;color:orchid" lang="EN-US">:dict</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none" align="left"><span style="font-family:
Consolas;color:black;background:yellow" lang="EN-US">~'</span><span style="font-family:Consolas;color:black" lang="EN-US">conn </span><span style="font-family:Consolas" lang="EN-US">(<span style="color:black">make-connection <span style="background:yellow">~'</span>dbname</span>)<span style="color:black">]</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none" align="left"><span style="font-family:
Consolas;color:black" lang="EN-US">with-mongo <span style="background:yellow">~'</span>conn</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:black;background:yellow" lang="EN-US">~@</span><span style="font-family:Consolas;color:black" lang="EN-US">body</span><span style="font-family:Consolas;color:silver" lang="EN-US">)</span><span style="font-family:Consolas;color:#00CC00" lang="EN-US">)</span><span style="font-family:Consolas;color:red" lang="EN-US">)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:red" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">说明：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:25.6pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="34">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">`</span></p>
  </td>
  <td style="width:306.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="409">
  <p class="MsoNormal"><span style="font-family:宋体">使用就会原原本本地直译过去，不用</span><span style="font-family:Consolas" lang="EN-US">`,let</span><span style="font-family:
  宋体">语句不被翻译</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="34">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">~'</span></p>
  </td>
  <td style="width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="409">
  <p class="MsoNormal"><span style="font-family:宋体">使用则后面的变量被直接翻译过去，否则翻译成</span><span style="font-family:Consolas" lang="EN-US">user/dbname</span><span style="font-family:宋体">等</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="34">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">~@</span></p>
  </td>
  <td style="width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="409">
  <p class="MsoNormal"><span style="font-family:宋体">表示多条语句</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="34">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">'~</span></p>
  </td>
  <td style="width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="409">
  <p class="MsoNormal"><span style="font-family:宋体">变量名本身而非值</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="34">
  <p class="MsoNormal"><span style="font-family:Consolas;background:
  yellow" lang="EN-US">~</span></p>
  </td>
  <td style="width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="409">
  <p class="MsoNormal"><span style="font-family:宋体">不求值，先替换的参数</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defmacro debug [x] <span style="background:yellow">`</span>(println
"------" <span style="background:yellow">'~</span>x ":" <span style="background:yellow">~</span>x))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [a 10] (debug a)) ; "------ a : 10"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573111"></a><a name="_Toc281924064"></a><a name="_Toc281658899"></a><a name="_Toc281556405"></a><a name="_Toc281556305"></a><a name="_Toc281556201"></a><a name="_Toc281555999"></a><a name="_Toc281555842"><span style="font-family:Consolas" lang="EN-US">6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调用</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Java</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的类和方法</span></u></h1>

<p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的直接对应更甚于</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Number</span><span style="font-family:宋体">直接对应</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Collection</span><span style="font-family:宋体">实现</span><span style="font-family:Consolas" lang="EN-US">java
Collection</span><span style="font-family:宋体">接口</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">函数实现</span><span style="font-family:Consolas" lang="EN-US">java Runnable</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Callable</span><span style="font-family:
宋体">接口</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">可以继承</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">类，实现</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">接口</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">sequence</span><span style="font-family:宋体">函数可操作</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Array</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Iterable</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573112"></a><a name="_Toc281924065"></a><a name="_Toc281658900"></a><a name="_Toc281556406"></a><a name="_Toc281556306"></a><a name="_Toc281556202"></a><a name="_Toc281556000"></a><a name="_Toc281555843"><span style="font-family:Consolas" lang="EN-US">6.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本用法</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">内容</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">写法</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">简写</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">构造新对象</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(new
  java.util.Date)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(new
  StringBuffer "hi")</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(java.util.Date<span style="background:yellow">.</span>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(StringBuffer<span style="background:yellow">.</span> "hi") ; </span><span style="font-family:宋体">构造方法带参数</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">对象方法调用</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.
  "Hello" toUpperCase)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">.toUpperCase</span> "Hello")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.toLocaleString
  (java.util.Date.)) </span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">带参数方法调用</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(."hello"
  replace "l" "L")</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">.replace</span> "hello" <span style="background:yellow">"l" "L"</span>)</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">静态类方法调用</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(. System currentTimeMillis)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(. Math PI)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(. Math pow
  2 10) ; 1024.0</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(System<span style="background:yellow">/</span>currentTimeMillis)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(Math<span style="background:yellow">/</span>PI) ; </span><span style="font-family:宋体">注意不是</span><span style="font-family:Consolas" lang="EN-US">(Math.PI)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(Math<span style="background:yellow">/</span>pow 2 10) ; </span><span style="font-family:
  宋体">注意不是</span><span style="font-family:Consolas" lang="EN-US">(Math.pow 2 10)</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">连续方法调用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(. (. (.
  System </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">currentTimeMillis) </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">getClass) toString)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">..</span> System currentTimeMillis getClass
  toString)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">..</span> Runtime getRuntime availableProcessors)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">..</span> "hello" toUpperCase <span style="background:yellow">(substring 1 4)</span>)</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">多次方法调用</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">无返回值的方法</span><span style="font-family:
  Consolas" lang="EN-US">)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [m
  (java.util.HashMap.)]</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(.put m 1 100) (.put m 2 200) </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">m</span><span style="font-family:Consolas" lang="EN-US">)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">doto</span> </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(java.util.HashMap.) (.put 1 100) (.put 2 200))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; doto</span><span style="font-family:宋体">的意思：</span><span style="font-family:Consolas;
  background:yellow" lang="EN-US">do</span><span style="font-family:Consolas" lang="EN-US">
  something <span style="background:yellow">to</span> it (m)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">import</span> java.io.File) ; </span><span style="font-family:宋体">单个</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">import</span> '(<u>java.io</u> File InputStream)) ; '</span><span style="font-family:宋体">可以省略</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">import</span> '(<u>java.io</u> File InputStream) '(<u>java.util</u>
Random))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
rdm (java.util.Random.))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (.nextInt
rdm)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (.nextInt
rdm 10)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">种形式，结果一样</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Math<span style="background:yellow">/</span>PI)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">.</span> Math PI)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">..</span> Math PI)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">Math/PI</span><span style="font-family:宋体">的形式更普遍：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(= (Math/toRadians 180) Math/PI) ; true</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><a name="OLE_LINK4"></a><a name="OLE_LINK3"><span style="font-family:Consolas" lang="EN-US">(=
(Math/toDegrees Math/PI) 180) ; true</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281658901"></a><a name="_Toc281556407"></a><a name="_Toc281556307"></a><a name="_Toc281556203"></a><a name="_Toc281556001"></a><a name="_Toc281555844"></a><a name="_Toc339573113"></a><a name="_Toc281924066"><span style="font-family:Consolas" lang="EN-US">6.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">得到所有</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Java</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类方法</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map
#(.getName %) (.getMethods java.util.Date))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map
#(.getName %) (.. "hello" getClass getMethods))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573114"></a><a name="_Toc281924067"><span style="font-family:Consolas" lang="EN-US">6.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Java</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数组</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">可查阅：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (find-doc
"<span style="background:yellow">-array</span>")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">按类型有：</span></p>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">用法</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">object-array</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(object-array
  [10.3 "hello" 10])</span></p>
  </td>
 </tr>
 <tr style="height:140.9pt">
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt;height:140.9pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">boolean-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">byte-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">char-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">double-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">float-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">int-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">long-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">short-array</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;height:140.9pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(boolean-array
  5)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(boolean-array
  [false true])</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(boolean-array
  5 [false true])</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">二维数组：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(into-array
  (map int-array [[1 2 3] [4 5 6]]))</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">into-array</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">make-array</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">其他非基本类型，如</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:
  宋体">、</span><span style="font-family:Consolas" lang="EN-US">Integer</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Double</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">to-array</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">to-array2d</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">byte-array-type</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">char-array-type</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(object-array [10.3 "hello" 10])</u>) ; (10.3 "hello"
10)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不够数目的用缺省值填充：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array 5)</u>) ; (false false false false false)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array [false <b>true</b> false]</u>) ; (false <b>true</b> false)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array 5 [<i>false</i> <b>true</b>])</u>) ;</span><span lang="EN-US"> &nbsp;</span><span style="font-family:Consolas" lang="EN-US">(<i>false</i><b> true </b><i>false
false false</i>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(int-array 5)</u>) ; (0 0 0 0 0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(int-array [2 4 6]</u>) ; (2 4 6)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
<u>(int-array 5 [<i>2 4</i>])</u>) ;</span><span lang="EN-US"> &nbsp;</span><span style="font-family:Consolas" lang="EN-US">(<i>2 4 0 0 0</i>)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">创建</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">类型的数组：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">make-array</span>
<b>String</b> 5) ; </span><span style="font-family:宋体">创建</span><span style="font-family:Consolas" lang="EN-US">new String[5]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(make-array String 5 3) ; </span><span style="font-family:宋体">创建</span><span style="font-family:Consolas" lang="EN-US">new
String[5][3]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(seq (make-array String 5)) ; (nil nil nil nil
nil)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set/get</span><span style="font-family:宋体">数组元素：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
a (make-array String 3))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">aset</span> a 0 "hello") ; aset</span><span style="font-family:宋体">：</span><span style="font-family:Consolas"> <span style="color:#5B6E6E;background:yellow" lang="EN-US">a</span><span lang="EN-US">rray
<span style="background:yellow">set</span>ting</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">aset</span> a 2 "world")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (seq
a) <span style="color:#5B6E6E">; ("hello" nil "world")</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">aget</span> a 0) ; "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">alength</span> a) ; 3</span><span style="font-family:
宋体">，和</span><span style="font-family:Consolas" lang="EN-US"> (count a) </span><span style="font-family:宋体">一样</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">转换为</span><span style="font-family:Consolas" lang="EN-US">Object</span><span style="font-family:宋体">数组：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">to-array</span> [1 2 3 4]) ; java.lang.Object[] </span><span style="font-family:宋体">注意不会转为</span><span style="font-family:Consolas" lang="EN-US">int[]</span><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">Integer[]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">主要用于调用</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">的方法：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (String/format
"%s*%s=%d" (<span style="background:yellow">to-array</span> [2 3 6]))
; "2*3=6"</span><span style="font-family:宋体">，</span></p>

<p class="MsoNormal"><span style="font-family:宋体">当然，上例使用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">format</span><span style="font-family:
宋体">函数更方便：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (format
"%s*%s=%d" 2 3 6)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果需要明确指定类型，可以使用</span><span style="font-family:Consolas" lang="EN-US">into-array</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">into-array</span> [1 2 3]) ; java.lang.Integer[]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (import
'(wr3.util Stringx))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(Stringx/join (<span style="background:yellow">into-array</span>
String ["1" "2" "3"]) "+")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果是字符串数组等，会智能转换类型，不需要</span><span style="font-family:Consolas" lang="EN-US">into-array</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (Stringx/join
[1 2 3] "+") ; "1+2+3"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573115"><span style="font-family:Consolas" lang="EN-US">6.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">reflect</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调用</span></u><u><span style="font-family:Consolas" lang="EN-US">Java</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方法</span></u></h2>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clojure.lang.Reflector/invokeInstanceMethod</span>
"hello-world" "substring" (to-array [1 4]))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">相当于：</span></p>

<p class="MsoNormal"><a name="OLE_LINK2"></a><a name="OLE_LINK1"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (.substring
"hello-world" 1 4) ; "ell"</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281924068"></a><a name="_Toc281658902"></a><a name="_Toc281556408"></a><a name="_Toc281556308"></a><a name="_Toc281556204"></a><a name="_Toc281556002"></a><a name="_Toc281555845"></a><a name="_Toc339573116"><span style="font-family:Consolas" lang="EN-US">6.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Java</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">方法作为函数参数</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defmacro f
[g] <span style="background:yellow">`</span>(.. "Hello" <span style="background:yellow">~</span>g))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f
toUpperCase) ; "HELLO"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f
toLowerCase) ; "hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：更复杂的情况，可变参数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defmacro f [g
&amp; args] <span style="background:yellow">`</span>(.. "Hello" (<span style="background:yellow">~</span>g <span style="background:yellow">~@</span>args)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f substring 0
3) ; "Hel"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f substring
3)&nbsp;&nbsp; ; "lo"</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573117"><span style="font-family:Consolas" lang="EN-US">6.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">设置属性值</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">set!</span> (. obj f1) v1)</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573118"><span style="font-family:Consolas" lang="EN-US">6.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">JavaBean</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">bean</span><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">对象的所有</span><span style="font-family:Consolas" lang="EN-US">JavaBean
properties</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">bean</span>
(java.util.Date.))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(import '(java.security MessageDigest))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">bean</span> (MessageDigest/getInstance
"SHA")) </span></p>

<p class="MsoNormal"><span style="font-family:宋体">返回：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:provider #&lt;Sun SUN version 1.6&gt;, </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">:digestLength 20, </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">:class java.security.MessageDigest$Delegate, </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">:algorithm "SHA"}</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573119"></a><a name="_Toc281924069"></a><a name="_Toc281658903"></a><a name="_Toc281556409"></a><a name="_Toc281556309"></a><a name="_Toc281556205"></a><a name="_Toc281556003"></a><a name="_Toc281555846"><span style="font-family:Consolas" lang="EN-US">6.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">提升性能</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">6.8.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">类型提示</span></p>

<p class="MsoNormal"><span style="font-family:宋体">正常版本：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f0 [n] (reduce + (range (inc n)))) ;&nbsp; 1
to n sum</span></p>

<p class="MsoNormal"><span style="font-family:宋体">性能版本：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f1 [n] </span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(let [n (<span style="background:yellow">int</span>
n)] </span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(loop [i (<span style="background:yellow">int</span>
1) s (<span style="background:yellow">int</span> 0)] </span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(if (&lt;= i n) (recur (inc i) (+ i s)) s))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">测试：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">time</span> (<span style="background:yellow">dotimes</span>
[_ 5] (f0 10000)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">time</span> (<span style="background:yellow">dotimes</span>
[_ 5] (f1 10000)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">^</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:宋体">等样式进行显示类型提示。区别在于：不用类型提示的版本转换成</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
宋体">函数的时候可能会用反射，导致速度降低，可通过如下测试：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt;(set!&nbsp;*warn-on-reflection*&nbsp;true)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt;(defn g1 [s] (.substring s 0 3))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas;color:red" lang="EN-US">Reflection warning, NO_SOURCE_PATH:22 -
call to substring can't be resolved.</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">user=&gt;(defn g2 [<span style="background:yellow">^String</span>
s] (.substring s 0 3))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">6.8.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">使用</span><span lang="EN-US">Java</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数组</span></p>

<p class="MsoNormal"><span style="font-family:宋体">毫无疑问，</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">数组比</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">vect</span><span style="font-family:宋体">都要快。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def a (<span style="background:yellow">int-array</span> 10000 (int 5)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(time (<span style="background:yellow">amap</span> a idx ret (+ (int 1) (aget a idx)))) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;
795.653779 msecs</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(time (<span style="background:yellow">amap</span> <span style="background:yellow">^ints</span>
a idx ret (+ (int 1) (aget <span style="background:yellow">^ints</span> a
idx)))) ; 3.49667 msecs</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573120"></a><a name="_Toc281924070"></a><a name="_Toc281658904"></a><a name="_Toc281556410"></a><a name="_Toc281556310"></a><a name="_Toc281556206"></a><a name="_Toc281556004"></a><a name="_Toc281555847"></a><a name="_proxy_实现接口"></a><span style="font-family:Consolas" lang="EN-US">6.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">proxy</span></u><u><span style="font-family:Consolas" lang="EN-US"> </span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">实现接口</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">继承</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">父类或者实现</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:
宋体">接口：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="color:red">(def t1 (Thread. (run [] (println "hello"))))</span>
; </span><b><span style="font-size:18.0pt;font-family:Consolas;
color:red" lang="EN-US">X</span></b><b><span style="font-family:Consolas;
color:red" lang="EN-US"> </span></b><b><span style="font-family:宋体;color:red">不能直接如此</span></b></p>

<p class="MsoNormal"><span style="font-family:宋体">而应该：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def t1 (Thread. (<span style="background:yellow">proxy</span>
<span style="color:#C00000">[Runnable]</span> <span style="color:#7030A0">[]</span>
(run [] (println "hello")))))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#C00000">[Runnable]</span></span><span style="font-family:宋体">是接口类列表</span><span style="font-family:Consolas"> <span style="color:#7030A0" lang="EN-US">[]</span></span><span style="font-family:宋体">是接口构造函数的参数</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.start t1)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可直接：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def t1 (Thread. #(println "hello")))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行多次：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dotimes</span> [i
5] (.start (Thread. (proxy [Runnable] [] (run [] (println
(System/nanoTime)))))))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：调用</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">Vector</span><span style="font-family:
宋体">进行排序</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def jcoll (java.util.Vector.))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(doto jcoll (.add "hello") (.add
"clojure") (.add "language"))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn comp1 [f] (<span style="background:yellow">proxy</span>
[java.util.Comparator] [] (compare [a b] (f a b))))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(java.util.Collections/sort jcoll (comp1 #(. %1
compareTo %2)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">jcoll ;<span style="color:#5B6E6E"> #&lt;Vector
[clojure, hello, language]&gt;</span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">实现接口的匿名类中有类变量的解决方法（使用</span><span style="font-family:Consolas" lang="EN-US">let</span><span style="font-family:
宋体">进行</span><span style="font-family:Consolas" lang="EN-US">binding</span><span style="font-family:宋体">）：</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">(let [con (jdbc "postgre")</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
dbs (<i>DbServer/create</i> con)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span style="background:yellow">i (atom 0)</span> ; </span><span style="font-family:宋体">计算有正常身份证的用户数目</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<b>row-filter</b>
(<span style="background:yellow">proxy</span> [<i>RowFilter</i>] []</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(process [row]</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(let
 [id (.toString (.get row 0))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pid0
 (.toString (.get row 1))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
name
 (.toString (.get row 2))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid
(<i>IDUtil/to18</i> pid0)]</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(do</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(when
 pid (do (<span style="background:yellow">swap! i inc</span>) (println
(line id pid name))))</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
true)
 )))]</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (doto dbs</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(.process sql <b>row-filter</b>)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (.close))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(println "i=" @i)&nbsp;&nbsp;&nbsp; )</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573121"></a><a name="_Toc281924071"></a><a name="_Toc281658905"></a><a name="_Toc281556411"></a><a name="_Toc281556311"></a><a name="_Toc281556207"></a><a name="_Toc281556005"></a><a name="_Toc281555848"><span style="font-family:Consolas" lang="EN-US">6.10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Exception</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">形如：</span><span style="font-family:Consolas" lang="EN-US"> (<span style="background:yellow">try </span>(<span style="background:yellow">throw </span>..) (<span style="background:yellow">finally
</span>..))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:gray" lang="EN-US">(</span><span style="font-family:Consolas;background:yellow" lang="EN-US">try</span><span style="font-family:Consolas" lang="EN-US"> <span style="background:lime">(</span><span style="background:yellow">throw</span> (Exception. "--error--")<span style="background:lime">)</span> <span style="background:aqua">(</span><span style="background:yellow">finally</span> (println "--final--")<span style="background:aqua">)</span><span style="background:gray">)</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">--final--</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:red" lang="EN-US">java.lang.Exception: --error--</span><span style="font-family:Consolas" lang="EN-US"> (NO_SOURCE_FILE:0)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn f [cls] </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">try</span>
(Class/forName cls) true (<span style="background:yellow">catch</span>
ClassNotFoundException e false)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">try </span>(/ 3
0) (<span style="background:yellow">catch </span>Exception e (println e)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573122"></a><a name="_Toc281924072"><span style="font-family:Consolas" lang="EN-US">6.11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Java</span></u></a><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调</span></u><u><span style="font-family:Consolas" lang="EN-US">Clojure</span></u></h2>

<pre style="line-height:14.4pt;vertical-align:top"><span class="kw1"><b><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">import</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="co2"><span style="font-size:10.5pt;font-family:Consolas;
color:#006699" lang="EN-US">clojure.lang.<span style="background:yellow">RT</span></span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span class="kw1"><b><span style="font-size:10.5pt;font-family:
Consolas;color:black" lang="EN-US">import</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="co2"><span style="font-size:10.5pt;font-family:Consolas;
color:#006699" lang="EN-US">clojure.lang.<span style="background:yellow">Var</span></span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></pre><pre style="line-height:14.4pt;vertical-align:top"><span class="kw1"><b><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">public</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="kw1"><b>class</b></span> Foo </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">{</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; <span class="kw1"><b>public</b></span> <span class="kw1"><b>static</b></span> </span><span class="kw4"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#000066" lang="EN-US">void</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> main</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">(</span></span><span class="kw3"><span style="font-size:10.5pt;font-family:Consolas;
color:#003399" lang="EN-US">String</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">[]</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> args</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">)</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="kw1"><b>throws</b></span> </span><span class="kw3"><span style="font-size:10.5pt;font-family:Consolas;
color:#003399" lang="EN-US">Exception</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">{</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</span><span class="co1"><i><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">// Load the Clojure script -- as a side effect this initializes the runtime.</span></i></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RT.</span><span class="me1"><span style="font-size:10.5pt;font-family:Consolas;
color:#006633" lang="EN-US">loadResourceScript</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">(</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:blue" lang="EN-US">"foo.clj"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">)</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="co1"><i><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">// Get a reference to the foo function.</span></i></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Var foo </span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">=</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> RT.</span><span class="me1"><span style="font-size:10.5pt;font-family:Consolas;color:#006633" lang="EN-US">var</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">(</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:blue" lang="EN-US">"user"</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">, </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:blue" lang="EN-US">"foo"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">)</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="co1"><i><span style="font-size:10.5pt;font-family:Consolas;
color:#666666" lang="EN-US">// Call it!</span></i></span></pre><pre style="line-height:14.4pt;
vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="kw3"><span style="font-size:10.5pt;font-family:Consolas;color:#003399" lang="EN-US">Object</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> result </span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">=</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> foo.</span><span class="me1"><span style="font-size:10.5pt;font-family:Consolas;color:#006633" lang="EN-US">invoke</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">(</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:blue" lang="EN-US">"Hi"</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">, </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:blue" lang="EN-US">"there"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">)</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="kw3"><span style="font-size:10.5pt;font-family:Consolas;
color:#003399" lang="EN-US">System</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">.</span><span class="me1"><span style="font-size:10.5pt;font-family:Consolas;color:#006633" lang="EN-US">out</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">.</span><span class="me1"><span style="font-size:10.5pt;font-family:Consolas;
color:#006633" lang="EN-US">println</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#009900" lang="EN-US">(</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">result</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">)</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#339933" lang="EN-US">;</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">}</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#009900" lang="EN-US">}</span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573123"><span style="font-family:Consolas" lang="EN-US">6.12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">编译</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">如果不发布</span><span style="font-family:Consolas" lang="EN-US">.clj</span><span style="font-family:宋体">代码，则需要编译，如果是可执行类，需要如下的函数：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">test1.clj:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (ns
<b><u>test1</u></b> (<span style="background:yellow">:gen-class</span>))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:red" lang="EN-US">(</span><span style="font-family:Consolas;color:#096BF3" lang="EN-US">defn</span><span style="font-family:Consolas;color:black" lang="EN-US"> <span style="background:yellow">-main</span>
[&amp; args] </span><span style="font-family:Consolas;color:#00CC00" lang="EN-US">(</span><span style="font-family:Consolas;color:blue" lang="EN-US">println</span><span style="font-family:Consolas;color:black" lang="EN-US"> </span><span style="font-family:Consolas;color:rosybrown" lang="EN-US">"hello main"</span><span style="font-family:Consolas;color:#00CC00" lang="EN-US">)</span><span style="font-family:Consolas;color:red" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:宋体">中编译：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(binding [clojure.core/*compile-path* "<u>.</u>"]
(<span style="background:yellow">clojure.core/compile</span> <b><u>'test1</u></b>))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">运行：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">java –cp clojure.jar;. test1</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用命令行编译：</span></p>

<p class="MsoNormal"><span style="font-size:9.0pt;font-family:Consolas" lang="EN-US">java
-D<u><span style="background:yellow">clojure.compile.path</span></u>=. -cp <u>.:clojure.jar:clojure-contrib-1.2.0.jar</u>
<span style="background:yellow">clojure.lang.Compile</span> <b><u>test1</u></b></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573124"><span style="font-family:Consolas" lang="EN-US">6.13<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">调用</span></u></a><u><span style="font-family:Consolas" lang="EN-US">OS</span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">系统功能</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">从</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中调用系统</span><span style="font-family:Consolas" lang="EN-US">shell</span><span style="font-family:
宋体">命令：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '[<span style="background:yellow">clojure.java.shell</span>
:only [sh]])<br>
(<span style="background:yellow">sh</span> "java")<br>
(<span style="background:yellow">sh</span> "java" "-version")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">从</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中调用</span><span style="font-family:Consolas" lang="EN-US">web</span><span style="font-family:
宋体">浏览器访问指定</span><span style="font-family:Consolas" lang="EN-US">url</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use 'clojure.java.browse)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">browse-url</span>
"http://clojuredocs.org")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">调用</span><span style="font-family:Consolas" lang="EN-US">web</span><span style="font-family:宋体">浏览器查看在线</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:
宋体">类或者对象的</span><span style="font-family:Consolas" lang="EN-US">javadoc</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">javadoc</span>
String)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def d (java.util.Date.))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">javadoc</span> d)</span></p>

<h1><a name="_Toc339573125"></a><a name="_Toc281924073"></a><a name="_Toc281658906"></a><a name="_Toc281556412"></a><a name="_Toc281556312"></a><a name="_Toc281556208"></a><a name="_Toc281556006"></a><a name="_Toc281555849"></a><a name="_正则表达式regex"></a><span style="font-family:Consolas" lang="EN-US">7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">正则表达式</span></u><u><span style="font-family:Consolas" lang="EN-US">regex</span></u><u><span style="font-family:Consolas" lang="EN-US"> </span></u></h1>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(re-pattern "\\d+")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简写成：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; #"\d+"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">进行完全匹配：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">re-matches</span> <u>#"\d+"</u>
"1920") ; "1920" </span><span style="font-family:宋体">注意不是返回</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:
宋体">，不为</span><span style="font-family:Consolas" lang="EN-US">nil</span><span style="font-family:宋体">就是匹配</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (re-matches
<u>#"\d+"</u> "19-20") ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">逐步列出所有匹配项：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
m (<span style="background:yellow">re-matcher</span> <u>#"\d+"</u>
"from 1900 to 2010"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">re-find</span> m) ; "1900"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (re-find
m) ; "2010"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (re-find
m) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def m (<span style="background:yellow">re-matcher</span> <u>#"\d+"</u> "from
1900 to 2010"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [e
(re-find m)] (<span style="background:yellow">if</span> e (<span style="background:yellow">do</span> (println e) (recur (re-find m)))))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">when</span><span style="font-family:宋体">更好：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def m (<span style="background:yellow">re-matcher</span> <u>#"\d+"</u> "from
1900 to 2010"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(loop [e
(re-find m)] (<span style="background:yellow">when</span> e (println e) (recur
(re-find m))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">找到第一个匹配项：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">re-find</span> <u>#"\d+"</u> "from
1900 to 2010") ; "1900"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">一次列出所有匹配项：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">re-seq</span> <u>#"\d+"</u>
"from 1900 to 2010") ; ("1900" "2010")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">re-seq</span> <u>#"\w+"</u> "get all
words list") ; ("get" "all" "words"
"list")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不区分大小写：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(re-matches #"<span style="background:yellow">(?i)</span>Abc"
"ABC") ; "ABC"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573126"></a><a name="_Toc281924074"></a><a name="_Toc281658907"></a><a name="_Toc281556413"></a><a name="_Toc281556313"></a><a name="_Toc281556209"></a><a name="_Toc281556007"></a><a name="_Toc281555850"><span style="font-family:Consolas" lang="EN-US">8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">并发</span></u></a><u><span style="font-family:Consolas" lang="EN-US"> STM</span></u></h1>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Erlang</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">解决多台机器之间的并发控制</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="80">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:宋体">解决单台机器上多线程之间的并发控制</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal" style="margin-top:7.8pt"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">虽然在语言层面没有内置分布式，但可使用其他库，如：</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US"><a href="https://github.com/ztellman/aleph#readme" target="_blank" rel="external">https://github.com/ztellman/aleph</a></span></p>

<p class="MsoNormal"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;
color:#333333;background:white" lang="EN-US">Aleph is a Clojure framework for asynchronous
communication, built on top of<span class="apple-converted-space">&nbsp;</span></span><span lang="EN-US"><a href="http://www.jboss.org/netty" target="_blank" rel="external"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;
color:#4183C4;background:white">Netty</span></a></span><span class="apple-converted-space"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;
color:#333333;background:white" lang="EN-US">&nbsp;</span></span><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:#333333;background:white" lang="EN-US">and<span class="apple-converted-space">&nbsp;</span></span><span lang="EN-US"><a href="http://github.com/ztellman/lamina" target="_blank" rel="external"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;
color:#4183C4;background:white">Lamina</span></a></span><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:#333333;background:white" lang="EN-US">.</span></p>

<p class="MsoNormal"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;
color:#333333;background:white" lang="EN-US">Aleph allows the creation of both clients and
servers that can communicate using an array of protocols (HTTP, WebSockets,
TCP, UDP, and others), and represents that communication via a single
abstraction,<span class="apple-converted-space">&nbsp;</span></span><span lang="EN-US"><a href="https://github.com/ztellman/lamina/wiki/Channels" target="_blank" rel="external"><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:#4183C4;background:white">channels</span></a></span><span style="font-family:&quot;Helvetica&quot;,&quot;sans-serif&quot;;color:#333333;
background:white" lang="EN-US">. Thanks to the underlying libraries and the event-driven
approach to communication, these clients and servers can be highly scalable.</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573127"></a><a name="_Toc281924075"></a><a name="_Toc281658908"></a><a name="_Toc281556414"></a><a name="_Toc281556314"></a><a name="_Toc281556210"></a><a name="_Toc281556008"></a><a name="_Toc281555851"><span style="font-family:Consolas" lang="EN-US">8.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">基本概念</span></u></a></h2>

<div align="center">

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ref</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">引用</span></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">管理对一个状态或多个状态的协同、同步更新。</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">采用</span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">的交易管理。</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">atom</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">原子</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">管理对单个状态的非协同同步更新</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">agent</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">代理</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">管理对状态的异步更新</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">可采用</span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">的交易管理。</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">var</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">变量</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">本地线程变量，参看</span><span style="font-family:Consolas" lang="EN-US">def let binding</span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">的基本原理：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">采用</span><span style="font-family:Consolas" lang="EN-US">MVCC</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">Multiversion
Concurrency Controll</span><span style="font-family:宋体">）</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">和一般</span><span style="font-family:Consolas" lang="EN-US">RDB</span><span style="font-family:
宋体">用的概念是相同的。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">交易</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">以</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">唯一的时间戳来标识，交易</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">通过该时间戳标识。</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573128"></a><a name="_Toc281924076"></a><a name="_Toc281658909"></a><a name="_Toc281556415"></a><a name="_Toc281556315"></a><a name="_Toc281556211"></a><a name="_Toc281556009"></a><a name="_Toc281555852"><span style="font-family:Consolas" lang="EN-US">8.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">ref</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">定义：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v1 (<span style="background:yellow">ref</span>
10))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">引用：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">deref</span> v1)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可简化为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">@</span><span style="font-family:Consolas" lang="EN-US">v1</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改变：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dosync</span> (<span style="background:yellow">ref-set</span>
v1 0))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dosync</span> (<span style="background:yellow">ref-set</span>
v1 (inc @v1))) ; </span><span style="font-family:宋体">这个写法</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用函数改变值，可简化为：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dosync</span> (<span style="background:yellow">alter</span>
v1 inc))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dosync</span> (<span style="background:yellow">alter</span>
v1 + 10))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">dosync</span> (<span style="background:yellow">commute</span>
v1 + 100)) ; commutative </span><span style="font-family:宋体">交替的</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">改变多次：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def cu (ref 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dotimes
[i 5] (dosync (alert cu inc))) ; @cu = 15</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">中</span><span style="font-family:Consolas" lang="EN-US">STM</span><span style="font-family:宋体">的特性和</span><span style="font-family:Consolas" lang="EN-US">RDB</span><span style="font-family:宋体">类似：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">更新操作是原子操作</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">ref</span><span style="font-family:宋体">可以指定</span><span style="font-family:Consolas" lang="EN-US">validation</span><span style="font-family:宋体">函数，失败可完全回滚</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">多个更新操作之间是无关的，一个更新操作不能读取另一个更新操作的中间结果</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">与</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">不同，</span><span style="font-family:Consolas" lang="EN-US">ref</span><span style="font-family:
宋体">可定义</span><span style="font-family:Consolas" lang="EN-US">*</span><b><span style="font-family:宋体">一组</span></b><b><span style="font-family:
Consolas" lang="EN-US">*</span></b><span style="font-family:宋体">原子操作：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v1 (ref 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v2 (ref 100))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:lime">(</span><span style="background:yellow">dosync</span> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:aqua">ref-set</span>
v1 20) </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:aqua">ref-set</span>
v2 200)<span style="background:lime">)</span> ; @v1=20 @v2=200</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
c (ref []))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
next1 [] (dosync (alter c conj (System/nanoTime))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
next2 [] (dosync (commute c conj (System/nanoTime))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dotimes
[i 10] (next1))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dotimes
[i 10] (next2))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：转账</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def a1 (ref
100))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def a2 (ref
0))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn transfer
[from n to] (dosync (when (&gt;= @from n) (alter from - n) (alter to + n))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(transfer a1
60 a2) ; @a1=40 @a2=60</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(transfer a1
60 a2) ; @a1=40 @a2=60</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dotimes [_
10] (transfer a1 10 a2)) ; @a1=0 @a2=100</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dotimes [_
10] (transfer a2 10 a1)) ; @a1=100 @a2=0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">并发转</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use
'wr3.clj.numberx)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dotimes [i 110]
(future (do (Thread/sleep (* 10 (random))) (transfer a1 1 a2)))) ; </span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924077"></a><a name="_Toc281658910"></a><a name="_Toc281556416"></a><a name="_Toc281556316"></a><a name="_Toc281556212"></a><a name="_Toc281556010"></a><a name="_Toc281555853"><span style="text-decoration:none" lang="EN-US">8.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">validator</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：聊天室</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
<span style="background:lime">notnull?</span> <u>(partial every? #(and (:from
%) (:text %)))</u> ) ; </span><span style="font-family:宋体">判断是否都有值的</span><span style="font-family:Consolas" lang="EN-US">partial</span><span style="font-family:
宋体">函数</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
board (ref [] <span style="background:yellow">:validator</span> <span style="background:lime">notnull?</span>)) ; </span><span style="font-family:
宋体">定义黑板</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者用：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
board (ref []))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">set-validator!</span> board notnull?)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
add2 [m] (dosync (<span style="background:yellow">alter</span> board conj m))) </span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defstruct
msg :from :text) ; </span><span style="font-family:宋体">定义消息</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m1 (struct msg "qh" "qh
here"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
m2 (struct msg "james" "james here"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (do
(add2 m1) (add2 m2))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (add2
(struct msg "xx" "hello world"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (add2
"some unknow") <span style="color:red">; </span></span><span style="font-family:宋体;color:red">失败</span><span style="font-family:
Consolas;color:red" lang="EN-US">, </span><span style="font-family:宋体;color:red">找不到非</span><span style="font-family:Consolas;color:red" lang="EN-US">nil</span><span style="font-family:宋体;color:red">的</span><span style="font-family:
Consolas;color:red" lang="EN-US">:from</span><span style="font-family:宋体;color:red">和</span><span style="font-family:Consolas;color:red" lang="EN-US">:text</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (add2
(struct msg <span style="color:red">nil</span> "hello world")) <span style="color:red">; </span></span><span style="font-family:宋体;color:red">失败</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (add2
(struct msg "xx" <span style="color:red">nil</span>)) <span style="color:red">; </span></span><span style="font-family:宋体;color:red">失败</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_Toc281924078"></a><a name="_Toc281658911"></a><a name="_Toc281556417"></a><a name="_Toc281556317"></a><a name="_Toc281556213"></a><a name="_Toc281556011"></a><a name="_Toc281555854"><span style="text-decoration:none" lang="EN-US">8.2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">watch</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">watch</span><span style="font-family:宋体">是在</span><span style="font-family:Consolas" lang="EN-US">ref</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">agent</span><span style="font-family:宋体">状态改变时会被调用的函数，可以设置多个</span><span style="font-family:Consolas" lang="EN-US">watch:</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v (ref 10))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
w0 [key id old new] (println "key =" key "id =" id))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (defn
w1 [key id old new] (println "old =" old "new =" new))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">add-watch</span> v "watch1" w1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">add-watch</span> v "watch2" w0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (dosync
(alter v inc)) ; <span style="color:#5B6E6E">old = 10 new = 11 \n key = watch2
id = #&lt;Ref@560932fe: 11&gt;</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; @v
; 11</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (remove-watch
v "watch2")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(dosync (alter v inc)) ; <span style="color:#5B6E6E">old
= 11 new = 12</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573129"></a><a name="_Toc281924079"></a><a name="_Toc281658912"></a><a name="_Toc281556418"></a><a name="_Toc281556318"></a><a name="_Toc281556214"></a><a name="_Toc281556012"></a><a name="_Toc281555855"><span style="font-family:Consolas" lang="EN-US">8.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">atom</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">基于</span><u><span style="font-family:Consolas" lang="EN-US">java.util.concurrent.atomic.*</span></u><span style="font-family:宋体">实现。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">比</span><span style="font-family:Consolas" lang="EN-US">ref</span><span style="font-family:宋体">更轻量级，</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">不能同时改变多个变量的值，但存取速度更快。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v1 (<span style="background:yellow">atom</span>
10))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">访问：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">@</span><span style="font-family:Consolas" lang="EN-US">v1 ; 10</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reset!</span> v1
20) ; @v1=20</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">swap!</span> v1 +
3) ; @v1=23</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">atom</span><span style="font-family:宋体">要同时改变多个变量的值，可以把多个变量组合成一个数据结构，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v2 (<span style="background:yellow">atom</span> {:name "qh" :age 30}))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; <span style="background:yellow">@</span>v2</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">reset!</span> v2 {:name "james" :age 20}) ;
@v2={:name "james", :age 20}</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">swap!</span> v2 assoc :age 25) ; @v2={:name
"james" :age 25</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573130"></a><a name="_Toc281924080"></a><a name="_Toc281658913"></a><a name="_Toc281556419"></a><a name="_Toc281556319"></a><a name="_Toc281556215"></a><a name="_Toc281556013"></a><a name="_Toc281555856"><span style="font-family:Consolas" lang="EN-US">8.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">agent</span></u></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def v (<span style="background:yellow">agent</span>
3))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">@v <span style="color:#5B6E6E">; 3</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">send</span> v
inc) <span style="color:#5B6E6E">; </span></span><span style="font-family:宋体;
color:#5B6E6E">发出指令后马上返回，让</span><span style="font-family:Consolas;
color:#5B6E6E" lang="EN-US">agent</span><span style="font-family:宋体;color:#5B6E6E">把指令排入队列中在合适的时候执行</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">@v <span style="color:#5B6E6E">; 4</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(send v * 10)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">@v <span style="color:#5B6E6E">; 40</span></span></p>

<p class="MsoNormal"><span style="font-family:宋体">等待</span><span style="font-family:Consolas" lang="EN-US">agent</span><span style="font-family:宋体">执行结果：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">await</span> v)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">await-for</span>
100 v)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">validator</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v1 (agent 3 <span style="background:yellow">:validator</span> number?))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (send
v1 (fn [_] "abc")) <span style="color:#5B6E6E">; #&lt;Agent@786c1a82:
3&gt;</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; @v1
; 3</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (send
v1 inc) ; <span style="color:#C00000">java.lang.RuntimeException: Agent is
failed, needs restart (NO_SOURCE_FILE:0)</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">agent-errors</span>
v1) ; </span><span style="font-size:8.0pt;font-family:Consolas;
color:#C00000" lang="EN-US">(#&lt;IllegalStateException java.lang.IllegalStateException:
Invalid reference state&gt;)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clear-agent-errors</span>
v1) ; 3</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(send v1 inc) ; @v1=4</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281658914"></a><a name="_Toc281556420"></a><a name="_Toc281556320"></a><a name="_Toc281556216"></a><a name="_Toc281556014"></a><a name="_Toc281555857"></a><a name="_Toc339573131"><span style="font-family:Consolas" lang="EN-US">8.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">binding</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">set!</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">def</span> v 0)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">binding</span> <b>[v 10]</b> (println v) (<span style="background:yellow">set!</span> v 100) (println v))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(println v) ;
0</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573132"><span style="font-family:Consolas" lang="EN-US">8.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">lazy</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">变量</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (def
v1 (<span style="background:yellow">delay</span> (System/nanoTime))) ; </span><span style="font-family:宋体">定义但不求值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (System/nanoTime)&nbsp;&nbsp;&nbsp;&nbsp;
; 14870352 <u>36144105</u></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">force</span>
v1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;;
14870352 <u>39977365</u> </span><span style="font-family:宋体">第一次使用时求值</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; @v1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;; 14870352 <u>39977365</u> </span><span style="font-family:
宋体">之后保持不变</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (System/nanoTime)&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;; 14870352 <u>46999304</u></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573133"></a><a name="_Toc281924082"><span style="font-family:Consolas" lang="EN-US">8.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">状态更新对比</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">更新机制</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">更新手段</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">ref</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">atom</span></b></p>
  </td>
  <td style="border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">agent</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">常用方式</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">通过一个函数</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dosync (<span style="background:yellow">alter</span> v1 inc))</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">swap!</span> v1 inc)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">send-off</span> v inc)</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">通信方式</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">通过一个函数</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dosync (<span style="background:yellow">commute</span> v1 inc))</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">非阻塞方式</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">通过一个函数</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">send</span> v inc)</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">简单设值方式</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:宋体">通过一个值</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dosysc (<span style="background:yellow">ref-set</span> v1 0))</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reset!</span> v1 10)</span></p>
  </td>
  <td style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt" valign="top">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573134"><span style="font-family:Consolas" lang="EN-US">8.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">多线程</span></u></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.start (Thread. #(do (Thread/sleep 3000) (println
10))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">注：上述语句马上返回，</span><span style="font-family:
Consolas" lang="EN-US">3s</span><span style="font-family:宋体">后在控制台打印</span><span style="font-family:Consolas" lang="EN-US">10</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">future</span><span style="font-family:
宋体">版本如下：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (<span style="background:yellow">future</span> (do (Thread/sleep 3000) (println 10)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(dotimes [i 5] (<span style="background:yellow">future</span>
(do (Thread/sleep 3000) (println 10))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(doseq [msg ["one"
"two" "three" "four"]]</span></span><span style="font-family:Consolas;color:black" lang="EN-US"> <span class="apple-style-span">(<span style="background:yellow">future</span> (println
"Thread" msg "says Hello World!")))</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573135"><span style="font-family:Consolas" lang="EN-US">8.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">pmap</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">的多线程版本，对比：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [n]
(when (pos? n) (recur (dec n)))) ; </span><span style="font-family:宋体">一个啥也不做的耗时操作</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(time f
100000000) ; 1150ms</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(time (dotimes
[i 2] (f 100000000))) ; </span><span style="font-family:宋体">单线程版本</span><span style="font-family:Consolas" lang="EN-US"> 2321ms</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(time (doall
(pmap f (repeat 2 100000000)))) ; </span><span style="font-family:宋体">多线程版本</span><span style="font-family:Consolas" lang="EN-US"> 2091ms</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：查看文件夹大小（字节数）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn <b>psize</b>
[f]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (if
(.isDirectory f)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(apply + (<span style="background:yellow">pmap</span> <b>psize</b> (.listFiles
f)))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(.length f)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(import
java.io.File)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(psize (File.
"f:/lib/clojure"))</span></p>

<h1><a name="_Toc281658915"></a><a name="_Toc281556421"></a><a name="_Toc281556321"></a><a name="_Toc281556217"></a><a name="_Toc281556015"></a><a name="_Toc281555858"></a><a name="_Toc339573136"></a><a name="_Toc281924083"><span style="font-family:Consolas" lang="EN-US">9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">GUI</span></u></a></h1>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(import
'javax.swing.JFrame)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doto (JFrame.
"hello world") (.setSize 200 200) (.setVisible true))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doto
(javax.swing.JFrame.)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(.setLayout (java.awt.GridLayout. 2 2 3 3))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (.add
(javax.swing.JTextField.))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (.add
(javax.swing.JLabel. "Enter some text"))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(.setSize 300 80)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(.setVisible true))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns gui-demo <u>(:import
[javax.swing JPanel JFrame] [java.awt Dimension])</u>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn panel2
[]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let
[panel (<span style="background:yellow">proxy</span> [JPanel] [] (paintComponent
[g] (.drawLine g 0 0 100 100)))]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(<span style="background:yellow">doto</span> panel (.setPreferredSize (Dimension.
400 400)))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn frame2
[panel]</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">doto</span> (JFrame.) (.add panel) .pack .show))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(frame2 (panel2))
; </span><span style="font-family:宋体">调用</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：摄氏度转换为华氏度</span></p>

<pre style="line-height:14.4pt;vertical-align:top"><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">import '</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">javax</span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">swing JFrame JLabel JTextField JButton</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">java</span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">awt</span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">event ActionListener</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">java</span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">awt GridLayout</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">))</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></pre><pre style="line-height:14.4pt;vertical-align:top"><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">(</span></span><span class="kw1"><span style="font-size:10.5pt;font-family:Consolas;
color:#B1B100" lang="EN-US">let</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">[</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">frame </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new JFrame </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:red" lang="EN-US">"Celsius Converter (</span></span><span class="st0"><span style="font-size:10.5pt;color:red">摄氏度转华氏度</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:red" lang="EN-US">)"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp-text </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new JTextField</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; celsius-label </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new JLabel </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:red" lang="EN-US">"Celsius (</span></span><span class="st0"><span style="font-size:10.5pt;color:red">摄氏度</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:red" lang="EN-US">)"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; convert-button </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new JButton </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:red" lang="EN-US">"Convert (</span></span><span class="st0"><span style="font-size:10.5pt;color:red">进行转换</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:red" lang="EN-US">)"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fahrenheit-label </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new JLabel </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:red" lang="EN-US">"Fahrenheit (</span></span><span class="st0"><span style="font-size:10.5pt;color:red">华氏度</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:red" lang="EN-US">)"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)]</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> convert-button</span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">addActionListener</span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">proxy </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">[</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">ActionListener</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">]</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">[]</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">actionPerformed </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">[</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">evt</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">]</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="kw1"><span style="font-size:10.5pt;font-family:Consolas;color:#B1B100" lang="EN-US">let</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">[</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">c </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">Double/parseDouble </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> temp-text </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">getText</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">)))]</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> fahrenheit-label</span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">setText </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">str </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">+ </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;color:#CC66CC" lang="EN-US">32</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">* </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;color:#CC66CC" lang="EN-US">1.8</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> c</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">))</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;color:red" lang="EN-US">" Fahrenheit (</span></span><span class="st0"><span style="font-size:10.5pt;color:red">华氏度</span></span><span class="st0"><span style="font-size:10.5pt;font-family:Consolas;
color:red" lang="EN-US">)"</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">))))))))</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">doto frame </span></pre><pre style="line-height:14.4pt;vertical-align:top"><span class="co1"><i><span style="font-size:10.5pt;font-family:Consolas;color:gray" lang="EN-US">;(.setDefaultCloseOperation (JFrame/EXIT_ON_CLOSE)) ; uncomment this to quit app on frame close</span></i></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">setLayout </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">new GridLayout </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;color:#CC66CC" lang="EN-US">2</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;
color:#CC66CC" lang="EN-US">2</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;color:#CC66CC" lang="EN-US">3</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;
color:#CC66CC" lang="EN-US">3</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">))</span></span></pre><pre style="line-height:14.4pt;vertical-align:top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">add temp-text</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">add celsius-label</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">add convert-button</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">add fahrenheit-label</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">setSize </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;
color:#CC66CC" lang="EN-US">300</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="nu0"><span style="font-size:10.5pt;font-family:Consolas;color:#CC66CC" lang="EN-US">80</span></span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)</span></span></pre><pre style="line-height:14.4pt;vertical-align:
top"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">(</span></span><span class="sy0"><span style="font-size:10.5pt;font-family:Consolas;color:#66CC66" lang="EN-US">.</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">setVisible true</span><span class="br0"><span style="font-size:10.5pt;font-family:Consolas;
color:#66CC66" lang="EN-US">)))</span></span></pre>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573137"></a><a name="_Toc281924084"><span style="font-family:Consolas" lang="EN-US">10<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">IO JDBC</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573138"></a><a name="_Toc281924085"><span style="font-family:Consolas" lang="EN-US">10.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文件</span></u></a><u><span style="font-family:Consolas" lang="EN-US">IO</span></u></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">全部读</span></p>

<p class="MsoNormal"><span style="font-family:宋体">一次读入全部内容：</span></p>

<p class="MsoNormal" style="text-indent:18.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<u>clojure.contrib.duck-streams</u>)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">slurp</span>
"somefile.txt") ; </span><span style="font-family:宋体">把文件内容读入字符串</span><span style="font-family:Consolas" lang="EN-US">&nbsp; slurp</span><span style="font-family:宋体">：咔咔吃</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def s (slurp "somefile.txt"))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以指明</span><span style="font-family:Consolas" lang="EN-US">encoding</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">slurp</span>
"gbk.txt" <span style="background:yellow">:encoding</span>
"gbk")</span></p>

<p class="MsoNormal"><span style="font-family:宋体">写字符串到文件：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">spit</span>
"output.txt" "some output text") ; </span><span style="font-family:宋体">写字符串内容入文件。</span><span style="font-family:
Consolas" lang="EN-US">spit</span><span style="font-family:宋体">原意：吐口水</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">append-spit</span>
"output.txt" "\nmore text with spit append") ; </span><span style="font-family:宋体">追加文件内容</span></p>

<p class="MsoNormal"><span style="font-family:宋体">参数：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">:<span style="background:yellow">append</span>
true</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">:<span style="background:yellow">encoding</span>
"UTF-8"</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">逐行读</span></p>

<p class="MsoNormal"><span style="font-family:宋体">每次读入一行：</span></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-indent:-18.0pt"><span style="font-family:Consolas" lang="EN-US">(0)<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><span style="font-family:宋体">使用</span><b><u><span style="font-family:Consolas" lang="EN-US">java.io.*</span></u></b></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [r (java.io.BufferedReader. (java.io.FileReader.
"gbk.txt"))]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let [seq (line-seq r)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(count seq)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体">例子：统计符合条件的行</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(import [java.io File InputStreamReader
FileInputStream BufferedReader])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [fis (FileInputStream.
"f:/cust2.txt")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;isr (InputStreamReader. fis "UTF-8")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;br
(BufferedReader. isr) ]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (loop [i 0] (if-let [line (.readLine br)] </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(recur (if (.startsWith line "005") (inc i) i))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(println "i=" i))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><b><span style="font-family:宋体;color:red">注：</span></b><span style="font-family:宋体">对于上百万千万行的文本文件，这种方式<b><u>处理速度最快</u></b>。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-indent:-18.0pt"><span style="font-family:Consolas" lang="EN-US">(1)<span style="font:7.0pt &quot;Times New Roman&quot;">
</span></span><span style="font-family:宋体">使用</span><b><u><span style="font-family:Consolas" lang="EN-US">clojure.java.io/reader</span></u></b></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:宋体">例子：打印短行</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [rdr (<span style="background:yellow">clojure.java.io/reader</span>
"gbk.txt" :encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(doseq [line (<span style="background:
yellow">line-seq</span> rdr)] (when (&lt; (count line) 10) (println line))))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:宋体">例子：所有行放入</span><span style="font-family:Consolas" lang="EN-US">vector</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [rdr (<span style="background:yellow">clojure.java.io/reader</span>
"gbk.txt" :encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(reduce conj [] (line-seq rdr)))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:宋体">例子：计算特定行的数目</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">(def n (atom 0))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [rdr (<span style="background:yellow">clojure.java.io/reader</span>
"gbk.txt" :encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(doseq [line (<span style="background:
yellow">line-seq</span> rdr)] (when (&lt; (count line) 10) (swap! n inc))))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">@n</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:宋体">当然有</span><span style="font-family:Consolas" lang="EN-US">reduce</span><span style="font-family:
宋体">也可以不用状态量</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [rdr (clojure.java.io/reader "gbk.txt"
:encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;(<span style="background:yellow">reduce</span>
<u><span style="background:yellow">(</span>fn [i line] (if (&lt; (count line)
10) (inc i) i)<span style="background:yellow">)</span></u> 0 (line-seq rdr)))</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:18.0pt"><span style="font-family:宋体">例子：简单实现</span><span style="font-family:Consolas" lang="EN-US">wc –l cust.txt</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [rdr (<span style="background:yellow">clojure.java.io/reader</span>
"cust.txt" :encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(count (<span style="background:yellow">line-seq</span>
rdr)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">例子：标记行号</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '[clojure.contrib.seq-utils :only (<b><span style="background:yellow">indexed</span></b>)])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [r (<span style="background:yellow">clojure.java.io/reader</span>
"gbk.txt" :encoding "gbk")]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(doseq [[i line] (<b><span style="background:yellow">indexed</span></b> (<span style="background:yellow">line-seq</span>
r))] (println i ":" line)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(2)</span><span style="font-family:宋体">使用</span><b><u><span style="font-family:Consolas" lang="EN-US">clojure.contrib.duck-streams</span></u></b></p>

<p class="MsoNormal" style="margin-left:21.0pt"><a name="OLE_LINK6"></a><a name="OLE_LINK5"><span style="font-family:Consolas" lang="EN-US">(use '[<u>clojure.contrib.duck-streams</u>
:only (<u>reader</u>)])</span></a></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">line-seq</span> (<span style="background:yellow">reader</span> "output.txt"))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-open</span>
[l (reader "output.txt")] (vec (line-seq l)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-open [ r (reader "output.txt")]
(doseq [l (line-seq r)] (println l)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">with-open</span><span style="font-family:宋体">会自动关闭</span><span style="font-family:Consolas" lang="EN-US">[]</span><span style="font-family:宋体">内的每个值。</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.1.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文件树</span></p>

<p class="MsoNormal"><span style="font-family:宋体">得到文件树：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">file-seq</span>
(java.io.File. "."))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(count (file-seq (java.io.File. ".")))</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.1.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">写标准输出</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(defn print-progress-bar [percent]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let [bar (StringBuilder.
"[")] </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (doseq [i (range
50)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (cond
(&lt; i (int (/ percent 2))) (.append bar "=")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(= i (int (/ percent 2))) (.append bar "&gt;")</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
:else (.append bar " ")))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (.append bar (str
"] " percent "%&nbsp;&nbsp;&nbsp;&nbsp; "))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (print
"\r" (.toString bar)) ; </span><span style="font-family:宋体">只回车不换行，复写原来的输出</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (flush)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(dotimes [i 101] (do (Thread/sleep 30)
(print-progress-bar i)))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc281924086"></a><a name="_Toc339573139"><span style="font-family:Consolas" lang="EN-US">10.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">网络</span></u></a><u><span style="font-family:Consolas" lang="EN-US">IO</span></u></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读文本</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;(with-open [s (.openStream (java.net.URL. "<u>http://g.cn</u>"))]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(let [buf (java.io.BufferedReader.
(java.io.InputStreamReader. s))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">seq (<span style="background:yellow">line-seq</span>
buf)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(apply str seq)))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.2.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读二进制</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(let [con (-&gt; "<u>http://g.cn</u>"
java.net.URL. .openConnection)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">fields (reduce (fn [h v] (assoc h
(.getKey v) (into [] (.getValue v))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:115.5pt"><span style="font-family:Consolas" lang="EN-US">{} (.getHeaderFields con))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">in (java.io.BufferedInputStream.
(.getInputStream con))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">out (java.io.BufferedOutputStream.
(java.io.FileOutputStream. "<b><u>out.file</u></b>"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">buffer (make-array Byte/TYPE 1024)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(loop [g (.read in buffer) r 0]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(if-not (= g -1)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(do</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(println (String. buffer
"UTF-8"))</span></p>

<p class="MsoNormal" style="margin-left:63.0pt"><span style="font-family:Consolas" lang="EN-US">(.write out buffer 0 g)</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(recur (.read in buffer) (+ r g)))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(.close in)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(.close out)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(.disconnect con))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573140"><span style="font-family:Consolas" lang="EN-US">10.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">配置</span></u></a><u><span style="font-family:Consolas" lang="EN-US">config</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、数据文件</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">不用象其他语言一样使用</span><span style="font-family:
Consolas" lang="EN-US">xml</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">json</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">yaml</span><span style="font-family:
宋体">之类的外部格式来存储数据，使用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">代码即数据就能很好地完成。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">把代码结构写入文件：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def dbs '[oracle mssql sybase db2 mysql informix
postgresql])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">spit</span>
"<u>conf3.clj</u>" dbs)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">文件内容为：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:silver" lang="EN-US">[oracle mssql sybase db2 mysql
informix postgresql]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">读出使用：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def c (<span style="background:yellow">read-string</span>
(<span style="background:yellow">slurp</span> "<u>conf3.clj</u>")))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">凡是</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">表达出来的数据结构都可以进行存储，如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def m {:name "QiuiuH" :gender 'male :age
20 :mail ["qh@mail" "james@msn.com"]})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas;background:silver" lang="EN-US">; </span><span style="font-family:
宋体;background:silver">注意：在</span><span style="font-family:Consolas;
background:silver" lang="EN-US">1.conf</span><span style="font-family:宋体;background:silver">中</span><span style="font-family:Consolas;background:silver" lang="EN-US">'male</span><span style="font-family:宋体;background:silver">是没有</span><span style="font-family:Consolas;background:silver" lang="EN-US">'</span><span style="font-family:
宋体;background:silver">的</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(spit "1.conf" m) ; spit</span><span style="font-family:宋体">写入可能会乱码，自行编辑改成</span><span style="font-family:
Consolas" lang="EN-US">utf8</span><span style="font-family:宋体">即可</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def c (read-string (slurp "1.conf")))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">如果</span><span style="font-family:Consolas" lang="EN-US">2.conf</span><span style="font-family:宋体">内容中含需要求值的表达式，如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(* 2 3 4)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">则需要配合</span><span style="font-family:Consolas" lang="EN-US">eval</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(eval (read-string (slurp "2.conf")))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><a name="_读写json"></a><span style="text-decoration:none" lang="EN-US">10.3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读写</span><span lang="EN-US">.clj</span></p>

<p class="MsoNormal"><span style="font-family:宋体">最简单的方法，就是包含一个如</span><span style="font-family:Consolas" lang="EN-US">emsconf.clj</span><span style="font-family:宋体">的文件</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(ns 'wr3.clj.app.emsconf :reload)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">在，</span><span style="font-family:Consolas" lang="EN-US">clj</span><span style="font-family:宋体">文件中，一般尽量用</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
宋体">，表达简单，</span><span style="font-family:Consolas" lang="EN-US">destruction</span><span style="font-family:宋体">简单：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">配置特点</span></b></p>
  </td>
  <td style="width:406.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="542">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">配置方案</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:宋体">配置项规则且数量不多</span></p>
  </td>
  <td style="width:406.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="542">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">---------------------------------------
  <span style="background:yellow">nav</span></span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">[[<span style="color:#C00000">"</span></span><span style="font-family:宋体;color:#C00000">评价工作</span><span style="font-family:Consolas;color:#C00000" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span style="color:#0070C0">"icon-pen"</span> <span style="color:#7F7F7F">; title icon</span></span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:10.5pt"><span style="font-family:Consolas;background:lime" lang="ES">[</span><span style="font-family:Consolas" lang="ES">[<span style="color:#00B050">"</span></span><span style="font-family:宋体;color:#00B050">上市公司综合评价</span><span style="font-family:Consolas;color:#00B050" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp; <span style="color:#E36C0A">"icon-sum"
  </span>&nbsp;&nbsp;&nbsp;<span style="color:#4A442A">"indic0_bt"</span>]
  <span style="color:#7F7F7F">; title icon id</span> </span></p>
  <p class="MsoNormal" style="margin-left:10.5pt;text-indent:15.75pt"><span style="font-family:Consolas" lang="ES">[<span style="color:#00B050">"</span></span><span style="font-family:宋体;color:#00B050">沪深</span><span style="font-family:
  Consolas;color:#00B050" lang="ES">300</span><span style="font-family:宋体;color:#00B050">公司</span><span style="font-family:Consolas;color:#00B050" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#E36C0A">"icon-list"</span>&nbsp;&nbsp; <span style="color:#4A442A">"hs300_bt" </span>]</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">&nbsp; &nbsp;[<span style="color:#00B050">"</span></span><span style="font-family:宋体;color:#00B050">分行业统计</span><span style="font-family:Consolas;color:#00B050" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#E36C0A">&nbsp;"icon-pie"&nbsp; </span>&nbsp;&nbsp;<span style="color:#4A442A">"report3_bt"</span>]<span style="background:
  lime">]</span>]</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">&nbsp;</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">&nbsp;[<span style="color:#C00000">"</span></span><span style="font-family:宋体;color:#C00000">系统管理及帮助</span><span style="font-family:Consolas;color:#C00000" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#0070C0">"icon-search"</span></span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">&nbsp;&nbsp;<span style="background:lime">[</span>[<span style="color:#00B050">"</span></span><span style="font-family:宋体;
  color:#00B050">网站样式</span><span style="font-family:Consolas;
  color:#00B050" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span style="color:#E36C0A">"icon-search"</span> <span style="color:#4A442A">"site_bt"</span>]</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:
  Consolas" lang="ES">&nbsp;&nbsp; [<span style="color:#00B050">"</span></span><span style="font-family:宋体;color:#00B050">使用帮助</span><span style="font-family:Consolas;color:#00B050" lang="ES">"</span><span style="font-family:Consolas" lang="ES">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span style="color:#E36C0A">"icon-help" </span>&nbsp;&nbsp;<span style="color:#4A442A">"help_bt"</span>]<span style="background:
  lime">]</span>]]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="ES">----------------------------------------</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">调用（使用</span><span style="font-family:Consolas" lang="ES">destruction</span><span style="font-family:宋体">）：</span></p>
  <p class="MsoNormal" style="margin-left:13.55pt"><span style="font-family:Consolas" lang="ES">(for [[<span style="color:#C00000">title</span> <span style="color:#0070C0">icon</span> <span style="background:lime">nav2</span>] <span style="background:yellow">nav</span>] ...</span></p>
  <p class="MsoNormal" style="margin-left:13.55pt"><span style="font-family:Consolas" lang="ES">&nbsp; (for [[<span style="color:#00B050">title</span>
  <span style="color:#E36C0A">icon</span> <span style="color:#4A442A">id</span>]
  <span style="background:lime">nav2</span>] ...))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="180">
  <p class="MsoNormal"><span style="font-family:宋体">配置项不规则或数量太多</span></p>
  </td>
  <td style="width:406.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="542">
  <p class="MsoNormal"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">vector + array-map</span><span style="font-family:
  宋体">（</span><span style="font-family:Consolas" lang="EN-US">hash-map</span><span style="font-family:宋体">元素上到一定数量后不能保证顺序）：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--------------------------------------
  persons</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[["qh"&nbsp;&nbsp;&nbsp;
  {:title "CEO" :age 30 :corp "www.corp.com" :mail
  ".."}]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;["james"
  {:children ["jia" "jian" "chen"] :wife
  "wiwi"}]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;["qiu"
  &nbsp;&nbsp;{:mathor "mama" :sister "sisi"}]]</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">--------------------------------------</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(for [[nam
  m] persons] ...</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(for [[k v] m] ..))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读写</span><span lang="EN-US">json</span></p>

<p class="MsoNormal"><span style="font-family:宋体">需要使用</span><span style="font-family:Consolas" lang="EN-US">json</span><span style="font-family:宋体">与</span><span style="font-family:Consolas" lang="EN-US">js</span><span style="font-family:宋体">或者其他语言交换数据时：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<span style="background:yellow">clojure.contrib.json</span>)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">json-str</span> [1
2 3 4]) ; "[1,2,3,4]"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">read-json</span>
"[1,2,3,4]") ; [1 2 3 4]</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其他：</span></p>

<table class="MsoNormalTable" style="margin-left:21.0pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:123.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="165">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">pprint-json</span></p>
  </td>
  <td style="width:137.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="184">
  <p class="MsoNormal"><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US">pretty</span><span style="font-family:宋体">格式的</span><span style="font-family:Consolas" lang="EN-US">json</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:123.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="165">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">print-json</span></p>
  </td>
  <td style="width:137.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="184">
  <p class="MsoNormal"><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US">json</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:123.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="165">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(write-json
  o out)</span></p>
  </td>
  <td style="width:137.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="184">
  <p class="MsoNormal"><span style="font-family:宋体">输出到</span><span style="font-family:Consolas" lang="EN-US">out</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">读写</span><span lang="EN-US">xml</span></p>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">clojure.xml</span><span style="font-family:宋体">来解析</span><span style="font-family:Consolas" lang="EN-US">xml</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例如</span><span style="font-family:Consolas" lang="EN-US">a.xml</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">―――――――――――――――――――――――――――</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;?xml
version="1.0" encoding="UTF-8" ?&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;<span style="background:yellow">persons </span>meta="</span><span style="font-family:宋体">测试</span><span style="font-family:Consolas" lang="EN-US">clojure.xml"&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;<span style="background:yellow">count</span>&gt;3&lt;/count&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;<span style="background:yellow">person </span>id="qh"&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;qh&lt;/name&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;16&lt;/age&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;qh@mail&lt;/email&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;/<span style="background:yellow">person</span>&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;<span style="background:yellow">person </span>id="james"&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;james&lt;/name&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;26&lt;/age&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;james@mail&lt;/email&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;/<span style="background:yellow">person</span>&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;<span style="background:yellow">person </span>id="qiuiuh"&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;QiuiuH&lt;/name&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;36&lt;/age&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;qiuiuh@mail&lt;/email&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &lt;/<span style="background:yellow">person</span>&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/<span style="background:yellow">persons</span>&gt;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">―――――――――――――――――――――――――――</span></p>

<p class="MsoNormal"><span style="font-family:宋体">代码：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(use 'clojure.xml)</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def p (<span style="background:yellow">parse</span>
(java.io.File. "a.xml")))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">每个节点会被解释为含</span><span style="font-family:Consolas" lang="EN-US">{:tag .. :attr .. :content ..}</span><span style="font-family:宋体">三部分的</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">，例如</span><span style="font-family:Consolas" lang="EN-US">persons</span><span style="font-family:宋体">根节点</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:72.55pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="97">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">每部分标识</span></b></p>
  </td>
  <td style="width:259.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="346">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">值</span></b></p>
  </td>
  <td style="width:174.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="233">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="97">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:tag</span></p>
  </td>
  <td style="width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="346">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:persons</span></p>
  </td>
  <td style="width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="233">
  <p class="MsoNormal"><span style="font-family:宋体">总是一个</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:宋体">类型变量</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="97">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:attr</span></p>
  </td>
  <td style="width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="346">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:meta
  "</span><span style="font-family:宋体">测试</span><span style="font-family:Consolas" lang="EN-US">clojure.xml"}</span></p>
  </td>
  <td style="width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="233">
  <p class="MsoNormal"><span style="font-family:宋体">一个</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">，属性名为</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:
  宋体">类型</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="97">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:content</span></p>
  </td>
  <td style="width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="346">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[{:tag
  :name,</span><span lang="EN-US"> </span><span style="font-family:
  Consolas" lang="EN-US">:attrs nil, :content ["qh"]}</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">{:tag :age, :attrs nil, :content
  ["16"]}</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">...]</span></p>
  </td>
  <td style="width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="233">
  <p class="MsoNormal"><span style="font-family:宋体">一个节点</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">字符串数组，每个节点又被递归解析。</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">xml-seq</span><span style="font-family:宋体">来处理每个节点（本例是对有属性的节点打印其属性）：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(doseq [n (<span style="background:yellow">xml-seq</span>
p) :when (:attrs n)] (println&nbsp; (:attrs n)))</span></p>

<p class="MsoNormal"><span style="font-family:宋体">结果：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{:meta </span><span style="font-family:宋体">测试</span><span style="font-family:Consolas" lang="EN-US">clojure.xml}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{:id qh}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{:id james}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{:id qiuiuh}</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573141"><span style="font-family:Consolas" lang="EN-US">10.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">JDBC</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数据库</span></u><u><span style="font-family:Consolas" lang="EN-US">IO</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">参考：</span><a href="http://en.wikibooks.org/wiki/Clojure_Programming/Examples/JDBC_Examples" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://en.wikibooks.org/wiki/Clojure_Programming/Examples/JDBC_Examples</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
</span><span style="font-family:宋体;color:#5B6E6E">引用</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">contrib</span><span style="font-family:宋体;color:#5B6E6E">包</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<u><span style="background:yellow">clojure.contrib.sql</span></u>)
; open "<u>test_sql.clj</u>" for examples.</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
</span><span style="font-family:宋体;color:#5B6E6E">定义</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">DataSource</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def db {</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:classname "org.h2.Driver", </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:subprotocol "h2", </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:subname "mem:testdb", </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:user "sa",</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:password ""})</span></p>

<p class="MsoNormal"><span style="font-family:宋体;color:#5B6E6E">注：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">subprotocol subname </span><span style="font-family:宋体;color:#5B6E6E">用规则</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">"jdbc:${subprotocol}:${subname}"</span><span style="font-family:宋体;color:#5B6E6E">拼接，所以</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">:subprotocol
"h2"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">:subname "mem:testdb"</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
color:#5B6E6E">和</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">:subprotocol "h2:mem"
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">:subname "testdb"
</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
color:#5B6E6E">的结果是一样的。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
</span><span style="font-family:宋体;color:#5B6E6E">查询</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">sql</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-connection</span>
db </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; (<span style="background:yellow">with-query-results</span>
rs ["select 'qh' <b><span style="background:aqua">N</span></b><span style="background:aqua">ame</span>,20 <span style="background:aqua">Age</span>"]
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; (doseq [r rs] (println r))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">; <span style="color:#5B6E6E">{:<span style="background:aqua">name</span> "qh", :<span style="background:
aqua">age</span> 20}</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体;color:#5B6E6E">注：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">with-query-results</span><span style="font-family:宋体">会把列名如</span><span style="font-family:Consolas" lang="EN-US">ColumnFirst</span><span style="font-family:宋体">全都变成小写</span><span style="font-family:Consolas" lang="EN-US">columnfirst</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">with-query-results</span><span style="font-family:宋体">的结果中，各行都用列名作为</span><span style="font-family:
Consolas" lang="EN-US">keyword.</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">查询结果为空时，返回</span><span style="font-family:Consolas" lang="EN-US">[]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">创建</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">删除</span><span style="font-family:Consolas" lang="EN-US">Table</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-connection</span> db (<span style="background:
yellow">transaction</span> (<span style="background:yellow">create-table</span>
:t1 [:name1 :varchar] [:age1 :int])))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(with-connection
db (transaction&nbsp;&nbsp; (try (<span style="background:yellow">drop-table</span>
:t1) (catch Exception _))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">增加插入数据</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style="background:yellow">insert-values</span> :t1
[:name :age] ["qh" 20])))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">查询数据</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-connection</span> db (<span style="background:
yellow">with-query-results</span> rs ["select * from t1"] (dorun (map
#(println %) rs))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; update</span><span style="font-family:宋体">数据</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style="background:yellow">update-values</span> :t1
["name=?" "qh"] {:age 35})))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">删除数据</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style="background:yellow">delete-rows</span> :t1
["name=?" "qh"])))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573142"><span style="font-family:Consolas" lang="EN-US">10.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">ClojureQL</span></u></a></h2>

<p class="MsoNormal"><a href="http://www.clojureql.org/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://www.clojureql.org/</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">用更</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:宋体">的方式书写</span><span style="font-family:Consolas" lang="EN-US">SQL</span><span style="font-family:
宋体">语句，自动转化为</span><span style="font-family:Consolas" lang="EN-US">SQL92</span><span style="font-family:宋体">，支持</span><span style="font-family:Consolas" lang="EN-US">MySQL</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Postgresql</span></p>

<p class="MsoNormal"><span style="font-family:宋体">另：</span><span style="font-family:Consolas" lang="EN-US">RDBMS</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">DSL</span></p>

<p class="MsoNormal"><a href="http://sqlkorma.com/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://sqlkorma.com/</span></a></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573143"><span style="font-family:Consolas" lang="EN-US">10.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">MongoDB</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">操作</span></u></h2>

<p class="MsoNormal"><a href="https://github.com/aboekhoff/congomongo" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/aboekhoff/congomongo</span></a></p>

<p class="MsoNormal"><a href="http://qiujj.com/static/Nasoft%E5%86%85%E9%83%A8%E6%89%8B%E5%86%8C%EF%BC%88DB%EF%BC%89.doc" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">MongoDB</span><span style="font-family:宋体">文档</span></a><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal"><span style="font-family:宋体">驱动源码：</span><a href="file:///F:/data/__DB/MongoDB/clojure%E9%A9%B1%E5%8A%A8%EF%BC%9Acongomongo/0.1.9/src/somnium/congomongo.clj" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">congomongo.clj</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">测试源码：</span><a href="file:///F:/data/__DB/MongoDB/clojure%E9%A9%B1%E5%8A%A8%EF%BC%9Acongomongo/0.1.9/test/somnium/test/congomongo.clj" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">congomongo_test.clj</span></a></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">congomongo</span><span style="font-family:宋体">编译：下载源码后直接</span><span style="font-family:Consolas" lang="EN-US">lein jar</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.6.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">创建连接</span></p>

<p class="MsoNormal"><span style="font-family:宋体">初始化：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use <b><u>'somnium.congomongo</u></b>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">mongo!</span> :db "<b><u>cbs400</u></b>")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">set-database!</span> "<b><u>test</u></b>")</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">或者更正规：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-mongo</span>
(<span style="background:yellow">make-connection</span> "<b><u>cbs400</u></b>"))</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">...)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">也可以在</span><span style="font-family:Consolas" lang="EN-US">with-mongo</span><span style="font-family:宋体">内改变</span><span style="font-family:Consolas" lang="EN-US">db</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">with-mongo</span>
(<span style="background:yellow">make-connection</span> "<b><u>cbs400</u></b>"))</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; ... <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">使用</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">cbs400</span><span style="font-family:
宋体;color:#7F7F7F">库</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">(<b><span style="background:yellow">with-db</span></b>
"<b><u>test</u></b>" <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">通过</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">with-db</span><span style="font-family:宋体;color:#7F7F7F">（</span><span style="font-family:
Consolas;color:#7F7F7F" lang="EN-US">0.1.9</span><span style="font-family:宋体;color:#7F7F7F">增加的函数）改成使用</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">test</span><span style="font-family:宋体;color:#7F7F7F">库</span></p>

<p class="MsoNormal" style="text-indent:42.0pt"><span style="font-family:Consolas" lang="EN-US">...)</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">... <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">还是使用</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">cbs400</span><span style="font-family:
宋体;color:#7F7F7F">库</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">make-connection</span><span style="font-family:宋体">可用</span><span style="font-family:Consolas" lang="EN-US">mongo-options</span><span style="font-family:宋体">控制参数：</span></p>

<p class="MsoNormal" style="text-indent:31.5pt"><span class="p"><span style="font-family:Consolas;color:#333333" lang="EN-US">(</span></span><span class="nf"><b><span style="font-family:Consolas;color:#990000" lang="EN-US">make-connection</span></b></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="no"><span style="font-family:Consolas;color:teal" lang="EN-US">:mydb</span></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="no"><span style="font-family:Consolas;color:teal" lang="EN-US">:host</span></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="s"><span style="font-family:Consolas;color:#DD1144" lang="EN-US">"127.0.0.1"</span></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="p"><span style="font-family:Consolas;color:#333333" lang="EN-US">(</span></span><span class="nf"><b><span style="font-family:Consolas;color:#990000;
background:yellow" lang="EN-US">mongo-options</span></b></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="no"><span style="font-family:Consolas;color:teal" lang="EN-US">:auto-connect-retry</span></span><span class="w"><span style="font-family:Consolas;color:#BBBBBB" lang="EN-US"> </span></span><span class="nv"><span style="font-family:Consolas;color:teal" lang="EN-US">true</span></span><span class="p"><span style="font-family:Consolas;color:#333333" lang="EN-US">)</span></span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以连接多个</span><span style="font-family:Consolas" lang="EN-US">mongodb</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">(def db (make-connection :example </span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:host "server1"}</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:host "server2" :port 25017}))</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.6.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">关闭连接</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">with-mongo *</span><b><span style="font-family:
宋体">不会</span></b><span style="font-family:Consolas" lang="EN-US">* </span><span style="font-family:宋体">自动关闭连接（这点和</span><span style="font-family:
Consolas" lang="EN-US">with-open</span><span style="font-family:宋体">不类似）。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [conn
(make-connection "cbs400")]</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(try</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(with-mongo conn ...)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(finally</span></p>

<p class="MsoNormal" style="margin-left:15.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">close-connection</span>
conn))))</span></p>

<p class="MsoNormal" style="margin-left:15.0pt;text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:宋体">可以写成</span><span style="font-family:Consolas" lang="EN-US">macro</span><span style="font-family:宋体">，但注意如果执行结果是</span><span style="font-family:
Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">的数据结构，关闭连接后是不可用的，可先把结果持久化</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">(defmacro with-mdb2</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; [db &amp; body]</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; `(let [~'mdb-conn
(make-connection (name ~db))]</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; (try</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(with-mongo ~'mdb-conn ~@body)</span></p>

<p class="MsoNormal" style="text-align:left;text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;(finally
(close-connection ~'mdb-conn)) )))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.6.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">CRUD</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">CRUD </span></b></p>
  </td>
  <td style="width:251.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码示例</span></b></p>
  </td>
  <td style="width:232.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">MongoDB</span></b><b><span style="font-family:宋体">命令</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  background:yellow" lang="EN-US">C</span></b><span style="font-family:Consolas" lang="EN-US">reate
  </span></p>
  <p class="MsoNormal"><span style="font-family:宋体">增</span></p>
  </td>
  <td style="width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">insert!</span> :cust </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:name "qh" :age 30})</span></p>
  </td>
  <td style="width:232.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.save(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{name:"qh",age:30})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  background:yellow" lang="EN-US">R</span></b><span style="font-family:Consolas" lang="EN-US">ead</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">查</span></p>
  </td>
  <td style="width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-one</span> :cust) <span style="color:#5B6E6E">;
  p1</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch</span> :cust :limit 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-by-id</span> :cust oid) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-by-ids</span> :cust [oid1 id2]) <span style="color:#7F7F7F">;0.1.8</span></span><span style="font-family:宋体;
  color:#7F7F7F">增加</span></p>
  </td>
  <td style="width:232.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.findOne()</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find().limit(10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({_id:oid}}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({_id:{:$in
  [oid1,id2]}})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  background:yellow" lang="EN-US">U</span></b><span style="font-family:Consolas" lang="EN-US">pdate
  </span><span style="font-family:宋体">改</span></p>
  </td>
  <td style="width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update!</span> :cust <span style="color:#5B6E6E">p1</span>
  (merge p1 {:name "james"}))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update!</span> :cust {:_id "01"} {:name
  "james"})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">update!</span> :cust {:_id "01"} </span></p>
  <p class="MsoNormal" style="text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">{"$set" {:name "james"}}) <span style="color:#7F7F7F">; </span></span><span style="font-family:宋体;color:#7F7F7F">更新单个字段</span></p>
  <p class="MsoNormal"><span style="font-family:宋体;color:#7F7F7F">存在则更新，没有则增加</span></p>
  <pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(<span style="background:yellow">update!</span> :coll </span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;
  font-family:Consolas" lang="EN-US">{:_id x} <span style="color:#7F7F7F">; </span></span><span style="font-size:10.5pt;color:#7F7F7F">也可用其他字段</span></pre><pre style="text-indent:10.5pt"><span style="font-size:10.5pt;
  font-family:Consolas" lang="EN-US">{:_id x :name "Joe" :age 20})</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-and-modify</span> :cust {:sex "male"}</span></pre><pre><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">&nbsp; {:<b>$inc</b> {:age 1}} <span style="color:#7F7F7F">; </span></span><span style="font-size:10.5pt;
  color:#7F7F7F">找到符合的第一个并更改，注意只能用</span><span style="font-size:
  10.5pt;font-family:Consolas;color:#7F7F7F" lang="EN-US">:$inc :$set</span><span style="font-size:10.5pt;color:#7F7F7F">等，否则原字段会被删除</span></pre></td>
  <td style="width:232.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.update({name:"qh"},</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{$set:{name:"james"}}, true)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">存在则更新，没有则增加</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">coll.update(
  </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">{ _id: X }, </span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">{ _id: X, name: "Joe", age: 20 },
  true);</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal"><b><span style="font-family:Consolas;
  background:yellow" lang="EN-US">D</span></b><span style="font-family:Consolas" lang="EN-US">elete</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">删</span></p>
  </td>
  <td style="width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">; </span><span style="font-family:宋体">条件和</span><span style="font-family:Consolas" lang="EN-US">fetch</span><span style="font-family:宋体">一样，但</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">不写</span><span style="font-family:Consolas" lang="EN-US">*
  :where</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">destroy!</span> :cust <span style="color:#5B6E6E">p1</span>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">destroy!</span> :cust {:name 'QH' :age 30})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">destroy!</span> :dict {:type "fd"}) ; </span><span style="font-family:宋体">条件删除</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">destroy!</span> :en {:cid {:$exists true}})</span></p>
  </td>
  <td style="width:232.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.remove({name:"qh"})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="77">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="336">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:232.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="310">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="width:543.1pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="724">
 <tbody><tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">高级操作</span></b></p>
  </td>
  <td style="width:264.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码示例</span></b></p>
  </td>
  <td style="width:204.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">MongoDB</span></b><b><span style="font-family:宋体">命令</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">插入多条</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">mass-insert!</span> :cust </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">[{:name "a"} {:name "b"}
  {:name "c"}])</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">mass-insert!</span> :cust</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (for
  [i (range 10)] </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:name (str "name" i)} ))</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">条件查询</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:where</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas;background:yellow" lang="EN-US">:where</span><span style="font-family:Consolas" lang="EN-US"> {:name "a" :age {"&amp;gt"
  30}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  <span style="background:yellow">:where</span> {:age {:$exists true}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">where</span> </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:name {:$in ["qh" "qiu"]}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">where</span> </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{:age {:$gt 30 "$lt" 50}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">where</span> {:<span style="background:yellow">$or</span>
  </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">[{:name "qh"} {:age 30}]})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;; <b>*</b></span><b><span style="font-family:宋体">没有</span></b><b><span style="font-family:
  Consolas" lang="EN-US">*</span></b><span style="font-family:Consolas;
  color:red" lang="EN-US">:$and</span><span style="font-family:Consolas" lang="EN-US"> </span><span style="font-family:宋体">不写就等同于</span><span style="font-family:Consolas" lang="EN-US">and</span><span style="font-family:宋体">条件</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">where</span> {:name #"^q"})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;; </span><span style="font-family:宋体">用正则表达式相当于</span><span style="font-family:
  Consolas" lang="EN-US">sql</span><span style="font-family:宋体">中的</span><span style="font-family:Consolas" lang="EN-US">like</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{name:"a",age:{$gt:30}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({age:{$exists:true}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{name:{$in:['qh','qiu']}})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{age:{$gt:30,$lt:50})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({"$or"</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">[{name:'qh'},{age:30}]})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({name:
  /^q/})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find().min(</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">查询范围</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">skip</span> 10 :<span style="background:
  yellow">limit</span> 3)</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find.skip(10).limit(3)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">选择指定列</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:only</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :only ["name" "age"])</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find({},</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{name:1, age:1}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">order</span><span style="font-family:宋体">排序</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">sort</span> {:name 1}) ;1</span><span style="font-family:宋体">升序</span><span style="font-family:Consolas" lang="EN-US">-1</span><span style="font-family:宋体">降序</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch :cust
  :<span style="background:yellow">sort</span> {:name 1, :age -1})</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">mdb</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">_id</span><span style="font-family:
  宋体">里面包含时间，排序</span><span style="font-family:Consolas" lang="EN-US">_id</span><span style="font-family:宋体">就是排序插入时间</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find().sort({name:1})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">count</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-count</span> :cust)</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.find().count()</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">distinct</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">distinct-values</span> :cust "ptype")&nbsp;
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">distinct-values</span> :cust "ptype"
  :where {..})&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">;
  </span><span style="font-family:宋体;color:#5B6E6E">注意列名用</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">str</span><span style="font-family:宋体;color:#5B6E6E">类型</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.distinct("ptype")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.distinct("ptype",{name:..})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">index </span><span style="font-family:宋体">索引</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">add-index!</span> :cust </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">[:org :sex] :name "myIndex2")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">get-indexes</span> :cust)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop-index!</span> :cust [:org [:sex -1]])</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.ensureIndex(</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">{org:1,age:1})</span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.cust.dropIndexes()</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">插入文件</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-files</span> :cust)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">insert-file!</span> :cust (.getBytes
  "blah..") </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:filename "f1" :contentType
  "dir1/file1")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fetch-one-file</span> :cust </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">:where {:filename "f1"})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">destroy-file!</span> :cust {:filename
  "f1"})</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">insert-file!</span> :cust (.getBytes
  "blah.."))</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">json</span><span style="font-family:宋体">结果</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fetch-one :cust
  <span style="background:yellow">:as :json</span>)</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">map-reduce</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [fmap
  "function(o,p) {p.sum+=o.age}"</span></p>
  <p class="MsoNormal" style="text-indent:36.75pt"><span style="font-family:Consolas" lang="EN-US">freduce "function() {..}"]</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">map-reduce</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;:mr
  fmap freduce</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;:output
  :collection))</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">server-eval</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">删除库</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop-database!</span> "test1")</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">删除集合</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">drop-coll!</span> :cust)</span></p>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="99">
  <p class="MsoNormal"><span style="font-family:宋体">连接认证</span></p>
  </td>
  <td style="width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="352">
  <div style="border:solid #CCCCCC 1.0pt;padding:5.0pt 8.0pt 5.0pt 8.0pt">
  <p class="MsoNormal" style="border:none;padding:0cm"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">authenticate</span>
  conn "admin" "password")</span></p>
  </div>
  </td>
  <td style="width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">查询条件操作符（摘自某</span><span style="font-family:Consolas" lang="EN-US">pdf</span><span style="font-family:
宋体">）：</span></p>

<table class="MsoNormalTable" style="width:550.2pt;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="734">
 <tbody><tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">操作符</span></b></p>
  </td>
  <td style="width:181.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
  <td style="width:296.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$lt, $lte</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$gt, $gte</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;, &lt;=,
  &gt;, &gt;=</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find({
  “a" : { $gt: value } } ); </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$all</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">数组中的元素是否完全匹配</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { a: { $all: [ 2, 3 ] } } ); </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$exists </span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">可选：</span><span style="font-family:Consolas" lang="EN-US">true</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">false</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { a : { $exists : true } } );</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$mod</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">取模：</span><span style="font-family:Consolas" lang="EN-US">a % 10 == 1 </span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { a : { $mod : [ 10 , 1 ] } } );</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$ne</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">取反：即</span><span style="font-family:Consolas" lang="EN-US">not equals</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { x : { $ne : 3 } } ); </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$in</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">类似于</span><span style="font-family:Consolas" lang="EN-US">SQL</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">IN</span><span style="font-family:
  宋体">操作</span></p>
  <p class="MsoNormal"><span style="font-family:宋体;background:yellow">注意：</span><span style="font-family:宋体">判断类型为数组的字段是否含某个值也可以用</span><span style="font-family:Consolas" lang="EN-US">$in</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find({j:{$in:
  [2,4,6]}}); </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db["en-apply"].find({pnids:{$in:
  ["…"]}})</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$nin</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$in</span><span style="font-family:宋体">的反操作</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">即</span><span style="font-family:Consolas" lang="EN-US">SQL</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">
  NOT IN&nbsp; </span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find({j:{$nin:
  [2,4,6]}});</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$nor</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$or</span><span style="font-family:宋体">的反操作，即不匹配</span><span style="font-family:
  Consolas" lang="EN-US">(a</span><span style="font-family:宋体">或</span><span style="font-family:Consolas" lang="EN-US">b)</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { name : "bob" , $nor : [ { a : 1 } , { b : 2 } ] } ) </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$or</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Or</span><span style="font-family:宋体">子句，注意</span><span style="font-family:Consolas" lang="EN-US">$or</span><span style="font-family:宋体">不能嵌套使用</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { name : "bob" , $or : [ { a : 1 } , { b : 2 } ] } ) </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$size</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">匹配数组长度</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { a : { $size: 1 } } );</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:71.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="96">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">$type</span></p>
  </td>
  <td style="width:181.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="242">
  <p class="MsoNormal"><span style="font-family:宋体">匹配子键的数据类型，详情请看</span></p>
  </td>
  <td style="width:296.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="396">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">db.things.find(
  { a : { $type : 2 } } ); </span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.6.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">group</span></p>

<p class="MsoNormal"><span style="font-family:宋体">来自</span><span style="font-family:Consolas" lang="EN-US">congomongo</span><span style="font-family:宋体">自带测试样例，需要</span><span style="font-family:Consolas" lang="EN-US">js</span><span style="font-family:宋体">函数：</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">(deftest
test-group-command</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;
(with-test-mongo</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(drop-coll! :test-group )</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "<span style="background:silver">bananas</span>"
:<span style="background:aqua">count </span>1})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "<span style="background:silver">bananas</span>"
:<span style="background:aqua">count </span>2})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "plantains" :<span style="background:
aqua">count </span>3})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "plantains" :<span style="background:
aqua">count </span>2})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "pineapples" :<span style="background:
aqua">count </span>4})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(insert! :test-group {:fruit "pineapples" :<span style="background:
aqua">count </span>2})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
(let [<b><u>reduce-count-fn</u></b> "function(obj,prev){prev.<span style="background:lime">count+</span>=obj.<span style="background:aqua">count</span>;}"</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
bananas-count (<span style="background:yellow">group</span> :test-group </span></p>

<p class="MsoNormal" style="margin-left:147.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">:key [:fruit ] </span></p>

<p class="MsoNormal" style="margin-left:147.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">:initial {<span style="background:lime">:count</span> 0} </span></p>

<p class="MsoNormal" style="margin-left:147.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">:reducefn <b><u>reduce-count-fn</u></b></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 :where
{:fruit "<span style="background:silver">bananas</span>"})</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
all-count-keyf (<span style="background:yellow">group</span> :test-group </span></p>

<p class="MsoNormal" style="margin-left:147.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">:keyfn "function(obj){return
{<b><u>'category'</u></b>:obj.fruit};}"</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 :initial
{<span style="background:aqua">:count</span> 0} </span></p>

<p class="MsoNormal" style="margin-left:147.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">:reducefn
reduce-count-fn</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 :finalizefn
"function(obj) {</span></p>

<p class="MsoNormal" style="margin-left:168.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">return
{'items':obj.count,'fruit':obj.<b><u>category</u></b>};}")]</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(is (= bananas-count</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[{:fruit "bananas", :count 3.0}]))</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(is (= all-count-keyf</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[{:items 3.0, :fruit "bananas"} {:items 5.0, :fruit
"plantains"} </span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">{:items 6.0, :fruit
"pineapples"}])))))</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:21.0pt"><span style="font-size:10.0pt;font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">group</span><span style="font-family:宋体">的结果中，所有整数（包括</span><span style="font-family:
Consolas" lang="EN-US">key</span><span style="font-family:宋体">）都会被转为</span><span style="font-family:Consolas" lang="EN-US">64</span><span style="font-family:宋体">位</span><span style="font-family:Consolas" lang="EN-US">float</span><span style="font-family:
宋体">。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">字段带“</span><span style="font-family:Consolas" lang="EN-US">-</span><span style="font-family:宋体">”的必须如下使用：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">(with-mdb2
"esp" </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(group :pn-train </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
:key [:type]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
:initial {:count 0 :exam-score 0}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
:reducefn (format "function(obj,prev){prev.count++; </span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:157.5pt;text-autospace:none" align="left"><span style="font-family:
Consolas" lang="EN-US">prev[<span style="background:yellow">'exam-score'</span>] += obj[<span style="background:yellow">'exam-score'</span>] }"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;
(mdb-sum :pn-train [:type :admin] [:train-hour :exam-score])</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-autospace:none" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; )</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">10.6.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">object-id</span></p>

<p class="MsoNormal"><span style="font-family:宋体">每条记录都有内置</span><span style="font-family:Consolas" lang="EN-US">mongodb</span><span style="font-family:
宋体">自动生成</span><span style="font-family:宋体">的</span><span style="font-family:
Consolas"> </span><span style="font-family:Consolas" lang="EN-US">:_id </span><span style="font-family:宋体">字段，用户可以自行制定但需要自行保证唯一性。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">objectId
&lt;--&gt; </span><span style="font-family:宋体">字符串：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(-&gt; p :id str)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(object-id "</span><span style="font-size:10.0pt;font-family:Consolas;color:#408080" lang="EN-US">4de706a71da3906ba3240b83</span><span style="font-family:Consolas" lang="EN-US">") ; </span><span style="font-family:宋体">必须是</span><span style="font-family:Consolas" lang="EN-US">24</span><span style="font-family:宋体">位</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">可以通过</span><span style="font-family:Consolas" lang="EN-US">_id</span><span style="font-family:宋体">来获取插入时间，如：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&gt;
db.org.findOne().<span style="background:yellow">_id.getTimestamp()</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ISODate("2012-04-15T15:30:12Z")</span></p>

<h1><a name="_Toc281924087"></a><a name="_Toc339573144"><span style="font-family:Consolas" lang="EN-US">11<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure-contrib</span></u></a></h1>

<p class="MsoNormal"><a href="http://clojure.github.com/clojure-contrib/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://clojure.github.com/<span style="background:yellow">clojure-contrib</span>/</span></a></p>

<p class="MsoNormal"><a href="http://clojuredocs.org/clojure_contrib" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://clojuredocs.org/<b><span style="background:yellow">clojure_contrib</span></b></span></a></p>

<h1><a name="_Toc339573145"><span style="font-family:Consolas" lang="EN-US">12<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Unit Test</span></u></a></h1>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不要用</span><span style="font-family:Consolas" lang="EN-US">UnitTest</span><span style="font-family:宋体">代替思考，</span><span style="font-family:Consolas" lang="EN-US">bug</span><span style="font-family:
宋体">会绕过你的</span><span style="font-family:Consolas" lang="EN-US">unit test</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">不要过度依赖</span><span style="font-family:Consolas" lang="EN-US">unit test</span><span style="font-family:宋体">作为问题的一个</span><span style="font-family:Consolas" lang="EN-US">easy</span><span style="font-family:
宋体">解决方案，寻求真正</span><span style="font-family:Consolas" lang="EN-US">simple</span><span style="font-family:宋体">的解决思路和方案。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(use '<span style="background:yellow">clojure.contrib.test-is</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">deftest</span> f1 [] (<span style="background:yellow">is</span>
(= 10 (+ 7 3))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(deftest f2 []
(is (= 10 (+ 7 13))))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(deftest f3 []
</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (<span style="background:yellow">are</span> (= <span style="background:yellow">_1</span>
<span style="background:yellow">_2</span>)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2 (+ 1 1)</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
4 (* 2 2)))</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f1) ; nil</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f2) ; </span><span style="font-family:宋体">打印出错信息</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注：</span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(<span style="background:yellow">are</span>
(= _1 _2)</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">2 (+ 1 1)</span></span></p>

<p class="MsoNormal" style="margin-left:10.5pt"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">4 (* 2 2))</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:宋体;
color:black">模板会按照变量</span></span><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">_1, _2</span></span><span class="apple-style-span"><span style="font-family:宋体;color:black">展开为：</span></span></p>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(do </span></span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(<span style="background:
yellow">is</span> (= 2 (+ 1 1)))</span></span></p>

<p class="MsoNormal" style="text-indent:10.5pt"><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">(<span style="background:
yellow">is</span> (= 4 (* 2 2))))</span></span></p>

<h1><a name="_Toc339573146"><span style="font-family:Consolas" lang="EN-US">13<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">web</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">开发</span></u></h1>

<p class="MsoNormal"><span style="font-family:宋体">一些新的趋势：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">精通</span><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">，使用</span><span style="font-family:Consolas" lang="EN-US">jQuery</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">Google Closure</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Mobile First</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Html5</span><span style="font-family:宋体">应用：可离线运行</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">使用函数式编程和</span><span style="font-family:Consolas" lang="EN-US">key-value</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">n<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Server</span><span style="font-family:宋体">端</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">：函数式，</span><span style="font-family:Consolas" lang="EN-US">key-value</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">n<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">Client</span><span style="font-family:宋体">端</span><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">：函数式，</span><span style="font-family:Consolas" lang="EN-US">key-value</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">json</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">n<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">DB</span><span style="font-family:宋体">端</span><span style="font-family:Consolas" lang="EN-US">NoSQL</span><span style="font-family:宋体">：函数式，</span><span style="font-family:Consolas" lang="EN-US">key-value</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573147"><span style="font-family:Consolas" lang="EN-US">13.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Ring</span></u></a></h2>

<p class="MsoNormal"><span class="apple-style-span"><span style="font-family:宋体;
color:black">类似于</span></span><span class="apple-style-span"><span style="font-family:Consolas;color:black" lang="EN-US">Python's WSGI and Ruby's Rack</span></span></p>

<p class="MsoNormal"><a href="https://github.com/mmcgrana/ring" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/mmcgrana/ring</span></a><span style="font-family:Consolas" lang="EN-US"> (</span><span style="font-family:宋体">主页</span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><a href="https://github.com/laurentpetit/ring-java-servlet" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/laurentpetit/ring-java-servlet</span></a><span style="font-family:Consolas" lang="EN-US"> (Servlet)</span></p>

<p class="MsoNormal"><a href="http://mmcgrana.github.com/2010/03/clojure-web-development-ring.html" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://mmcgrana.github.com/2010/03/clojure-web-development-ring.html</span></a><span style="font-family:Consolas" lang="EN-US"> (</span><span style="font-family:宋体">教程</span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal"><span style="font-family:宋体">步骤：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">下载项目工具</span><span style="font-family:Consolas" lang="EN-US">lein.bat (</span><a href="https://github.com/technomancy/leiningen" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/technomancy/leiningen</span></a><span style="font-family:Consolas" lang="EN-US">)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行（下载</span><span style="font-family:Consolas" lang="EN-US">jar</span><span style="font-family:宋体">包）：</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">lein self-install</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">从下载</span><span style="font-family:Consolas" lang="EN-US">Ring</span><span style="font-family:宋体">解压（版本</span><span style="font-family:Consolas" lang="EN-US">0.3.5</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">Ring</span><span style="font-family:宋体">解压后的目录下运行（下载</span><span style="font-family:Consolas" lang="EN-US">jar</span><span style="font-family:
宋体">包到</span><span style="font-family:Consolas" lang="EN-US">lib</span><span style="font-family:宋体">目录及</span><span style="font-family:Consolas" lang="EN-US">maven</span><span style="font-family:宋体">目录下）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">lein deps</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">创建应用</span><span style="font-family:Consolas" lang="EN-US">hello_world.clj</span><span style="font-family:
宋体">：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">------------------------------------</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use '<span style="background:yellow">ring.adapter.jetty</span>)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <b>app</b> [req]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; {<span style="background:yellow">:status</span>&nbsp;
200</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; <span style="background:yellow">:headers</span>
{"Content-Type" "text/html; charset=utf-8"}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; <span style="background:yellow">:body</span>&nbsp;&nbsp;&nbsp;
"Hello World from Ring (cn</span><span style="font-family:宋体">中文</span><span style="font-family:Consolas" lang="EN-US">)"})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">run-jetty</span> <b>app</b>
{:port 8080})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">------------------------------------</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">java -cp "lib/*" clojure.main
hello_world.clj</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">例子</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">wrapping.clj:</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">------------------------------------</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(use 'ring.adapter.jetty)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn <span style="background:yellow">app</span>
[req]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; {:status&nbsp; 200</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; :headers {"Content-Type"
"text/html"}</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp; :body&nbsp;&nbsp;&nbsp; "Hello
World from Ring"})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(defn wrap-upcase [app]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp; (fn [req]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (let [orig-resp (<span style="background:yellow">app</span> req)]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (assoc orig-resp
:body (.toUpperCase (:body orig-resp))))))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(def <b>upcase-app</b> (wrap-upcase app))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(run-jetty <b>upcase-app</b> {:port 8080})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">------------------------------------</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:宋体">运行：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">java -cp "lib/*" clojure.main wrapping.clj</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Request Map</span><span style="font-family:宋体">中有如下内容：</span></p>

<table class="MsoNormalTable" style="width:97.4%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="97%">
 <tbody><tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;padding:
  0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:server-port</span></p>
  </td>
  <td style="width:75.84%;border:solid windowtext 1.0pt;border-left:
  none;padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">8080</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:server-name</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"localhost"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:remote-addr</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"0:0:0:0:0:0:0:1"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:uri</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"/"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:query-string</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:scheme</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:http</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:request-method</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%"><pre style="line-height:16.8pt"><span style="font-size:10.5pt;font-family:Consolas" lang="EN-US">:get </span><span style="font-size:10.5pt">（可以是</span><span style="font-size:10.5pt;
  font-family:Consolas;color:black" lang="EN-US">:get, :head, :options, :put, :post, :delete</span><span style="font-size:10.5pt;color:black">）</span></pre></td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:content-type</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:content-length</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:character-encoding</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">nil</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:headers</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">{</span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>accept-charset</b>"
  "GBK,utf-8;q=0.7,*;q=0.3", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>accept-language</b>"
  "zh-CN,zh;q=0.8", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>accept-encoding</b>"
  "gzip,deflate,sdch", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>user-agent</b>"
  "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) ..", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>accept</b>" "application/xml,
  text/html;q=0.9,text/plain;..", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>connection</b>"
  "keep-alive", </span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">"<b>host</b>"
  "localhost:8080"</span></p>
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt" width="24%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">:body</span></p>
  </td>
  <td style="width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm" width="75%">
  <p class="MsoNormal" style="text-align:left;line-height:16.8pt" align="left"><span style="font-family:Consolas" lang="EN-US">#&lt;Input org.mortbay.jetty.HttpParser$Input@87b7b11&gt;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Response Map</span><span style="font-family:宋体">中的内容</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:status</span></p>
  </td>
  <td style="width:268.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="357">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&gt;=100</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:headers</span></p>
  </td>
  <td style="width:268.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="357">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{"Content-Type"
  "text/html; charset=utf-8"}</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:body</span></p>
  </td>
  <td style="width:268.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="357">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">String</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ISeq</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">File</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">InputStream</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573148"><span style="font-family:Consolas" lang="EN-US">13.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Compojure</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:宋体">对</span><span style="font-family:Consolas" lang="EN-US">Ring</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">DSL</span><span style="font-family:
宋体">化包装</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">13.2.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">session</span></p>

<pre style="line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">ns</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">pkg1 </span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000" lang="EN-US">:use</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">compojure</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">))</span></span></pre><pre style="line-height:12.9pt"><span style="font-size:10.5pt;font-family:
Consolas;color:black" lang="EN-US">&nbsp;</span></pre><pre style="line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000;background:yellow" lang="EN-US">defroutes</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">helloworld-routes</span></span></pre><pre style="text-indent:10.5pt;
line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000" lang="EN-US">GET</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#DD1144" lang="EN-US">"/login/:user"</span></span></pre><pre style="text-indent:21.0pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">[(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000;background:yellow" lang="EN-US">session-assoc</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:loggedin</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000" lang="EN-US">:user</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">params</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">))</span></span></pre><pre style="text-indent:21.0pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">html</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">:html</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:body</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:p</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"You are now logged in as "</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">(</span></span><span class="nf"><b><span style="font-size:
10.5pt;font-family:Consolas;color:#990000" lang="EN-US">:user</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">params</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">)]]])])</span></span></pre><pre style="text-indent:10.5pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">GET</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"/logout"</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span></pre><pre style="text-indent:21.0pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">if </span></b></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nb"><span style="font-size:10.5pt;font-family:Consolas;
color:#0086B3" lang="EN-US">contains? </span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal;background:yellow" lang="EN-US">session</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:loggedin</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">)</span></span></pre><pre style="text-indent:31.5pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">[(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000;background:yellow" lang="EN-US">session-dissoc</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:loggedin</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">)</span></span></pre><pre style="text-indent:36.75pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">html</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">:html</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:body</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:p</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"Logged out"</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">]]])]</span></span></pre><pre style="text-indent:36.75pt;
line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000" lang="EN-US">html</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:html</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:body</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">:p</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#DD1144" lang="EN-US">"You are not logged in"</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">]]])))</span></span></pre><pre style="text-indent:10.5pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">GET</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"/*"</span></span></pre><pre style="text-indent:21.0pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="k"><b><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">if </span></b></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nb"><span style="font-size:10.5pt;font-family:Consolas;
color:#0086B3" lang="EN-US">contains? </span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal;background:yellow" lang="EN-US">session</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:loggedin</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">)</span></span></pre><pre style="text-indent:36.75pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">html</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">:html</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:body</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:p</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"Welcome back "</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:b</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">:loggedin</span></b></span><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal;background:
yellow" lang="EN-US">session</span></span><span class="p"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">)]]]])</span></span></pre><pre style="text-indent:36.75pt;line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">html</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">:html</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:body</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">[</span></span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:p</span></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;color:#DD1144" lang="EN-US">"Hello World"</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">]]]))))</span></span></pre><pre style="line-height:12.9pt"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">&nbsp;</span></pre><pre style="line-height:12.9pt"><span class="p"><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000;
background:yellow" lang="EN-US">decorate</span></b></span><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">helloworld-routes</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">(</span></span><span class="nf"><b><span style="font-size:
10.5pt;font-family:Consolas;color:#990000;background:yellow" lang="EN-US">with-session</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;
color:teal" lang="EN-US">:memory</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">))</span></span></pre><pre style="line-height:12.9pt"><span style="font-size:10.5pt;font-family:
Consolas;color:black" lang="EN-US">&nbsp;</span></pre><pre style="line-height:12.9pt"><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;color:#990000;background:yellow" lang="EN-US">run-server</span></b></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">{</span></span><span class="nv"><span style="font-size:10.5pt;
font-family:Consolas;color:teal" lang="EN-US">:port</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="mi"><span style="font-size:10.5pt;font-family:Consolas;
color:#009999" lang="EN-US">8080</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">}</span></span><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US"> </span><span class="s"><span style="font-size:10.5pt;font-family:Consolas;
color:#DD1144" lang="EN-US">"/*"</span></span><span style="font-size:
10.5pt;font-family:Consolas;color:black" lang="EN-US"> <span class="p">(</span></span><span class="nf"><b><span style="font-size:10.5pt;font-family:Consolas;
color:#990000" lang="EN-US">servlet</span></b></span><span style="font-size:10.5pt;
font-family:Consolas;color:black" lang="EN-US"> </span><span class="nv"><span style="font-size:10.5pt;font-family:Consolas;color:teal" lang="EN-US">helloworld-routes</span></span><span class="p"><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">))</span></span></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573149"><span style="font-family:Consolas" lang="EN-US">13.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Conjure</span></u></a></h2>

<p class="MsoNormal"><a href="https://github.com/macourtney/Conjure" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/macourtney/Conjure</span></a></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573150"><span style="font-family:Consolas" lang="EN-US">13.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Weld</span></u></a></h2>

<p class="MsoNormal"><a href="https://github.com/mmcgrana/weld" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/mmcgrana/weld</span></a></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573151"><span style="font-family:Consolas" lang="EN-US">13.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Noir</span></u></a><span lang="EN-US"> </span></h2>

<p class="MsoNormal"><a href="http://www.webnoir.org/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">http://www.webnoir.org/</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">build on top
of Ring and Compojure</span><span style="font-family:宋体">，采用</span><span style="font-family:Consolas" lang="EN-US">hiccup</span><span style="font-family:
宋体">生成</span><span style="font-family:Consolas" lang="EN-US">html</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573152"><span style="font-family:Consolas" lang="EN-US">13.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">hiccup</span></u></a></h2>

<p class="MsoNormal"><a href="https://github.com/weavejester/hiccup" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/weavejester/hiccup</span></a></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clj-html</span><span style="font-family:宋体">的加强版，用法相同：</span><span style="font-family:
Consolas" lang="EN-US">vector</span><span style="font-family:宋体">来对应</span><span style="font-family:Consolas" lang="EN-US">tag</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:
宋体">来对应</span><span style="font-family:Consolas" lang="EN-US">tag</span><span style="font-family:宋体">的属性</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<pre><code><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">(use 'hiccup.core)</span></code></pre><pre><code><span style="font-size:10.5pt;font-family:Consolas;color:black" lang="EN-US">(html [:span {:class "foo"} "bar"])</span></code></pre>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<pre><code><span style="font-size:10.5pt;font-family:Consolas;
color:black" lang="EN-US">&lt;span class="foo"&gt;bar&lt;/span&gt;</span></code></pre>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(html [:html
[:head [:style "h1 {color:red}"]] [:body [:h1 "hello
world"]]] )</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"&lt;html&gt;&lt;head&gt;&lt;style&gt;h1
{color:red}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello world&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：用</span><span style="font-family:Consolas" lang="EN-US">#</span><span style="font-family:宋体">表示</span><span style="font-family:Consolas" lang="EN-US">id</span><span style="font-family:宋体">，用</span><span style="font-family:Consolas" lang="EN-US">.foo</span><span style="font-family:
宋体">表示</span><span style="font-family:Consolas" lang="EN-US">class</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(html
[:div#id1.cls2 "..."])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;div
class="cls2" id="id1"&gt;...&lt;/div&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：循环</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(html [:table <span style="background:yellow">(for [tr (range 3)] [:tr </span><span style="background:aqua">(<u>for [td (range 2)] [:td (str tr td)]</u>)</span><span style="background:yellow">])</span> ])</span></p>

<p class="MsoNormal"><span style="font-family:宋体">输出：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;table&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;tr&gt;&lt;td&gt;00&lt;/td&gt;&lt;td&gt;01&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;tr&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/table&gt;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">hiccup.core</span></u></b></p>

<table class="MsoNormalTable" style="width:542.75pt" border="0" cellpadding="0" width="724">
 <tbody><tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:宋体">简单</span><span style="font-family:Consolas" lang="EN-US">tags</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:br]</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;br /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:宋体">带</span><span style="font-family:Consolas" lang="EN-US">content</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">tag</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:span
  "baz"]</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;span&gt;baz&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:宋体">带</span><span style="font-family:Consolas" lang="EN-US">attr</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">tag</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:span {:id
  "foo", :class "bar"} "baz"]</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;span
  class="bar" id="foo"&gt;baz</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">id</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">class</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:span#foo.bar
  "baz"]</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;span
  class="bar" id="foo"&gt;baz</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">html</span><span style="font-family:宋体">转码</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(escape-html
  "&lt;\"foo\"&amp;\"bar\"&gt;")</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&amp;lt;&amp;quot;foo&amp;quot;&amp;amp;&amp;quot;bar&amp;quot;&amp;gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="129">
  <p class="MsoNormal"><span style="font-family:宋体">以上简写</span></p>
  </td>
  <td style="width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="314">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(h
  "&lt;\"foo\"&amp;\"bar\"&gt;")</span></p>
  </td>
  <td style="width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt" width="273">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&amp;lt;&amp;quot;foo&amp;quot;&amp;amp;&amp;quot;bar&amp;quot;&amp;gt;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">hiccup.page-helpers</span></u></b></p>

<table class="MsoNormalTable" border="0" cellpadding="0">
 <tbody><tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Doctypes: </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">html4/5,
  xhtml-strict, xhtml-transitional</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doctype
  :html4)</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;!DOCTYPE
  html PUBLIC </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"-//W3C//DTD
  HTML 4.01//EN" </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"http://www.w3.org/TR/html4/strict.dtd"&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">XHTML tag</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(xhtml-tag
  "en" "foo")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;html
  lang="en" xml:lang="en" </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">xmlns="http://www.w3.org/1999/xhtml"&gt;foo&lt;/html&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">包含</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(include-js </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"foo.js"
  "bar.js")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;script
  src="foo.js" type="text/javascript"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/script&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;script
  src="bar.js" type="text/javascript"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">CSS</span><span style="font-family:宋体">包含</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(include-js </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"foo.css"
  "bar.css")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;script
  src="foo.css" type="text/javascript"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/script&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;script src="bar.css"
  type="text/javascript"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">JavaScript</span><span style="font-family:宋体">嵌入</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(javascript-tag
  "document.write('hello world');")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;script
  type="text/javascript"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">//&lt;![CDATA[
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">document.write('hello
  world'); </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">//]]&gt;&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:宋体">超连接</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(link-to
  "http://foo.bar" "baz")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;a
  href="http://foo.bar"&gt;baz&lt;/a&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;ul&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(unordered-list
  ["foo" "bar" "baz"])</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;ul&gt;</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">&lt;li&gt;foo&lt;/li&gt;&lt;li&gt;bar&lt;/li&gt;&lt;li&gt;baz&lt;/li&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/ul&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;ol&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ordered-list
  ["foo" "bar" "baz"])</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;ol&gt;</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">&lt;li&gt;foo&lt;/li&gt;&lt;li&gt;bar&lt;/li&gt;&lt;li&gt;baz&lt;/li&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/ol&gt;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><b><u><span style="font-family:Consolas" lang="EN-US">hiccup.form-helpers</span></u></b></p>

<table class="MsoNormalTable" border="0" cellpadding="0">
 <tbody><tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;form&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(form-to </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:POST
  "/foo"] "...")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;form
  action="/foo" method="POST"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  id="_method" name="_method" </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">type="hidden" value="POST"
  /&gt;...&lt;/form&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;label&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(label :foo
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;label
  for="foo"&gt;bar&lt;/label&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;hidden&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(hidden-field
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  id="foo" name="foo" type="hidden" value="bar"
  /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;text&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(text-field
  :foo "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  id="foo" name="foo" type="text"
  value="bar" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;password&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(password-field
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  id="foo" name="foo" type="password"
  value="bar" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;checkbox&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(check-box </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo true
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  checked="checked" id="foo" name="foo"</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;type="checkbox"
  value="bar" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;radio&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(radio-button
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo true
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  checked="checked" id="foo-bar" </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">name="foo" type="radio"
  value="bar" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(select-options
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[:foo :bar
  :baz] :bar)</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option&gt;foo&lt;/option&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option
  selected="selected"&gt;bar&lt;/option&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option&gt;baz&lt;/option&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;select&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(drop-down </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo [:bar
  :baz] :baz)</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;select
  id="foo" name="foo"&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option&gt;bar&lt;/option&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;option
  selected="selected"&gt;baz&lt;/option&gt;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;/select&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;text&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(text-area </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">:foo
  "bar")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;textarea
  id="foo" name="foo"&gt;bar&lt;/textarea&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;file&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(file-upload
  :foo)</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  id="foo" name="foo" type="file" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;submit&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(submit-button</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;"submit")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  type="submit" value="submit" /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;reset&gt;</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(submit-button
  </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"reset")</span></p>
  </td>
  <td style="border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&lt;input
  type="submit" value="reset" /&gt;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573153"><span style="font-family:Consolas" lang="EN-US">13.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Enlive</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">模板引擎</span></u></h2>

<p class="MsoNormal"><a href="https://github.com/cgrand/enlive" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/cgrand/enlive</span></a></p>

<p class="MsoNormal"><a href="https://github.com/swannodette/enlive-tutorial/" target="_blank" rel="external"><span style="font-family:Consolas" lang="EN-US">https://github.com/swannodette/enlive-tutorial/</span></a></p>

<h1><a name="_Toc339573154"><span style="font-family:Consolas" lang="EN-US">14<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">网络资源</span></u></a></h1>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span class="MsoHyperlink"><span style="font-family:Wingdings;text-decoration:
none" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span></span><span class="MsoHyperlink"><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure.github.com/clojure-contrib/" target="_blank" rel="external">http://clojure.github.com/<span style="background:yellow">clojure-contrib</span>/</a></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojuredocs.org/" target="_blank" rel="external">http://clojuredocs.org/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure.org/cheatsheet" target="_blank" rel="external">http://clojure.org/cheatsheet</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Clojure 1.3 and 1.4 Cheat Sheet</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.clojure-toolbox.com/" target="_blank" rel="external">http://www.clojure-toolbox.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">常用</span><span style="font-family:Consolas" lang="EN-US">lib</span><span style="font-family:
宋体">分类列表</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure-examples.appspot.com/" target="_blank" rel="external">http://clojure-examples.appspot.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://java.ociweb.com/mark/clojure/article.html" target="_blank" rel="external">http://java.ociweb.com/mark/clojure/article.html</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">在线教程：</span><span style="font-family:Consolas" lang="EN-US">Clojure - Functional Programming for
the JVM</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure-euler.wikispaces.com/" target="_blank" rel="external">http://clojure-euler.wikispaces.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">ProjectEuler</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">解答</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://en.wikibooks.org/wiki/Clojure_Programming/Examples/Cookbook" target="_blank" rel="external">http://en.wikibooks.org/wiki/Clojure_Programming/Examples/Cookbook</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Clojure Programming/Examples/Cookbook</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.gettingclojure.com/cookbook:clojure-cookbook" target="_blank" rel="external">http://www.gettingclojure.com/cookbook:clojure-cookbook</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Clojure cookbook</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://alexott.net/en/clojure/video.html" target="_blank" rel="external">http://alexott.net/en/clojure/video.html</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Video lectures &amp; presentations about Clojure</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://langref.org/" target="_blank" rel="external">http://langref.org/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">几个语言的常用功能代码对比</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojars.org/" target="_blank" rel="external">http://clojars.org/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的库</span><span style="font-family:Consolas" lang="EN-US">repo</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/" target="_blank" rel="external">http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/</a>
</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/" target="_blank" rel="external"><span style="color:windowtext;text-decoration:none">Clojure Web Infrastructure</span></a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://thegeektalk.com/" target="_blank" rel="external">http://thegeektalk.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">Geek Talks</span><span style="font-family:宋体">，使用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">、</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">geek</span><span style="font-family:宋体">挺多</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://nakkaya.com/" target="_blank" rel="external">http://nakkaya.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">个人</span><span style="font-family:Consolas" lang="EN-US">blog</span><span style="font-family:
宋体">，使用</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">处理摄像头、图像等：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US"><a href="http://nakkaya.com/2010/01/12/fun-with-clojure-opencv-and-face-detection/" target="_blank" rel="external">http://nakkaya.com/2010/01/12/fun-with-clojure-opencv-and-face-detection/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US"><a href="http://nakkaya.com/2010/01/19/clojure-opencv-detecting-movement/" target="_blank" rel="external">http://nakkaya.com/2010/01/19/clojure-opencv-detecting-movement/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">下载</span><span style="font-family:Consolas" lang="EN-US">OpenCV</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">jni</span><span style="font-family:宋体">接口库（可能需翻墙）：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US"><a href="http://ubaa.net/shared/processing/opencv/" target="_blank" rel="external">http://ubaa.net/shared/processing/opencv/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.ic.unicamp.br/%7Emeidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html" target="_blank" rel="external">http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">99</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">练习题，对应的</span><span style="font-family:Consolas" lang="EN-US">Scala</span><span style="font-family:宋体">网站</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US"><a href="http://aperiodic.net/phil/scala/s-99/" target="_blank" rel="external">http://aperiodic.net/phil/scala/s-99/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://catb.org/%7Eesr/faqs/hacker-howto.html" target="_blank" rel="external">http://catb.org/~esr/faqs/hacker-howto.html</a></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体">《</span><span style="font-family:Consolas" lang="EN-US">How To Become A Hacker</span><span style="font-family:宋体">》</span><span style="font-family:Consolas" lang="EN-US">
by <i><u>Eric Steven Raymond</u></i></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span class="MsoHyperlink"><span style="font-family:Wingdings;text-decoration:
none" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span></span><span class="MsoHyperlink"><span style="font-family:Consolas" lang="EN-US"><a href="http://incanter.org/" target="_blank" rel="external">http://incanter.org/</a></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">数值统计算法及图形展示。相关：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span class="MsoHyperlink"><span style="font-family:Wingdings;text-decoration:
none" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span></span><span class="MsoHyperlink"><span style="font-family:Consolas" lang="EN-US"><a href="http://planet.clojure.in/" target="_blank" rel="external">http://planet.clojure.in/</a></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的一个</span><span style="font-family:Consolas" lang="EN-US">blog</span><span style="font-family:
宋体">集合</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US"><a href="http://clojure-libraries.appspot.com/" target="_blank" rel="external">http://clojure-libraries.appspot.com/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:宋体">收集</span><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:
宋体">的各种</span><span style="font-family:Consolas" lang="EN-US">library</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">repl</span><span style="font-family:宋体">中自动</span><span style="font-family:Consolas" lang="EN-US">reload</span><span style="font-family:宋体">所有</span><span style="font-family:Consolas" lang="EN-US">ns</span><span style="font-family:宋体">的工具</span><span style="font-family:Consolas" lang="EN-US">clojure.tools.namespace</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US"><a href="https://github.com/clojure/tools.namespace" target="_blank" rel="external">https://github.com/clojure/tools.namespace</a></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573155"></a><a name="_Toc281924088"></a><a name="_Toc281658916"></a><a name="_Toc281556422"></a><a name="_Toc281556322"></a><a name="_Toc281556218"></a><a name="_Toc281556016"></a><a name="_Toc281555859"><span style="font-family:Consolas" lang="EN-US">15<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">临时</span></u></a></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573156"><span style="font-family:Consolas" lang="EN-US">15.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">InfoQ</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">采访</span></u><u><span style="font-family:Consolas" lang="EN-US">Clojure</span></u><u><span style="font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;">实用</span></u></h2>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">InfoQ</span></b><span style="font-family:宋体;color:black">：你能简要介绍一下你们的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;color:black">代码是如何组织的吗？比如，如何使用命名空间、</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">muti-methods</span><span style="font-family:宋体;color:black">（多重分派）、</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">macros</span><span style="font-family:宋体;color:black">（宏）等等。</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt;
background:#FAFAFA" align="left"><span style="font-family:宋体;color:#333333">过往函数式编程的经验使我们能够将代码组织成非常</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">“</span><span style="font-family:宋体;color:#333333">函数</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">”</span><span style="font-family:宋体;color:#333333">的形式。我们使用命名空间的方式与在其它语言中使用命名空间的方式相同。我们<b><u>尽量少用</u></b></span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> macros</span></u></b><b><u><span style="font-family:宋体;color:#333333">和</span></u></b><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">muti-methods</span></u></b><span style="font-family:宋体;color:#333333">，就算用也只是在适合的地方使用。人们对</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Lisp</span><span style="font-family:宋体;color:#333333">的所有印象就是其有大量的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">macros</span><span style="font-family:宋体;color:#333333">和</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">meta-sauce</span><span style="font-family:
宋体;color:#333333">。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333"> </span><span style="font-family:宋体;color:#333333">尽管从某些方面来说这是对的，但是用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">FP</span><span style="font-family:宋体;color:#333333">基础构建块，你能走得更远；如</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">lambdas</span><span style="font-family:宋体;color:#333333">、</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">HOFs</span><span style="font-family:宋体;
color:#333333">、</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333" lang="EN-US">currying</span><span style="font-family:宋体;color:#333333">、</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">partial
application</span><span style="font-family:宋体;color:#333333">等等。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">我不能算是精通</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monad</span><span style="font-family:宋体;color:#333333">，但是我觉得</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">mondads</span><span style="font-family:宋体;color:#333333">和</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">multi-methods</span><span style="font-family:
宋体;color:#333333">及</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333" lang="EN-US">macros</span><span style="font-family:宋体;color:#333333">都差不多。这些抽象概念不但功能强大，而且也很酷，吸引了不少眼球。当这些抽象概念有助于简化开发时，我就会设法使用这些工具。<b><u>但是这要求思维缜密</u></b>，使用原始的函数编程方式及数据结构你也能做得很好。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">最后谈一下</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">中的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monads</span><span style="font-family:宋体;color:#333333">，有些人认为</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monads</span><span style="font-family:宋体;color:#333333">是用于状态的，可是</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">已经有了许多有效方法来处理状态，为什么还要用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> monads</span><span style="font-family:宋体;color:#333333">。我们没有使用过</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">state monad</span><span style="font-family:宋体;color:#333333">，但是用过许多其他很有用的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monads</span><span style="font-family:宋体;color:#333333">。我很欣赏</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Brian Beckman</span><span style="font-family:宋体;color:#333333">对</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monads</span><span style="font-family:宋体;
color:#333333">的描述：他们<b><u>只是伪装的函数合成物而已</u></b>。使用这一概念的最大好处是，能够安全构造出中间可能失败或碰到空值的多阶段计算。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">虽然</span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Destructuring
bind</span></u></b><span style="font-family:宋体;color:#333333">看起来并不像</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">macros</span><span style="font-family:宋体;color:#333333">和</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monads</span><span style="font-family:宋体;
color:#333333">那样引人注目，但在实践中它实际上是一个非常强大的抽象概念。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Rich</span><span style="font-family:宋体;color:#333333">选择从模式匹配中解耦</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> destructuring bind</span><span style="font-family:宋体;color:#333333">的方法非常聪明。我相信很快在</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">里就会有</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">ML</span><span style="font-family:宋体;color:#333333">风格的模式匹配，这一切正在实现中。</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">InfoQ</span></b><span style="font-family:宋体;color:black">：你提到过用于将数据格式输入到</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;color:black">数据结构的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure reader</span><span style="font-family:宋体;color:black">：你在使用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Reader macros</span><span style="font-family:宋体;color:black">吗？</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt;
background:#FAFAFA" align="left"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">没有</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">reader macros</span><span style="font-family:宋体;color:#333333">，我们也压根不需要。<b><u>要读写</u></b></span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span></u></b><b><u><span style="font-family:宋体;color:#333333">数据结构，我们只需使用</span></u></b><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">print-dup</span></u></b><b><u><span style="font-family:宋体;color:#333333">语句即可</span></u></b><span style="font-family:
宋体;color:#333333">，它可以让我们定义</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333" lang="EN-US">multimethods</span><span style="font-family:宋体;color:#333333">来</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333"> </span><span style="font-family:宋体;color:#333333">分派</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">printers</span><span style="font-family:宋体;color:#333333">。只有在你需要读写没有内建的类型时，才真正需要实现</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Printer</span><span style="font-family:宋体;color:#333333">。例如，我们有一个针对</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">joda-time</span><span style="font-family:宋体;color:#333333">日期的特殊</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> printer</span><span style="font-family:宋体;color:#333333">，那么我们也将以一种特殊的方式将他们读回。</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">InfoQ</span></b><span style="font-family:宋体;color:black">：你提到过编写</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;color:black">数据结构</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">——</span><span style="font-family:宋体;color:black">你是用其来序列化传输、存储或其它用途的数据吗？</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt;
background:#FAFAFA" align="left"><span style="font-family:宋体;color:#333333">我们<b><u>将</u></b></span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span></u></b><b><u><span style="font-family:宋体;color:#333333">数据结构用作通信和存储的中间表示</span></u></b><span style="font-family:宋体;color:#333333">。例如，我们所有数据转换工作的输出都是</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">数据结构形式，这种中间表示遍布于我们所有</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333"> </span><span style="font-family:宋体;color:#333333">的</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Hadoop</span><span style="font-family:宋体;
color:#333333">工作中。这是我们置于</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:#333333" lang="EN-US">Cascading</span><span style="font-family:宋体;color:#333333">和</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Haooop</span><span style="font-family:宋体;color:#333333">之上的那一层东西的关键，可以让我们免于处理</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Hadoop</span><span style="font-family:宋体;color:#333333">输入格式。</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">InfoQ</span></b><span style="font-family:宋体;color:black">：你们有什么想加到</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;color:black">或</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;
color:black">生态系统中的东西么（类库、工具</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;
color:black" lang="EN-US">……</span><span style="font-family:宋体;color:black">）？</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt;
background:#FAFAFA" align="left"><span style="font-family:宋体;color:#333333">有人提议<b><u>加个高质量的</u></b></span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">destructuring</span></u></b><b><u><span style="font-family:宋体;color:#333333">模式匹配工具</span></u></b><span style="font-family:宋体;color:#333333">，这个东西挺有用。但我对局部改进更感兴趣。我们没有用模式匹配，而且</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">有许多很好的抽象概念，因而并不会缺失太多模式匹配，但是我认为它还是让很多地方的代码更加整洁了。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">如果</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Rich</span><span style="font-family:宋体;color:#333333">开放该</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">reader</span><span style="font-family:宋体;color:#333333">，我想一定很酷，或许这将帮助为模式匹配和</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">monad</span><span style="font-family:宋体;color:#333333">实现创建良好的语法。其次，</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">是我第一次使用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Lisp</span><span style="font-family:宋体;color:#333333">，因此我并没有使用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">reader macros</span><span style="font-family:宋体;color:#333333">的经验，因此，在这方面我并不在行。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">如果</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Rich</span><span style="font-family:宋体;color:#333333">不保留竖线也挺好，这样我们可以将它作为我们核心</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">DSL</span><span style="font-family:宋体;color:#333333">的一部分，用来作为条件概率记号。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> :-)</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">InfoQ</span></b><span style="font-family:宋体;color:black">：对于你所使用的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">Clojure</span><span style="font-family:宋体;color:black">类库，你有什么建议？</span></p>

<p class="MsoNormal" style="text-align:left;line-height:12.75pt;
background:#FAFAFA" align="left"><span style="font-family:宋体;color:#333333">使用</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">的第一个建议是：</span><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure-core </span></u></b><b><u><span style="font-family:宋体;color:#333333">和</span></u></b><b><u><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"> Clojure-contrib</span></u></b><b><u><span style="font-family:宋体;color:#333333">都很小，因此最好通读全部代码</span></u></b><span style="font-family:宋体;color:#333333">。从中你将发现非常好的东西。留意所有神奇的数据结构及数据结构处理函数。例</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333"> </span><span style="font-family:宋体;color:#333333">如，</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">有一个友好的</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Set</span><span style="font-family:宋体;color:#333333">及</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Set</span><span style="font-family:宋体;
color:#333333">操作实现，以及一些准关系代数实现。</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">我把</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">看作是一种面向函数编程的数据结构。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
Clojure</span><span style="font-family:宋体;color:#333333">拥有一套神奇的数据结构。此外，所有这些数据结构都有书面陈述，因此</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">reader</span><span style="font-family:宋体;color:#333333">和</span><span style="font-family:
&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">destructuring</span><span style="font-family:
宋体;color:#333333">都很自然。所有这些结合在一起让人非常愉快。</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">&nbsp;</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US"><br>
<br>
</span><span style="font-family:宋体;color:#333333">传承自</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">ML</span><span style="font-family:宋体;color:#333333">的函数语言中，函数是类型签名。而在</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Clojure</span><span style="font-family:宋体;color:#333333">中，函数是数据结构拓扑签名。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573157"><span style="font-family:Consolas" lang="EN-US">15.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Lisp</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">用户的问题</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.lambdassociates.org/blog/bipolar.htm" target="_blank" rel="external">http://www.lambdassociates.org/blog/bipolar.htm</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">进行</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">相关编程</span><span style="font-family:Consolas" lang="EN-US">20</span><span style="font-family:宋体">年，并参看了</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">程序员在</span><span style="font-family:Consolas" lang="EN-US">Usenet</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">blog</span><span style="font-family:宋体">上的诸多发言，我常想获知是否存在形如人种特征的某种“</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">特征”。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">经过思量，我觉得</span><span style="font-family:Consolas" lang="EN-US">Lisper</span><span style="font-family:
宋体">身上确实有一些反应</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">趣史及其优缺点的特征存在。</span></p>

<p class="MsoNormal"><span style="font-family:宋体">毫无疑问，本文会引发持不同意见者的恼怒和争论：</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Lisper</span></b><b><span style="font-family:宋体">的两面性</span></b></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">每
位大学老师在教学生涯中都带毕业过数百数千名学生，大部分印象模糊与你见面打招呼聊半天也记不起来这是那届的大哥大姐。但有些你一定能记住：在你手下做过
项目混了脸熟的，班上特别优秀的和特别差劲的。最好的和最差的都能印象深刻地留在脑子里，这确实挺奇妙的，这也是本文写“两面性”这个标题的原因。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">中
学生中，处于中间的，能力差的，聪明但不优秀的那些学生我另文讨论。我现在想讨论那部分聪明且成绩优异的中学生，这些娃有两特征：聪明敏感、但有点二。他
们有点二对事不严肃是因为好多事情对他们来说太过简单乏味。这些人的另一个特征是接触一项工作之初很有热情，但短时间之后便厌烦，并在事情完全完工之前撒
手不管，之后他</span><span style="font-family:Consolas" lang="EN-US">/</span><span style="font-family:宋体">她会无所事事地躺在床上弹吉它。这种人一般有人格的两面性：有时很忧郁，有时又很激昂。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">这些中学生上了大学之后，可能有两种境遇：一种是在所选专业上大有所为，证实了自己的天才；一种是发现大学和中学一样无趣，并非随处是大师以及和他一样聪明的同学。和中学不同的是，大学没人来管束，他就从此不振作了，但大学没有中学那么容易念，仅靠聪明是得不了</span><span style="font-family:Consolas" lang="EN-US">A</span><span style="font-family:宋体">的，不努力的后果是只能得</span><span style="font-family:Consolas" lang="EN-US">B+</span><span style="font-family:宋体">甚至</span><span style="font-family:Consolas" lang="EN-US">B</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">这种聪明但成绩垫底的学生在大学里比比皆是。他们如果能在最后学期呈上一份优秀的毕设还好，否则大部分教授不会给他们很好的毕业评价。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">当然这类学生是不会无所事事消停的，他们的时间基本都花在阅读和学习新东西上，因为天生聪明的脑袋瓜如饥似渴，需要不断往里塞东西。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">现在回到</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">上来，我很早就发现</span><span style="font-family:
Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">真的对这类学生很有吸引力。理解这点就能理解是些什么样思维的人对</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">文化做了贡献，也就了解了</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">和他的拥磊一样，是个聪明的失败者。</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">和聪明的两面性格者（</span><span style="font-family:Consolas" lang="EN-US">brilliant bipolar mind</span><span style="font-family:宋体">——</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">）都有独特的优点和缺点。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">们喜欢做抱负远大的事情，并认为这些事情需要巨大的资源，而资源总是不够。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">作为工具，就像是手中的杠杆，他比更低级的语言如</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">语言等更能放大使用者的构想和设计，使用</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">的人喜欢嘲笑使用其他语言的程序员。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">们热爱</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">。</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">极富魅力的独创性反映了</span><span style="font-family:
Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">的创造力。</span><span style="font-family:Consolas" lang="EN-US">Lisper</span><span style="font-family:宋体">们有很多先驱性的原创：</span><span style="font-family:Consolas" lang="EN-US">GC</span><span style="font-family:宋体">垃圾回收、</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
宋体">列表处理、</span><span style="font-family:Consolas" lang="EN-US">PC</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">Window</span><span style="font-family:宋体">等。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">们作为原创者，在拥有巨大创造力的同时也有其弱点，那就是不能把一个事做到最后完工，不能把先驱概念做到完善可用。“可抛弃的设计”一词绝对来自</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">社区的</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">。因为用</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">构建新东西很容易，所以摒弃已有系统自造轮子就成了常事。</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">年前当我需要在</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">中找一个</span><span style="font-family:Consolas" lang="EN-US">GUI</span><span style="font-family:宋体">库来用的时候，一下子发现</span><span style="font-family:
Consolas" lang="EN-US">9</span><span style="font-family:宋体">个不同的，但没有一个提供合适的文档和完善无</span><span style="font-family:Consolas" lang="EN-US">bug</span><span style="font-family:
宋体">，每个作者都有自己的实现，在他自己那里运行良好。这就是</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">的态度：在我这里没问题，我清楚这东西。这是不需要也不想要他人来协助的产品。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">C/C++</span><span style="font-family:
宋体">的方式与此大相径庭。由于做出点东西来不容易，就会敝帚自珍仔细文档化。在大型</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">项目中要依赖社区他人的帮助，要和他人协同工作。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">从雇主的角度来看，后者更有吸引力。</span><span style="font-family:Consolas" lang="EN-US">10</span><span style="font-family:宋体">人共同工作交流，有完善的文档，这比雇佣一个玩</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">的</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">黑客更好，后者走人了只能再找另一个</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">（如果有幸能找到的话），并且他一般不会同意接手别人的工作，而更愿意重头再来一套。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">们的另一方面的特点是对技巧的敏感性，他们能一针见血地看到现有事物的荒谬性，并知道该如何弄好它。而且他们也不喜欢折中方案。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">机器是这种思维的产物，他们拒绝为市场而进行妥协。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">们的最后一个特点是：在逆境中容易悲观。如果你读过大量关于</span><span style="font-family:
Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">的讨论话题（包括</span><span style="font-family:Consolas" lang="EN-US">comp.lang.lisp</span><span style="font-family:宋体">上那些说“</span><span style="font-family:Consolas" lang="EN-US">Common
Lisp Sucks</span><span style="font-family:宋体">”的话题），就会发现此言不虚。编程老鸟也对他们所钟情的</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">语言的不足之处倍感忧伤。而这些问题是可解决的（</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">方言</span><span style="font-family:Consolas" lang="EN-US">Qi</span><span style="font-family:宋体">就是一个例子），但你仅沉沦于悲观就啥也解决不了。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">佐证以上所述的最佳材料是经典文章：</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">：</span><span style="font-family:Consolas" lang="EN-US">Good News</span><span style="font-family:
宋体">，</span><span style="font-family:Consolas" lang="EN-US">Bad News</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">How
to Win Big</span><span style="font-family:宋体">。如果读了这篇文章，你就能感觉到</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:
宋体">的性格。这边文章的不同之处在于作者同时把</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">的两面都真实展现了出来。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">基本上存在</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个问题：</span><span style="font-family:Consolas" lang="EN-US">Lisper</span><span style="font-family:宋体">的问题和</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">语言的问题。</span><span style="font-family:Consolas" lang="EN-US">Lisper</span><span style="font-family:宋体">的问题就是</span><span style="font-family:Consolas" lang="EN-US">BBM</span><span style="font-family:宋体">的问题。</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">的问题是</span><span style="font-family:Consolas" lang="EN-US">Lisper</span><span style="font-family:宋体">引起的。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">问题的答案是：</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">本身没有问题，因为</span><span style="font-family:
Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">就和</span><span style="font-family:Consolas" lang="EN-US">Life</span><span style="font-family:宋体">一样，看你怎么过。</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573158"><span style="font-family:Consolas" lang="EN-US">15.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Rich Hickey</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">访谈</span></u></h2>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="http://www.simple-talk.com/opinion/geek-of-the-week/rich-hickey-geek-of-the-week/" target="_blank" rel="external">http://www.simple-talk.com/opinion/geek-of-the-week/rich-hickey-geek-of-the-week/</a></span></p>

<p class="MsoNormal" style="margin-top:6.8pt;text-align:left" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">RM: </span></b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">Rich, plenty
of people must have been tired of programming in C++/Java/C# as you did but
simply put up with it. What was the trigger to develop Clojure? Was it a matter
of waking up in the middle of the night and realising what the problem was?</span></p>

<p class="MsoNormal" style="margin-top:6.8pt;text-align:left" align="left"><b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">RH: </span></b><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333" lang="EN-US">One watershed
moment for me was when I designed and implemented a new system from scratch in
Common Lisp, which was a new language for me at the time, only to have the client
require it be rewritten in C++, with which I was quite proficient. The port to
C++ took three times as long as the original work, was much more code, and
wasn't significantly faster. I knew then that I wanted to work in a Lisp, but
realized that it had to be client-compatible. I worked on bridging Common Lisp
and Java, while doing functional-style programming for clients in C#, for a
couple of years, then bit the bullet and wrote Clojure.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">对我来说，这事的分水岭是：当时，有一个我用刚了解的</span><span style="font-family:Consolas" lang="EN-US">Common Lisp</span><span style="font-family:宋体">语言来设计和实现的新系统，由于用户的需要改用我精通的</span><span style="font-family:Consolas" lang="EN-US">C++</span><span style="font-family:
宋体">来改写，整个改写耗费了</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">倍的时间以及多得多的代码量，但性能却没有明显的提升。通过此事我就觉得必须用</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:
宋体">来干活，但我又得保证客户兼容性，很多时候这需要桥接</span><span style="font-family:Consolas" lang="EN-US">Common
Lisp</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Java</span><span style="font-family:宋体">，还需要为客户用</span><span style="font-family:Consolas" lang="EN-US">C#</span><span style="font-family:宋体">写函数式风格的代码，几年后，当我有了足够的储备，开发</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">就水到渠成了。</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span lang="EN-US"><img src="/static/images/clojure/image011.jpg" border="0" height="348" width="266"></span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">另一篇访谈：</span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.codequarterly.com/2011/rich-hickey/" target="_blank" rel="external">http://www.codequarterly.com/2011/rich-hickey/</a></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">几门语言</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: What programming languages have
you used professionally?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: Mainly C, C++, Java, C#, Common
Lisp, and Clojure.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: What is your second favorite
programming language?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: <b><u>If I had been more
satisfied with any of those, I wouldn’t have written Clojure</u></b>. If I had
to be stranded with something other than Clojure, I’d be happiest with a good
Common Lisp and its source code. If I had more free time, I’d spend it with
Haskell.</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">关于</span><span style="font-family:Consolas" lang="EN-US">Unit
test</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: You have been known to speak out
against test-driven development. Do you mind elaborating on your position?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: I never spoke out ‘against’
TDD. What I have said is, <b><u>life is short and there are only a finite
number of hours in a day. So, we have to make choices about how we spend our
time</u></b>. If we spend it writing tests, that is time we are not spending
doing something else. <b><u>Each of us needs to assess how best to spend our
time in order to maximize our results, both in quantity and quality.</u></b> If
people think that spending fifty percent of their time writing tests maximizes
their results—okay for them. I’m sure that’s not true for me—I’d rather spend
that time thinking about my problem. I’m certain that, for me, this produces
better solutions, with fewer defects, than any other use of my time. <b><u>A
bad design with a complete test suite is still a bad design</u></b>.</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">是否纯正的</span><span style="font-family:Consolas" lang="EN-US">lisp</span><span style="font-family:
宋体">？</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: What would you say to people who
claim that Clojure is not a “real Lisp”?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: Life is too short to spend time
on such people. Plenty of Lisp experts have recognized Clojure as a Lisp. I
don’t expect everyone to prefer Clojure over their favorite Lisp. <b><u>If it
wasn’t different in some ways, there’d be little reason for it to exist</u></b>.</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">减少复杂度（不可变性、语法糖）</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: Do you think Ruby or Python has
taken the ALGOL-derived syntax to the limit of its concision?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: I don’t know. <b><u>I’m more
interested in reducing complexity than I am in concision</u></b>.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: Let’s explore that a little.
There are the complexities of the problem, which are mostly language
independent, and then there are incidental complexities imposed by the language
itself. How does Clojure alleviate the last of these—the incidental
complexities?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: Reducing incidental complexity
is a primary focus of Clojure, and you could dig into how it does that in every
area. For example, <b><u>mutable state is an incidental complexity</u></b>. The
mechanics of it seem simple, or at least familiar, but the reality is quite
complex. In my opinion, it is clearly the number one problem in systems. <b><u>So,
Clojure makes immutable data the default</u></b>.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Since we were talking about <b><u>syntax</u></b>,
let’s look at classic Lisp. It seems to be the simplest of syntax, everything
is a parenthesized list of symbols, numbers, and a few other things. What could
be simpler? But in reality, it is not the simplest, since to achieve that
uniformity, there has to be substantial overloading of the meaning of lists.
They might be function calls, grouping constructs, or data literals, etc. <b><u>And
determining which requires using context, increasing the cognitive load when
scanning code to assess its meaning</u></b>. Clojure adds a couple more
composite data literals to lists, and uses them for syntax. In doing so, it
means that lists are almost always call-like things, and vectors are used for
grouping, and maps have their own literals. <b><u>Moving from one data
structure to three reduces the cognitive load substantially</u></b>.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">As programmers we’ve become quite
familiar with many incidental complexities, but that doesn’t make them less
complex, it just makes us more adept at overcoming them. But shouldn’t we be
doing something more useful?</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">Reuse</span><span style="font-family:宋体">和面向对象</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Fogus: So once incidental complexities
have been reduced, how can Clojure help solve the problem at hand? For example,
the idealized object-oriented paradigm is meant to foster reuse, but Clojure is
not classically object-oriented—how can we structure our code for reuse?</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Hickey: I would argue about OO and
reuse, but certainly, being able to reuse things makes the problem at hand
simpler, as you are not reinventing wheels instead of building cars. <b><u>And
Clojure being on the JVM makes a lot of wheels—libraries—available</u></b>.
What makes a library reusable? It should do one or a few things well, be
relatively self-sufficient, and make few demands on client code. None of that
falls out of OO, and not all Java libraries meet this criteria, but many do.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><b><u><span style="font-family:Consolas" lang="EN-US">When we drop down to the algorithm
level, I think OO can seriously thwart</span></u></b><b><u><span style="font-family:宋体">（阻碍）</span></u></b><b><u><span style="font-family:Consolas" lang="EN-US"> reuse</span></u></b><span style="font-family:Consolas" lang="EN-US">. In particular, the use of objects to represent
simple informational data is almost criminal in its generation of
per-piece-of-information micro-languages, i.e. the class methods, versus far
more powerful, declarative, and generic methods like relational algebra.
Inventing a class with its own interface to hold a piece of information is like
inventing a new language to write every short story. This is anti-reuse, and, I
think, results in an explosion of code in typical OO applications. Clojure
eschews this and instead advocates a simple associative model for information.
With it, one can write algorithms that can be reused across information types.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">This associative model is but one of
several abstractions supplied with Clojure, and these are the true
underpinnings of its approach to reuse: <b><u>functions on abstractions. Having
an open, and large, set of functions operate upon an open, and small, set of
extensible abstractions is the key to algorithmic reuse and library
interoperability</u></b>. The vast majority of Clojure functions are defined in
terms of these abstractions, and library authors design their input and output
formats in terms of them as well, realizing tremendous interoperability between
independently developed libraries. This is in stark contrast to the DOMs and
other such things you see in OO. Of course, you can do similar abstraction in
OO with interfaces, for instance, the java.util.collections, but you can just
as easily not, as in java.io.</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573159"><span style="font-family:Consolas" lang="EN-US">15.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">语言结构决定人类思维方式及行动方法</span></u></a></h2>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="http://nklein.com/2009/02/sapir-whorf-wit-programming-languages/" target="_blank" rel="external">http://nklein.com/2009/02/sapir-whorf-wit-programming-languages/</a></span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">作者对比了</span><span style="font-family:Consolas" lang="EN-US">Objective-C</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">，认为</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">为进行功能的函数化分离提供了更多的便利，使编程者更愿意进行此类重构，而</span><span style="font-family:Consolas" lang="EN-US">Objective-C/C++/Java/Perl</span><span style="font-family:宋体">的使用者维护几处相同的代码的可能性更大。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">用</span><span style="font-family:Consolas" lang="EN-US">Lisp</span><span style="font-family:宋体">构建新函数，不用为起函数名发愁，不用为参数列表太多而发愁，不用为</span><span style="font-family:Consolas" lang="EN-US">.h</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">.c</span><span style="font-family:宋体">中重复定义而发愁，不用为区分函数和方法而发愁，不用为返回多个值发愁。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573160"><span style="font-family:Consolas" lang="EN-US">15.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">The Joy of
Clojure</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">笔记</span></u></h2>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">：</span><span style="font-family:Consolas" lang="EN-US">beautiful and
practical design principles</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">这本书的英文写得比大部分英文技术书要文艺。</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573161"><span style="font-family:Consolas" lang="EN-US">15.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">On Lisp</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">笔记</span></u></h2>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Lisp-1</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">Lisp-2</span><span style="font-family:宋体">的区别：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left;
text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Lisp-1</span><span style="font-family:宋体">的变量和函数名在同一个空间</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left;
text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Lisp-2</span><span style="font-family:宋体">的变量和函数名在</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">个空间，可以同时有一个变量</span><span style="font-family:
Consolas" lang="EN-US">f</span><span style="font-family:宋体">和一个函数</span><span style="font-family:Consolas" lang="EN-US">f</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">和</span><span style="font-family:Consolas" lang="EN-US">Scheme</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">Lisp-1</span><span style="font-family:宋体">，</span><span style="font-family:Consolas" lang="EN-US">CLisp</span><span style="font-family:宋体">是</span><span style="font-family:Consolas" lang="EN-US">Lisp-2</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573162"><span style="font-family:Consolas" lang="EN-US">15.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure on
Heroku</span></u></a></h2>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="http://blog.heroku.com/archives/2011/7/5/clojure_on_heroku/" target="_blank" rel="external">http://blog.heroku.com/archives/2011/7/5/clojure_on_heroku/</a></span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573163"><span style="font-family:Consolas" lang="EN-US">15.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure 1.3
changelog</span></u></a></h2>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="https://github.com/clojure/clojure/blob/1.3.x/changes.txt" target="_blank" rel="external">https://github.com/clojure/clojure/blob/1.3.x/changes.txt</a></span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:宋体">要点：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">Clojure1.2</span><span style="font-family:宋体">编译出来的</span><span style="font-family:Consolas" lang="EN-US">.class</span><span style="font-family:
宋体">不能用</span><span style="font-family:Consolas" lang="EN-US">Clojure1.3</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">jar</span><span style="font-family:宋体">来执行</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">clojure.set, clojure.xml, clojure.zip </span><span style="font-family:宋体">需要手动引入才能用</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">replicate</span><span style="font-family:宋体">函数和</span><span style="font-family:Consolas" lang="EN-US">repeat</span><span style="font-family:
宋体">重复，被去除</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">增加</span><span style="font-family:Consolas" lang="EN-US">clojure.data/diff</span><span style="font-family:宋体">，比较两个</span><span style="font-family:Consolas" lang="EN-US">map</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(use 'clojure.data)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(diff {:a 10 :b 20} {:b 20 :c 30}) ; ({:a
10} {:c 30} {:b 20})</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:宋体">得到</span><span style="font-family:Consolas" lang="EN-US">[<u>things-only-in-param1</u>
&nbsp;<u>things-only-in-param2</u> &nbsp;<u>things-in-both</u>]</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">增加</span><span style="font-family:Consolas" lang="EN-US">every-pred</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">some-fn</span><span style="font-family:宋体">函数</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">((every-pred even?) 2 4 6) ; true</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">((some-fn even?) 2 4 5)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">增加</span><span style="font-family:Consolas" lang="EN-US">realized?</span><span style="font-family:宋体">函数，判断是否已经由一个</span><span style="font-family:
Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">delay</span><span style="font-family:宋体">的变量被真正生成了</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(def r (range 10)) ; </span><span style="font-family:宋体">仅定义，</span><span style="font-family:Consolas" lang="EN-US">lazy</span><span style="font-family:宋体">，尚未真正生成</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(realized? r) ; <span style="background:
yellow">false</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(count r) ; </span><span style="font-family:宋体">随便用一下，在此过程中被真正生成了</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(realized? r) ; <span style="background:
yellow">true</span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">增加</span><span style="font-family:Consolas" lang="EN-US">with-redefs-fn
</span><span style="font-family:宋体">和</span><span style="font-family:Consolas">
<span lang="EN-US">with-redefs </span></span><span style="font-family:宋体">临时改变函数定义</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(println nil?) ; #&lt;core$nil_QMARK_
clojure.core$nil_QMARK_@7b283052&gt;</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(with-redefs [nil? "hello"]
(println nil?)) ; "hello"</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:宋体">增加</span><span style="font-family:Consolas" lang="EN-US">find-keyword</span><span style="font-family:宋体">看函数名和</span><span style="font-family:Consolas" lang="EN-US">namespace</span><span style="font-family:宋体">是否已经被用了</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find-keyword map)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-align:left;
text-indent:-21.0pt" align="left"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span><span style="font-family:Consolas" lang="EN-US">clojure-contrib.jar</span><span style="font-family:
宋体">已经被分成小块</span><span style="font-family:Consolas" lang="EN-US">module</span><span style="font-family:宋体">，不再打包发布，需要的各自下载</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573164"><span style="font-family:Consolas" lang="EN-US">15.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure 1.4
changelog</span></u></a></h2>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="https://github.com/clojure/clojure/blob/master/changes.md" target="_blank" rel="external">https://github.com/clojure/clojure/blob/master/changes.md</a></span></p>

<p class="MsoNormal"><span style="font-family:Consolas;color:#333333" lang="EN-US">&nbsp;</span><span style="font-family:Consolas" lang="EN-US">1 Deprecated and Removed Features</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
1.1 Fields that Start With a Dash Can No Longer Be Accessed Using Dot Syntax</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;2
New/Improved Features</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">2.1 Reader Literals</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体">例如：</span><span style="font-family:Consolas"> <span lang="EN-US"> (type <span style="background:yellow">#uuid "1-1-1-1-1"</span>)
; java.util.UUID</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (type
<span style="background:yellow">#inst "2010-02-13T23:30:00.077"</span>)
; java.util.Date</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.2 clojure.core/mapv </span><span style="font-family:宋体">（直接返回</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.3 clojure.core/filterv&nbsp; </span><span style="font-family:宋体">（直接返回</span><span style="font-family:Consolas" lang="EN-US">vector</span><span style="font-family:
宋体">）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.4 clojure.core/ex-info and clojure.core/ex-data</span><span style="font-family:
宋体">（例如：</span><u><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ex-data</span> (<span style="background:yellow">ex-info</span>
"hi{1 10}))</span></u><span style="font-family:宋体">）</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">2.5 clojure.core/reduce-kv </span><span style="font-family:宋体">（方便处理</span><span style="font-family:Consolas" lang="EN-US">map</span><span style="font-family:宋体">）</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:
宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">reduce-kv</span> (fn [<span style="background:yellow">e
k v</span>] (+ e k v)) 100 {1 10 2 20 3 30}) // 166</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:
宋体">当于：</span><span style="font-family:Consolas" lang="EN-US">(reduce (fn [e [k
v]] (+ e k v)) 100 {1 10 2 20 3 30})</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.6 clojure.core/contains? Improved</span><span style="font-family:宋体">（好像增加对</span><span style="font-family:Consolas" lang="EN-US">java.util.Set</span><span style="font-family:宋体">的支持）</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.7 clojure.core/min and clojure.core/max prefer NaN</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.8 clojure.java.io/as-file and clojure.java.io/as-url Handle URL-Escaping
Better</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.9 New Dot Syntax for Record and Type Field Access</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.10 Record Factory Methods Available Inside defrecord</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.11 assert-args Displays Namespace and Line Number on Errors</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.12 File and Line Number Added to Earmuff Dynamic Warning</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.13 require Can Take a :refer Option</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.14 *compiler-options* Var</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.15 Improved Reporting of Invalid Characters in Unicode String Literals</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.16 clojure.core/hash No Longer Relies on .hashCode</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.17 Java 7 Documentation</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.18 loadLibrary Loads Library Using System ClassLoader</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;
2.19 Java int is boxed as java.lang.Integer</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;3
Performance Enhancements</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;4 Bug
Fixes</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573165"><span style="font-family:Consolas" lang="EN-US">16<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:Consolas" lang="EN-US">Clojure</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u><u><span style="font-family:Consolas" lang="EN-US">clisp</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">、</span></u><u><span style="font-family:Consolas" lang="EN-US">scheme</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">对照表</span></u></h1>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Lisp</span></b></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn m1
  (args) args)</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn m1
  [args] args)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[]</span><span style="font-family:宋体">使函数参数看上去一目了然</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1, 2, 3, 4]</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[1 2 3 4]</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">减少</span><span style="font-family:Consolas" lang="EN-US">,</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond ((&lt;
  x 10) "less")</span></p>
  <p class="MsoNormal" style="text-indent:36.75pt"><span style="font-family:Consolas" lang="EN-US">((&gt; x 10) "more"))</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond (&lt;
  x 10) "less"</span></p>
  <p class="MsoNormal" style="text-indent:36.75pt"><span style="font-family:Consolas" lang="EN-US">(&gt; x 10) "more")</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">减少不必要的</span><span style="font-family:Consolas" lang="EN-US">()</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">car cdr</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">first rest</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">函数名更人性化</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clisp scheme
clojure</span><span style="font-family:宋体">语法</span><span style="font-family:
宋体">对比</span><span style="font-family:Consolas" lang="EN-US"> (</span><span style="font-family:Consolas" lang="EN-US"><a href="http://hyperpolyglot.org/lisp" target="_blank" rel="external">http://hyperpolyglot.org/lisp</a></span><span style="font-family:Consolas" lang="EN-US">)</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure (2007)</span></b></p>
  </td>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">clisp (1984)</span></b></p>
  </td>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def v 10)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defvar v)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf v 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq v 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(set 'v 10)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define v
  10)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [x
  y] (+ x y))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defun f (x
  y) (+ x y))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f x
  y) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector 2 4
  6)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[2 4 6]</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector 2 4
  6)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#(2 4 6)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector 2 4
  6)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#(2 4 6)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fn [x y] (+
  x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#(+ %1 %2)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(#(+ %1 %2)
  3 4)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(lambda (x
  y) (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">funcall</span> (lambda (x y) (+ x y)) 3 4)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(lambda (x
  y) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">first </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rest</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">first car</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rest cdr</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">car</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cdr</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">true false</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">T NIL</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#t #f</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (fn [x]
  (* x x)) '(2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(mapcar </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(lambda (x) (* x x)) '(2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map (lambda
  (x) (* x x)) '(2 3))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce + 0 '(1
  2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce <span style="background:yellow">'</span>+</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;'(1
  2 3) :initial-value 0)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce + 0
  '(1 2 3))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [x 3 y
  4] (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [x 3 y
  (inc x)] (* x y)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let ((x 3)
  (y 4)) (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let<span style="background:yellow">*</span> ((x 3) (y (incf x))) </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(* x y))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let ((x 3)
  (y 4)) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(str
  "hello" "world")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(concatenate
  'string </span></p>
  <p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">"hello" "world")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth
  "hello" 4)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(aref
  "hello" 4)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(printf
  "hello")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(write-line
  "hello")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(type
  "hello")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(type-of
  "hello")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure (2007)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">clisp (1984)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond (int?
  i) 0 :else -1)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cond ((int?
  i) 0) (:else -1))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">number?
  integer? float?</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">numberp
  integerp floatp</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Math/pow
  Math/log</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">expt log</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(Integer/parseInt
  "107")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(Double/parseDouble
  "3.14")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(parse-integer
  "10")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(read-from-string
  "3.14")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(quot 10 3)
  ; 3</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(rem 10 3) ;
  </span><span style="font-family:宋体">余数</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(truncate 10
  3) ; </span><span style="font-family:宋体">整除</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(rem 10 3) ;
  </span><span style="font-family:宋体">余数</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(rand 10.0)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(int (rand
  10))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(random
  10.0)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(random 10)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">\e</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.charAt
  "hello" 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.indexOf
  "hello" "e")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.substring
  "hello" 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(count
  "hello")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.equals
  "hello" "heLLo")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.compareTo
  "ab" "ac")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(.toLowerCase
  "Hello")</span></p>
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(.trim
  " foo ")</span></span></p>
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">&nbsp;</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(str
  "hello " 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(seq (.split
  "a b"&nbsp; "[ \t]+"))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(format
  "%s %d %.1f" </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">"a" 7 3.14)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#\e</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(char
  "hello" 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(search
  "e" "hello")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(subseq
  "hello" 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(length
  "hello")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(string=
  "hello" "heLLo")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(string&gt;
  "ab" "ac")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(string-downcase
  "Hello")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(string-trim
  '(#\Space #\Tab #\NewLine) " foo ")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(concatenate
  'string </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello "
  (princ-to-string 10))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(regexp:regexp-split
  "[ \t]+" "a b")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(format nil
  "~a ~a ~,1F" </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">"a" 7 3.14)</span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure (2007)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">clisp (1984)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(concat [1
  2] [3 4])</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(append '(1
  2) '(3 4))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth '(10 20
  30) 1)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nth 1 '(10
  20 30))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(position 3
  '(5 3 7))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(wr3.clj.s/position
  3 '(5 3 7))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(last '(1 3
  5))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(first (last
  '(1 3 5)))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def a '(1 3
  5))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cons 10
  (rest a))</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">或者</span><span style="font-family:Consolas" lang="EN-US">&nbsp; (assoc [1 3 5] 0 10)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq a '(1
  3 5))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (first
  a) 10); (10 3 5)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort '(2 3
  1) '&lt;)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort &lt;
  '(2 3 1))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(find '{a 10
  b 20} 'a)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(assoc 'a
  '((a 3) (b 5)))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">('{a 10 b 20
  c 30} 'a)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(getf '(a 10
  b 20 c 30) 'a)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def
  #^{:macro true} lambda</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;#'fn)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defmacro fn
  (&amp;rest args)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;`(lambda&nbsp;
  ,@args))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(map #(* %
  %) '(1 2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(mapcar
  (lambda (x) (* x x)) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;'(1 2
  3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(filter
  #(&gt; % 2) '(1 2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(remove-if-not
  </span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(lambda (x) (&gt; x 2)) '(1 2 3))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce - 0
  '(1 2 3 4))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reduce '- '(1
  2 3 4)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">:initial-value 0)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doseq [x
  '(1 2 3)] (println x))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dolist (x
  '(1 2 3)) (print x))</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(nth
  [1 2 3] 0)</span></span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(aref #(1 2
  3) 0)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(replace
  {2 20} [1 2 3])</span></span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq v #(1
  2 3))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (aref
  v 1) 20)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(seq
  [1 2 3])</span></span></p>
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(vec
  '(1 2 3))</span></span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(coerce #(1
  2 3) 'list)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(coerce '(1
  2 3) 'vector)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">(seq?
  '(1 2 3))</span></span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(typep '(1 2
  3) 'list)</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(load-file
  "a.clj")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(load
  "a.lisp")</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span class="apple-style-span"><span style="font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black" lang="EN-US">&nbsp;</span></span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure (2007)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">clisp (1984)</span></b></p>
  </td>
  <td style="width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="241">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Scheme (1975)</span></b></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc339573166"><span style="font-family:Consolas" lang="EN-US">17<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">附录：</span></u></a><u><span style="font-family:Consolas" lang="EN-US">ClojureScript</span></u></h1>

<p class="MsoNormal"><span style="font-family:宋体">如果想把</span><span style="font-family:Consolas" lang="EN-US">clojure</span><span style="font-family:宋体">程序作为系统脚本来调用的话，可能</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">的启动耗时是个问题：做正事之前需要</span><span style="font-family:Consolas" lang="EN-US">1s</span><span style="font-family:宋体">以上的启动开销。使用</span><span style="font-family:
Consolas" lang="EN-US">ClojureScript</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">NodeJS</span><span style="font-family:
宋体">，是对这个问题的一个解决办法。</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ClojureScript</span><span style="font-family:宋体">是一个把</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">程序编译成</span><span style="font-family:Consolas" lang="EN-US">js</span><span style="font-family:宋体">程序的编译器，</span><span style="font-family:Consolas" lang="EN-US">Nodejs</span><span style="font-family:宋体">可以直接执行</span><span style="font-family:Consolas" lang="EN-US">js</span><span style="font-family:宋体">程序。</span></p>

<h1><a name="_Toc339573167"><span style="font-family:Consolas" lang="EN-US">18<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">附录：</span></u></a><u><span style="font-family:Consolas" lang="EN-US">newLISP</span></u></h1>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573168"><span style="font-family:Consolas" lang="EN-US">18.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">和</span></u></a><u><span style="font-family:Consolas" lang="EN-US">Clojure</span></u><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">的不同</span></u></h2>

<p class="MsoNormal" style="text-align:center" align="center"><span class="apple-style-span"><span style="font-family:Consolas;color:#444444;
background:white" lang="EN-US">newLISP for little jobs and Clojure for the heavy stuff</span></span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">也是一个现代的</span><span style="font-family:Consolas" lang="EN-US">lisp</span><span style="font-family:宋体">方言，特别适合用于快速启动的脚本以及调用</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">函数库，和</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
宋体">优势互补。（注：现在</span><span style="font-family:Consolas" lang="EN-US">ClojureScript+Node
</span><span style="font-family:宋体">好像也能做系统脚本，但还是没有</span><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">方便）</span></p>

<table class="MsoNormalTable" style="width:99.12%;border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0" width="99%">
 <tbody><tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">功能</span></b></p>
  </td>
  <td style="width:40.14%;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
  <td style="width:48.56%;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">newlisp</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">可变性</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">一切不可变</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:宋体">可变，不改变原来的东西可用</span><span style="font-family:Consolas" lang="EN-US">(copy o)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq a '(1
  3 2 5 4))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort (copy
  a)) ; a </span><span style="font-family:宋体">不变</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort a) ; a
  </span><span style="font-family:宋体">变</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">定义变量</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def v 10)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">set</span> 'v
  10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">setq</span><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">setf</span><span style="font-family:宋体">完全相同：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">setq</span> v
  10)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">setq</span> a 3
  b 4) ; </span><span style="font-family:宋体">设置多个变量</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">define</span> v
  10)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">constant</span>
  'v 0) ; final</span><span style="font-family:宋体">变量</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">局部变量</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let [x 10 y
  (inc x)] (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(binding [x
  10 y (inc x)] (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(let <span style="background:yellow">(</span>(x 2) (y 3)<span style="background:yellow">)</span>
  (+ x y)) ; 5</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(letn <span style="background:yellow">(</span>(x 2) (y (* x x))<span style="background:
  yellow">)</span> (+ x y)) ; 6</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(local (x y)
  </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(setq x 2) (setq y 3) </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(+ x y)) ; 5</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">定义函数</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f [x
  y] (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f []
  nil)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">define</span> (f x y) (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f)
  nil)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">vector</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(vector 2 4
  6)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[2 4 6]</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(array 3 '(2
  4 6))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(array? '(2
  4 6)) ; false</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(array?
  (array 3 '(2 4 6))) ;true</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">功能</span></b></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">newlisp</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hash-map</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{:k1 10 :k2
  20 :k3 30}</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">'((k1 10)
  (k2 20) (k3 30))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">匿名函数</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(fn [x y] (+
  x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#(+ %1 %2)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(#(+ %1 %2)
  3 4)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fn</span> (x y) (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">lambda</span> (x y) (+ x y))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">((<span style="background:yellow">fn</span> (x y) (+ x y)) 3 4)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">序列</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(range 5)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sequence</span> 0 4)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">本地调用</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">import</span> "msvcr71.dll"
  "printf")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(printf
  "hello\n")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">seq</span><span style="font-family:宋体">片段</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(slice '(a b
  c d e f) 2 -1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(slice '(a b
  c d e f) 2 4)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(2 '(a b c d
  e f)) ; (c d e f)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(2 3 '(a b c
  d e f)) ; (c d e)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">拷贝对象</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">不可变没有这个需要</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">copy</span> coll) ; </span><span style="font-family:
  宋体">一个新的</span><span style="font-family:Consolas" lang="EN-US">clone</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">列表处理</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(doseq [[i
  e] (map-indexed </span></p>
  <p class="MsoNormal" style="text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">(fn [i e] [i e]) '(a b c d e f))]</span></p>
  <p class="MsoNormal" style="text-indent:15.75pt"><span style="font-family:Consolas" lang="EN-US">(printf "%s: %s\n" i e))</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dolist</span> (x '(a b c d e f)) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp; (println
  <b><u>$idx</u></b> ": " x))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">缺省参数</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([a] (/ a 2)) </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">([a b] (/ a b)))</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(f a (b 2)) </span></p>
  <p class="MsoNormal" style="text-indent:10.5pt"><span style="font-family:Consolas" lang="EN-US">(/ a b)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">功能</span></b></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">newlisp</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">REPL</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">代码可以在多行键入</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:宋体">分单行模式和多行模式，单行模式有提示符</span><span style="font-family:Consolas" lang="EN-US">&gt; </span><span style="font-family:
  宋体">而多行模式没有提示符，单行模式下回车进入多行模式。</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">块</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(do ....)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">begin</span> ...)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">命名空间</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ns ...)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">context</span> 'wr3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">...</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(context
  MAIN)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">变长参数</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(defn f
  [&amp; body] ...)</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f)
  (println <span style="background:yellow">(args)</span>)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(f 1 2 3)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">inc/dec</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">不可变性：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(def x 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(inc x) ;
  x=10</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:宋体">可变性：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq x 10)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(inc x) ;
  x=11</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:宋体">偏函数</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">partial</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">curry</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">REPL</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">不区分多行模式和单行模式</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&gt;</span><span style="font-family:宋体">提示符下为单行模式，回车无提示符为多行模式</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">String</span></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal"><span style="font-family:宋体">和</span><span style="font-family:Consolas" lang="EN-US">java</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">String</span><span style="font-family:
  宋体">一样</span></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal"><span style="font-family:宋体">可以用</span><span style="font-family:Consolas" lang="EN-US">"", {}, [foo]..[/foo]</span><span style="font-family:宋体">，如：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">"hello
  world\n"</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">{\</span><span style="font-family:宋体">无效</span><span style="font-family:Consolas" lang="EN-US">{}}</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">[bigtext]..&gt;=2048..[/bigtext]</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:11.3%;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="11%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">功能</span></b></p>
  </td>
  <td style="width:40.14%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="40%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">Clojure</span></b></p>
  </td>
  <td style="width:48.56%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="48%">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:Consolas" lang="EN-US">newlisp</span></b></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573169"><span style="font-family:Consolas" lang="EN-US">18.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">配置</span></u></a><u><span style="font-family:Consolas" lang="EN-US">repl</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">在</span><span style="font-family:Consolas" lang="EN-US">*nix</span><span style="font-family:宋体">下自带自动提示，但</span><span style="font-family:Consolas" lang="EN-US">win</span><span style="font-family:
宋体">下需要借助</span><span style="font-family:Consolas" lang="EN-US">cygwin</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">rlwrap</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">---------------------------</span></p>

<p class="MsoNormal"><span style="font-family:Consolas;background:
aqua" lang="EN-US">/james&gt;</span><span style="font-family:Consolas" lang="EN-US">more lsp</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">#!/bin/sh</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cd /e/newlisp</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rlwrap
--remember -b <span style="background:yellow">"(){}[],^%$#@\"\";:''|\\"</span>
-f <span style="background:lime">~/.newlisp_completion</span> newlisp</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">---------------------------</span></p>

<p class="MsoNormal"><span style="font-family:宋体">其中</span><span style="font-family:Consolas;background:lime" lang="EN-US">.newlisp_completion</span><span style="font-family:宋体">是用如下的命令得到的：</span><span style="font-family:
Consolas" lang="EN-US">(symbols) </span><span style="font-family:宋体">然后去掉换行</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573170"><span style="font-family:Consolas" lang="EN-US">18.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数据类型</span></u></a></h2>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">类型</span></b></p>
  </td>
  <td style="width:451.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:宋体">整型</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">64</span><span style="font-family:宋体">位有符号整型</span><span style="font-family:Consolas" lang="EN-US">,</span><span style="font-family:宋体">最大</span><span style="font-family:Consolas" lang="EN-US">(pow
  2 63)</span><span style="font-family:宋体">，</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">注意：整形可以用</span><span style="font-family:Consolas" lang="EN-US">+ - * /</span><span style="font-family:
  宋体">，但浮点型不能用，否则结果不正确</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:宋体">浮点型</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">使用</span><span style="font-family:Consolas" lang="EN-US">add sub mul div</span><span style="font-family:
  宋体">函数进行</span><span style="font-family:Consolas" lang="EN-US">+ - * /</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:宋体">字符串</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">没有字符，只有字符串，</span><span style="font-family:Consolas" lang="EN-US">".."</span><span style="font-family:宋体">里面最长</span><span style="font-family:Consolas" lang="EN-US">2k</span><span style="font-family:宋体">，更长要用</span><span style="font-family:Consolas" lang="EN-US">
  [text]...[/text]</span><span style="font-family:宋体">，例如</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(println [text]abc[/text])</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">取片段：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">("hello" -1) ; "o"</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(slice "hello" 0 5) ;
  "hello" </span><span style="font-family:宋体">也可以不用</span><span style="font-family:Consolas" lang="EN-US">slice</span><span style="font-family:
  宋体">，如下</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(0 5 "hello") ; </span><span style="font-family:宋体">注意：</span><span style="font-family:Consolas" lang="EN-US">*</span><span style="font-family:宋体">不是</span><span style="font-family:Consolas" lang="EN-US">*
  ("hello" 0 5)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">utf</span><span style="font-family:宋体">字符串：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(length "cn</span><span style="font-family:
  宋体">中文</span><span style="font-family:Consolas" lang="EN-US">") ; 8</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(utf8len "cn</span><span style="font-family:
  宋体">中文</span><span style="font-family:Consolas" lang="EN-US">") ; 4</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">遍历字符串所有字符：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">dostring</span>
  (c "hello") (println (char c)))</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(dolist (c (<span style="background:yellow">explode</span>
  "hello")) (println c))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">bool</span><span style="font-family:宋体">型</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not true) ;
  nil</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not false)
  ; true</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not nil) ;
  true</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(not '()) ;
  true</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nil? nil) ;
  true</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(nil? false)
  ; true</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">list</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">查找第一次出现的位置：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ref</span> '<span style="color:#C00000">l</span> '(h e <span style="color:#C00000">l</span> l
  o)) ; (2)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">ref</span> '<span style="color:#C00000">l</span> '((h e <span style="color:#C00000">l</span> l
  o) (w o r l d))) ; (0 2)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">注：</span><span style="font-family:Consolas" lang="EN-US">ref-all</span><span style="font-family:宋体">查找所有出现的位置</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">取片段：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(0 2 "hello") ; "he"</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">更改元素</span><span style="font-family:Consolas" lang="EN-US">(</span><span style="font-family:宋体">也可以用</span><span style="font-family:Consolas;background:yellow" lang="EN-US">setq</span><span style="font-family:Consolas" lang="EN-US">)</span><span style="font-family:
  宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(setf s "hello")</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">setf</span> (s
  0) "H") ; s="Hello"</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">删除或替换：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(replace 0 '(1 0 2 0 3)) ; (1 2 3)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(replace 0 '(1 0 2 0 3) nil) ; (1 nil 2 nil 3)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">交换：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(setq s '(a b c))</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">swap</span>
  (first s) (last s)) ; (c b a)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">hashmap</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq m '((k1
  v1) (k2 v2) (k3 v3)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(lookup 'k2
  m) ; v2</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(assoc 'k2
  m) ; (k2 v2)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">方法</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">new</span> <span style="background:yellow">Tree</span>
  'm)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k1" 'v1) ; </span><span style="font-family:宋体">只能用字符串，不能用</span><span style="font-family:Consolas" lang="EN-US">'k1</span><span style="font-family:
  宋体">或者数字</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k2" 'v2)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k3" 'v3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m) ; (("k1"
  v1) ("k2" v2) ("k3" v3))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k2") ; v2 </span><span style="font-family:宋体">查寻</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k2" nil) ; </span><span style="font-family:宋体">删除</span><span style="font-family:Consolas" lang="EN-US"> (m)=(("k1" v1)
  ("k3" v3))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  "k2" 22) ; </span><span style="font-family:宋体">增加或者更改</span><span style="font-family:Consolas" lang="EN-US"> (m)=(("k1" v1)
  ("k2" 22) ("k3" v3))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(m
  '(("k0" v0) ("k4" v4))) ; </span><span style="font-family:
  宋体">转换</span><span style="font-family:Consolas"> <span lang="EN-US">(m)=(("k0"
  v0) ("k4" v4))</span></span></p>
  <p class="MsoNormal"><span style="font-family:宋体">保存和转载：</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(save
  "m.lsp" 'm)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(load
  "m.lsp")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">Array</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">可以</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">维或者多维</span><span style="font-family:Consolas" lang="EN-US">.</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">初始化</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:宋体">维</span><span style="font-family:Consolas" lang="EN-US">array</span><span style="font-family:
  宋体">：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(array 3 '(1)) ; (1 1 1)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(array 5 '(a b)) ; (a b a b a)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">初始化多维</span><span style="font-family:Consolas" lang="EN-US">array</span><span style="font-family:宋体">（</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:
  宋体">行</span><span style="font-family:Consolas" lang="EN-US">3</span><span style="font-family:宋体">列）：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(array 2 3 '(1)) ; ((1 1 1) (1 1 1))</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(array 2 3 '(a b c)) ; ((a b c) (a b c))</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">取元素：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(arr1 0) ; 1</span><span style="font-family:
  宋体">维第一个元素，或多维第一行</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(arr1 m n) ; </span><span style="font-family:
  宋体">多维第</span><span style="font-family:Consolas" lang="EN-US">m</span><span style="font-family:宋体">行第</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:宋体">列，从</span><span style="font-family:Consolas" lang="EN-US">0</span><span style="font-family:宋体">开始</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:宋体">数列</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:宋体">等差数列：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">sequence</span>
  1 10 2) ; (1 3 5 7 9)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(sequence 10 1 -2) ; (10 8 6 4 2)</span></p>
  <p class="MsoNormal"><span style="font-family:宋体">等比数列：</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">series</span> 1
  2 5) ; (1 2 4 8 16)</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">(series 64 0.5 10) ; (64 32 16 8 4 2 1 0.5 0.25
  0.125)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:90.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="121">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="602">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573171"><span style="font-family:Consolas" lang="EN-US">18.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">newlisp</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">常用模式</span></u></h2>

<p class="MsoNormal"><span style="font-family:宋体">有网友把官方文档做了翻译：</span><span style="font-family:Consolas" lang="EN-US"><a href="http://www.newlisp.org/CodePatterns-cn.html" target="_blank" rel="external">http://www.newlisp.org/CodePatterns-cn.html</a></span></p>

<p class="MsoNormal"><span style="font-family:宋体">本地：</span><span style="font-family:Consolas" lang="EN-US"><a href="file:///E:/newlisp/newLISP%20Code%20Patterns-cn-%E4%B8%AD%E6%96%87.htm" target="_blank" rel="external">E:\newlisp\newLISP
Code Patterns-cn-<span style="font-family:宋体" lang="EN-US"><span lang="EN-US">中文</span></span>.htm</a></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">功能</span></b></p>
  </td>
  <td style="width:362.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">代码示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">得到命令行参数</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">及函数参数</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">命令行参数：</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">newlisp foo.lsp –m 10</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(main-args) ; <span style="color:
  #5B6E6E">("<u>newlisp.exe</u>" "<u>foo.lsp</u>" "-m"
  "10")</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">注意：如果是</span><span style="font-family:Consolas" lang="EN-US">*.txt</span><span style="font-family:宋体">，得到的是实际的文件列表</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">foo.lsp</span><span style="font-family:
  宋体">内容：</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(println (2 (main-args))) (exit)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">$ newlisp foo.lsp <b><u>*.txt</u></b></span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">("a.txt" "b.txt"
  "c.txt") ; </span><span style="font-family:宋体">不是</span><span style="font-family:Consolas" lang="EN-US"> "<b><u>*.txt</u></b>"</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">函数参数列表：</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f) (length <span style="background:yellow">(args)</span>))&nbsp; (f a b c d) ; 4</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f) (apply + (args)))&nbsp;
  (f 1 2 3 4) ; 10</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(define (g) (<span style="background:
  yellow">doargs</span> (x) (println x)))</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">(g 1 3 5) </span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">得到系统参数</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(env "classpath")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(env "NEWLISPDIR") <span style="color:#7F7F7F">; "e:\\newlisp"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">REPL</span><span style="font-family:宋体">中执行命令</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">无返回值</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">!</span><span style="font-family:Consolas" lang="EN-US">dir</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">!</span><span style="font-family:Consolas" lang="EN-US">"foo boo.txt"</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">!</span><span style="font-family:Consolas" lang="EN-US">vi foo.txt</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">执行外部程序</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(exec "ls *.lsp") ; </span><span style="font-family:宋体">返回结果列表</span><span style="font-family:Consolas"> <span lang="EN-US">("guiserver.lsp" "init.lsp")</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">执行脚本</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">注意：在最后必须写</span><span style="font-family:Consolas;background:
  yellow" lang="EN-US">(exit)</span><span style="font-family:宋体">，如</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(println (main-args))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(exit)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">执行表达式</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">newlisp -n -e "(+ 3 4)"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">做</span><span style="font-family:Consolas" lang="EN-US">http</span><span style="font-family:宋体">服务器</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">newlisp <span style="background:yellow">-d</span>
  83 <span style="background:yellow">-w</span> /var/www/</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US"><a href="http://locahost:83/" target="_blank" rel="external">http://locahost:83</a></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">不装载</span><span style="font-family:Consolas" lang="EN-US">init.lsp</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">newlisp –n test1.lsp</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">注：</span><span style="font-family:Consolas" lang="EN-US">window</span><span style="font-family:宋体">上设置</span><span style="font-family:Consolas" lang="EN-US">NEWLISPDIR</span><span style="font-family:宋体">环境变量为</span><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">安装目录</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">处理每行</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">$newlisp -n t1.lsp &lt; t1.lsp</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">;------------------- t1.lsp</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(while (read-line)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; (println (current-line)))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(exit)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">查找字符串</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">((regex "ll" "hello <span style="background:yellow">w</span>orld") 1) ; 6</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(slice "hello <span style="background:yellow">wor</span>ld"
  6 3) ; "wor"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">constant</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(set 'v 0)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq v 10)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq v 20)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define v 30)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define v 40)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(constant 'v 50)<span style="color:#7F7F7F"> ; </span></span><span style="font-family:宋体;color:#7F7F7F">类似于</span><span style="font-family:Consolas;color:#7F7F7F" lang="EN-US">finalize</span><span style="font-family:宋体;color:#7F7F7F">了，不能再变了</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(set 'v 1) ;<span style="color:#C00000"> </span></span><span style="font-family:宋体;color:#C00000">报错</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="138">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">获取</span><span style="font-family:Consolas" lang="EN-US">OS</span><span style="font-family:宋体">类型</span></p>
  </td>
  <td style="width:362.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="483">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">ostype ; "Win32"</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573172"><span style="font-family:Consolas" lang="EN-US">18.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">REPL</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">在线文档</span></u></h2>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">在</span><span style="font-family:Consolas" lang="EN-US">init.lsp</span><span style="font-family:宋体">中写如下宏即可：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">;
http://newlispfanclub.alh.net/forum/viewtopic.php?f=15&amp;t=3956</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define-macro (?? func-name)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let ((func-name (string func-name)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (set 'f (read-file
{/e:/newlisp/newlisp_manual.html}))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (when (and </span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(starts-with func-name "[a-z]" 0)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(set 'html-text (find-all (string "&lt;h4&gt;syntax(.*?)" func-name
"(.*?)&lt;/h4&gt;") f)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(set 'html-text (join html-text "\n"))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(replace "&lt;.*?&gt;" html-text "" 0)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(replace "&amp;lt;"&nbsp; html-text "&lt;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(replace "&amp;gt;"&nbsp; html-text "&gt;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(replace "&amp;amp;" html-text "&amp;"))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (println html-text)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; 'end))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define-macro (doc func-name)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; (let ((func-name (string func-name)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (set 'f (read-file
{/e:/newlisp/newlisp_manual.html}))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (set 'r (regex (string
"&lt;a name=\"" func-name "\"&gt;&lt;/a&gt;") f))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (set 'n0 (r 1))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (set 'n1 ((regex
"&lt;a name=" f 0 (+ n0 (r 2))) 1))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (set 'html-text (slice f
n0 (- n1 n0)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&lt;.*?&gt;" html-text "" 0)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&amp;lt;"&nbsp; html-text "&lt;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&amp;gt;"&nbsp; html-text "&gt;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&amp;amp;" html-text "&amp;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&amp;nbsp;" html-text " ")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"&amp;mdash;" html-text "...")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace "&amp;rarr;"
html-text "-&gt;")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"\n\n+" html-text "\n\n" 1)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (replace
"^\n+|\n+$" html-text "" 1)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (println
"--------------------------")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (println html-text)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; (println
"--------------------------") </span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; &nbsp; 'end))</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573173"><span style="font-family:Consolas" lang="EN-US">18.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">代码即数据</span></u></a></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f x)
(* x x)) ; (f 3) 9</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (first
(last f)) '+) ; (f 3) 6</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">注意：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">fn</span> (f x)
(* x x)) </span><span style="font-family:宋体">中，</span><span style="font-family:Consolas" lang="EN-US">fn</span><span style="font-family:宋体">是特殊类型，第一个元素是</span><span style="font-family:Consolas" lang="EN-US">(f x)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(length (fn (f x) (* x x))) </span><span style="font-family:宋体">等于</span><span style="font-family:Consolas" lang="EN-US">2</span><span style="font-family:宋体">而不是</span><span style="font-family:Consolas" lang="EN-US">3</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：把整个</span><span style="font-family:Consolas" lang="EN-US">context</span><span style="font-family:宋体">作为配置文件：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">;;--- config.lsp</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">context</span> <b>'config</b>)</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(set 'user-name "admin")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(set 'password "secret")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(set 'db-name "/usr/data/db.lsp")</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">;;--- eof</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">写配置文件：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">save</span>
"<u>config.lsp</u>" <b>'config</b>)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">读配置文件：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">load</span>
"<u>config.lsp</u>")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">注：可以读多个</span><span style="font-family:Consolas" lang="EN-US">.lsp</span><span style="font-family:宋体">配置文件，也可以把多个</span><span style="font-family:
Consolas" lang="EN-US">context</span><span style="font-family:宋体">写入一个配置文件</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(load "conf1.lsp"
"conf2.lsp" "conf3.lsp")</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(save "config.lsp" 'conf1
'conf2 'conf3)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">通过字符串构建变量：</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(set (<span style="background:yellow">sym</span>
"v") 3)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">(= v 3) ; true</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573174"><span style="font-family:Consolas" lang="EN-US">18.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:Consolas" lang="EN-US">constant</span></u></a><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">定义</span></u></h2>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">constant</span><span style="font-family:宋体">不同于</span><span style="font-family:Consolas" lang="EN-US">define</span><span style="font-family:宋体">、</span><span style="font-family:Consolas" lang="EN-US">set</span><span style="font-family:宋体">的地方在于：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">constant</span><span style="font-family:宋体">定义后的变量不能再更改值；</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt"><span style="font-family:Wingdings" lang="EN-US">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span style="font-family:Consolas" lang="EN-US">constant</span><span style="font-family:宋体">可用于定义</span><span style="font-family:Consolas" lang="EN-US">alias</span><span style="font-family:宋体">，如：</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(constant '+ add)</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(constant (global 'doseq) dolist)</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573175"><span style="font-family:Consolas" lang="EN-US">18.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">制作可执行文件</span></u></a></h2>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">可以把脚本做成可执行文件如</span><span style="font-family:Consolas" lang="EN-US">.exe</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">例如脚本</span><span style="font-family:Consolas" lang="EN-US">upp.lsp</span><span style="font-family:宋体">：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">---------------------</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(println (upper-case (main-args 1)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(exit)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">---------------------</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">装载</span><span style="font-family:Consolas" lang="EN-US">util/link.lsp</span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">e:\newlisp\newlisp.exe <b><span style="background:yellow">util\link.lsp</span></b></span></p>

<p class="MsoNormal" style="text-align:left;text-indent:21.0pt" align="left"><span style="font-family:Consolas" lang="EN-US">&gt; (<span style="background:yellow">link</span>
"newlisp.exe" "<b>upp.exe</b>" "upp.lsp")</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">已经生成</span><b><span style="font-family:Consolas" lang="EN-US">upp.exe</span></b><span style="font-family:宋体">，可以脱离</span><span style="font-family:Consolas" lang="EN-US">newlisp</span><span style="font-family:宋体">环境执行。</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<h2 style="margin-left:18.0pt;text-indent:-18.0pt"><a name="_Toc339573176"><span style="font-family:Consolas" lang="EN-US">18.9<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><u><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">分类函数</span></u></a></h2>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">流控制函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:340.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">begin </span><span style="font-family:宋体">多条语句</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">begin</span>
  (println 10) (println "hello"))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">if</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">if-not</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(if (= 3 3) "==" "!=")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(if-not (!= 3 4) "==" "!=")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(if (= n 1) 111</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;(= n 2) 222</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;(= n 3) 333</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; &nbsp;&nbsp;000)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">case</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(case n </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(1 '11) </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(2 '22) </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(true "other"))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">cond</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(cond</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; ((&lt; n 0) '--)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; ((&gt; n 0) '++)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp; (true "00"))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">curry</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">((curry div 1) 3) ; 0.3333333333 </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">partial</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">for</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(for (i 1 10 2) (println i)) ; 1 3 5 7 9</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">do-until</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">do-while</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">dotimes</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">可以带</span><span style="font-family:Consolas" lang="EN-US">break</span><span style="font-family:宋体">条件：</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(dotimes (x 10 <span style="background:yellow">(&gt;
  (* x x) 10)</span>)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(println x "*" x
  "=" (* x x)))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">unless</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">until</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">when</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">while</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">let</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">letex</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">letn</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:95.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="128">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">throw</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">catch</span></p>
  </td>
  <td style="width:340.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="454">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(catch (if true (throw "zero"))) ; "zero"</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(catch (if false (throw "zero"))) ;
  nil</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">list </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">函数</span></b></p>
  </td>
  <td style="width:400.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">append </span><span style="font-family:宋体">追加</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">append</span> '(a b c) '(d e)) ;<span style="color:#5B6E6E"> '(a b c d e)</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">append</span> "hello" " world")
  ;<span style="color:#5B6E6E"> "hello world"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">assoc</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span><span style="font-family:宋体">查</span><span style="font-family:Consolas" lang="EN-US">hashmap</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">key</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">assoc</span> 'k2 '((k1 v1) (k2 v2) (k3 v3))) ; <span style="color:#5B6E6E">(k2 v2)</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">chop </span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">出去最后一个元素</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">chop</span> '(a b c)) ; <span style="color:#5B6E6E">(a
  b)</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(chop
  "hello") ;<span style="color:#5B6E6E"> "hell"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">filter </span><span style="font-family:宋体">取符合条件的</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">clean </span><span style="font-family:宋体">删除符合条件的</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">filter</span> number? '(a 1 3 b 5)) ; <span style="color:#5B6E6E">(1 3 5)</span></span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">clean</span> symbol? '(a 1 3 b 5)) ; <span style="color:#5B6E6E">(1 3 5)</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">cons</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(cons 'a '(b
  c d)) ; (a b c d)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">count </span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">sql</span><span style="font-family:
  宋体">的聚合</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(count '(z
  a) '(z d z b a z y a)) ; (3 2)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">difference</span><span style="font-family:宋体">集合减法</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">intersect&nbsp;
  </span><span style="font-family:宋体">交集</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(difference
  '(a b c d e) '(a c e F)) ; (b d)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(intersect
  '(a b c d e) '(a c e F)) ; (a c e)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">args</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">doargs</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f)
  (dolist (a (<span style="background:yellow">args</span>)) (println a)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(define (f)
  (<span style="background:yellow">doargs</span> (a) (println a)))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dolist</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dolist (i
  '(a b c d)) (println i))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dolist (i '(a
  b c d)) (println <span style="background:yellow">$idx</span> ": "
  i)) ; </span><span style="font-family:宋体">序号</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">0: a</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">1: b</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">2: c</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">3: d</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dolist (i
  '(a b c d) <span style="background:yellow">(= $idx 2)</span>) (println $idx
  ": " i)) ; </span><span style="font-family:宋体">退出条件</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">0: a</span></p>
  <p class="MsoNormal" style="margin-left:10.5pt"><span style="font-family:Consolas" lang="EN-US">1: b</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dotimes</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dotimes (i
  10) (println i))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dup</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dup '(1 2)
  3) ; ((1 2) (1 2) (1 2))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">start-with</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ends-with</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(starts-with
  '(a b c) 'a) ; true</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ends-with
  '(a b c) 'c) ; true</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">exists</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for-all</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(exists &lt;
  '(3 -4 5)) ; -4 </span><span style="font-family:宋体">类似</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">some</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(for-all
  number? '(-2 -1 0 1 2)) ; true </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">every?</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">extend </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">构建或修改</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(extend ls '(a b c) '(d e)) ; <span style="color:#5B6E6E">ls = (a b c d e)</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(extend s "hel" "lo") ; <span style="color:#5B6E6E">"hello"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">explode</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">分组</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(explode '(a
  b d)) ; ((a) (b) (d))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(explode '(a
  b d) 2) ; ((a b) (d))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">nth</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">slice</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;(nth 1
  '(a b c)) ; b </span><span style="font-family:宋体">更简单写法</span><span style="font-family:Consolas" lang="EN-US">('(a b c) 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(slice '(a b
  c d e) 0 2) ; (a b) </span><span style="font-family:宋体">更简单写法</span><span style="font-family:Consolas" lang="EN-US">(0 2 '(a b c d e))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">index</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">find</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ref</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ref-all</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">lookup</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">member</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(index zero?
  '(1 2 0 3 0 5)) ; (2 4) </span><span style="font-family:宋体">符合条件的所有元素的位置</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(find 'c '(a
  b c d e)) ; 2 </span><span style="font-family:宋体">指定元素的</span><span style="font-family:Consolas" lang="EN-US">1</span><span style="font-family:
  宋体">维坐标</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ref 'b '((a
  b c) (d e f))) ; (0 1) </span><span style="font-family:宋体">指定元素的</span><span style="font-family:Consolas" lang="EN-US">n</span><span style="font-family:
  宋体">维坐标</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(ref-all 'b
  '((a b c) (d e f))) ; ((0 1)) </span><span style="font-family:宋体">指定元素的所有坐标</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(lookup 'k2
  '((k1 v1) (k2 v2) (k3 v3))) ; v2</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(member 'c
  '(a b c d e)) ; (c d e) </span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">right</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">flat</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(flat '(a (b
  (c d)))) ; (a b c d) ; </span><span style="font-family:宋体">类似</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:
  宋体">的</span><span style="font-family:Consolas" lang="EN-US">flatten</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">for</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(for (x 1 10
  2) (println x)) ; </span><span style="font-family:宋体">打印</span><span style="font-family:Consolas" lang="EN-US">1 3 5 7 9</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">length</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(length '(a
  b c)) ; 3</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">list</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(list 'a 3
  "hello") ; (a 3 "hello")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">pop-assoc</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq m
  '((k1 v1) (k2 v2) (k3 v3)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(pop-assoc
  'k2 m) ; m=((k1 v1) (k3 v3)) </span><span style="font-family:宋体">按</span><span style="font-family:Consolas" lang="EN-US">key</span><span style="font-family:
  宋体">删除</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">setf</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">设置指定位置的值</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq ls '(a
  b c d)) </span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (first
  ls) 'A) ; ls=(A b c d)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (ls 2)
  'CC) ; ls=(A b CC d)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setf (ls 3)
  (dup <span style="background:yellow">$it</span>)) ; ls=(A b CC (d d))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">replace</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">删除</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:
  宋体">查找并替换</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(replace 0
  '(1 0 2 0 3 0)) ; (1 2 3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(replace 0
  '(1 0 2 0 3 0) '*) ; (1 * 2 * 3 *)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(replace 0
  '(1 0 2 0 3 0) (string <span style="background:yellow">$it</span> <span style="background:yellow">$it</span>)) ; (1 "00" 2 "00" 3
  "00")</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(replace <span style="background:yellow">2</span> '(<span style="background:aqua">1 -2 3 -4
  5</span>) '* <span style="background:lime">&gt;</span>) ; (* * 3 * 5) </span><span style="font-family:宋体">比对函数：</span><span style="font-family:Consolas" lang="EN-US">(<span style="background:lime">&gt;</span> <span style="background:yellow">2</span> <span style="background:aqua">x</span>)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">reverse</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">rotate</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(reverse
  '((1 2) 3 4 5)) ; (5 4 3 (1 2))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(rotate '((1
  2) 3 4 5)) ; (5 (1 2) 3 4)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">swap</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">交换</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:
  宋体">元素</span></p>
  <p class="MsoNormal" style="text-indent:5.25pt"><span style="font-family:宋体">交换变量</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq m '(1
  2 3 4 5))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(swap (first
  m) (last m)) ; m=(5 2 3 4 1)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq x 2 y
  3)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(swap x y) ;
  x=3 y=2</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">select</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(select '(a
  b c d e) '(0 -1)) ; (a e)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(select '(a
  b c d e) 0 -1) ; (a e)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set-ref</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">set-ref-all</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(setq m
  '((k1 v1) (k2 v2) (k3 v3)))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(set-ref 'k2
  m "hello") ; ((k1 v1) ("hello" v2) (k3 v3))</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">sort</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort '(1 3
  2 5 0)) ; (0 1 2 3 5)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(sort '(-3 1
  2) (fn (x y) (&gt; (abs x) (abs y)))) ; (-3 2 1)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">unique</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(unique '(2
  3 4 4 6 7 8 7)) ; (2 3 4 6 7 8)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:127.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="170">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">amb</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">ambiguity &nbsp;</span><span style="font-family:宋体">含糊；不明确；相当于</span><span style="font-family:
  Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">rand-nth</span><span style="font-family:宋体">函数</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(amb 'a 'b
  'c 'd 'e)</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(apply 'amb
  (explode "abcde"))</span></p>
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">(dotimes (x
  10) (println (amb "111" "222" "333"0)))</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span style="font-family:宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">Destructuring nested list</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(setq x '(A (B C) D)) ; </span><span style="font-family:宋体">只能用</span><span style="font-family:Consolas" lang="EN-US">A-Z</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(setq y '(1 (20 3.14) "hello"))</span></p>

<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:Consolas" lang="EN-US">(<span style="background:yellow">bind</span> (<span style="background:yellow">unify</span> x y)) ; A=1 B=20 C=3.14
D="hello"</span></p>

<p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">string </span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">注：</span><span style="font-family:Consolas" lang="EN-US">string</span><span style="font-family:宋体">可以看成字符的</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">，大部分</span><span style="font-family:Consolas" lang="EN-US">list</span><span style="font-family:宋体">函数也适用于</span><span style="font-family:Consolas" lang="EN-US">string</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">string </span><span style="font-family:宋体">构造</span></p>
  </td>
  <td style="width:400.85pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(string "pi=" 3.14)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal"><span style="font-family:Consolas" lang="EN-US">dostring </span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">explode</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(dostring (<b>c</b> "<u>cn</u></span><u><span style="font-family:宋体">中文</span></u><span style="font-family:Consolas" lang="EN-US">")
  (println&nbsp; (char <b>c</b>)))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(explode "hello") ; <span style="color:#5B6E6E">("h" "e" "l"
  "l" "o")</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">char </span><span style="font-family:宋体">互转</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(char 65) ; <span style="color:#5B6E6E">"A"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(char "A") ; <span style="color:#5B6E6E">65</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">dup </span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(dup "-" 10) ; <span style="color:
  #5B6E6E">"----------"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">starts-with</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">ends-with</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(starts-with "hello" "h") ; <span style="color:#5B6E6E">true</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(ends-with "hello" "o") ; <span style="color:#5B6E6E">true</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">encrypt </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">用密码加解密字符串</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(encrypt "<u>i love u</u>"
  "pass1") ;<span style="color:#5B6E6E">"\025A\031\028G\021A\006"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(encrypt "\025A\031\028G\021A\006"
  "pass1") ;<span style="color:#5B6E6E">"<u>i love u</u>"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">eval-string</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(eval-string "(+ 1 3)") ; 4</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">append</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">不改变原字符串</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">extend, push/pop</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">改变原字符串</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq s "hello")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(append s " world") ; s=<span style="color:#5B6E6E">"hello"</span></span><span style="font-family:
  宋体">不变</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(extend s " world" "...") ; s=<span style="color:#5B6E6E">"hello world..."</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq s2 '("hello" "world"))
  ; </span><span style="font-family:宋体">可以只</span><span style="font-family:Consolas" lang="EN-US">extend list</span><span style="font-family:宋体">某元素</span><span style="font-family:Consolas" lang="EN-US">, </span><span style="font-family:
  宋体">如下：</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(extend (s2 1) "...") ; s2=("hello"
  "world...") </span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq s "hello")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(push "&lt;-" s)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(push "-&gt;" s -1) ; s="&lt;-hello-&gt;"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">replace</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">查找替换</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(replace "<span style="background:yellow">(a)(.)(b)</span>"
  "<b><i>---axB---Ayb---</i></b>" <span style="background:yellow">(append
  $3 $2 $1)</span> <span style="background:lime">1</span>)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">; "<b><i>---Bxa---byA---</i></b>" <span style="background:lime">1</span></span><span style="font-family:宋体">表示忽略大小写</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">setf</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">指定位置替换</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq s "newlisp")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setf (s 3) (string "-" (upper-case <span style="background:yellow">$it</span>))) ; "new-Lisp"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">find</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find "wor" "hello world") ;
  6</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find "WOR" "hello world" 1)
  ; 6</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find "L" "hello world" 1 6)
  ; 9</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">find-all</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find-all "[e|r]l" "hello
  world") ; ("el" "rl")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find-all {\d+}
  "lkjhkljh34ghfdhgfd678gfdhfgd9") ;("34" "678"
  "9")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(find-all {(new)(lisp)} "newLISP is NEWLISP"
  (append $2 $1) 1)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:Consolas" lang="EN-US">; ("LISPnew"
  "LISPNEW")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">regex</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">regex-comp</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">reverse</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">member </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">right</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(member "-" "hello-world") ;
  <span style="color:#5B6E6E">"-world"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(member 'c '(a b c d)) ;<span style="color:#5B6E6E">
  (c d)</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">parse</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span><span style="font-family:宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">split</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(parse "hello how are you") ;<span style="color:#5B6E6E"> ("hello" "how" "are"
  "you")</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(parse "a-b--c---d" "-+" 0) ;
  <span style="color:#5B6E6E">("a" "b" "c" "d")
  </span></span><span style="font-family:宋体;color:#5B6E6E">使用</span><span style="font-family:Consolas;color:#5B6E6E" lang="EN-US">regex</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">join</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(join '("A" "B"
  "C") "-") ; <span style="color:#5B6E6E">"A-B-C"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(join '("A" "B"
  "C") "-" true) ; <span style="color:#5B6E6E">"A-B-C-"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">select</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">slice</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(select "abcd" '(-1 -2 -3)) ; <span style="color:#5B6E6E">"dcb"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(slice "hello" 0 2) ; "<span style="color:#5B6E6E">he"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">trim</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span><span style="font-family:宋体">可</span><span style="font-family:Consolas" lang="EN-US">trim</span><span style="font-family:
  宋体">指定字符</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(trim " hello&nbsp;&nbsp; ") ; <span style="color:#5B6E6E">"hello"</span></span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(trim "(hello)" "("
  ")") ;<span style="color:#5B6E6E"> "hello"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">length</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">utf8len</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(length "cn</span><span style="font-family:
  宋体">中文</span><span style="font-family:Consolas" lang="EN-US">") ; 8</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(utf8len "cn</span><span style="font-family:
  宋体">中文</span><span style="font-family:Consolas" lang="EN-US">") ; 4</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:128.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="171">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">lower-case</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">upper-case</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">title-case</span></p>
  </td>
  <td style="width:400.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="534">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">数值函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">bits </span><span style="font-family:宋体">二进制表示</span></p>
  </td>
  <td style="width:348.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(bits 1024) ; <span style="color:#5B6E6E">"10000000000"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">int </span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">float</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(int 3.14) (int "3.14") ; 3</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(float 3) (float "3.14") ; 3.14</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&gt;&nbsp;</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&lt;&nbsp;</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(&gt; 3) ; true </span><span style="font-family:
  宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">(pos?
  3)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(&lt; -1) ; true </span><span style="font-family:
  宋体">相当于</span><span style="font-family:Consolas" lang="EN-US">Clojure</span><span style="font-family:宋体">的</span><span style="font-family:Consolas" lang="EN-US">(neg?
  -1)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">format&nbsp; </span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:5.25pt" align="left"><span style="font-family:宋体">类</span><span style="font-family:Consolas" lang="EN-US">C</span><span style="font-family:宋体">语言的</span><span style="font-family:Consolas" lang="EN-US">sprintf</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(format "%s%10d" "Age:" 30)
  ; <span style="color:#5B6E6E">"Age:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  30"</span></span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">factor </span><span style="font-family:宋体">质因子</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(factor 120) ; (2 2 2 3 5)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">gcd </span><span style="font-family:宋体">最大公约数</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(gcd 12 32) ; 4</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">uuid</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(uuid) ; "0A388146-DC1B-4071-A372-1D2CC8542D5A"</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">rand</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">random</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(rand 10) ; [0-9]</span><span style="font-family:
  宋体">的随机整数</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(rand 10 5) ; (9 8 2 5 3)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(rand 2 10) ; (0 1 1 0 1 1 0 1 0 1)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(random 10 5) ; [10.0-15.0]</span><span style="font-family:宋体">的随机</span><span style="font-family:Consolas" lang="EN-US">float</span><span style="font-family:宋体">数</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(random 0 1 100) ; 100</span><span style="font-family:宋体">个</span><span style="font-family:Consolas" lang="EN-US">0~1.0</span><span style="font-family:宋体">的随机</span><span style="font-family:Consolas" lang="EN-US">float</span><span style="font-family:宋体">数</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:121.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="162">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">inc</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">dec</span></p>
  </td>
  <td style="width:348.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="465">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
  宋体">注意：是改变原变量的</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq x 10) (inc x) ; x=11</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">文件</span><span lang="EN-US">IO</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">read-file </span><span style="font-family:宋体">读整个文件为</span><span style="font-family:Consolas" lang="EN-US">string</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(read-file "http://g.cn")</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">read-key</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(read-key) ; </span><span style="font-family:
  宋体">等待键盘输入</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">read-line</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(setq f (open "f1.txt"
  "read"))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(while (read-line f) (write-line))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(close f)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">write</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">write-line</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">write-file</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
  <td style="width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="361">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">例子：</span><span style="font-family:Consolas" lang="EN-US">grep.lsp</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">-------------------------------------</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(dolist (fname (3 (main-args)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (println "file ---&gt;
" fname)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (setq file (open fname
"read"))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (while (read-line file)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (if
(find (main-args 2) (current-line) 0)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(write-line)))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;&nbsp;&nbsp; (close file))</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(exit)</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">-------------------------------------</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">执行：</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">$newlisp lsp "cn" *.txt</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">file ---&gt; cn.txt</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">// use&nbsp; mor<span style="background:
yellow">cn</span> cn.txt</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">cn</span><span style="font-family:Consolas" lang="EN-US"> </span><span style="font-family:&quot;Courier New&quot;" lang="EN-US">&#1488;</span><span style="font-family:
Consolas" lang="EN-US">τ</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">file ---&gt; jamesqiu.txt</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">cn</span><span style="font-family:宋体">中文</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">file ---&gt; utf.name</span><span style="font-family:宋体">中文</span><span style="font-family:Consolas" lang="EN-US">.txt</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="3Consolas" style="margin-right:10.5pt"><span style="text-decoration:none" lang="EN-US">18.9.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang="EN-US">context</span><span style="font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">函数</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">分文件：</span><span style="font-family:Consolas" lang="EN-US"> </span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">文件名</span></b></p>
  </td>
  <td style="width:164.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">文件内容</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">db.lsp</span></p>
  </td>
  <td style="width:164.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(context 'db)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (update x y) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (erase x) ...)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">util.lsp</span></p>
  </td>
  <td style="width:164.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(context 'util)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f1) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f2) ...)</span></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">main.lsp</span></p>
  </td>
  <td style="width:164.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">(load "db.lsp")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">(load "util.lsp")</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (run)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(db:update ...)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(util:f2 ...))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(run)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:
宋体">一个文件：</span></p>

<table class="MsoNormalTable" style="border-collapse:collapse;border:none" border="1" cellpadding="0" cellspacing="0">
 <tbody><tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">文件名</span></b></p>
  </td>
  <td style="width:164.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:center" align="center"><b><span style="font-family:宋体">文件内容</span></b></p>
  </td>
 </tr>
 <tr>
  <td style="width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="88">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">main.lsp</span></p>
  </td>
  <td style="width:164.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt" valign="top" width="219">
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(context 'db)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (update x y) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (erase x) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">(context MAIN)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(context 'util)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f1) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (f2) ...)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas;background:yellow" lang="EN-US">(context MAIN)</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(define (run)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(db:update ...)</span></p>
  <p class="MsoNormal" style="text-align:left;text-indent:10.5pt" align="left"><span style="font-family:Consolas" lang="EN-US">(util:f2 ...))</span></p>
  <p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">(run)</span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:left" align="left"><span style="font-family:Consolas" lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-align:center" align="center"><span style="font-family:Consolas" lang="EN-US">---------------------------------------- </span><span style="font-family:宋体">触底了，反弹吧</span><span style="font-family:Consolas" lang="EN-US">
------------------------------------</span></p>

</div>




</body>
</html>

